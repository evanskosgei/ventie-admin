{
  "version": 3,
  "sources": ["../../pick-react-known-prop/dist/index.js", "../../es6-promise/dist/config/versionTemplate.txt", "../../es6-promise/dist/lib/es6-promise/utils.js", "../../es6-promise/dist/lib/es6-promise/asap.js", "../../es6-promise/dist/lib/es6-promise/then.js", "../../es6-promise/dist/lib/es6-promise/promise/resolve.js", "../../es6-promise/dist/lib/es6-promise/-internal.js", "../../es6-promise/dist/lib/es6-promise/enumerator.js", "../../es6-promise/dist/lib/es6-promise/promise/all.js", "../../es6-promise/dist/lib/es6-promise/promise/race.js", "../../es6-promise/dist/lib/es6-promise/promise/reject.js", "../../es6-promise/dist/lib/es6-promise/promise.js", "../../es6-promise/dist/lib/es6-promise/polyfill.js", "../../es6-promise/dist/lib/es6-promise.js", "../../react-tabulator/lib/ConfigUtils.js", "../../tabulator-tables/src/js/core/CoreFeature.js", "../../tabulator-tables/src/js/core/Module.js", "../../tabulator-tables/src/js/core/tools/Helpers.js", "../../tabulator-tables/src/js/modules/Accessor/defaults/accessors.js", "../../tabulator-tables/src/js/modules/Accessor/Accessor.js", "../../tabulator-tables/src/js/modules/Ajax/defaults/config.js", "../../tabulator-tables/src/js/modules/Ajax/defaults/urlGenerator.js", "../../tabulator-tables/src/js/modules/Ajax/defaults/loaderPromise.js", "../../tabulator-tables/src/js/modules/Ajax/defaults/contentTypeFormatters.js", "../../tabulator-tables/src/js/modules/Ajax/Ajax.js", "../../tabulator-tables/src/js/modules/Clipboard/defaults/pasteActions.js", "../../tabulator-tables/src/js/modules/Clipboard/defaults/pasteParsers.js", "../../tabulator-tables/src/js/modules/Clipboard/Clipboard.js", "../../tabulator-tables/src/js/modules/ColumnCalcs/CalcComponent.js", "../../tabulator-tables/src/js/core/cell/CellComponent.js", "../../tabulator-tables/src/js/core/cell/Cell.js", "../../tabulator-tables/src/js/core/column/ColumnComponent.js", "../../tabulator-tables/src/js/core/column/defaults/options.js", "../../tabulator-tables/src/js/core/column/Column.js", "../../tabulator-tables/src/js/core/row/RowComponent.js", "../../tabulator-tables/src/js/core/row/Row.js", "../../tabulator-tables/src/js/modules/ColumnCalcs/defaults/calculations.js", "../../tabulator-tables/src/js/modules/ColumnCalcs/ColumnCalcs.js", "../../tabulator-tables/src/js/modules/DataTree/DataTree.js", "../../tabulator-tables/src/js/modules/Download/defaults/downloaders/csv.js", "../../tabulator-tables/src/js/modules/Download/defaults/downloaders/json.js", "../../tabulator-tables/src/js/modules/Download/defaults/downloaders/pdf.js", "../../tabulator-tables/src/js/modules/Download/defaults/downloaders/xlsx.js", "../../tabulator-tables/src/js/modules/Download/defaults/downloaders/html.js", "../../tabulator-tables/src/js/modules/Download/defaults/downloaders.js", "../../tabulator-tables/src/js/modules/Download/Download.js", "../../tabulator-tables/src/js/modules/Edit/inputMask.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/input.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/textarea.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/number.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/range.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/select.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/autocomplete.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/star.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/progress.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors/tickCross.js", "../../tabulator-tables/src/js/modules/Edit/defaults/editors.js", "../../tabulator-tables/src/js/modules/Edit/Edit.js", "../../tabulator-tables/src/js/modules/Export/ExportRow.js", "../../tabulator-tables/src/js/modules/Export/ExportColumn.js", "../../tabulator-tables/src/js/modules/Export/Export.js", "../../tabulator-tables/src/js/modules/Filter/defaults/filters.js", "../../tabulator-tables/src/js/modules/Filter/Filter.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/plaintext.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/html.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/textarea.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/money.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/link.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/image.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/tickCross.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/datetime.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/datetimediff.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/lookup.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/star.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/traffic.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/progress.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/color.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/buttonTick.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/buttonCross.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/rownum.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/handle.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/responsiveCollapse.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters/rowSelection.js", "../../tabulator-tables/src/js/modules/Format/defaults/formatters.js", "../../tabulator-tables/src/js/modules/Format/Format.js", "../../tabulator-tables/src/js/modules/FrozenColumns/FrozenColumns.js", "../../tabulator-tables/src/js/modules/FrozenRows/FrozenRows.js", "../../tabulator-tables/src/js/modules/GroupRows/GroupComponent.js", "../../tabulator-tables/src/js/modules/GroupRows/Group.js", "../../tabulator-tables/src/js/modules/GroupRows/GroupRows.js", "../../tabulator-tables/src/js/modules/History/defaults/undoers.js", "../../tabulator-tables/src/js/modules/History/defaults/redoers.js", "../../tabulator-tables/src/js/modules/History/History.js", "../../tabulator-tables/src/js/modules/HtmlTableImport/HtmlTableImport.js", "../../tabulator-tables/src/js/modules/Interaction/Interaction.js", "../../tabulator-tables/src/js/modules/Keybindings/defaults/bindings.js", "../../tabulator-tables/src/js/modules/Keybindings/defaults/actions.js", "../../tabulator-tables/src/js/modules/Keybindings/Keybindings.js", "../../tabulator-tables/src/js/modules/Menu/Menu.js", "../../tabulator-tables/src/js/modules/MoveColumns/MoveColumns.js", "../../tabulator-tables/src/js/modules/MoveRows/MoveRows.js", "../../tabulator-tables/src/js/modules/Mutator/defaults/mutators.js", "../../tabulator-tables/src/js/modules/Mutator/Mutator.js", "../../tabulator-tables/src/js/modules/Page/Page.js", "../../tabulator-tables/src/js/modules/Persistence/defaults/readers.js", "../../tabulator-tables/src/js/modules/Persistence/defaults/writers.js", "../../tabulator-tables/src/js/modules/Persistence/Persistence.js", "../../tabulator-tables/src/js/modules/Print/Print.js", "../../tabulator-tables/src/js/modules/ReactiveData/ReactiveData.js", "../../tabulator-tables/src/js/modules/ResizeColumns/ResizeColumns.js", "../../tabulator-tables/src/js/modules/ResizeRows/ResizeRows.js", "../../tabulator-tables/src/js/modules/ResizeTable/ResizeTable.js", "../../tabulator-tables/src/js/modules/ResponsiveLayout/ResponsiveLayout.js", "../../tabulator-tables/src/js/modules/SelectRow/SelectRow.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/number.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/string.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/datetime.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/date.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/time.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/boolean.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/array.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/exists.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters/alphanum.js", "../../tabulator-tables/src/js/modules/Sort/defaults/sorters.js", "../../tabulator-tables/src/js/modules/Sort/Sort.js", "../../tabulator-tables/src/js/modules/Validate/defaults/validators.js", "../../tabulator-tables/src/js/modules/Validate/Validate.js", "../../tabulator-tables/src/js/core/defaults/options.js", "../../tabulator-tables/src/js/core/tools/OptionsList.js", "../../tabulator-tables/src/js/core/rendering/Renderer.js", "../../tabulator-tables/src/js/core/rendering/renderers/BasicHorizontal.js", "../../tabulator-tables/src/js/core/rendering/renderers/VirtualDomHorizontal.js", "../../tabulator-tables/src/js/core/ColumnManager.js", "../../tabulator-tables/src/js/core/rendering/renderers/BasicVertical.js", "../../tabulator-tables/src/js/core/rendering/renderers/VirtualDomVertical.js", "../../tabulator-tables/src/js/core/RowManager.js", "../../tabulator-tables/src/js/core/FooterManager.js", "../../tabulator-tables/src/js/core/tools/InteractionMonitor.js", "../../tabulator-tables/src/js/core/tools/ComponentFunctionBinder.js", "../../tabulator-tables/src/js/core/tools/DataLoader.js", "../../tabulator-tables/src/js/core/tools/ExternalEventBus.js", "../../tabulator-tables/src/js/core/tools/InternalEventBus.js", "../../tabulator-tables/src/js/core/tools/TableRegistry.js", "../../tabulator-tables/src/js/modules/Layout/defaults/modes/fitData.js", "../../tabulator-tables/src/js/modules/Layout/defaults/modes/fitDataGeneral.js", "../../tabulator-tables/src/js/modules/Layout/defaults/modes/fitDataStretch.js", "../../tabulator-tables/src/js/modules/Layout/defaults/modes/fitColumns.js", "../../tabulator-tables/src/js/modules/Layout/defaults/modes.js", "../../tabulator-tables/src/js/modules/Layout/Layout.js", "../../tabulator-tables/src/js/modules/Localize/defaults/langs.js", "../../tabulator-tables/src/js/modules/Localize/Localize.js", "../../tabulator-tables/src/js/modules/Comms/Comms.js", "../../tabulator-tables/src/js/core/tools/ModuleBinder.js", "../../tabulator-tables/src/js/core/Tabulator.js", "../../tabulator-tables/src/js/core/TabulatorFull.js", "../../tabulator-tables/src/js/core/row/PseudoRow.js", "../../react-tabulator/lib/ReactTabulator.js", "../../react-tabulator/lib/Utils.js", "../../react-tabulator/lib/React15Tabulator.js", "../../react-tabulator/lib/editors/DateEditorUtils.js", "../../react-tabulator/lib/editors/DateEditor.js", "../../react-tabulator/node_modules/react-tag-autocomplete/dist-es6/Tag.js", "../../react-tabulator/node_modules/react-tag-autocomplete/dist-es6/Input.js", "../../react-tabulator/node_modules/react-tag-autocomplete/dist-es6/Suggestions.js", "../../react-tabulator/node_modules/react-tag-autocomplete/dist-es6/ReactTags.js", "../../react-tabulator/lib/editors/MultiSelectEditor.js", "../../react-tabulator/lib/formatters/MultiValueFormatter.js", "../../react-tabulator/lib/ReactTabulatorExample.js", "../../react-tabulator/lib/index.js"],
  "sourcesContent": ["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.pickSVGProps = exports.pickHTMLProps = undefined;\n\n\tvar _pickHtmlProps = __webpack_require__(1);\n\n\tvar _pickHtmlProps2 = _interopRequireDefault(_pickHtmlProps);\n\n\tvar _pickSvgProps = __webpack_require__(5);\n\n\tvar _pickSvgProps2 = _interopRequireDefault(_pickSvgProps);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\texports.pickHTMLProps = _pickHtmlProps2.default;\n\texports.pickSVGProps = _pickSvgProps2.default;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\tvar _htmlAttributes = __webpack_require__(2);\n\n\tvar _htmlAttributes2 = _interopRequireDefault(_htmlAttributes);\n\n\tvar _pickProps = __webpack_require__(3);\n\n\tvar _pickProps2 = _interopRequireDefault(_pickProps);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tvar extra = ['about', 'datatype', 'defaultChecked', 'defaultValue', 'inlist', 'prefix', 'property', 'resource', 'typeof', 'vocab', 'autoCapitalize', 'autoCorrect', 'color', 'itemProp', 'itemScope', 'itemType', 'itemRef', 'itemID', 'security', 'unselectable', 'results', 'autoSave', 'allowtransparency', 'charSet', 'ismap', 'typemustmatch',\n\n\t// handlers:\n\t'onBlur', 'onChange', 'onClick', 'onContextMenu', 'onCopy', 'onCut', 'onDoubleClick', 'onDrag', 'onDragEnd', 'onDragEnter', 'onDragExit', 'onDragLeave', 'onDragOver', 'onDragStart', 'onDrop', 'onFocus', 'onInput', 'onKeyDown', 'onKeyPress', 'onKeyUp', 'onMouseDown', 'onMouseEnter', 'onMouseLeave', 'onMouseMove', 'onMouseOut', 'onMouseOver', 'onMouseUp', 'onPaste', 'onScroll', 'onSubmit', 'onTouchCancel', 'onTouchEnd', 'onTouchMove', 'onTouchStart', 'onWheel', 'onCompositionEnd', 'onCompositionStart', 'onCompositionUpdate', 'onInvalid', 'onPointerDown', 'onPointerMove', 'onPointerUp', 'onPointerCancel', 'onGotPointerCapture', 'onLostPointerCapture', 'onPointerEnter', 'onPointerLeave', 'onPointerOver', 'onPointerOut', 'onSelect', 'onAbort', 'onCanPlay', 'onCanPlayThrough', 'onDurationChange', 'onEmptied', 'onEncrypted', 'onEnded', 'onError', 'onLoadedData', 'onLoadedMetadata', 'onLoadStart', 'onPause', 'onPlay', 'onPlaying', 'onProgress', 'onRateChange', 'onSeeked', 'onSeeking', 'onStalled', 'onSuspend', 'onTimeUpdate', 'onVolumeChange', 'onWaiting', 'onLoad', 'onError', 'onAnimationStart', 'onAnimationEnd', 'onAnimationIteration', 'onTransitionEnd', 'onToggle'];\n\n\tvar ReactHTMLAttrs = _extends({}, _htmlAttributes2.default, extra.reduce(function (attrs, prop) {\n\t  attrs[prop] = prop;\n\t  return attrs;\n\t}, {}));\n\n\texports.default = (0, _pickProps2.default)(function (prop) {\n\t  return Boolean(ReactHTMLAttrs[prop]) || /^(data|aria)-/.test(prop);\n\t});\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t/*!\n\t * html-attributes\n\t * https://github.com/alexmingoia/html-attributes\n\t */\n\n\t'use strict';\n\n\t/**\n\t * @module html-attributes\n\t */\n\n\tmodule.exports = {\n\t  \"abbr\": \"abbr\",\n\t  \"accept\": \"accept\",\n\t  \"acceptCharset\": \"accept-charset\",\n\t  \"accessKey\": \"accesskey\",\n\t  \"action\": \"action\",\n\t  \"allowFullScreen\": \"allowfullscreen\",\n\t  \"allowTransparency\": \"allowtransparency\",\n\t  \"alt\": \"alt\",\n\t  \"async\": \"async\",\n\t  \"autoComplete\": \"autocomplete\",\n\t  \"autoFocus\": \"autofocus\",\n\t  \"autoPlay\": \"autoplay\",\n\t  \"cellPadding\": \"cellpadding\",\n\t  \"cellSpacing\": \"cellspacing\",\n\t  \"challenge\": \"challenge\",\n\t  \"charset\": \"charset\",\n\t  \"checked\": \"checked\",\n\t  \"cite\": \"cite\",\n\t  \"class\": \"class\",\n\t  \"className\": \"class\",\n\t  \"cols\": \"cols\",\n\t  \"colSpan\": \"colspan\",\n\t  \"command\": \"command\",\n\t  \"content\": \"content\",\n\t  \"contentEditable\": \"contenteditable\",\n\t  \"contextMenu\": \"contextmenu\",\n\t  \"controls\": \"controls\",\n\t  \"coords\": \"coords\",\n\t  \"crossOrigin\": \"crossorigin\",\n\t  \"data\": \"data\",\n\t  \"dateTime\": \"datetime\",\n\t  \"default\": \"default\",\n\t  \"defer\": \"defer\",\n\t  \"dir\": \"dir\",\n\t  \"disabled\": \"disabled\",\n\t  \"download\": \"download\",\n\t  \"draggable\": \"draggable\",\n\t  \"dropzone\": \"dropzone\",\n\t  \"encType\": \"enctype\",\n\t  \"for\": \"for\",\n\t  \"form\": \"form\",\n\t  \"formAction\": \"formaction\",\n\t  \"formEncType\": \"formenctype\",\n\t  \"formMethod\": \"formmethod\",\n\t  \"formNoValidate\": \"formnovalidate\",\n\t  \"formTarget\": \"formtarget\",\n\t  \"frameBorder\": \"frameBorder\",\n\t  \"headers\": \"headers\",\n\t  \"height\": \"height\",\n\t  \"hidden\": \"hidden\",\n\t  \"high\": \"high\",\n\t  \"href\": \"href\",\n\t  \"hrefLang\": \"hreflang\",\n\t  \"htmlFor\": \"for\",\n\t  \"httpEquiv\": \"http-equiv\",\n\t  \"icon\": \"icon\",\n\t  \"id\": \"id\",\n\t  \"inputMode\": \"inputmode\",\n\t  \"isMap\": \"ismap\",\n\t  \"itemId\": \"itemid\",\n\t  \"itemProp\": \"itemprop\",\n\t  \"itemRef\": \"itemref\",\n\t  \"itemScope\": \"itemscope\",\n\t  \"itemType\": \"itemtype\",\n\t  \"kind\": \"kind\",\n\t  \"label\": \"label\",\n\t  \"lang\": \"lang\",\n\t  \"list\": \"list\",\n\t  \"loop\": \"loop\",\n\t  \"manifest\": \"manifest\",\n\t  \"max\": \"max\",\n\t  \"maxLength\": \"maxlength\",\n\t  \"media\": \"media\",\n\t  \"mediaGroup\": \"mediagroup\",\n\t  \"method\": \"method\",\n\t  \"min\": \"min\",\n\t  \"minLength\": \"minlength\",\n\t  \"multiple\": \"multiple\",\n\t  \"muted\": \"muted\",\n\t  \"name\": \"name\",\n\t  \"noValidate\": \"novalidate\",\n\t  \"open\": \"open\",\n\t  \"optimum\": \"optimum\",\n\t  \"pattern\": \"pattern\",\n\t  \"ping\": \"ping\",\n\t  \"placeholder\": \"placeholder\",\n\t  \"poster\": \"poster\",\n\t  \"preload\": \"preload\",\n\t  \"radioGroup\": \"radiogroup\",\n\t  \"readOnly\": \"readonly\",\n\t  \"rel\": \"rel\",\n\t  \"required\": \"required\",\n\t  \"role\": \"role\",\n\t  \"rows\": \"rows\",\n\t  \"rowSpan\": \"rowspan\",\n\t  \"sandbox\": \"sandbox\",\n\t  \"scope\": \"scope\",\n\t  \"scoped\": \"scoped\",\n\t  \"scrolling\": \"scrolling\",\n\t  \"seamless\": \"seamless\",\n\t  \"selected\": \"selected\",\n\t  \"shape\": \"shape\",\n\t  \"size\": \"size\",\n\t  \"sizes\": \"sizes\",\n\t  \"sortable\": \"sortable\",\n\t  \"span\": \"span\",\n\t  \"spellCheck\": \"spellcheck\",\n\t  \"src\": \"src\",\n\t  \"srcDoc\": \"srcdoc\",\n\t  \"srcSet\": \"srcset\",\n\t  \"start\": \"start\",\n\t  \"step\": \"step\",\n\t  \"style\": \"style\",\n\t  \"tabIndex\": \"tabindex\",\n\t  \"target\": \"target\",\n\t  \"title\": \"title\",\n\t  \"translate\": \"translate\",\n\t  \"type\": \"type\",\n\t  \"typeMustMatch\": \"typemustmatch\",\n\t  \"useMap\": \"usemap\",\n\t  \"value\": \"value\",\n\t  \"width\": \"width\",\n\t  \"wmode\": \"wmode\",\n\t  \"wrap\": \"wrap\"\n\t};\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _lodash = __webpack_require__(4);\n\n\tvar _lodash2 = _interopRequireDefault(_lodash);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\texports.default = function (filter) {\n\t  return function (props) {\n\t    if (!(0, _lodash2.default)(props)) throw new Error('props should be a plain object');\n\t    var out = {};\n\t    for (var key in props) {\n\t      if (props.hasOwnProperty(key) && filter(key)) {\n\t        out[key] = props[key];\n\t      }\n\t    }\n\t    return out;\n\t  };\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t/**\n\t * lodash (Custom Build) <https://lodash.com/>\n\t * Build: `lodash modularize exports=\"npm\" -o ./`\n\t * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n\t * Released under MIT license <https://lodash.com/license>\n\t * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n\t * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n\t */\n\n\t/** `Object#toString` result references. */\n\tvar objectTag = '[object Object]';\n\n\t/**\n\t * Checks if `value` is a host object in IE < 9.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n\t */\n\tfunction isHostObject(value) {\n\t  // Many host objects are `Object` objects that can coerce to strings\n\t  // despite having improperly defined `toString` methods.\n\t  var result = false;\n\t  if (value != null && typeof value.toString != 'function') {\n\t    try {\n\t      result = !!(value + '');\n\t    } catch (e) {}\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a unary function that invokes `func` with its argument transformed.\n\t *\n\t * @private\n\t * @param {Function} func The function to wrap.\n\t * @param {Function} transform The argument transform.\n\t * @returns {Function} Returns the new function.\n\t */\n\tfunction overArg(func, transform) {\n\t  return function(arg) {\n\t    return func(transform(arg));\n\t  };\n\t}\n\n\t/** Used for built-in method references. */\n\tvar funcProto = Function.prototype,\n\t    objectProto = Object.prototype;\n\n\t/** Used to resolve the decompiled source of functions. */\n\tvar funcToString = funcProto.toString;\n\n\t/** Used to check objects for own properties. */\n\tvar hasOwnProperty = objectProto.hasOwnProperty;\n\n\t/** Used to infer the `Object` constructor. */\n\tvar objectCtorString = funcToString.call(Object);\n\n\t/**\n\t * Used to resolve the\n\t * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar objectToString = objectProto.toString;\n\n\t/** Built-in value references. */\n\tvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\n\t/**\n\t * Checks if `value` is object-like. A value is object-like if it's not `null`\n\t * and has a `typeof` result of \"object\".\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n\t * @example\n\t *\n\t * _.isObjectLike({});\n\t * // => true\n\t *\n\t * _.isObjectLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObjectLike(_.noop);\n\t * // => false\n\t *\n\t * _.isObjectLike(null);\n\t * // => false\n\t */\n\tfunction isObjectLike(value) {\n\t  return !!value && typeof value == 'object';\n\t}\n\n\t/**\n\t * Checks if `value` is a plain object, that is, an object created by the\n\t * `Object` constructor or one with a `[[Prototype]]` of `null`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.8.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n\t * @example\n\t *\n\t * function Foo() {\n\t *   this.a = 1;\n\t * }\n\t *\n\t * _.isPlainObject(new Foo);\n\t * // => false\n\t *\n\t * _.isPlainObject([1, 2, 3]);\n\t * // => false\n\t *\n\t * _.isPlainObject({ 'x': 0, 'y': 0 });\n\t * // => true\n\t *\n\t * _.isPlainObject(Object.create(null));\n\t * // => true\n\t */\n\tfunction isPlainObject(value) {\n\t  if (!isObjectLike(value) ||\n\t      objectToString.call(value) != objectTag || isHostObject(value)) {\n\t    return false;\n\t  }\n\t  var proto = getPrototype(value);\n\t  if (proto === null) {\n\t    return true;\n\t  }\n\t  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n\t  return (typeof Ctor == 'function' &&\n\t    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n\t}\n\n\tmodule.exports = isPlainObject;\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\n\tvar _pickProps = __webpack_require__(3);\n\n\tvar _pickProps2 = _interopRequireDefault(_pickProps);\n\n\tvar _svgAttributes = __webpack_require__(6);\n\n\tvar _svgAttributes2 = _interopRequireDefault(_svgAttributes);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\texports.default = (0, _pickProps2.default)(function (prop) {\n\t  return Boolean(_svgAttributes2.default[prop]);\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t/*!\n\t * svg-attributes\n\t * https://github.com/alexmingoia/svg-attributes\n\t */\n\n\t'use strict';\n\n\t/**\n\t * @module svg-attributes\n\t */\n\n\tmodule.exports = {\n\t  /**\n\t   * Regular attributes\n\t   */\n\t  \"accentHeight\": \"accent-height\",\n\t  \"accumulate\": \"accumulate\",\n\t  \"additive\": \"additive\",\n\t  \"alphabetic\": \"alphabetic\",\n\t  \"amplitude\": \"amplitude\",\n\t  \"arabicForm\": \"arabic-form\",\n\t  \"ascent\": \"ascent\",\n\t  \"attributeName\": \"attributeName\",\n\t  \"attributeType\": \"attributeType\",\n\t  \"azimuth\": \"azimuth\",\n\t  \"baseFrequency\": \"baseFrequency\",\n\t  \"baseProfile\": \"baseProfile\",\n\t  \"bbox\": \"bbox\",\n\t  \"begin\": \"begin\",\n\t  \"bias\": \"bias\",\n\t  \"by\": \"by\",\n\t  \"calcMode\": \"calcMode\",\n\t  \"capHeight\": \"cap-height\",\n\t  \"class\": \"class\",\n\t  \"clipPathUnits\": \"clipPathUnits\",\n\t  \"contentScriptType\": \"contentScriptType\",\n\t  \"contentStyleType\": \"contentStyleType\",\n\t  \"cx\": \"cx\",\n\t  \"cy\": \"cy\",\n\t  \"d\": \"d\",\n\t  \"descent\": \"descent\",\n\t  \"diffuseConstant\": \"diffuseConstant\",\n\t  \"divisor\": \"divisor\",\n\t  \"dur\": \"dur\",\n\t  \"dx\": \"dx\",\n\t  \"dy\": \"dy\",\n\t  \"edgeMode\": \"edgeMode\",\n\t  \"elevation\": \"elevation\",\n\t  \"end\": \"end\",\n\t  \"exponent\": \"exponent\",\n\t  \"externalResourcesRequired\": \"externalResourcesRequired\",\n\t  \"fill\": \"fill\",\n\t  \"filterRes\": \"filterRes\",\n\t  \"filterUnits\": \"filterUnits\",\n\t  \"fontFamily\": \"font-family\",\n\t  \"fontSize\": \"font-size\",\n\t  \"fontStretch\": \"font-stretch\",\n\t  \"fontStyle\": \"font-style\",\n\t  \"format\": \"format\",\n\t  \"from\": \"from\",\n\t  \"fx\": \"fx\",\n\t  \"fy\": \"fy\",\n\t  \"g1\": \"g1\",\n\t  \"g2\": \"g2\",\n\t  \"glyphame\": \"glyph-name\",\n\t  \"glyphRef\": \"glyphRef\",\n\t  \"gradientTransform\": \"gradientTransform\",\n\t  \"gradientUnits\": \"gradientUnits\",\n\t  \"hanging\": \"hanging\",\n\t  \"height\": \"height\",\n\t  \"horizAdvX\": \"horiz-adv-x\",\n\t  \"horizOriginX\": \"horiz-origin-x\",\n\t  \"horizOriginY\": \"horiz-origin-y\",\n\t  \"id\": \"id\",\n\t  \"ideographic\": \"ideographic\",\n\t  \"in\": \"in\",\n\t  \"in2\": \"in2\",\n\t  \"intercept\": \"intercept\",\n\t  \"k\": \"k\",\n\t  \"k1\": \"k1\",\n\t  \"k2\": \"k2\",\n\t  \"k3\": \"k3\",\n\t  \"k4\": \"k4\",\n\t  \"kernelMatrix\": \"kernelMatrix\",\n\t  \"kernelUnitLength\": \"kernelUnitLength\",\n\t  \"keyPoints\": \"keyPoints\",\n\t  \"keySplines\": \"keySplines\",\n\t  \"keyTimes\": \"keyTimes\",\n\t  \"lang\": \"lang\",\n\t  \"lengthAdjust\": \"lengthAdjust\",\n\t  \"limitingConeAngle\": \"limitingConeAngle\",\n\t  \"local\": \"local\",\n\t  \"markerHeight\": \"markerHeight\",\n\t  \"markerUnits\": \"markerUnits\",\n\t  \"markerWidth\": \"markerWidth\",\n\t  \"maskContentUnits\": \"maskContentUnits\",\n\t  \"maskUnits\": \"maskUnits\",\n\t  \"mathematical\": \"mathematical\",\n\t  \"max\": \"max\",\n\t  \"media\": \"media\",\n\t  \"method\": \"method\",\n\t  \"min\": \"min\",\n\t  \"mode\": \"mode\",\n\t  \"name\": \"name\",\n\t  \"numOctaves\": \"numOctaves\",\n\t  \"offset\": \"offset\",\n\t  \"onAbort\": \"onabort\",\n\t  \"onActivate\": \"onactivate\",\n\t  \"onBegin\": \"onbegin\",\n\t  \"onClick\": \"onclick\",\n\t  \"onEnd\": \"onend\",\n\t  \"onError\": \"onerror\",\n\t  \"onFocusIn\": \"onfocusin\",\n\t  \"onFocusOut\": \"onfocusout\",\n\t  \"onLoad\": \"onload\",\n\t  \"onMouseDown\": \"onmousedown\",\n\t  \"onMouseMove\": \"onmousemove\",\n\t  \"onMouseOut\": \"onmouseout\",\n\t  \"onMouseOver\": \"onmouseover\",\n\t  \"onMouseUp\": \"onmouseup\",\n\t  \"onRepeat\": \"onrepeat\",\n\t  \"onResize\": \"onresize\",\n\t  \"onScroll\": \"onscroll\",\n\t  \"onUnload\": \"onunload\",\n\t  \"onZoom\": \"onzoom\",\n\t  \"operator\": \"operator\",\n\t  \"order\": \"order\",\n\t  \"orient\": \"orient\",\n\t  \"orientation\": \"orientation\",\n\t  \"origin\": \"origin\",\n\t  \"overlinePosition\": \"overline-position\",\n\t  \"overlineThickness\": \"overline-thickness\",\n\t  \"panose1\": \"panose-1\",\n\t  \"path\": \"path\",\n\t  \"pathLength\": \"pathLength\",\n\t  \"patternContentUnits\": \"patternContentUnits\",\n\t  \"patternTransform\": \"patternTransform\",\n\t  \"patternUnits\": \"patternUnits\",\n\t  \"points\": \"points\",\n\t  \"pointsAtX\": \"pointsAtX\",\n\t  \"pointsAtY\": \"pointsAtY\",\n\t  \"pointsAtZ\": \"pointsAtZ\",\n\t  \"preserveAlpha\": \"preserveAlpha\",\n\t  \"preserveAspectRatio\": \"preserveAspectRatio\",\n\t  \"primitiveUnits\": \"primitiveUnits\",\n\t  \"r\": \"r\",\n\t  \"radius\": \"radius\",\n\t  \"refX\": \"refX\",\n\t  \"refY\": \"refY\",\n\t  \"renderingIntent\": \"rendering-intent\",\n\t  \"repeatCount\": \"repeatCount\",\n\t  \"repeatDur\": \"repeatDur\",\n\t  \"requiredExtensions\": \"requiredExtensions\",\n\t  \"requiredFeatures\": \"requiredFeatures\",\n\t  \"restart\": \"restart\",\n\t  \"result\": \"result\",\n\t  \"rotate\": \"rotate\",\n\t  \"rx\": \"rx\",\n\t  \"ry\": \"ry\",\n\t  \"scale\": \"scale\",\n\t  \"seed\": \"seed\",\n\t  \"slope\": \"slope\",\n\t  \"spacing\": \"spacing\",\n\t  \"specularConstant\": \"specularConstant\",\n\t  \"specularExponent\": \"specularExponent\",\n\t  \"spreadMethod\": \"spreadMethod\",\n\t  \"startOffset\": \"startOffset\",\n\t  \"stdDeviation\": \"stdDeviation\",\n\t  \"stemh\": \"stemh\",\n\t  \"stemv\": \"stemv\",\n\t  \"stitchTiles\": \"stitchTiles\",\n\t  \"strikethroughPosition\": \"strikethrough-position\",\n\t  \"strikethroughThickness\": \"strikethrough-thickness\",\n\t  \"string\": \"string\",\n\t  \"style\": \"style\",\n\t  \"surfaceScale\": \"surfaceScale\",\n\t  \"systemLanguage\": \"systemLanguage\",\n\t  \"tableValues\": \"tableValues\",\n\t  \"target\": \"target\",\n\t  \"targetX\": \"targetX\",\n\t  \"targetY\": \"targetY\",\n\t  \"textLength\": \"textLength\",\n\t  \"title\": \"title\",\n\t  \"to\": \"to\",\n\t  \"transform\": \"transform\",\n\t  \"type\": \"type\",\n\t  \"u1\": \"u1\",\n\t  \"u2\": \"u2\",\n\t  \"underlinePosition\": \"underline-position\",\n\t  \"underlineThickness\": \"underline-thickness\",\n\t  \"unicode\": \"unicode\",\n\t  \"unicodeRange\": \"unicode-range\",\n\t  \"unitsPerEm\": \"units-per-em\",\n\t  \"vAlphabetic\": \"v-alphabetic\",\n\t  \"vHanging\": \"v-hanging\",\n\t  \"vIdeographic\": \"v-ideographic\",\n\t  \"vMathematical\": \"v-mathematical\",\n\t  \"values\": \"values\",\n\t  \"version\": \"version\",\n\t  \"vertAdvY\": \"vert-adv-y\",\n\t  \"vertOriginX\": \"vert-origin-x\",\n\t  \"vertOriginY\": \"vert-origin-y\",\n\t  \"viewBox\": \"viewBox\",\n\t  \"viewTarget\": \"viewTarget\",\n\t  \"width\": \"width\",\n\t  \"widths\": \"widths\",\n\t  \"x\": \"x\",\n\t  \"xHeight\": \"x-height\",\n\t  \"x1\": \"x1\",\n\t  \"x2\": \"x2\",\n\t  \"xChannelSelector\": \"xChannelSelector\",\n\t  \"xlink\": \"xlink\",\n\t  \"xml\": \"xml\",\n\t  \"y\": \"y\",\n\t  \"y1\": \"y1\",\n\t  \"y2\": \"y2\",\n\t  \"yChannelSelector\": \"yChannelSelector\",\n\t  \"z\": \"z\",\n\t  \"zoomAndPan\": \"zoomAndPan\",\n\t  /**\n\t   * Presentation attributes\n\t   */\n\t  \"alignmentBaseline\": \"alignment-baseline\",\n\t  \"baselineShift\": \"baseline-shift\",\n\t  \"clipPath\": \"clip-path\",\n\t  \"clipRule\": \"clip-rule\",\n\t  \"clip\": \"clip\",\n\t  \"colorInterpolationFilters\": \"color-interpolation-filters\",\n\t  \"colorInterpolation\": \"color-interpolation\",\n\t  \"colorProfile\": \"color-profile\",\n\t  \"colorRendering\": \"color-rendering\",\n\t  \"color\": \"color\",\n\t  \"cursor\": \"cursor\",\n\t  \"direction\": \"direction\",\n\t  \"display\": \"display\",\n\t  \"dominantBaseline\": \"dominant-baseline\",\n\t  \"enableBackground\": \"enable-background\",\n\t  \"fillOpacity\": \"fill-opacity\",\n\t  \"fillRule\": \"fill-rule\",\n\t  \"filter\": \"filter\",\n\t  \"floodColor\": \"flood-color\",\n\t  \"floodOpacity\": \"flood-opacity\",\n\t  \"fontSizeAdjust\": \"font-size-adjust\",\n\t  \"fontVariant\": \"font-variant\",\n\t  \"fontWeight\": \"font-weight\",\n\t  \"glyphOrientationHorizontal\": \"glyph-orientation-horizontal\",\n\t  \"glyphOrientationVertical\": \"glyph-orientation-vertical\",\n\t  \"imageRendering\": \"image-rendering\",\n\t  \"kerning\": \"kerning\",\n\t  \"letterSpacing\": \"letter-spacing\",\n\t  \"lightingColor\": \"lighting-color\",\n\t  \"markerEnd\": \"marker-end\",\n\t  \"markerMid\": \"marker-mid\",\n\t  \"markerStart\": \"marker-start\",\n\t  \"mask\": \"mask\",\n\t  \"opacity\": \"opacity\",\n\t  \"overflow\": \"overflow\",\n\t  \"pointerEvents\": \"pointer-events\",\n\t  \"shapeRendering\": \"shape-rendering\",\n\t  \"stopColor\": \"stop-color\",\n\t  \"stopOpacity\": \"stop-opacity\",\n\t  \"strokeDasharray\": \"stroke-dasharray\",\n\t  \"strokeDashoffset\": \"stroke-dashoffset\",\n\t  \"strokeLinecap\": \"stroke-linecap\",\n\t  \"strokeLinejoin\": \"stroke-linejoin\",\n\t  \"strokeMiterlimit\": \"stroke-miterlimit\",\n\t  \"strokeOpacity\": \"stroke-opacity\",\n\t  \"strokeWidth\": \"stroke-width\",\n\t  \"stroke\": \"stroke\",\n\t  \"textAnchor\": \"text-anchor\",\n\t  \"textDecoration\": \"text-decoration\",\n\t  \"textRendering\": \"text-rendering\",\n\t  \"unicodeBidi\": \"unicode-bidi\",\n\t  \"visibility\": \"visibility\",\n\t  \"wordSpacing\": \"word-spacing\",\n\t  \"writingMode\": \"writing-mode\"\n\t};\n\n\n/***/ }\n/******/ ]);", "/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n", "export function objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nexport function isFunction(x) {\n  return typeof x === 'function';\n}\n\nexport function isMaybeThenable(x) {\n  return x !== null && typeof x === 'object';\n}\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nexport var isArray = _isArray;", "var len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nexport var asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nexport function setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nexport function setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}", "import { invokeCallback, subscribe, FULFILLED, REJECTED, noop, makePromise, PROMISE_ID } from './-internal';\n\nimport { asap } from './asap';\n\nexport default function then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}", "import { noop, resolve as _resolve } from '../-internal';\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nexport default function resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}", "import { objectOrFunction, isFunction } from './utils';\n\nimport { asap } from './asap';\n\nimport originalThen from './then';\nimport originalResolve from './promise/resolve';\n\nexport var PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then) {\n  if (maybeThenable.constructor === promise.constructor && then === originalThen && maybeThenable.constructor.resolve === originalResolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then)) {\n      handleForeignThenable(promise, maybeThenable, then);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then = void 0;\n    try {\n      then = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nexport { nextId, makePromise, noop, resolve, reject, fulfill, subscribe, publish, publishRejection, initializePromise, invokeCallback, FULFILLED, REJECTED, PENDING, handleMaybeThenable };", "function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { isArray, isMaybeThenable } from './utils';\nimport { noop, reject, fulfill, subscribe, FULFILLED, REJECTED, PENDING, handleMaybeThenable } from './-internal';\n\nimport then from './then';\nimport Promise from './promise';\nimport originalResolve from './promise/resolve';\nimport originalThen from './then';\nimport { makePromise, PROMISE_ID } from './-internal';\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve = c.resolve;\n\n\n    if (resolve === originalResolve) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === originalThen && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve) {\n          return resolve(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\nexport default Enumerator;\n;", "import Enumerator from '../enumerator';\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nexport default function all(entries) {\n  return new Enumerator(this, entries).promise;\n}", "import { isArray } from \"../utils\";\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nexport default function race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}", "import { noop, reject as _reject } from '../-internal';\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nexport default function reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}", "function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { isFunction } from './utils';\nimport { noop, nextId, PROMISE_ID, initializePromise } from './-internal';\nimport { asap, setAsap, setScheduler } from './asap';\n\nimport all from './promise/all';\nimport race from './promise/race';\nimport Resolve from './promise/resolve';\nimport Reject from './promise/reject';\nimport then from './then';\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise.prototype.then = then;\nexport default Promise;\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = Resolve;\nPromise.reject = Reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;", "/*global self*/\nimport Promise from './promise';\n\nexport default function polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise;\n}", "import Promise from './es6-promise/promise';\nimport polyfill from './es6-promise/polyfill';\n\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\nexport default Promise;", "\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nexports.propsToOptions = void 0;\nvar Es6Promise = require(\"es6-promise\"); // without this, 'yarn build' will complain about Promise.\nvar react_dom_1 = require(\"react-dom\");\n// .prettierignore    (to keep relevant props together)\nvar NOOPS = function () { };\nfunction syncRender(comp, el) {\n    return new Es6Promise.Promise(function (resolve, reject) {\n        (0, react_dom_1.render)(comp, el, function () {\n            resolve(el);\n        });\n    });\n}\n// get callbacks from props (default: NOOP) to set them to Tabulator options later.\nvar propsToOptions = function (props) { return __awaiter(void 0, void 0, void 0, function () {\n    var output, defaultOptions, _i, defaultOptions_1, opt, callbackNames, _a, callbackNames_1, callbackName, el;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                output = {};\n                defaultOptions = ['height', 'layout', 'layoutColumnsOnNewData', 'columnMinWidth', 'columnVertAlign',\n                    'resizableColumns', 'resizableRows', 'autoResize', 'tooltips', 'tooltipsHeader', 'tooltipGenerationMode',\n                    'initialSort', 'initialFilter', 'initialHeaderFilter', 'footerElement', 'index', 'keybindings', 'clipboard', 'clipboardCopyStyled',\n                    'clipboardCopySelector', 'clipboardCopyFormatter', 'clipboardCopyHeader', 'clipboardPasteParser',\n                    'clipboardPasteAction', 'rowFormatter', 'placeholder', 'selectable'];\n                for (_i = 0, defaultOptions_1 = defaultOptions; _i < defaultOptions_1.length; _i++) {\n                    opt = defaultOptions_1[_i];\n                    if (typeof props[opt] !== 'undefined') {\n                        output[opt] = props[opt];\n                    }\n                }\n                callbackNames = ['tableBuilt', 'rowClick', 'rowDblClick', 'rowContext', 'rowTap', 'rowDblTap', 'rowTapHold',\n                    'rowAdded', 'rowDeleted', 'rowMoved', 'rowUpdated', 'rowSelectionChanged', 'rowSelected', 'rowDeselected', 'rowResized',\n                    'cellClick', 'cellDblClick', 'cellContext', 'cellTap', 'cellDblTap', 'cellTapHold', 'cellEditing', 'cellEditCancelled',\n                    'columnMoved', 'columnResized', 'columnTitleChanged', 'columnVisibilityChanged',\n                    'htmlImporting', 'htmlImported', 'dataLoading', 'dataLoaded',\n                    'ajaxRequesting', 'ajaxResponse', 'dataFiltering', 'dataFiltered', 'dataSorting', 'dataSorted',\n                    'renderStarted', 'renderComplete', 'pageLoaded', 'localized', 'dataGrouping', 'dataGrouped',\n                    'groupVisibilityChanged', 'groupClick', 'groupDblClick', 'groupContext', 'groupTap', 'groupDblTap', 'groupTapHold',\n                    'movableRowsSendingStart', 'movableRowsSent', 'movableRowsSentFailed', 'movableRowsSendingStop', 'movableRowsReceivingStart', 'movableRowsReceived', 'movableRowsReceivedFailed', 'movableRowsReceivingStop',\n                    'validationFailed', 'clipboardCopied', 'clipboardPasted', 'clipboardPasteError',\n                    'downloadReady', 'downloadComplete'];\n                for (_a = 0, callbackNames_1 = callbackNames; _a < callbackNames_1.length; _a++) {\n                    callbackName = callbackNames_1[_a];\n                    if (typeof props[callbackName] !== 'undefined') {\n                        output[callbackName] = props[callbackName] || NOOPS;\n                    }\n                }\n                if (!(typeof props['footerElement'] === 'object')) return [3 /*break*/, 2];\n                return [4 /*yield*/, syncRender(props['footerElement'], document.createElement('div'))];\n            case 1:\n                el = _b.sent();\n                output['footerElement'] = el.innerHTML;\n                _b.label = 2;\n            case 2: return [2 /*return*/, output];\n        }\n    });\n}); };\nexports.propsToOptions = propsToOptions;\n", "export default class CoreFeature{\r\n\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t/////////////// DataLoad /////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\treloadData(data, silent){\r\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent);\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t///////////// Localization ///////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tlangText(){\r\n\t\treturn this.table.modules.localize.getText(...arguments);\r\n\t}\r\n\r\n\tlangBind(){\r\n\t\treturn this.table.modules.localize.bind(...arguments);\r\n\t}\r\n\r\n\tlangLocale(){\r\n\t\treturn this.table.modules.localize.getLocale(...arguments);\r\n\t}\r\n\r\n\r\n\t//////////////////////////////////////////\r\n\t////////// Inter Table Comms /////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tcommsConnections(){\r\n\t\treturn this.table.modules.comms.getConnections(...arguments);\r\n\t}\r\n\r\n\tcommsSend(){\r\n\t\treturn this.table.modules.comms.send(...arguments);\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t//////////////// Layout  /////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tlayoutMode(){\r\n\t\treturn this.table.modules.layout.getMode();\r\n\t}\r\n\r\n\tlayoutRefresh(){\r\n\t\treturn this.table.modules.layout.layout();\r\n\t}\r\n\r\n\r\n\t//////////////////////////////////////////\r\n\t/////////////// Event Bus ////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tsubscribe(){\r\n\t\treturn this.table.eventBus.subscribe(...arguments);\r\n\t}\r\n\r\n\tunsubscribe(){\r\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\r\n\t}\r\n\r\n\tsubscribed(key){\r\n\t\treturn this.table.eventBus.subscribed(key);\r\n\t}\r\n\r\n\tsubscriptionChange(){\r\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\r\n\t}\r\n\r\n\tdispatch(){\r\n\t\treturn this.table.eventBus.dispatch(...arguments);\r\n\t}\r\n\r\n\tchain(){\r\n\t\treturn this.table.eventBus.chain(...arguments);\r\n\t}\r\n\r\n\tconfirm(){\r\n\t\treturn this.table.eventBus.confirm(...arguments);\r\n\t}\r\n\r\n\tdispatchExternal(){\r\n\t\treturn this.table.externalEvents.dispatch(...arguments);\r\n\t}\r\n\r\n\tsubscribedExternal(key){\r\n\t\treturn this.table.externalEvents.subscribed(key);\r\n\t}\r\n\r\n\tsubscriptionChangeExternal(){\r\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\r\n\t}\r\n\r\n\t//////////////////////////////////////////\r\n\t//////////////// Options /////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\toptions(key){\r\n\t\treturn this.table.options[key];\r\n\t}\r\n\r\n\tsetOption(key, value){\r\n\t\tif(typeof value !== \"undefined\"){\r\n\t\t\tthis.table.options[key] = value;\r\n\t\t}\r\n\r\n\t\treturn this.table.options[key];\r\n\t}\r\n\r\n\r\n\t//////////////////////////////////////////\r\n\t//////////////// Modules /////////////////\r\n\t//////////////////////////////////////////\r\n\r\n\tmodule(key){\r\n\t\treturn this.table.module(key);\r\n\t}\r\n}", "import CoreFeature from './CoreFeature.js';\r\n\r\nclass Module extends CoreFeature{\r\n\r\n\tconstructor(table, name){\r\n\t\tsuper(table);\r\n\r\n\t\tthis._handler = null;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\t// setup module when table is initialized, to be overriden in module\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t////// Options Registration ///////\r\n\t///////////////////////////////////\r\n\r\n\tregisterTableOption(key, value){\r\n\t\tthis.table.optionsList.register(key, value);\r\n\t}\r\n\r\n\tregisterColumnOption(key, value){\r\n\t\tthis.table.columnManager.optionsList.register(key, value);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t/// Public Function Registation ///\r\n\t///////////////////////////////////\r\n\r\n\tregisterTableFunction(name, func){\r\n\t\tif(typeof this.table[name] === \"undefined\"){\r\n\t\t\tthis.table[name] = func;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name)\r\n\t\t}\r\n\t}\r\n\r\n\tregisterComponentFunction(component, func, handler){\r\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t////////// Data Pipeline //////////\r\n\t///////////////////////////////////\r\n\r\n\tregisterDataHandler(handler, priority){\r\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority)\r\n\t\tthis._handler = handler;\r\n\t}\r\n\r\n\tregisterDisplayHandler(handler, priority){\r\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority)\r\n\t\tthis._handler = handler;\r\n\t}\r\n\r\n\trefreshData(renderInPosition, handler){\r\n\t\tif(!handler){\r\n\t\t\thandler = this._handler;\r\n\t\t}\r\n\r\n\t\tif(handler){\r\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Module;", "export default class Helpers{\r\n\r\n\tstatic elVisible(el){\r\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\r\n\t}\r\n\r\n\tstatic elOffset(el){\r\n\t\tvar box = el.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\r\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\r\n\t\t};\r\n\t}\r\n\r\n\tstatic deepClone(obj, clone, list = []){\r\n\t\tvar objectProto = {}.__proto__,\r\n\t\tarrayProto = [].__proto__;\r\n\r\n\t\tif (!clone){\r\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\r\n\t\t}\r\n\r\n\t\tfor(var i in obj) {\r\n\t\t\tlet subject = obj[i],\r\n\t\t\tmatch, copy;\r\n\r\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\r\n\t\t\t\tmatch = list.findIndex((item) => {\r\n\t\t\t\t\treturn item.subject === subject;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(match > -1){\r\n\t\t\t\t\tclone[i] = list[match].copy;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\r\n\r\n\t\t\t\t\tlist.unshift({subject, copy});\r\n\r\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn clone;\r\n\t}\r\n}", "export default {}", "import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nimport defautlAccessors from './defaults/accessors.js';\r\n\r\nclass Accessor extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"] //list of accessor types\r\n\r\n\t\tthis.registerColumnOption(\"accessor\");\r\n\t\tthis.registerColumnOption(\"accessorParams\");\r\n\t\tthis.registerColumnOption(\"accessorData\");\r\n\t\tthis.registerColumnOption(\"accessorDataParams\");\r\n\t\tthis.registerColumnOption(\"accessorDownload\");\r\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\r\n\t\tthis.registerColumnOption(\"accessorClipboard\");\r\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\r\n\t\tthis.registerColumnOption(\"accessorPrint\");\r\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\r\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\r\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\r\n\t}\r\n\r\n\t//initialize column accessor\r\n\tinitializeColumn(column){\r\n\t\tvar match = false,\r\n\t\tconfig = {};\r\n\r\n\t\tthis.allowedTypes.forEach((type) => {\r\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\t\taccessor;\r\n\r\n\t\t\tif(column.definition[key]){\r\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\r\n\r\n\t\t\t\tif(accessor){\r\n\t\t\t\t\tmatch = true;\r\n\r\n\t\t\t\t\tconfig[key] = {\r\n\t\t\t\t\t\taccessor:accessor,\r\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tcolumn.modules.accessor = config;\r\n\t\t}\r\n\t}\r\n\r\n\tlookupAccessor(value){\r\n\t\tvar accessor = false;\r\n\r\n\t\t//set column accessor\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Accessor.accessors[value]){\r\n\t\t\t\taccessor = Accessor.accessors[value]\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\taccessor = value;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn accessor;\r\n\t}\r\n\r\n\t//apply accessor to row\r\n\ttransformRow(row, type){\r\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\trowComponent = row.getComponent();\r\n\r\n\t\t//clone data object with deep copy to isolate internal data from returned result\r\n\t\tvar data = Helpers.deepClone(row.data || {});\r\n\r\n\t\tthis.table.columnManager.traverse(function(column){\r\n\t\t\tvar value, accessor, params, colCompnent;\r\n\r\n\t\t\tif(column.modules.accessor){\r\n\r\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\r\n\r\n\t\t\t\tif(accessor){\r\n\t\t\t\t\tvalue = column.getFieldValue(data);\r\n\r\n\t\t\t\t\tif(value != \"undefined\"){\r\n\t\t\t\t\t\tcolCompnent = column.getComponent();\r\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colCompnent, rowComponent) : accessor.params;\r\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colCompnent, rowComponent));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\n//load defaults\r\nAccessor.moduleName = \"accessor\";\r\nAccessor.accessors = defautlAccessors;\r\n\r\nexport default Accessor;", "export default {\r\n\tmethod: \"GET\",\r\n};", "function generateParamsList(data, prefix){\r\n\tvar output = [];\r\n\r\n\tprefix = prefix || \"\";\r\n\r\n\tif(Array.isArray(data)){\r\n\t\tdata.forEach((item, i) => {\r\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\r\n\t\t});\r\n\t}else if (typeof data === \"object\"){\r\n\t\tfor (var key in data){\r\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\r\n\t\t}\r\n\t}else{\r\n\t\toutput.push({key:prefix, value:data});\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\nfunction serializeParams(params){\r\n\tvar output = generateParamsList(params),\r\n\tencoded = [];\r\n\r\n\toutput.forEach(function(item){\r\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\r\n\t});\r\n\r\n\treturn encoded.join(\"&\");\r\n}\r\n\r\nexport default function(url, config, params){\r\n\tif(url){\r\n\t\tif(params && Object.keys(params).length){\r\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\r\n\t\t\t\tconfig.method = \"get\";\r\n\r\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn url;\r\n};", "export default function(url, config, params){\r\n\tvar contentType;\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t\t//set url\r\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\r\n\r\n\t\t//set body content if not GET request\r\n\t\tif(config.method.toUpperCase() != \"GET\"){\r\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\r\n\t\t\tif(contentType){\r\n\r\n\t\t\t\tfor(var key in contentType.headers){\r\n\t\t\t\t\tif(!config.headers){\r\n\t\t\t\t\t\tconfig.headers = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\r\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(url){\r\n\t\t\t//configure headers\r\n\t\t\tif(typeof config.headers === \"undefined\"){\r\n\t\t\t\tconfig.headers = {};\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\r\n\t\t\t\tconfig.headers.Accept = \"application/json\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\r\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof config.mode === \"undefined\"){\r\n\t\t\t\tconfig.mode = \"cors\";\r\n\t\t\t}\r\n\r\n\t\t\tif(config.mode == \"cors\"){\r\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\r\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\r\n\t\t\t\t}\r\n        \r\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\r\n\t\t\t\t\tconfig.credentials = 'same-origin';\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\r\n\t\t\t\t\tconfig.credentials = 'include';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//send request\r\n\t\t\tfetch(url, config)\r\n\t\t\t.then((response)=>{\r\n\t\t\t\tif(response.ok) {\r\n\t\t\t\t\tresponse.json()\r\n\t\t\t\t\t.then((data)=>{\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t}).catch((error)=>{\r\n\t\t\t\t\t\treject(error);\r\n\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\r\n\t\t\t\t\treject(response);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error)=>{\r\n\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\r\n\t\t\tresolve([]);\r\n\t\t}\r\n\t});\r\n};", "function generateParamsList(data, prefix){\r\n\tvar output = [];\r\n\r\n\tprefix = prefix || \"\";\r\n\r\n\tif(Array.isArray(data)){\r\n\t\tdata.forEach((item, i) => {\r\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\r\n\t\t});\r\n\t}else if (typeof data === \"object\"){\r\n\t\tfor (var key in data){\r\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\r\n\t\t}\r\n\t}else{\r\n\t\toutput.push({key:prefix, value:data});\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\nexport default {\r\n\t\"json\":{\r\n\t\theaders:{\r\n\t\t\t'Content-Type': 'application/json',\r\n\t\t},\r\n\t\tbody:function(url, config, params){\r\n\t\t\treturn JSON.stringify(params);\r\n\t\t},\r\n\t},\r\n\t\"form\":{\r\n\t\theaders:{\r\n\t\t},\r\n\t\tbody:function(url, config, params){\r\n\r\n\t\t\tvar output = generateParamsList(params),\r\n\t\t\tform = new FormData();\r\n\r\n\t\t\toutput.forEach(function(item){\r\n\t\t\t\tform.append(item.key, item.value);\r\n\t\t\t});\r\n\r\n\t\t\treturn form;\r\n\t\t},\r\n\t},\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultConfig from './defaults/config.js';\r\nimport defaultURLGenerator from './defaults/urlGenerator.js';\r\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\r\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\r\n\r\nclass Ajax extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.config = false; //hold config object for ajax request\r\n\t\tthis.url = \"\"; //request URL\r\n\t\tthis.urlGenerator = false;\r\n\t\tthis.params = false; //request parameters\r\n\r\n\t\tthis.loaderPromise = false;\r\n\r\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\r\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\r\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\r\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\r\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\r\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\r\n\r\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\r\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\r\n\r\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\r\n\t}\r\n\r\n\t//initialize setup options\r\n\tinitialize(){\r\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\r\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\r\n\r\n\t\tif(this.table.options.ajaxParams){\r\n\t\t\tthis.setParams(this.table.options.ajaxParams);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxConfig){\r\n\t\t\tthis.setConfig(this.table.options.ajaxConfig);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.ajaxURL){\r\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\r\n\t\t}\r\n\r\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\r\n\r\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\r\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\r\n\t}\r\n\r\n\r\n\trequestDataCheck(data, params, config, silent){\r\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\r\n\t}\r\n\r\n\trequestData(data, params, config, silent, previousData){\r\n\t\tif(this.requestDataCheck(data)){\r\n\t\t\tif(data){\r\n\t\t\t\tthis.setUrl(data);\r\n\t\t\t}\r\n\r\n\t\t\tif(params){\r\n\t\t\t\tthis.setParams(params, true);\r\n\t\t\t}\r\n\r\n\t\t\tif(config){\r\n\t\t\t\tthis.setConfig(config);\r\n\t\t\t}\r\n\r\n\t\t\treturn this.sendRequest();\r\n\t\t}else{\r\n\t\t\treturn previousData;\r\n\t\t}\r\n\t}\r\n\r\n\t//set ajax params\r\n\tsetParams(params, update){\r\n\t\tif(update){\r\n\t\t\tthis.params = this.params || {};\r\n\r\n\t\t\tfor(let key in params){\r\n\t\t\t\tthis.params[key] = params[key];\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.params = params;\r\n\t\t}\r\n\t}\r\n\r\n\tgetParams(){\r\n\t\treturn this.params || {};\r\n\t}\r\n\r\n\t//load config object\r\n\tsetConfig(config){\r\n\t\tthis._loadDefaultConfig();\r\n\r\n\t\tif(typeof config == \"string\"){\r\n\t\t\tthis.config.method = config;\r\n\t\t}else{\r\n\t\t\tfor(let key in config){\r\n\t\t\t\tthis.config[key] = config[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//create config object from default\r\n\t_loadDefaultConfig(force){\r\n\t\tif(!this.config || force){\r\n\r\n\t\t\tthis.config = {};\r\n\r\n\t\t\t//load base config from defaults\r\n\t\t\tfor(let key in Ajax.defaultConfig){\r\n\t\t\t\tthis.config[key] = Ajax.defaultConfig[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//set request url\r\n\tsetUrl(url){\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\t//get request url\r\n\tgetUrl(){\r\n\t\treturn this.url;\r\n\t}\r\n\r\n\t//send ajax request\r\n\tsendRequest(silent){\r\n\t\tvar url = this.url,\r\n\t\tesc, query;\r\n\r\n\t\tthis._loadDefaultConfig();\r\n\r\n\t\tif(this.table.options.ajaxRequesting.call(this.table, this.url, this.params) !== false){\r\n\t\t\treturn this.loaderPromise(url, this.config, this.params)\r\n\t\t\t.then((data)=>{\r\n\t\t\t\tif(this.table.options.ajaxResponse){\r\n\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, this.url, this.params, data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn data;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nAjax.moduleName = \"ajax\";\r\n\r\n//load defaults\r\nAjax.defaultConfig = defaultConfig;\r\nAjax.defaultURLGenerator = defaultURLGenerator;\r\nAjax.defaultLoaderPromise = defaultLoaderPromise;\r\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\r\n\r\nexport default Ajax;", "export default {\r\n\treplace:function(rows){\r\n\t\treturn this.table.setData(rows);\r\n\t},\r\n\tupdate:function(rows){\r\n\t\treturn this.table.updateOrAddData(rows);\r\n\t},\r\n\tinsert:function(rows){\r\n\t\treturn this.table.addData(rows);\r\n\t},\r\n};", "export default {\r\n\ttable:function(clipboard){\r\n\t\tvar data = [],\r\n\t\tsuccess = false,\r\n\t\theaderFindSuccess = true,\r\n\t\tcolumns = this.table.columnManager.columns,\r\n\t\tcolumnMap = [],\r\n\t\trows = [];\r\n\r\n\t\t//get data from clipboard into array of columns and rows.\r\n\t\tclipboard = clipboard.split(\"\\n\");\r\n\r\n\t\tclipboard.forEach(function(row){\r\n\t\t\tdata.push(row.split(\"\\t\"));\r\n\t\t});\r\n\r\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\r\n\t\t\tsuccess = true;\r\n\r\n\t\t\t//check if headers are present by title\r\n\t\t\tdata[0].forEach(function(value){\r\n\t\t\t\tvar column = columns.find(function(column){\r\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tcolumnMap.push(column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\theaderFindSuccess = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//check if column headers are present by field\r\n\t\t\tif(!headerFindSuccess){\r\n\t\t\t\theaderFindSuccess = true;\r\n\t\t\t\tcolumnMap = [];\r\n\r\n\t\t\t\tdata[0].forEach(function(value){\r\n\t\t\t\t\tvar column = columns.find(function(column){\r\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(column){\r\n\t\t\t\t\t\tcolumnMap.push(column);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\theaderFindSuccess = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(!headerFindSuccess){\r\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//remove header row if found\r\n\t\t\tif(headerFindSuccess){\r\n\t\t\t\tdata.shift();\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach(function(item){\r\n\t\t\t\tvar row = {};\r\n\r\n\t\t\t\titem.forEach(function(value, i){\r\n\t\t\t\t\tif(columnMap[i]){\r\n\t\t\t\t\t\trow[columnMap[i].field] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\trows.push(row);\r\n\t\t\t});\r\n\r\n\t\t\treturn rows;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultPasteActions from './defaults/pasteActions.js';\r\nimport defaultPasteParsers from './defaults/pasteParsers.js';\r\n\r\nclass Clipboard extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = true;\r\n\t\tthis.pasteParser = function(){};\r\n\t\tthis.pasteAction = function(){};\r\n\t\tthis.customSelection = false;\r\n\t\tthis.rowRange = false;\r\n\t\tthis.blocked = true; //block copy actions not originating from this command\r\n\r\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\r\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\r\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\r\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRICATED - REMOVE in 5.0\r\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\r\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\r\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\r\n\r\n\t\tthis.registerColumnOption(\"clipboard\");\r\n\t\tthis.registerColumnOption(\"titleClipboard\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.mode = this.table.options.clipboard;\r\n\r\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\r\n\r\n\t\tif(this.mode === true || this.mode === \"copy\"){\r\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\r\n\t\t\t\tvar plain, html, list;\r\n\r\n\t\t\t\tif(!this.blocked){\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tif(this.customSelection){\r\n\t\t\t\t\t\tplain = this.customSelection;\r\n\r\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\r\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\tvar list = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\r\n\r\n\t\t\t\t\t\thtml = this.table.modules.export.genereateHTMLTable(list);\r\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\r\n\r\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\r\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\r\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\r\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\r\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\r\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\r\n\t\t\t\t\t\tif(html){\r\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\r\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\r\n\t\t\t\t\t\tif(html){\r\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\r\n\r\n\t\t\t\t\tthis.reset();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.mode === true || this.mode === \"paste\"){\r\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\r\n\t\t\t\tthis.paste(e);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\r\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\r\n\r\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\r\n\t}\r\n\r\n\treset(){\r\n\t\tthis.blocked = true;\r\n\t\tthis.customSelection = false;\r\n\t}\r\n\r\n\tgeneratePlainContent (list) {\r\n\t\tvar output = [];\r\n\r\n\t\tlist.forEach((row) => {\r\n\t\t\tvar rowData = [];\r\n\r\n\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\tvar value = \"\";\r\n\r\n\t\t\t\tif(col){\r\n\r\n\t\t\t\t\tif(row.type === \"group\"){\r\n\t\t\t\t\t\tcol.value = col.component.getKey();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(col.value === null){\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tvalue = col.value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowData.push(value);\r\n\t\t\t});\r\n\r\n\t\t\toutput.push(rowData.join(\"\\t\"));\r\n\t\t});\r\n\r\n\t\treturn output.join(\"\\n\");\r\n\t}\r\n\r\n\tcopy (range, internal) {\r\n\t\tvar range, sel, textRange;\r\n\t\tthis.blocked = false;\r\n\t\tthis.customSelection = false;\r\n\r\n\t\tif (this.mode === true || this.mode === \"copy\") {\r\n\r\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\r\n\r\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\r\n\t\t\t\trange = document.createRange();\r\n\t\t\t\trange.selectNodeContents(this.table.element);\r\n\t\t\t\tsel = window.getSelection();\r\n\r\n\t\t\t\tif (sel.toString() && internal) {\r\n\t\t\t\t\tthis.customSelection = sel.toString();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\tsel.addRange(range);\r\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\r\n\t\t\t\ttextRange = document.body.createTextRange();\r\n\t\t\t\ttextRange.moveToElementText(this.table.element);\r\n\t\t\t\ttextRange.select();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.execCommand('copy');\r\n\r\n\t\t\tif (sel) {\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//PASTE EVENT HANDLING\r\n\tsetPasteAction(action){\r\n\r\n\t\tswitch(typeof action){\r\n\t\t\tcase \"string\":\r\n\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\r\n\r\n\t\t\tif(!this.pasteAction){\r\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tthis.pasteAction = action;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsetPasteParser(parser){\r\n\t\tswitch(typeof parser){\r\n\t\t\tcase \"string\":\r\n\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\r\n\r\n\t\t\tif(!this.pasteParser){\r\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tthis.pasteParser = parser;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpaste(e){\r\n\t\tvar data, rowData, rows;\r\n\r\n\t\tif(this.checkPaseOrigin(e)){\r\n\r\n\t\t\tdata = this.getPasteData(e);\r\n\r\n\t\t\trowData = this.pasteParser.call(this, data);\r\n\r\n\t\t\tif(rowData){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\t\t\trowData = this.mutateData(rowData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trows = this.pasteAction.call(this, rowData);\r\n\r\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\r\n\t\t\t}else{\r\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmutateData(data){\r\n\t\tvar output = [];\r\n\r\n\t\tif(Array.isArray(data)){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\toutput = data;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\r\n\tcheckPaseOrigin(e){\r\n\t\tvar valid = true;\r\n\r\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\r\n\t\t\tvalid = false;\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tgetPasteData(e){\r\n\t\tvar data;\r\n\r\n\t\tif (window.clipboardData && window.clipboardData.getData) {\r\n\t\t\tdata = window.clipboardData.getData('Text');\r\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\r\n\t\t\tdata = e.clipboardData.getData('text/plain');\r\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\r\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\nClipboard.moduleName = \"clipboard\";\r\n\r\n//load defaults\r\nClipboard.pasteActions = defaultPasteActions;\r\nClipboard.pasteParsers = defaultPasteParsers;\r\n\r\nexport default Clipboard;", "class CalcComponent{\r\n\tconstructor (row){\r\n\t\tthis._row = row;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\treturn this._row.getData(transform);\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._row.getElement();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._row.table;\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._row.getCells().forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar cell = this._row.getCell(column);\r\n\t\treturn cell ? cell.getComponent() : false;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._row;\r\n\t}\r\n}\r\n\r\nexport default CalcComponent;", "//public cell object\r\nexport default class CellComponent {\r\n\r\n\tconstructor (cell){\r\n\t\tthis._cell = cell;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tgetValue(){\r\n\t\treturn this._cell.getValue();\r\n\t}\r\n\r\n\tgetOldValue(){\r\n\t\treturn this._cell.getOldValue();\r\n\t}\r\n\r\n\tgetInitialValue(){\r\n\t\treturn this._cell.initialValue;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._cell.getElement();\r\n\t}\r\n\r\n\tgetRow(){\r\n\t\treturn this._cell.row.getComponent();\r\n\t}\r\n\r\n\tgetData(){\r\n\t\treturn this._cell.row.getData();\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._cell.column.getField();\r\n\t}\r\n\r\n\tgetColumn(){\r\n\t\treturn this._cell.column.getComponent();\r\n\t}\r\n\r\n\tsetValue(value, mutate){\r\n\t\tif(typeof mutate == \"undefined\"){\r\n\t\t\tmutate = true;\r\n\t\t}\r\n\r\n\t\tthis._cell.setValue(value, mutate);\r\n\t}\r\n\r\n\trestoreOldValue(){\r\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\r\n\t}\r\n\r\n\trestoreInitialValue(){\r\n\t\tthis._cell.setValueActual(this._cell.initialValue);\r\n\t}\r\n\r\n\tcheckHeight(){\r\n\t\tthis._cell.checkHeight();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._cell.table;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._cell;\r\n\t}\r\n}", "import CoreFeature from '../CoreFeature.js';\r\nimport CellComponent from './CellComponent.js';\r\n\r\nexport default class Cell extends CoreFeature{\r\n\tconstructor(column, row){\r\n\t\tsuper(column.table);\r\n\r\n\t\tthis.table = column.table;\r\n\t\tthis.column = column;\r\n\t\tthis.row = row;\r\n\t\tthis.element = null;\r\n\t\tthis.value = null;\r\n\t\tthis.initialValue;\r\n\t\tthis.oldValue = null;\r\n\t\tthis.modules = {};\r\n\r\n\t\tthis.height = null;\r\n\t\tthis.width = null;\r\n\t\tthis.minWidth = null;\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\r\n\r\n\t\tthis.build();\r\n\t}\r\n\r\n\t//////////////// Setup Functions /////////////////\r\n\t//generate element\r\n\tbuild(){\r\n\t\tthis.generateElement();\r\n\r\n\t\tthis.setWidth();\r\n\r\n\t\tthis._configureCell();\r\n\r\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\r\n\r\n\t\tthis.initialValue = this.value;\r\n\t}\r\n\r\n\tgenerateElement(){\r\n\t\tthis.element = document.createElement('div');\r\n\t\tthis.element.className = \"tabulator-cell\";\r\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\r\n\t\tthis.element = this.element;\r\n\t}\r\n\r\n\t_configureCell(){\r\n\t\tvar element = this.element,\r\n\t\tfield = this.column.getField(),\r\n\t\tvertAligns = {\r\n\t\t\ttop:\"flex-start\",\r\n\t\t\tbottom:\"flex-end\",\r\n\t\t\tmiddle:\"center\",\r\n\t\t},\r\n\t\thozAligns = {\r\n\t\t\tleft:\"flex-start\",\r\n\t\t\tright:\"flex-end\",\r\n\t\t\tcenter:\"center\",\r\n\t\t};\r\n\r\n\t\t//set text alignment\r\n\t\telement.style.textAlign = this.column.hozAlign;\r\n\r\n\t\tif(this.column.vertAlign){\r\n\t\t\telement.style.display = \"inline-flex\";\r\n\r\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\r\n\r\n\t\t\tif(this.column.hozAlign){\r\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(field){\r\n\t\t\telement.setAttribute(\"tabulator-field\", field);\r\n\t\t}\r\n\r\n\t\t//add class to cell if needed\r\n\t\tif(this.column.definition.cssClass){\r\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \")\r\n\t\t\tclassNames.forEach((className) => {\r\n\t\t\t\telement.classList.add(className)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//update tooltip on mouse enter\r\n\t\tif (this.table.options.tooltipGenerationMode === \"hover\"){\r\n\t\t\telement.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\t\tthis._generateTooltip();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"cell-init\", this);\r\n\r\n\t\t//hide cell if not visible\r\n\t\tif(!this.column.visible){\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t//generate cell contents\r\n\t_generateContents(){\r\n\t\tvar val;\r\n\r\n\t\tval = this.chain(\"cell-format\", this, null, () => {\r\n\t\t\treturn this.element.innerHTML = this.value;\r\n\t\t});\r\n\r\n\t\tswitch(typeof val){\r\n\t\t\tcase \"object\":\r\n\t\t\tif(val instanceof Node){\r\n\r\n\t\t\t\t//clear previous cell contents\r\n\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\t\tthis.element.appendChild(val);\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.innerHTML = \"\";\r\n\r\n\t\t\t\tif(val != null){\r\n\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"undefined\":\r\n\t\t\tcase \"null\":\r\n\t\t\tthis.element.innerHTML = \"\";\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tthis.element.innerHTML = val;\r\n\t\t}\r\n\t}\r\n\r\n\tcellRendered(){\r\n\t\tthis.dispatch(\"cell-rendered\", this);\r\n\t}\r\n\r\n\t//generate tooltip text\r\n\t_generateTooltip(){\r\n\t\tvar tooltip = this.column.tooltip;\r\n\r\n\t\tif(tooltip){\r\n\t\t\tif(tooltip === true){\r\n\t\t\t\ttooltip = this.value;\r\n\t\t\t}else if(typeof(tooltip) == \"function\"){\r\n\t\t\t\ttooltip = tooltip(this.getComponent());\r\n\r\n\t\t\t\tif(tooltip === false){\r\n\t\t\t\t\ttooltip = \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof tooltip === \"undefined\"){\r\n\t\t\t\ttooltip = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.setAttribute(\"title\", tooltip);\r\n\t\t}else{\r\n\t\t\tthis.element.setAttribute(\"title\", \"\");\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////////// Getters ////////////////////\r\n\tgetElement(containerOnly){\r\n\t\tif(!this.loaded){\r\n\t\t\tthis.loaded = true;\r\n\t\t\tif(!containerOnly){\r\n\t\t\t\tthis.layoutElement();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tgetValue(){\r\n\t\treturn this.value;\r\n\t}\r\n\r\n\tgetOldValue(){\r\n\t\treturn this.oldValue;\r\n\t}\r\n\r\n\t//////////////////// Actions ////////////////////\r\n\tsetValue(value, mutate){\r\n\t\tvar changed = this.setValueProcessData(value, mutate);\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\r\n\r\n\t\t\tthis.cellRendered();\r\n\r\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\r\n\r\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\r\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetValueProcessData(value, mutate){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(this.value != value){\r\n\r\n\t\t\tchanged = true;\r\n\r\n\t\t\tif(mutate){\r\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setValueActual(value);\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\r\n\t\t}\r\n\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tsetValueActual(value){\r\n\t\tthis.oldValue = this.value;\r\n\r\n\t\tthis.value = value;\r\n\r\n\t\tthis.dispatch(\"cell-value-save-before\", this);\r\n\r\n\t\tthis.column.setFieldValue(this.row.data, value);\r\n\r\n\t\tthis.dispatch(\"cell-value-save-after\", this);\r\n\r\n\t\tif(this.loaded){\r\n\t\t\tthis.layoutElement();\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutElement(){\r\n\t\tthis._generateContents();\r\n\t\tthis._generateTooltip();\r\n\r\n\t\tthis.dispatch(\"cell-layout\", this);\r\n\t}\r\n\r\n\tsetWidth(){\r\n\t\tthis.width = this.column.width;\r\n\t\tthis.element.style.width = this.column.widthStyled;\r\n\t}\r\n\r\n\tclearWidth(){\r\n\t\tthis.width = \"\";\r\n\t\tthis.element.style.width = \"\";\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\treturn this.width || this.element.offsetWidth;\r\n\t}\r\n\r\n\tsetMinWidth(){\r\n\t\tthis.minWidth = this.column.minWidth;\r\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\r\n\t}\r\n\r\n\tsetMaxWidth(){\r\n\t\tthis.maxWidth = this.column.maxWidth;\r\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\r\n\t}\r\n\r\n\tcheckHeight(){\r\n\t\t// var height = this.element.css(\"height\");\r\n\t\tthis.row.reinitializeHeight();\r\n\t}\r\n\r\n\tclearHeight(){\r\n\t\tthis.element.style.height = \"\";\r\n\t\tthis.height = null;\r\n\t}\r\n\r\n\tsetHeight(){\r\n\t\tthis.height = this.row.height;\r\n\t\tthis.element.style.height =  this.row.heightStyled;\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.height || this.element.offsetHeight;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis.element.style.display = \"none\";\r\n\t}\r\n\r\n\tdelete(){\r\n\t\tthis.dispatch(\"cell-delete\", this);\r\n\r\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.column.deleteCell(this);\r\n\t\tthis.row.deleteCell(this);\r\n\t\tthis.calcs = {};\r\n\t}\r\n\r\n\tgetIndex(){\r\n\t\treturn this.row.getCellIndex(this);\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new CellComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}", "//public column object\r\nexport default class ColumnComponent {\r\n\tconstructor (column){\r\n\t\tthis._column = column;\r\n\t\tthis.type = \"ColumnComponent\";\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._column.getElement();\r\n\t}\r\n\r\n\tgetDefinition(){\r\n\t\treturn this._column.getDefinition();\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._column.getField();\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._column.cells.forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tisVisible(){\r\n\t\treturn this._column.visible;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tif(this._column.isGroup){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\tcolumn.show();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis._column.show();\r\n\t\t}\r\n\t}\r\n\r\n\thide(){\r\n\t\tif(this._column.isGroup){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\tcolumn.hide();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis._column.hide();\r\n\t\t}\r\n\t}\r\n\r\n\ttoggle(){\r\n\t\tif(this._column.visible){\r\n\t\t\tthis.hide();\r\n\t\t}else{\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn this._column.delete();\r\n\t}\r\n\r\n\tgetSubColumns(){\r\n\t\tvar output = [];\r\n\r\n\t\tif(this._column.columns.length){\r\n\t\t\tthis._column.columns.forEach(function(column){\r\n\t\t\t\toutput.push(column.getComponent());\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetParentColumn(){\r\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._column;\r\n\t}\r\n\r\n\tscrollTo(){\r\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column);\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._column.table;\r\n\t}\r\n\r\n\tmove(to, after){\r\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\r\n\r\n\t\tif(toColumn){\r\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\r\n\t\t}\r\n\t}\r\n\r\n\tgetNextColumn(){\r\n\t\tvar nextCol = this._column.nextColumn();\r\n\r\n\t\treturn nextCol ? nextCol.getComponent() : false;\r\n\t}\r\n\r\n\tgetPrevColumn(){\r\n\t\tvar prevCol = this._column.prevColumn();\r\n\r\n\t\treturn prevCol ? prevCol.getComponent() : false;\r\n\t}\r\n\r\n\tupdateDefinition(updates){\r\n\t\treturn this._column.updateDefinition(updates);\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\treturn this._column.getWidth();\r\n\t}\r\n\r\n\tsetWidth(width){\r\n\t\tvar result;\r\n\r\n\t\tif(width === true){\r\n\t\t\tresult =  this._column.reinitializeWidth(true);\r\n\t\t}else{\r\n\t\t\tresult =  this._column.setWidth(width);\r\n\t\t}\r\n\r\n\t\tthis._column.table.columnManager.renderer.rerenderColumns(true);\r\n\r\n\t\treturn result;\r\n\t}\r\n}", "export default {\r\n\t\"title\": undefined,\r\n\t\"field\": undefined,\r\n\t\"columns\": undefined,\r\n\t\"visible\": undefined,\r\n\t\"hozAlign\": undefined,\r\n\t\"vertAlign\": undefined,\r\n\t\"width\": undefined,\r\n\t\"minWidth\": 40,\r\n\t\"maxWidth\": undefined,\r\n\t\"tooltip\": undefined,\r\n\t\"cssClass\": undefined,\r\n\t\"variableHeight\": undefined,\r\n\t\"headerTooltip\": undefined,\r\n\t\"headerVertical\": undefined,\r\n\t\"headerHozAlign\": undefined,\r\n\t\"editableTitle\": undefined,\r\n}", "import CoreFeature from '../CoreFeature.js';\r\nimport ColumnComponent from './ColumnComponent.js';\r\nimport defaultOptions from './defaults/options.js';\r\n\r\nimport Cell from '../cell/Cell.js';\r\n\r\nclass Column extends CoreFeature{\r\n\r\n\tconstructor(def, parent){\r\n\t\tsuper(parent.table);\r\n\r\n\t\tthis.definition = def; //column definition\r\n\t\tthis.parent = parent; //hold parent object\r\n\t\tthis.type = \"column\"; //type of element\r\n\t\tthis.columns = []; //child columns\r\n\t\tthis.cells = []; //cells bound to this column\r\n\t\tthis.element = this.createElement(); //column header element\r\n\t\tthis.contentElement = false;\r\n\t\tthis.titleHolderElement = false;\r\n\t\tthis.titleElement = false;\r\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\r\n\t\tthis.isGroup = false;\r\n\t\tthis.tooltip = false; //hold column tooltip\r\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\r\n\t\tthis.vertAlign = \"\"; //vert text alignment\r\n\r\n\t\t//multi dimensional filed handling\r\n\t\tthis.field =\"\";\r\n\t\tthis.fieldStructure = \"\";\r\n\t\tthis.getFieldValue = \"\";\r\n\t\tthis.setFieldValue = \"\";\r\n\r\n\t\tthis.titleFormatterRendered = false;\r\n\r\n\t\tthis.mapDefinitions();\r\n\r\n\t\tthis.setField(this.definition.field);\r\n\r\n\t\tthis.modules = {}; //hold module variables;\r\n\r\n\t\tthis.width = null; //column width\r\n\t\tthis.widthStyled = \"\"; //column width prestyled to improve render efficiency\r\n\t\tthis.maxWidth = null; //column maximum width\r\n\t\tthis.maxWidthStyled = \"\"; //column maximum prestyled to improve render efficiency\r\n\t\tthis.minWidth = null; //column minimum width\r\n\t\tthis.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\r\n\t\tthis.widthFixed = false; //user has specified a width for this column\r\n\r\n\t\tthis.visible = true; //default visible state\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\t//initialize column\r\n\t\tif(this.definition.columns){\r\n\r\n\t\t\tthis.isGroup = true;\r\n\r\n\t\t\tthis.definition.columns.forEach((def, i) => {\r\n\t\t\t\tvar newCol = new Column(def, this);\r\n\t\t\t\tthis.attachColumn(newCol);\r\n\t\t\t});\r\n\r\n\t\t\tthis.checkColumnVisibility();\r\n\t\t}else{\r\n\t\t\tparent.registerColumnField(this);\r\n\t\t}\r\n\r\n\t\tthis._initialize();\r\n\r\n\t\tthis.bindModuleColumns();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col\");\r\n\t\tel.setAttribute(\"role\", \"columnheader\");\r\n\t\tel.setAttribute(\"aria-sort\", \"none\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateGroupElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-col-group-cols\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tmapDefinitions(){\r\n\t\tvar defaults = this.table.options.columnDefaults;\r\n\r\n\t\t//map columnDefaults onto column definitions\r\n\t\tif(defaults){\r\n\t\t\tfor(let key in defaults){\r\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\r\n\t\t\t\t\tthis.definition[key] = defaults[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition)\r\n\t}\r\n\r\n\tcheckDefinition(){\r\n\t\tObject.keys(this.definition).forEach((key) => {\r\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\r\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tsetField(field){\r\n\t\tthis.field = field;\r\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\r\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\r\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\r\n\t}\r\n\r\n\t//register column position with column manager\r\n\tregisterColumnPosition(column){\r\n\t\tthis.parent.registerColumnPosition(column);\r\n\t}\r\n\r\n\t//register column position with column manager\r\n\tregisterColumnField(column){\r\n\t\tthis.parent.registerColumnField(column);\r\n\t}\r\n\r\n\t//trigger position registration\r\n\treRegisterPosition(){\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tcolumn.reRegisterPosition();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.registerColumnPosition(this);\r\n\t\t}\r\n\t}\r\n\r\n\t_mapDepricatedFunctionality(){\r\n\t\t//all previously deprecated functionality removed in the 5.0 release\r\n\t}\r\n\r\n\tsetTooltip(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\t//set header tooltips\r\n\t\tvar tooltip = def.headerTooltip;\r\n\r\n\t\tif(tooltip){\r\n\t\t\tif(tooltip === true){\r\n\t\t\t\tif(def.field){\r\n\t\t\t\t\tthis.langBind(\"columns|\" + def.field, (value) => {\r\n\t\t\t\t\t\tthis.element.setAttribute(\"title\", value || def.title);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.element.setAttribute(\"title\", def.title);\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tif(typeof(tooltip) == \"function\"){\r\n\t\t\t\t\ttooltip = tooltip(this.getComponent());\r\n\r\n\t\t\t\t\tif(tooltip === false){\r\n\t\t\t\t\t\ttooltip = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.element.setAttribute(\"title\", tooltip);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.element.setAttribute(\"title\", \"\");\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element\r\n\t_initialize(){\r\n\t\tvar def = this.definition;\r\n\r\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\tif(def.headerVertical){\r\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\r\n\r\n\t\t\tif(def.headerVertical === \"flip\"){\r\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.contentElement = this._bindEvents();\r\n\r\n\t\tthis.contentElement = this._buildColumnHeaderContent();\r\n\r\n\t\tthis.element.appendChild(this.contentElement);\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis._buildGroupHeader();\r\n\t\t}else{\r\n\t\t\tthis._buildColumnHeader();\r\n\t\t}\r\n\r\n\t\tthis.setTooltip();\r\n\r\n\t\tthis.dispatch(\"column-init\", this);\r\n\r\n\t\t//update header tooltip on mouse enter\r\n\t\tthis.element.addEventListener(\"mouseenter\", (e) => {\r\n\t\t\tthis.setTooltip();\r\n\t\t});\r\n\t}\r\n\r\n\t_bindEvents(){\r\n\t\tvar def = this.definition,\r\n\t\tdblTap,\ttapHold, tap;\r\n\r\n\t\t//setup header click event bindings\r\n\t\tif(typeof(def.headerClick) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"click\", (e) => {def.headerClick(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerDblClick) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"dblclick\", (e) => {def.headerDblClick(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerContext) == \"function\"){\r\n\t\t\tthis.element.addEventListener(\"contextmenu\", (e) => {def.headerContext(e, this.getComponent());});\r\n\t\t}\r\n\r\n\t\t//setup header tap event bindings\r\n\t\tif(typeof(def.headerTap) == \"function\"){\r\n\t\t\ttap = false;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tdef.headerTap(e, this.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerDblTap) == \"function\"){\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tdef.headerDblTap(e, this.getComponent());\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(typeof(def.headerTapHold) == \"function\"){\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(function(){\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tdef.headerTapHold(e, this.getComponent());\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element for header\r\n\t_buildColumnHeader(){\r\n\t\tvar def = this.definition,\r\n\t\ttable = this.table;\r\n\r\n\t\tthis.dispatch(\"column-layout\", this);\r\n\r\n\t\t//set column visibility\r\n\t\tif(typeof def.visible != \"undefined\"){\r\n\t\t\tif(def.visible){\r\n\t\t\t\tthis.show(true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.hide(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//asign additional css classes to column header\r\n\t\tif(def.cssClass){\r\n\t\t\tvar classeNames = def.cssClass.split(\" \");\r\n\t\t\tclasseNames.forEach((className) => {\r\n\t\t\t\tthis.element.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(def.field){\r\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\r\n\t\t}\r\n\r\n\t\t//set min width if present\r\n\t\tthis.setMinWidth(parseInt(def.minWidth));\r\n\r\n\t\tif(def.maxWidth){\r\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\r\n\t\t}\r\n\r\n\t\tthis.reinitializeWidth();\r\n\r\n\t\t//set tooltip if present\r\n\t\tthis.tooltip = this.definition.tooltip;\r\n\r\n\t\t//set orizontal text alignment\r\n\t\tthis.hozAlign = this.definition.hozAlign;\r\n\t\tthis.vertAlign = this.definition.vertAlign;\r\n\r\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\r\n\t}\r\n\r\n\t_buildColumnHeaderContent(){\r\n\t\tvar def = this.definition,\r\n\t\ttable = this.table;\r\n\r\n\t\tvar contentElement = document.createElement(\"div\");\r\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\r\n\r\n\t\tthis.titleHolderElement = document.createElement(\"div\");\r\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\r\n\r\n\t\tcontentElement.appendChild(this.titleHolderElement);\r\n\r\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\r\n\r\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\r\n\r\n\t\treturn contentElement;\r\n\t}\r\n\r\n\t//build title element of column\r\n\t_buildColumnHeaderTitle(){\r\n\t\tvar def = this.definition,\r\n\t\ttitle;\r\n\r\n\t\tvar titleHolderElement = document.createElement(\"div\");\r\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\r\n\r\n\t\tif(def.editableTitle){\r\n\t\t\tvar titleElement = document.createElement(\"input\");\r\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\r\n\r\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\ttitleElement.focus();\r\n\t\t\t});\r\n\r\n\t\t\ttitleElement.addEventListener(\"change\", () => {\r\n\t\t\t\tdef.title = titleElement.value;\r\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\ttitleHolderElement.appendChild(titleElement);\r\n\r\n\t\t\tif(def.field){\r\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\r\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tif(def.field){\r\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\r\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn titleHolderElement;\r\n\t}\r\n\r\n\t_formatColumnHeaderTitle(el, title){\r\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\r\n\t\t\treturn title;\r\n\t\t});\r\n\r\n\t\tswitch(typeof contents){\r\n\t\t\tcase \"object\":\r\n\t\t\tif(contents instanceof Node){\r\n\t\t\t\tel.appendChild(contents);\r\n\t\t\t}else{\r\n\t\t\t\tel.innerHTML = \"\";\r\n\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"undefined\":\r\n\t\t\tcase \"null\":\r\n\t\t\tel.innerHTML = \"\";\r\n\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\tel.innerHTML = contents;\r\n\t\t}\r\n\t}\r\n\r\n\t//build header element for column group\r\n\t_buildGroupHeader(){\r\n\t\tthis.element.classList.add(\"tabulator-col-group\");\r\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\r\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\r\n\r\n\t\t//asign additional css classes to column header\r\n\t\tif(this.definition.cssClass){\r\n\t\t\tvar classeNames = this.definition.cssClass.split(\" \");\r\n\t\t\tclasseNames.forEach((className) => {\r\n\t\t\t\tthis.element.classList.add(className);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\r\n\r\n\t\tthis.element.appendChild(this.groupElement);\r\n\t}\r\n\r\n\t//flat field lookup\r\n\t_getFlatData(data){\r\n\t\treturn data[this.field];\r\n\t}\r\n\r\n\t//nested field lookup\r\n\t_getNestedData(data){\r\n\t\tvar dataObj = data,\r\n\t\tstructure = this.fieldStructure,\r\n\t\tlength = structure.length,\r\n\t\toutput;\r\n\r\n\t\tfor(let i = 0; i < length; i++){\r\n\r\n\t\t\tdataObj = dataObj[structure[i]];\r\n\r\n\t\t\toutput = dataObj;\r\n\r\n\t\t\tif(!dataObj){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//flat field set\r\n\t_setFlatData(data, value){\r\n\t\tif(this.field){\r\n\t\t\tdata[this.field] = value;\r\n\t\t}\r\n\t}\r\n\r\n\t//nested field set\r\n\t_setNestedData(data, value){\r\n\t\tvar dataObj = data,\r\n\t\tstructure = this.fieldStructure,\r\n\t\tlength = structure.length;\r\n\r\n\t\tfor(let i = 0; i < length; i++){\r\n\r\n\t\t\tif(i == length -1){\r\n\t\t\t\tdataObj[structure[i]] = value;\r\n\t\t\t}else{\r\n\t\t\t\tif(!dataObj[structure[i]]){\r\n\t\t\t\t\tif(typeof value !== \"undefined\"){\r\n\t\t\t\t\t\tdataObj[structure[i]] = {};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataObj = dataObj[structure[i]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//attach column to this group\r\n\tattachColumn(column){\r\n\t\tif(this.groupElement){\r\n\t\t\tthis.columns.push(column);\r\n\t\t\tthis.groupElement.appendChild(column.getElement());\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\r\n\t\t}\r\n\t}\r\n\r\n\t//vertically align header in column\r\n\tverticalAlign(alignment, height){\r\n\r\n\t\t//calculate height of column header and group holder element\r\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\r\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\r\n\r\n\t\tthis.element.style.height = parentHeight + \"px\";\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\r\n\t\t}\r\n\r\n\t\t//vertically align cell contents\r\n\t\tif(!this.isGroup && alignment !== \"top\"){\r\n\t\t\tif(alignment === \"bottom\"){\r\n\t\t\t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.verticalAlign(alignment);\r\n\t\t});\r\n\t}\r\n\r\n\t//clear vertical alignmenet\r\n\tclearVerticalAlign(){\r\n\t\tthis.element.style.paddingTop = \"\";\r\n\t\tthis.element.style.height = \"\";\r\n\t\tthis.element.style.minHeight = \"\";\r\n\t\tthis.groupElement.style.minHeight = \"\";\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.clearVerticalAlign();\r\n\t\t});\r\n\t}\r\n\r\n\tbindModuleColumns (){\r\n\t\t//check if rownum formatter is being used on a column\r\n\t\tif(this.definition.formatter == \"rownum\"){\r\n\t\t\tthis.table.rowManager.rowNumColumn = this;\r\n\t\t}\r\n\t}\r\n\r\n\t//// Retreive Column Information ////\r\n\t//return column header element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return colunm group element\r\n\tgetGroupElement(){\r\n\t\treturn this.groupElement;\r\n\t}\r\n\r\n\t//return field name\r\n\tgetField(){\r\n\t\treturn this.field;\r\n\t}\r\n\r\n\t//return the first column in a group\r\n\tgetFirstColumn(){\r\n\t\tif(!this.isGroup){\r\n\t\t\treturn this;\r\n\t\t}else{\r\n\t\t\tif(this.columns.length){\r\n\t\t\t\treturn this.columns[0].getFirstColumn();\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//return the last column in a group\r\n\tgetLastColumn(){\r\n\t\tif(!this.isGroup){\r\n\t\t\treturn this;\r\n\t\t}else{\r\n\t\t\tif(this.columns.length){\r\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//return all columns in a group\r\n\tgetColumns(){\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\t//return all columns in a group\r\n\tgetCells(){\r\n\t\treturn this.cells;\r\n\t}\r\n\r\n\t//retreive the top column in a group of columns\r\n\tgetTopColumn(){\r\n\t\tif(this.parent.isGroup){\r\n\t\t\treturn this.parent.getTopColumn();\r\n\t\t}else{\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n\r\n\t//return column definition object\r\n\tgetDefinition(updateBranches){\r\n\t\tvar colDefs = [];\r\n\r\n\t\tif(this.isGroup && updateBranches){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tcolDefs.push(column.getDefinition(true));\r\n\t\t\t});\r\n\r\n\t\t\tthis.definition.columns = colDefs;\r\n\t\t}\r\n\r\n\t\treturn this.definition;\r\n\t}\r\n\r\n\t//////////////////// Actions ////////////////////\r\n\tcheckColumnVisibility(){\r\n\t\tvar visible = false;\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvisible = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(visible){\r\n\t\t\tthis.show();\r\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\r\n\t\t}else{\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t//show column\r\n\tshow(silent, responsiveToggle){\r\n\t\tif(!this.visible){\r\n\t\t\tthis.visible = true;\r\n\r\n\t\t\tthis.element.style.display = \"\";\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.checkColumnVisibility();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.show();\r\n\t\t\t});\r\n\r\n\t\t\tif(!this.isGroup && this.width === null){\r\n\t\t\t\tthis.reinitializeWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\r\n\r\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.silent){\r\n\t\t\t\tthis.table.columnManager.renderer.rerenderColumns();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//hide column\r\n\thide(silent, responsiveToggle){\r\n\t\tif(this.visible){\r\n\t\t\tthis.visible = false;\r\n\r\n\t\t\tthis.element.style.display = \"none\";\r\n\r\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.checkColumnVisibility();\r\n\t\t\t}\r\n\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.hide();\r\n\t\t\t});\r\n\r\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.silent){\r\n\t\t\t\tthis.table.columnManager.renderer.rerenderColumns();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmatchChildWidths(){\r\n\t\tvar childWidth = 0;\r\n\r\n\t\tif(this.contentElement && this.columns.length){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tif(column.visible){\r\n\t\t\t\t\tchildWidth += column.getWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.matchChildWidths();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tremoveChild(child){\r\n\t\tvar index = this.columns.indexOf(child);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columns.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(!this.columns.length){\r\n\t\t\tthis.delete();\r\n\t\t}\r\n\t}\r\n\r\n\tsetWidth(width){\r\n\t\tthis.widthFixed = true;\r\n\t\tthis.setWidthActual(width);\r\n\t}\r\n\r\n\tsetWidthActual(width){\r\n\t\tif(isNaN(width)){\r\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\r\n\t\t}\r\n\r\n\t\twidth = Math.max(this.minWidth, width);\r\n\r\n\t\tif(this.maxWidth){\r\n\t\t\twidth = Math.min(this.maxWidth, width);\r\n\t\t}\r\n\r\n\t\tthis.width = width;\r\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.width = this.widthStyled;\r\n\r\n\t\tif(!this.isGroup){\r\n\t\t\tthis.cells.forEach(function(cell){\r\n\t\t\t\tcell.setWidth();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.parent.isGroup){\r\n\t\t\tthis.parent.matchChildWidths();\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"column-width\", this);\r\n\t}\r\n\r\n\tcheckCellHeights(){\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tif(cell.row.heightInitialized){\r\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\r\n\t\t\t\t\trows.push(cell.row);\r\n\t\t\t\t\tcell.row.clearCellHeight();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcell.row.heightInitialized = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.calcHeight();\r\n\t\t});\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\trow.setCellHeight();\r\n\t\t});\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\tvar width = 0;\r\n\r\n\t\tif(this.isGroup){\r\n\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\tif(column.visible){\r\n\t\t\t\t\twidth += column.getWidth();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\twidth = this.width;\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.element.offsetHeight;\r\n\t}\r\n\r\n\tsetMinWidth(minWidth){\r\n\t\tthis.minWidth = minWidth;\r\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.minWidth = this.minWidthStyled;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setMinWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tsetMaxWidth(maxWidth){\r\n\t\tthis.maxWidth = maxWidth;\r\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\r\n\r\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setMaxWidth();\r\n\t\t});\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar index;\r\n\r\n\t\t\tif(this.isGroup){\r\n\t\t\t\tthis.columns.forEach(function(column){\r\n\t\t\t\t\tcolumn.delete();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatch(\"column-delete\", this);\r\n\r\n\t\t\tvar cellCount = this.cells.length;\r\n\r\n\t\t\tfor(let i = 0; i < cellCount; i++){\r\n\t\t\t\tthis.cells[0].delete();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element = false;\r\n\t\t\tthis.contentElement = false;\r\n\t\t\tthis.titleElement = false;\r\n\t\t\tthis.groupElement = false;\r\n\r\n\t\t\tif(this.parent.isGroup){\r\n\t\t\t\tthis.parent.removeChild(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.columnManager.deregisterColumn(this);\r\n\r\n\t\t\tthis.table.columnManager.renderer.rerenderColumns(true);\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tcolumnRendered(){\r\n\t\tif(this.titleFormatterRendered){\r\n\t\t\tthis.titleFormatterRendered();\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\t//generate cell for this column\r\n\tgenerateCell(row){\r\n\t\tvar cell = new Cell(this, row);\r\n\r\n\t\tthis.cells.push(cell);\r\n\r\n\t\treturn cell;\r\n\t}\r\n\r\n\tnextColumn(){\r\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\r\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\r\n\t}\r\n\r\n\t_nextVisibleColumn(index){\r\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\r\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\r\n\t}\r\n\r\n\tprevColumn(){\r\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\r\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\r\n\t}\r\n\r\n\t_prevVisibleColumn(index){\r\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\r\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\r\n\t}\r\n\r\n\treinitializeWidth(force){\r\n\t\tthis.widthFixed = false;\r\n\r\n\t\t//set width if present\r\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\r\n\t\t\tthis.setWidth(this.definition.width);\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"column-width-fit-before\", this);\r\n\r\n\t\tthis.fitToData();\r\n\r\n\t\tthis.dispatch(\"column-width-fit-after\", this);\r\n\t}\r\n\r\n\t//set column width to maximum cell width for non group columns\r\n\tfitToData(){\r\n\t\tif(this.isGroup){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(!this.widthFixed){\r\n\t\t\tthis.element.style.width = \"\";\r\n\r\n\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\tcell.clearWidth();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar maxWidth = this.element.offsetWidth;\r\n\r\n\t\tif(!this.width || !this.widthFixed){\r\n\t\t\tthis.cells.forEach((cell) => {\r\n\t\t\t\tvar width = cell.getWidth();\r\n\r\n\t\t\t\tif(width > maxWidth){\r\n\t\t\t\t\tmaxWidth = width;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(maxWidth){\r\n\t\t\t\tthis.setWidthActual(maxWidth + 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateDefinition(updates){\r\n\t\tvar definition;\r\n\r\n\t\tif(!this.isGroup){\r\n\t\t\tif(!this.parent.isGroup){\r\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\r\n\t\t\t\tdefinition = Object.assign(definition, updates);\r\n\r\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\r\n\t\t\t\t.then((column) => {\r\n\r\n\t\t\t\t\tif(definition.field == this.field){\r\n\t\t\t\t\t\tthis.field = false; //cleair field name to prevent deletion of duplicate column from arrays\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this.delete()\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\r\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\r\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\r\n\t\t}\r\n\t}\r\n\r\n\tdeleteCell(cell){\r\n\t\tvar index = this.cells.indexOf(cell);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.cells.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new ColumnComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n\r\nColumn.defaultOptionList = defaultOptions;\r\n\r\nexport default Column;", "//public row object\r\nexport default class RowComponent {\r\n\r\n\tconstructor (row){\r\n\t\tthis._row = row;\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\treturn this._row.getData(transform);\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._row.getElement();\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis._row.getCells().forEach(function(cell){\r\n\t\t\tcells.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar cell = this._row.getCell(column);\r\n\t\treturn cell ? cell.getComponent() : false;\r\n\t}\r\n\r\n\tgetIndex(){\r\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\r\n\t}\r\n\r\n\tgetPosition(active){\r\n\t\treturn this._row.table.rowManager.getRowPosition(this._row, active);\r\n\t}\r\n\r\n\tdelete(){\r\n\t\treturn this._row.delete();\r\n\t}\r\n\r\n\tscrollTo(){\r\n\t\treturn this._row.table.rowManager.scrollToRow(this._row);\r\n\t}\r\n\r\n\tmove(to, after){\r\n\t\tthis._row.moveToRow(to, after);\r\n\t}\r\n\r\n\tupdate(data){\r\n\t\treturn this._row.updateData(data);\r\n\t}\r\n\r\n\tnormalizeHeight(){\r\n\t\tthis._row.normalizeHeight(true);\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._row;\r\n\t}\r\n\r\n\treformat(){\r\n\t\treturn this._row.reinitialize();\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._row.table;\r\n\t}\r\n\r\n\tgetNextRow(){\r\n\t\tvar row = this._row.nextRow();\r\n\t\treturn row ? row.getComponent() : row;\r\n\t}\r\n\r\n\tgetPrevRow(){\r\n\t\tvar row = this._row.prevRow();\r\n\t\treturn row ? row.getComponent() : row;\r\n\t}\r\n}", "import CoreFeature from '../CoreFeature.js';\r\nimport RowComponent from './RowComponent.js';\r\nimport Helpers from '../tools/Helpers.js';\r\n\r\nexport default class Row extends CoreFeature{\r\n\tconstructor (data, parent, type = \"row\"){\r\n\t\tsuper(parent.table);\r\n\r\n\t\tthis.parent = parent;\r\n\t\tthis.data = {};\r\n\t\tthis.type = type; //type of element\r\n\t\tthis.element = false;\r\n\t\tthis.modules = {}; //hold module variables;\r\n\t\tthis.cells = [];\r\n\t\tthis.height = 0; //hold element height\r\n\t\tthis.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\r\n\t\tthis.manualHeight = false; //user has manually set row height\r\n\t\tthis.outerHeight = 0; //holde lements outer height\r\n\t\tthis.initialized = false; //element has been rendered\r\n\t\tthis.heightInitialized = false; //element has resized cells to fit\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.created = false;\r\n\r\n\t\tthis.setData(data);\r\n\t}\r\n\r\n\tcreate(){\r\n\t\tif(!this.created){\r\n\t\t\tthis.created = true;\r\n\t\t\tthis.generateElement();\r\n\t\t}\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\tel.setAttribute(\"role\", \"row\");\r\n\r\n\t\tthis.element = el;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\tthis.create();\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tdetachElement(){\r\n\t\tif (this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateElement(){\r\n\t\tthis.createElement();\r\n\t\tthis.dispatch(\"row-init\", this);\r\n\t}\r\n\r\n\tgenerateCells(){\r\n\t\tthis.cells = this.table.columnManager.generateCells(this);\r\n\t}\r\n\r\n\t//functions to setup on first render\r\n\tinitialize(force){\r\n\t\tthis.create();\r\n\r\n\t\tif(!this.initialized || force){\r\n\r\n\t\t\tthis.deleteCells();\r\n\r\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\tthis.dispatch(\"row-layout-before\", this);\r\n\r\n\t\t\tthis.generateCells();\r\n\r\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this);\r\n\r\n\t\t\tif(force){\r\n\t\t\t\tthis.normalizeHeight();\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatch(\"row-layout\", this);\r\n\r\n\t\t\tif(this.table.options.rowFormatter){\r\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\r\n\t\t\t}\r\n\r\n\t\t\tthis.initialized = true;\r\n\r\n\t\t\tthis.dispatch(\"row-layout-after\", this);\r\n\t\t}else{\r\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this);\r\n\t\t}\r\n\t}\r\n\r\n\treinitializeHeight(){\r\n\t\tthis.heightInitialized = false;\r\n\r\n\t\tif(this.element && this.element.offsetParent !== null){\r\n\t\t\tthis.normalizeHeight(true);\r\n\t\t}\r\n\t}\r\n\r\n\tdeinitializeHeight(){\r\n\t\tthis.heightInitialized = false;\r\n\t}\r\n\r\n\treinitialize(children){\r\n\t\tthis.initialized = false;\r\n\t\tthis.heightInitialized = false;\r\n\r\n\t\tif(!this.manualHeight){\r\n\t\t\tthis.height = 0;\r\n\t\t\tthis.heightStyled = \"\";\r\n\t\t}\r\n\r\n\t\tif(this.element && this.element.offsetParent !== null){\r\n\t\t\tthis.initialize(true);\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"row-relayout\", this);\r\n\t}\r\n\r\n\t//get heights when doing bulk row style calcs in virtual DOM\r\n\tcalcHeight(force){\r\n\r\n\t\tvar maxHeight = 0,\r\n\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\r\n\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tvar height = cell.getHeight();\r\n\t\t\tif(height > maxHeight){\r\n\t\t\t\tmaxHeight = height;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(force){\r\n\t\t\tthis.height = Math.max(maxHeight, minHeight);\r\n\t\t}else{\r\n\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\r\n\t\t}\r\n\r\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\r\n\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t}\r\n\r\n\t//set of cells\r\n\tsetCellHeight(){\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.setHeight();\r\n\t\t});\r\n\r\n\t\tthis.heightInitialized = true;\r\n\t}\r\n\r\n\tclearCellHeight(){\r\n\t\tthis.cells.forEach(function(cell){\r\n\t\t\tcell.clearHeight();\r\n\t\t});\r\n\t}\r\n\r\n\t//normalize the height of elements in the row\r\n\tnormalizeHeight(force){\r\n\t\tif(force){\r\n\t\t\tthis.clearCellHeight();\r\n\t\t}\r\n\r\n\t\tthis.calcHeight(force);\r\n\r\n\t\tthis.setCellHeight();\r\n\t}\r\n\r\n\t//set height of rows\r\n\tsetHeight(height, force){\r\n\t\tif(this.height != height || force){\r\n\r\n\t\t\tthis.manualHeight = true;\r\n\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\r\n\r\n\t\t\tthis.setCellHeight();\r\n\r\n\t\t\t// this.outerHeight = this.element.outerHeight();\r\n\t\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t//return rows outer height\r\n\tgetHeight(){\r\n\t\treturn this.outerHeight;\r\n\t}\r\n\r\n\t//return rows outer Width\r\n\tgetWidth(){\r\n\t\treturn this.element.offsetWidth;\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\tdeleteCell(cell){\r\n\t\tvar index = this.cells.indexOf(cell);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.cells.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t//////////////// Data Management /////////////////\r\n\tsetData(data){\r\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\r\n\r\n\t\tthis.dispatch(\"row-data-init-after\", this);\r\n\t}\r\n\r\n\t//update the rows data\r\n\tupdateData(updatedData){\r\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\r\n\t\ttempData = {},\r\n\t\tnewRowData;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif(typeof updatedData === \"string\"){\r\n\t\t\t\tupdatedData = JSON.parse(updatedData);\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\r\n\r\n\t\t\tif(this.subscribed(\"row-data-changing\")){\r\n\t\t\t\ttempData = Object.assign(tempData, this.data);\r\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\r\n\t\t\t}\r\n\r\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\r\n\r\n\t\t\t//set data\r\n\t\t\tfor (var attrname in newRowData) {\r\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\r\n\r\n\t\t\t//update affected cells only\r\n\t\t\tfor (var attrname in updatedData) {\r\n\r\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\r\n\r\n\t\t\t\tcolumns.forEach((column) => {\r\n\t\t\t\t\tlet cell = this.getCell(column.getField());\r\n\r\n\t\t\t\t\tif(cell){\r\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\r\n\t\t\t\t\t\tif(cell.getValue() != value){\r\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\r\n\r\n\t\t\t\t\t\t\tif(visible){\r\n\t\t\t\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//Partial reinitialization if visible\r\n\t\t\tif(visible){\r\n\t\t\t\tthis.normalizeHeight(true);\r\n\r\n\t\t\t\tif(this.table.options.rowFormatter){\r\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.initialized = false;\r\n\t\t\t\tthis.height = 0;\r\n\t\t\t\tthis.heightStyled = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\r\n\r\n\t\t\t//this.reinitialize();\r\n\r\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\r\n\r\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\r\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\tgetData(transform){\r\n\t\tif(transform){\r\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\r\n\t\t}\r\n\r\n\t\treturn this.data;\r\n\t}\r\n\r\n\tgetCell(column){\r\n\t\tvar match = false;\r\n\r\n\t\tcolumn = this.table.columnManager.findColumn(column);\r\n\r\n\t\tif(!this.initialized){\r\n\t\t\tthis.generateCells();\r\n\t\t}\r\n\r\n\t\tmatch = this.cells.find(function(cell){\r\n\t\t\treturn cell.column === column;\r\n\t\t});\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetCellIndex(findCell){\r\n\t\treturn this.cells.findIndex(function(cell){\r\n\t\t\treturn cell === findCell;\r\n\t\t});\r\n\t}\r\n\r\n\tfindCell(subject){\r\n\t\treturn this.cells.find((cell) => {\r\n\t\t\treturn cell.element === subject;\r\n\t\t});\r\n\t}\r\n\r\n\tgetCells(){\r\n\t\tif(!this.initialized){\r\n\t\t\tthis.generateCells();\r\n\t\t}\r\n\r\n\t\treturn this.cells;\r\n\t}\r\n\r\n\tnextRow(){\r\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\r\n\t\treturn row || false;\r\n\t}\r\n\r\n\tprevRow(){\r\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\r\n\t\treturn row || false;\r\n\t}\r\n\r\n\tmoveToRow(to, before){\r\n\t\tvar toRow = this.table.rowManager.findRow(to);\r\n\r\n\t\tif(toRow){\r\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////// Actions  /////////////////////\r\n\tdelete(){\r\n\t\tthis.dispatch(\"row-delete\", this);\r\n\r\n\t\tthis.deleteActual();\r\n\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\r\n\tdeleteActual(blockRedraw){\r\n\t\tvar index = this.table.rowManager.getRowIndex(this);\r\n\r\n\t\tthis.detatchModules();\r\n\r\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\r\n\r\n\t\tthis.deleteCells();\r\n\r\n\t\tthis.initialized = false;\r\n\t\tthis.heightInitialized = false;\r\n\t\tthis.element = false;\r\n\r\n\t\tthis.dispatch(\"row-deleted\", this);\r\n\t}\r\n\r\n\tdetatchModules(){\r\n\t\tthis.dispatch(\"row-deleting\", this);\r\n\t}\r\n\r\n\tdeleteCells(){\r\n\t\tvar cellCount = this.cells.length;\r\n\r\n\t\tfor(let i = 0; i < cellCount; i++){\r\n\t\t\tthis.cells[0].delete();\r\n\t\t}\r\n\t}\r\n\r\n\twipe(){\r\n\t\tthis.detatchModules();\r\n\t\tthis.deleteCells();\r\n\r\n\t\tif(this.element){\r\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\t\tif(this.element.parentNode){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.modules = {};\r\n\t}\r\n\r\n\tgetGroup(){\r\n\t\treturn this.modules.group || false;\r\n\t}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new RowComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}", "export default {\r\n\t\"avg\":function(values, data, calcParams){\r\n\t\tvar output = 0,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2\r\n\r\n\t\tif(values.length){\r\n\t\t\toutput = values.reduce(function(sum, value){\r\n\t\t\t\treturn Number(sum) + Number(value);\r\n\t\t\t});\r\n\r\n\t\t\toutput = output / values.length;\r\n\r\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\r\n\t\t}\r\n\r\n\t\treturn parseFloat(output).toString();\r\n\t},\r\n\t\"max\":function(values, data, calcParams){\r\n\t\tvar output = null,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tvalues.forEach(function(value){\r\n\r\n\t\t\tvalue = Number(value);\r\n\r\n\t\t\tif(value > output || output === null){\r\n\t\t\t\toutput = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\r\n\t},\r\n\t\"min\":function(values, data, calcParams){\r\n\t\tvar output = null,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tvalues.forEach(function(value){\r\n\r\n\t\t\tvalue = Number(value);\r\n\r\n\t\t\tif(value < output || output === null){\r\n\t\t\t\toutput = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\r\n\t},\r\n\t\"sum\":function(values, data, calcParams){\r\n\t\tvar output = 0,\r\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\r\n\r\n\t\tif(values.length){\r\n\t\t\tvalues.forEach(function(value){\r\n\t\t\t\tvalue = Number(value);\r\n\r\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn precision !== false ? output.toFixed(precision) : output;\r\n\t},\r\n\t\"concat\":function(values, data, calcParams){\r\n\t\tvar output = 0;\r\n\r\n\t\tif(values.length){\r\n\t\t\toutput = values.reduce(function(sum, value){\r\n\t\t\t\treturn String(sum) + String(value);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t},\r\n\t\"count\":function(values, data, calcParams){\r\n\t\tvar output = 0;\r\n\r\n\t\tif(values.length){\r\n\t\t\tvalues.forEach(function(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\toutput ++;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t},\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport CalcComponent from './CalcComponent.js';\r\n\r\nimport Cell from '../../core/cell/Cell.js';\r\nimport Column from '../../core/column/Column.js';\r\nimport Row from '../../core/row/Row.js';\r\n\r\nimport defaultCalculations from './defaults/calculations.js';\r\n\r\nclass ColumnCalcs extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.topCalcs = [];\r\n\t\tthis.botCalcs = [];\r\n\t\tthis.genColumn = false;\r\n\t\tthis.topElement = this.createElement();\r\n\t\tthis.botElement = this.createElement();\r\n\t\tthis.topRow = false;\r\n\t\tthis.botRow = false;\r\n\t\tthis.topInitialized = false;\r\n\t\tthis.botInitialized = false;\r\n\r\n\t\tthis.registerTableOption(\"columnCalcs\", true);\r\n\r\n\t\tthis.registerColumnOption(\"topCalc\");\r\n\t\tthis.registerColumnOption(\"topCalcParams\");\r\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\r\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\r\n\t\tthis.registerColumnOption(\"bottomCalc\");\r\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\r\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\r\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-calcs-holder\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\r\n\r\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\r\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\r\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\r\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\r\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\r\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\r\n\t\tthis.subscribe(\"data-refeshed\", this.recalcActiveRows.bind(this));\r\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\r\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\r\n\r\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\r\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\r\n\t}\r\n\r\n\ttableRedraw(force){\r\n\t\tthis.recalc(this.table.rowManager.activeRows);\r\n\r\n\t\tif(force){\r\n\t\t\tthis.redraw();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\tuserRecalc(){\r\n\t\tthis.recalc(this.table.rowManager.activeRows);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tvisibleRows(viewable, rows){\r\n\t\tif(this.topRow){\r\n\t\t\trows.unshift(this.topRow);\r\n\t\t}\r\n\r\n\t\tif(this.botRow){\r\n\t\t\trows.push(this.botRow);\r\n\t\t}\r\n\t\r\n\t\treturn rows;\r\n\t}\r\n\r\n\trowsUpdated(row){\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tthis.recalcRowGroup(this);\r\n\t\t}else{\r\n\t\t\tthis.recalcActiveRows();\r\n\t\t}\r\n\t}\r\n\r\n\trecalcActiveRows(){\r\n\t\tthis.recalc(this.table.rowManager.activeRows);\r\n\t}\r\n\r\n\tcellValueChanged(cell){\r\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\r\n\t\t\tif(this.table.options.groupBy){\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\r\n\t\t\t\t\tthis.recalcActiveRows();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\r\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.recalcActiveRows();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeColumnCheck(column){\r\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t}\r\n\t}\r\n\r\n\t//initialize column calcs\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.definition\r\n\r\n\t\tvar config = {\r\n\t\t\ttopCalcParams:def.topCalcParams || {},\r\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\r\n\t\t};\r\n\r\n\t\tif(def.topCalc){\r\n\r\n\t\t\tswitch(typeof def.topCalc){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\r\n\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc]\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tconfig.topCalc = def.topCalc;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(config.topCalc){\r\n\t\t\t\tcolumn.modules.columnCalcs = config;\r\n\t\t\t\tthis.topCalcs.push(column);\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\r\n\t\t\t\t\tthis.initializeTopRow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(def.bottomCalc){\r\n\t\t\tswitch(typeof def.bottomCalc){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\r\n\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc]\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tconfig.botCalc = def.bottomCalc;\r\n\t\t\t\tbreak\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(config.botCalc){\r\n\t\t\t\tcolumn.modules.columnCalcs = config;\r\n\t\t\t\tthis.botCalcs.push(column);\r\n\r\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\r\n\t\t\t\t\tthis.initializeBottomRow();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//dummy functions to handle being mock column manager\r\n\tregisterColumnField(){};\r\n\r\n\tremoveCalcs(){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(this.topInitialized){\r\n\t\t\tthis.topInitialized = false;\r\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\r\n\t\tif(this.botInitialized){\r\n\t\t\tthis.botInitialized = false;\r\n\t\t\tthis.table.footerManager.remove(this.botElement);\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeTopRow(){\r\n\t\tif(!this.topInitialized){\r\n\t\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\r\n\t\t\tthis.topInitialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeBottomRow(){\r\n\t\tif(!this.botInitialized){\r\n\t\t\tthis.table.footerManager.prepend(this.botElement);\r\n\t\t\tthis.botInitialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tscrollHorizontal(left){\r\n\t\tif(this.botInitialized && this.botRow){\r\n\t\t\tthis.botRow.getElement().style.marginLeft = (-left) + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\trecalc(rows){\r\n\t\tvar data, row;\r\n\r\n\t\tif(this.topInitialized || this.botInitialized){\r\n\t\t\tdata = this.rowsToData(rows);\r\n\r\n\t\t\tif(this.topInitialized){\r\n\t\t\t\tif(this.topRow){\r\n\t\t\t\t\tthis.topRow.deleteCells();\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow = this.generateRow(\"top\", this.rowsToData(rows))\r\n\t\t\t\tthis.topRow = row;\r\n\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\r\n\t\t\t\tthis.topElement.appendChild(row.getElement());\r\n\t\t\t\trow.initialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.botInitialized){\r\n\t\t\t\tif(this.botRow){\r\n\t\t\t\t\tthis.botRow.deleteCells();\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow = this.generateRow(\"bottom\", this.rowsToData(rows))\r\n\t\t\t\tthis.botRow = row;\r\n\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\r\n\t\t\t\tthis.botElement.appendChild(row.getElement());\r\n\t\t\t\trow.initialize(true);\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\t//set resizable handles\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tthis.table.modules.frozenColumns.layout();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trecalcRowGroup(row){\r\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\r\n\t}\r\n\r\n\trecalcAll(){\r\n\t\tif(this.topCalcs.length || this.botCalcs.length){\r\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\r\n\t\t\t\tthis.recalcActiveRows();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\r\n\r\n\r\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\r\n\r\n\t\t\t\tgroups.forEach((group) => {\r\n\t\t\t\t\tthis.recalcGroup(group);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trecalcGroup(group){\r\n\t\tvar data, rowData;\r\n\r\n\t\tif(group){\r\n\t\t\tif(group.calcs){\r\n\t\t\t\tif(group.calcs.bottom){\r\n\t\t\t\t\tdata = this.rowsToData(group.rows);\r\n\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\r\n\r\n\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\r\n\t\t\t\t\tgroup.calcs.bottom.reinitialize();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(group.calcs.top){\r\n\t\t\t\t\tdata = this.rowsToData(group.rows);\r\n\t\t\t\t\trowData = this.generateRowData(\"top\", data);\r\n\r\n\t\t\t\t\tgroup.calcs.top.updateData(rowData);\r\n\t\t\t\t\tgroup.calcs.top.reinitialize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//generate top stats row\r\n\tgenerateTopRow(rows){\r\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\r\n\t}\r\n\t//generate bottom stats row\r\n\tgenerateBottomRow(rows){\r\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\r\n\t}\r\n\r\n\trowsToData(rows){\r\n\t\tvar data = [];\r\n\r\n\t\trows.forEach((row) => {\r\n\t\t\tdata.push(row.getData());\r\n\r\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\r\n\t\t\t\tif(row.modules.dataTree.open){\r\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\r\n\t\t\t\t\tdata = data.concat(children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//generate stats row\r\n\tgenerateRow(pos, data){\r\n\t\tvar rowData = this.generateRowData(pos, data),\r\n\t\trow;\r\n\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tthis.table.modules.mutator.disable();\r\n\t\t}\r\n\r\n\t\trow = new Row(rowData, this, \"calc\");\r\n\r\n\t\tif(this.table.modExists(\"mutator\")){\r\n\t\t\tthis.table.modules.mutator.enable();\r\n\t\t}\r\n\r\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\r\n\r\n\t\trow.component = false;\r\n\r\n\t\trow.getComponent = () => {\r\n\t\t\tif(!row.component){\r\n\t\t\t\trow.component = new CalcComponent(row);\r\n\t\t\t}\r\n\r\n\t\t\treturn row.component;\r\n\t\t};\r\n\r\n\t\trow.generateCells = () => {\r\n\r\n\t\t\tvar cells = [];\r\n\r\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\r\n\t\t\t\t\t//set field name of mock column\r\n\t\t\t\t\tthis.genColumn.setField(column.getField());\r\n\t\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\r\n\r\n\t\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\r\n\t\t\t\t\t\tthis.genColumn.modules.format = {\r\n\t\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\r\n\t\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.genColumn.modules.format = {\r\n\t\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\r\n\t\t\t\t\t\t\tparams:{}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//ensure css class defintion is replicated to calculation cell\r\n\t\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\r\n\r\n\t\t\t\t\t//generate cell and assign to correct column\r\n\t\t\t\t\tvar cell = new Cell(this.genColumn, row);\r\n\t\t\t\t\tcell.getElement();\r\n\t\t\t\t\tcell.column = column;\r\n\t\t\t\t\tcell.setWidth();\r\n\r\n\t\t\t\t\tcolumn.cells.push(cell);\r\n\t\t\t\t\tcells.push(cell);\r\n\r\n\t\t\t\t\tif(!column.visible){\r\n\t\t\t\t\t\tcell.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\trow.cells = cells;\r\n\t\t};\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\t//generate stats row\r\n\tgenerateRowData(pos, data){\r\n\t\tvar rowData = {},\r\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\r\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\r\n\t\tparams, paramKey;\r\n\r\n\t\tcalcs.forEach(function(column){\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\r\n\t\t\t\tdata.forEach(function(item){\r\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tparamKey = type + \"Params\";\r\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\r\n\r\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowData;\r\n\t}\r\n\r\n\thasTopCalcs(){\r\n\t\treturn\t!!(this.topCalcs.length);\r\n\t}\r\n\r\n\thasBottomCalcs(){\r\n\t\treturn\t!!(this.botCalcs.length);\r\n\t}\r\n\r\n\t//handle table redraw\r\n\tredraw(){\r\n\t\tif(this.topRow){\r\n\t\t\tthis.topRow.normalizeHeight(true);\r\n\t\t}\r\n\t\tif(this.botRow){\r\n\t\t\tthis.botRow.normalizeHeight(true);\r\n\t\t}\r\n\t}\r\n\r\n\t//return the calculated\r\n\tgetResults(){\r\n\t\tvar results = {},\r\n\t\tgroups;\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\r\n\r\n\t\t\tgroups.forEach((group) => {\r\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tresults = {\r\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\r\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\t//get results from a group\r\n\tgetGroupResults(group){\r\n\t\tvar groupObj = group._getSelf(),\r\n\t\tsubGroups = group.getSubGroups(),\r\n\t\tsubGroupResults = {},\r\n\t\tresults = {};\r\n\r\n\t\tsubGroups.forEach((subgroup) => {\r\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\r\n\t\t});\r\n\r\n\t\tresults = {\r\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\r\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\r\n\t\t\tgroups: subGroupResults,\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n}\r\n\r\nColumnCalcs.moduleName = \"columnCalcs\";\r\n\r\n//load defaults\r\nColumnCalcs.calculations = defaultCalculations;\r\n\r\nexport default ColumnCalcs;", "import Module from '../../core/Module.js';\r\n\r\nimport Row from '../../core/row/Row.js';\r\n\r\nclass DataTree extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.indent = 10;\r\n\t\tthis.field = \"\";\r\n\t\tthis.collapseEl = null;\r\n\t\tthis.expandEl = null;\r\n\t\tthis.branchEl = null;\r\n\t\tthis.elementField = false;\r\n\r\n\t\tthis.startOpen = function(){};\r\n\r\n\t\tthis.displayIndex = 0;\r\n\r\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\r\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\r\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\r\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\r\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\r\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\r\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\r\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\r\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\r\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\r\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\r\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//seleccting a parent row selects its children\r\n\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.dataTree){\r\n\t\t\tvar dummyEl = null,\r\n\t\t\toptions = this.table.options;\r\n\r\n\t\t\tthis.field = options.dataTreeChildField;\r\n\t\t\tthis.indent = options.dataTreeChildIndent;\r\n\r\n\t\t\tif(options.dataTreeBranchElement){\r\n\r\n\t\t\t\tif(options.dataTreeBranchElement === true){\r\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\r\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\r\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\r\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(options.dataTreeCollapseElement){\r\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\r\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\r\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\r\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\r\n\t\t\t\tthis.collapseEl.tabIndex = 0;\r\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\r\n\t\t\t}\r\n\r\n\t\t\tif(options.dataTreeExpandElement){\r\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\r\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\r\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\r\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\r\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\r\n\t\t\t\tthis.expandEl.tabIndex = 0;\r\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\tthis.startOpen = function(row, index){\r\n\t\t\t\t\treturn options.dataTreeStartExpanded;\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tthis.startOpen = function(row, index){\r\n\t\t\t\t\treturn options.dataTreeStartExpanded[index];\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\r\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\r\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\r\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\r\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\r\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\r\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\r\n\r\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeElementField(){\r\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\r\n\r\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\r\n\t}\r\n\t\r\n\tgetRowChildren(row){\r\n\t\treturn this.getTreeChildren(row, true);\r\n\t}\r\n\r\n\tcolumnMoving(){\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\r\n\t\t});\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\trowDataChanged(row, visible, updatedData){\r\n\t\tif(this.redrawNeeded(updatedData)){\r\n\t\t\tthis.initializeRow(row);\r\n\r\n\t\t\tif(visible){\r\n\t\t\t\tthis.layoutRow(row);\r\n\t\t\t\tthis.refreshData(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcellValueChanged(cell){\r\n\t\tvar field = cell.column.getField();\r\n\r\n\t\tif(field === this.elementField){\r\n\t\t\tthis.layoutRow(cell.row);\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar childArray = row.getData()[this.field];\r\n\t\tvar isArray = Array.isArray(childArray);\r\n\r\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\r\n\r\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\r\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\r\n\t\t}\r\n\r\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\r\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\r\n\t\t}\r\n\r\n\t\trow.modules.dataTree = {\r\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\r\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\r\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\r\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\r\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\r\n\t\t\tchildren:children,\r\n\t\t};\r\n\t}\r\n\r\n\treinitializeRowChildren(row){\r\n\t\tvar children = this.getTreeChildren(row, false, true);\r\n\r\n\t\tchildren.forEach(function(child){\r\n\t\t\tchild.reinitialize(true);\r\n\t\t});\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\r\n\t\tel = cell.getElement(),\r\n\t\tconfig = row.modules.dataTree;\r\n\r\n\t\tif(config.branchEl){\r\n\t\t\tif(config.branchEl.parentNode){\r\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\r\n\t\t\t}\r\n\t\t\tconfig.branchEl = false;\r\n\t\t}\r\n\r\n\t\tif(config.controlEl){\r\n\t\t\tif(config.controlEl.parentNode){\r\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\r\n\t\t\t}\r\n\t\t\tconfig.controlEl = false;\r\n\t\t}\r\n\r\n\t\tthis.generateControlElement(row, el);\r\n\r\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\r\n\r\n\t\tif(config.index){\r\n\t\t\tif(this.branchEl){\r\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\r\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\r\n\r\n\t\t\t\tif(this.table.rtl){\r\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.table.rtl){\r\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateControlElement(row, el){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\tel = el || row.getCells()[0].getElement(),\r\n\t\toldControl = config.controlEl;\r\n\r\n\t\tif(config.children !== false){\r\n\r\n\t\t\tif(config.open){\r\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\r\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tthis.collapseRow(row);\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\r\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tthis.expandRow(row);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tif(oldControl && oldControl.parentNode === el){\r\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\r\n\t\t\t}else{\r\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetDisplayIndex (index) {\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex () {\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\tgetRows(rows){\r\n\t\tvar output = [];\r\n\r\n\t\trows.forEach((row, i) => {\r\n\t\t\tvar config, children;\r\n\r\n\t\t\toutput.push(row);\r\n\r\n\t\t\tif(row instanceof Row){\r\n\r\n\t\t\t\trow.create();\r\n\r\n\t\t\t\tconfig = row.modules.dataTree.children;\r\n\r\n\t\t\t\tif(!config.index && config.children !== false){\r\n\t\t\t\t\tchildren = this.getChildren(row);\r\n\r\n\t\t\t\t\tchildren.forEach((child) => {\r\n\t\t\t\t\t\tchild.create();\r\n\t\t\t\t\t\toutput.push(child);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetChildren(row, allChildren){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\tchildren = [],\r\n\t\toutput = [];\r\n\r\n\t\tif(config.children !== false && (config.open || allChildren)){\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\r\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\r\n\t\t\t}else{\r\n\t\t\t\tchildren = config.children;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\r\n\t\t\t\tthis.table.modules.sort.sort(children);\r\n\t\t\t}\r\n\r\n\t\t\tchildren.forEach((child) => {\r\n\t\t\t\toutput.push(child);\r\n\r\n\t\t\t\tvar subChildren = this.getChildren(child);\r\n\r\n\t\t\t\tsubChildren.forEach((sub) => {\r\n\t\t\t\t\toutput.push(sub);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgenerateChildren(row){\r\n\t\tvar children = [];\r\n\r\n\t\tvar childArray = row.getData()[this.field];\r\n\r\n\t\tif(!Array.isArray(childArray)){\r\n\t\t\tchildArray = [childArray];\r\n\t\t}\r\n\r\n\t\tchildArray.forEach((childData) => {\r\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\r\n\r\n\t\t\tchildRow.create();\r\n\r\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\r\n\t\t\tchildRow.modules.dataTree.parent = row;\r\n\r\n\t\t\tif(childRow.modules.dataTree.children){\r\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\r\n\t\t\t}\r\n\t\t\tchildren.push(childRow);\r\n\t\t});\r\n\r\n\t\treturn children;\r\n\t}\r\n\r\n\texpandRow(row, silent){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tconfig.open = true;\r\n\r\n\t\t\trow.reinitialize();\r\n\r\n\t\t\tthis.refreshData(true);\r\n\r\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\t}\r\n\r\n\tcollapseRow(row){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tconfig.open = false;\r\n\r\n\t\t\trow.reinitialize();\r\n\r\n\t\t\tthis.refreshData(true);\r\n\r\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleRow(row){\r\n\t\tvar config = row.modules.dataTree;\r\n\r\n\t\tif(config.children !== false){\r\n\t\t\tif(config.open){\r\n\t\t\t\tthis.collapseRow(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.expandRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetTreeParent(row){\r\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\r\n\t}\r\n\r\n\tgetFilteredTreeChildren(row){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toutput = [], children;\r\n\r\n\t\tif(config.children){\r\n\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\r\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\r\n\t\t\t}else{\r\n\t\t\t\tchildren = config.children;\r\n\t\t\t}\r\n\r\n\t\t\tchildren.forEach((childRow) => {\r\n\t\t\t\tif(childRow instanceof Row){\r\n\t\t\t\t\toutput.push(childRow);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\trowDelete(row){\r\n\t\tvar parent = row.modules.dataTree.parent,\r\n\t\tchildIndex;\r\n\r\n\t\tif(parent){\r\n\t\t\tchildIndex = this.findChildIndex(row, parent);\r\n\r\n\t\t\tif(childIndex !== false){\r\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif(!parent.data[this.field].length){\r\n\t\t\t\tdelete parent.data[this.field];\r\n\t\t\t}\r\n\r\n\t\t\tthis.initializeRow(parent);\r\n\t\t\tthis.layoutRow(parent);\r\n\t\t}\r\n\r\n\t\tthis.refreshData(true);\r\n\t}\r\n\r\n\taddTreeChildRow(row, data, top, index){\r\n\t\tvar childIndex = false;\r\n\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\r\n\t\tif(!Array.isArray(row.data[this.field])){\r\n\t\t\trow.data[this.field] = [];\r\n\r\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\r\n\t\t}\r\n\r\n\t\tif(typeof index !== \"undefined\"){\r\n\t\t\tchildIndex = this.findChildIndex(index, row);\r\n\r\n\t\t\tif(childIndex !== false){\r\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(childIndex === false){\r\n\t\t\tif(top){\r\n\t\t\t\trow.data[this.field].unshift(data);\r\n\t\t\t}else{\r\n\t\t\t\trow.data[this.field].push(data);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.initializeRow(row);\r\n\t\tthis.layoutRow(row);\r\n\r\n\t\tthis.refreshData(true);\r\n\t}\r\n\r\n\tfindChildIndex(subject, parent){\r\n\t\tvar match = false;\r\n\r\n\t\tif(typeof subject == \"object\"){\r\n\r\n\t\t\tif(subject instanceof Row){\r\n\t\t\t\t//subject is row element\r\n\t\t\t\tmatch = subject.data;\r\n\t\t\t}else if(subject instanceof RowComponent){\r\n\t\t\t\t//subject is public row component\r\n\t\t\t\tmatch = subject._getSelf().data;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\tif(parent.modules.dataTree){\r\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\r\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif(match){\r\n\t\t\t\t\t\tmatch = match.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if(typeof subject == \"undefined\" || subject === null){\r\n\t\t\tmatch = false\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the index of the row\r\n\t\t\tmatch = parent.data[this.field].find((row) => {\r\n\t\t\t\treturn row.data[this.table.options.index] == subject;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(match){\r\n\r\n\t\t\tif(Array.isArray(parent.data[this.field])){\r\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\r\n\t\t\t}\r\n\r\n\t\t\tif(match == -1){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetTreeChildren(row, component, recurse){\r\n\t\tvar config = row.modules.dataTree,\r\n\t\toutput = [];\r\n\r\n\t\tif(config.children){\r\n\r\n\t\t\tif(!Array.isArray(config.children)){\r\n\t\t\t\tconfig.children = this.generateChildren(row);\r\n\t\t\t}\r\n\r\n\t\t\tconfig.children.forEach((childRow) => {\r\n\t\t\t\tif(childRow instanceof Row){\r\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\r\n\r\n\t\t\t\t\tif(recurse){\r\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetChildField(){\r\n\t\treturn this.field;\r\n\t}\r\n\r\n\tredrawNeeded(data){\r\n\t\tconsole.log(\"needed?\", data)\r\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\r\n\t}\r\n}\r\n\r\nDataTree.moduleName = \"dataTree\";\r\n\r\nexport default DataTree;", "export default function(list, options, setFileContents){\r\n\tvar delimiter = options && options.delimiter ? options.delimiter : \",\",\r\n\tfileContents = [],\r\n\theaders = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tvar item = [];\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"group\":\r\n\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"header\":\r\n\t\t\trow.columns.forEach((col, i) => {\r\n\t\t\t\tif(col && col.depth === 1){\r\n\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\trow.columns.forEach((col) => {\r\n\r\n\t\t\t\tif(col){\r\n\r\n\t\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tcol.value = JSON.stringify(col.value);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\t\tcol.value = \"\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfileContents.push(item.join(delimiter));\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(headers.length){\r\n\t\tfileContents.unshift(headers.join(delimiter));\r\n\t}\r\n\r\n\tfileContents = fileContents.join(\"\\n\");\r\n\r\n\tif(options.bom){\r\n\t\tfileContents = \"\\ufeff\" + fileContents;\r\n\t}\r\n\r\n\tsetFileContents(fileContents, \"text/csv\");\r\n};", "export default function(list, options, setFileContents){\r\n\tvar fileContents = [];\r\n\r\n\tlist.forEach((row) => {\r\n\t\tvar item = {};\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"header\":\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\trow.columns.forEach((col) => {\r\n\t\t\t\tif(col){\r\n\t\t\t\t\titem[col.component.getField()] = col.value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfileContents.push(item);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\r\n\r\n\tsetFileContents(fileContents, \"application/json\");\r\n};", "export default function(list, options, setFileContents){\r\n\tvar header = [],\r\n\tbody = [],\r\n\tautoTableParams = {},\r\n\trowGroupStyles = options.rowGroupStyles || {\r\n\t\tfontStyle: \"bold\",\r\n\t\tfontSize: 12,\r\n\t\tcellPadding: 6,\r\n\t\tfillColor: 220,\r\n\t},\r\n\trowCalcStyles = options.rowCalcStyles || {\r\n\t\tfontStyle: \"bold\",\r\n\t\tfontSize: 10,\r\n\t\tcellPadding: 4,\r\n\t\tfillColor: 232,\r\n\t},\r\n\tjsPDFParams = options.jsPDF || {},\r\n\ttitle = options && options.title ? options.title : \"\";\r\n\r\n\tif(!jsPDFParams.orientation){\r\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\r\n\t}\r\n\r\n\tif(!jsPDFParams.unit){\r\n\t\tjsPDFParams.unit = \"pt\";\r\n\t}\r\n\r\n\t//parse row list\r\n\tlist.forEach((row) => {\r\n\t\tvar item = {};\r\n\r\n\t\tswitch(row.type){\r\n\t\t\tcase \"header\":\r\n\t\t\theader.push(parseRow(row));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tbody.push(parseRow(row, rowGroupStyles));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"calc\":\r\n\t\t\tbody.push(parseRow(row, rowCalcStyles));\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"row\":\r\n\t\t\tbody.push(parseRow(row));\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tfunction parseRow(row, styles){\r\n\t\tvar rowData = [];\r\n\r\n\t\trow.columns.forEach((col) =>{\r\n\t\t\tvar cell;\r\n\r\n\t\t\tif(col){\r\n\t\t\t\tswitch(typeof col.value){\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\tcol.value = JSON.stringify(col.value);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\tcol.value = \"\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcell = {\r\n\t\t\t\t\tcontent:col.value,\r\n\t\t\t\t\tcolSpan:col.width,\r\n\t\t\t\t\trowSpan:col.height,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(styles){\r\n\t\t\t\t\tcell.styles = styles;\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowData.push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowData;\r\n\t}\r\n\r\n\r\n\t//configure PDF\r\n\tvar doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\r\n\r\n\tif(options && options.autoTable){\r\n\t\tif(typeof options.autoTable === \"function\"){\r\n\t\t\tautoTableParams = options.autoTable(doc) || {};\r\n\t\t}else{\r\n\t\t\tautoTableParams = options.autoTable;\r\n\t\t}\r\n\t}\r\n\r\n\tif(title){\r\n\t\tautoTableParams.didDrawPage = function(data) {\r\n\t\t\tdoc.text(title, 40, 30);\r\n\t\t};\r\n\t}\r\n\r\n\tautoTableParams.head = header;\r\n\tautoTableParams.body = body;\r\n\r\n\tdoc.autoTable(autoTableParams);\r\n\r\n\tif(options && options.documentProcessing){\r\n\t\toptions.documentProcessing(doc);\r\n\t}\r\n\r\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\r\n};", "import CoreFeature from '../../../../core/CoreFeature.js';\r\n\r\nexport default function(list, options, setFileContents){\r\n\tvar self = this,\r\n\tsheetName = options.sheetName || \"Sheet1\",\r\n\tworkbook = XLSX.utils.book_new(),\r\n\ttableFeatures = new CoreFeature(this),\r\n\toutput;\r\n\r\n\tworkbook.SheetNames = [];\r\n\tworkbook.Sheets = {};\r\n\r\n\tfunction generateSheet(){\r\n\t\tvar rows = [],\r\n\t\tmerges = [],\r\n\t\tworksheet = {},\r\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\r\n\r\n\t\t//parse row list\r\n\t\tlist.forEach((row, i) => {\r\n\t\t\tvar rowData = [];\r\n\r\n\t\t\trow.columns.forEach(function(col, j){\r\n\r\n\t\t\t\tif(col){\r\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\r\n\r\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\r\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\r\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowData.push(\"\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trows.push(rowData);\r\n\t\t});\r\n\r\n\t\t//convert rows to worksheet\r\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\r\n\r\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\r\n\r\n\t\tif(merges.length){\r\n\t\t\tworksheet[\"!merges\"] = merges;\r\n\t\t}\r\n\r\n\t\treturn worksheet;\r\n\t}\r\n\r\n\tif(options.sheetOnly){\r\n\t\tsetFileContents(generateSheet());\r\n\t\treturn;\r\n\t}\r\n\r\n\tif(options.sheets){\r\n\t\tfor(var sheet in options.sheets){\r\n\r\n\t\t\tif(options.sheets[sheet] === true){\r\n\t\t\t\tworkbook.SheetNames.push(sheet);\r\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\r\n\t\t\t}else{\r\n\r\n\t\t\t\tworkbook.SheetNames.push(sheet);\r\n\r\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\r\n\t\t\t\t\ttype:\"xlsx\",\r\n\t\t\t\t\toptions:{sheetOnly:true},\r\n\t\t\t\t\tactive:self.active,\r\n\t\t\t\t\tintercept:function(data){\r\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tworkbook.SheetNames.push(sheetName);\r\n\t\tworkbook.Sheets[sheetName] = generateSheet();\r\n\t}\r\n\r\n\tif(options.documentProcessing){\r\n\t\tworkbook = options.documentProcessing(workbook);\r\n\t}\r\n\r\n\t//convert workbook to binary array\r\n\tfunction s2ab(s) {\r\n\t\tvar buf = new ArrayBuffer(s.length);\r\n\t\tvar view = new Uint8Array(buf);\r\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n\t\t\treturn buf;\r\n\t}\r\n\r\n\toutput = XLSX.write(workbook, {bookType:'xlsx', bookSST:true, type: 'binary'});\r\n\r\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\r\n};", "export default function(list, options, setFileContents){\r\n\tif(this.modExists(\"export\", true)){\r\n\t\tsetFileContents(this.modules.export.genereateHTMLTable(list), \"text/html\");\r\n\t}\r\n};", "import csv from './downloaders/csv.js';\r\nimport json from './downloaders/json.js';\r\nimport pdf from './downloaders/pdf.js';\r\nimport xlsx from './downloaders/xlsx.js';\r\nimport html from './downloaders/html.js';\r\n\r\nexport default {\r\n\tcsv:csv,\r\n\tjson:json,\r\n\tpdf:pdf,\r\n\txlsx:xlsx,\r\n\thtml:html,\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultDownloaders from './defaults/downloaders.js';\r\n\r\nclass Download extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.registerTableOption(\"downloadReady\", function(data, blob){return blob;}); //function to manipulate download data\r\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\r\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\r\n\r\n\t\tthis.registerColumnOption(\"download\");\r\n\t\tthis.registerColumnOption(\"titleDownload\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\r\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tdownloadToTab(type, filename, options, active){\r\n\t\tthis.download(type, filename, options, active, true);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\t//trigger file download\r\n\tdownload(type, filename, options, range, interceptCallback){\r\n\t\tvar downloadFunc = false;\r\n\r\n\t\tfunction buildLink(data, mime){\r\n\t\t\tif(interceptCallback){\r\n\t\t\t\tif(interceptCallback === true){\r\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tinterceptCallback(data);\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(typeof type == \"function\"){\r\n\t\t\tdownloadFunc = type;\r\n\t\t}else{\r\n\t\t\tif(Download.downloaders[type]){\r\n\t\t\t\tdownloadFunc = Download.downloaders[type];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(downloadFunc){\r\n\t\t\tvar list = this.generateExportList(range);\r\n\r\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateExportList(range){\r\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\r\n\r\n\t\t//assign group header formatter\r\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\r\n\r\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\r\n\t\t\tgroupHeader = [groupHeader];\r\n\t\t}\r\n\r\n\t\tlist.forEach((row) => {\r\n\t\t\tvar group;\r\n\r\n\t\t\tif(row.type === \"group\"){\r\n\t\t\t\tgroup = row.columns[0];\r\n\r\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\r\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn list;\r\n\t}\r\n\r\n\ttriggerDownload(data, mime, type, filename, newTab){\r\n\t\tvar element = document.createElement('a'),\r\n\t\tblob = new Blob([data],{type:mime}),\r\n\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\r\n\r\n\t\tblob = this.table.options.downloadReady(data, blob);\r\n\r\n\t\tif(blob){\r\n\r\n\t\t\tif(newTab){\r\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\r\n\t\t\t}else{\r\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\r\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\r\n\r\n\t\t\t\t\t//set file title\r\n\t\t\t\t\telement.setAttribute('download', filename);\r\n\r\n\t\t\t\t\t//trigger download\r\n\t\t\t\t\telement.style.display = 'none';\r\n\t\t\t\t\tdocument.body.appendChild(element);\r\n\t\t\t\t\telement.click();\r\n\r\n\t\t\t\t\t//remove temporary link element\r\n\t\t\t\t\tdocument.body.removeChild(element);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\r\n\t\t}\r\n\t}\r\n\r\n\tcommsReceived(table, action, data){\r\n\t\tswitch(action){\r\n\t\t\tcase \"intercept\":\r\n\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nDownload.moduleName = \"download\";\r\n\r\n//load defaults\r\nDownload.downloaders = defaultDownloaders;\r\n\r\nexport default Download;", "export default function maskInput(el, options){\r\n\tvar mask = options.mask,\r\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\r\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\r\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\r\n\tsuccess = false;\r\n\r\n\tfunction fillSymbols(index){\r\n\t\tvar symbol = mask[index];\r\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\r\n\t\t\tel.value = el.value + \"\" + symbol;\r\n\t\t\tfillSymbols(index+1);\r\n\t\t}\r\n\t}\r\n\r\n\tel.addEventListener(\"keydown\", (e) => {\r\n\t\tvar index = el.value.length,\r\n\t\tchar = e.key;\r\n\r\n\t\tif(e.keyCode > 46){\r\n\t\t\tif(index >= mask.length){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tsuccess = false;\r\n\t\t\t\treturn false;\r\n\t\t\t}else{\r\n\t\t\t\tswitch(mask[index]){\r\n\t\t\t\t\tcase maskLetter:\r\n\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase maskNumber:\r\n\t\t\t\t\tif(isNaN(char)){\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase maskWildcard:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tif(char !== mask[index]){\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tsuccess = false;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsuccess = true;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t});\r\n\r\n\tel.addEventListener(\"keyup\", (e) => {\r\n\t\tif(e.keyCode > 46){\r\n\t\t\tif(options.maskAutoFill){\r\n\t\t\t\tfillSymbols(el.value.length);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tif(!el.placeholder){\r\n\t\tel.placeholder = mask;\r\n\t}\r\n\r\n\tif(options.maskAutoFill){\r\n\t\tfillSymbols(el.value.length);\r\n\t}\r\n}", "import maskInput from '../../inputMask.js';\r\n\r\n//input element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\t//create and style input\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t});\r\n\r\n\tfunction onChange(e){\r\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\r\n\t\t\tif(success(input.value)){\r\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur or change\r\n\tinput.addEventListener(\"change\", onChange);\r\n\tinput.addEventListener(\"blur\", onChange);\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\t// case 9:\r\n\t\t\tcase 13:\r\n\t\t\tonChange(e);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\te.stopPropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tmaskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n};", "import maskInput from '../../inputMask.js';\r\n\r\n//resizable text area element\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n    var self = this,\r\n    cellValue = cell.getValue(),\r\n    vertNav = editorParams.verticalNavigation || \"hybrid\",\r\n    value = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\r\n    count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\r\n    input = document.createElement(\"textarea\"),\r\n    scrollHeight = 0;\r\n\r\n    //create and style input\r\n    input.style.display = \"block\";\r\n    input.style.padding = \"2px\";\r\n    input.style.height = \"100%\";\r\n    input.style.width = \"100%\";\r\n    input.style.boxSizing = \"border-box\";\r\n    input.style.whiteSpace = \"pre-wrap\";\r\n    input.style.resize = \"none\";\r\n\r\n    if(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n        for (let key in editorParams.elementAttributes){\r\n            if(key.charAt(0) == \"+\"){\r\n                key = key.slice(1);\r\n                input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n            }else{\r\n                input.setAttribute(key, editorParams.elementAttributes[key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    input.value = value;\r\n\r\n    onRendered(function(){\r\n        input.focus({preventScroll: true});\r\n        input.style.height = \"100%\";\r\n\r\n        input.scrollHeight;\r\n        input.style.height = input.scrollHeight + \"px\";\r\n        cell.getRow().normalizeHeight();\r\n    });\r\n\r\n    function onChange(e){\r\n\r\n        if(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\r\n\r\n            if(success(input.value)){\r\n                cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\r\n            }\r\n\r\n            setTimeout(function(){\r\n                cell.getRow().normalizeHeight();\r\n            },300)\r\n        }else{\r\n            cancel();\r\n        }\r\n    }\r\n\r\n    //submit new value on blur or change\r\n    input.addEventListener(\"change\", onChange);\r\n    input.addEventListener(\"blur\", onChange);\r\n\r\n    input.addEventListener(\"keyup\", function(){\r\n\r\n        input.style.height = \"\";\r\n\r\n        var heightNow = input.scrollHeight;\r\n\r\n        input.style.height = heightNow + \"px\";\r\n\r\n        if(heightNow != scrollHeight){\r\n            scrollHeight = heightNow;\r\n            cell.getRow().normalizeHeight();\r\n        }\r\n    });\r\n\r\n    input.addEventListener(\"keydown\", function(e){\r\n\r\n        switch(e.keyCode){\r\n            case 27:\r\n            cancel();\r\n            break;\r\n\r\n            case 38: //up arrow\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n            }\r\n\r\n            break;\r\n\r\n            case 40: //down arrow\r\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\r\n                e.stopImmediatePropagation();\r\n                e.stopPropagation();\r\n            }\r\n            break;\r\n\r\n            case 35:\r\n            case 36:\r\n            e.stopPropagation();\r\n            break;\r\n        }\r\n    });\r\n\r\n    if(editorParams.mask){\r\n        maskInput(input, editorParams);\r\n    }\r\n\r\n    return input;\r\n};", "import maskInput from '../../inputMask.js';\r\n\r\n//input element with type of number\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", \"number\");\r\n\r\n\tif(typeof editorParams.max != \"undefined\"){\r\n\t\tinput.setAttribute(\"max\", editorParams.max);\r\n\t}\r\n\r\n\tif(typeof editorParams.min != \"undefined\"){\r\n\t\tinput.setAttribute(\"min\", editorParams.min);\r\n\t}\r\n\r\n\tif(typeof editorParams.step != \"undefined\"){\r\n\t\tinput.setAttribute(\"step\", editorParams.step);\r\n\t}\r\n\r\n\t//create and style input\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\r\n\tvar blurFunc = function(e){\r\n\t\tonChange();\r\n\t};\r\n\r\n\tonRendered(function () {\r\n\t\t//submit new value on blur\r\n\t\tinput.removeEventListener(\"blur\", blurFunc);\r\n\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\r\n\t\t//submit new value on blur\r\n\t\tinput.addEventListener(\"blur\", blurFunc);\r\n\t});\r\n\r\n\tfunction onChange(){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(!isNaN(value) && value !==\"\"){\r\n\t\t\tvalue = Number(value);\r\n\t\t}\r\n\r\n\t\tif(value !== cellValue){\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 13:\r\n\t\t\t// case 9:\r\n\t\t\tonChange();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tcase 40: //down arrow\r\n\t\t\tif(vertNav == \"editor\"){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 35:\r\n\t\t\tcase 36:\r\n\t\t\te.stopPropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tmaskInput(input, editorParams);\r\n\t}\r\n\r\n\treturn input;\r\n};", "//input element with type of number\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar cellValue = cell.getValue(),\r\n\tinput = document.createElement(\"input\");\r\n\r\n\tinput.setAttribute(\"type\", \"range\");\r\n\r\n\tif (typeof editorParams.max != \"undefined\") {\r\n\t\tinput.setAttribute(\"max\", editorParams.max);\r\n\t}\r\n\r\n\tif (typeof editorParams.min != \"undefined\") {\r\n\t\tinput.setAttribute(\"min\", editorParams.min);\r\n\t}\r\n\r\n\tif (typeof editorParams.step != \"undefined\") {\r\n\t\tinput.setAttribute(\"step\", editorParams.step);\r\n\t}\r\n\r\n\t//create and style input\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = cellValue;\r\n\r\n\tonRendered(function () {\r\n\t\tinput.focus({preventScroll: true});\r\n\t\tinput.style.height = \"100%\";\r\n\t});\r\n\r\n\tfunction onChange(){\r\n\t\tvar value = input.value;\r\n\r\n\t\tif(!isNaN(value) && value !==\"\"){\r\n\t\t\tvalue = Number(value);\r\n\t\t}\r\n\r\n\t\tif(value != cellValue){\r\n\t\t\tif(success(value)){\r\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcancel();\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tonChange();\r\n\t});\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 13:\r\n\t\t\t// case 9:\r\n\t\t\tonChange();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27:\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\treturn input;\r\n};", "import Helpers from '../../../../core/tools/Helpers.js';\r\n\r\n//dropdown select editor\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\tcellEl = cell.getElement(),\r\n\tinitialValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinitialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? (Array.isArray(initialValue) ? initialValue : [initialValue]) : (typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : []),\r\n\tinput = document.createElement(\"input\"),\r\n\tlistEl = document.createElement(\"div\"),\r\n\tmultiselect = editorParams.multiselect,\r\n\tdataItems = [],\r\n\tcurrentItem = {},\r\n\tdisplayItems = [],\r\n\tcurrentItems = [],\r\n\tblurable = true,\r\n\tblockListShow = false,\r\n\tsearchWord = \"\",\r\n\tsearchWordTimeout = null;\r\n\r\n\tif(Array.isArray(editorParams) || (!Array.isArray(editorParams) && typeof editorParams === \"object\" && !editorParams.values)){\r\n\t\tconsole.warn(\"DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object\");\r\n\t\teditorParams = {values:editorParams};\r\n\t}\r\n\r\n\tfunction getUniqueColumnValues(field){\r\n\t\tvar output = {},\r\n\t\tdata = self.table.getData(),\r\n\t\tcolumn;\r\n\r\n\t\tif(field){\r\n\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\r\n\t\t}else{\r\n\t\t\tcolumn = cell.getColumn()._getSelf();\r\n\t\t}\r\n\r\n\t\tif(column){\r\n\t\t\tdata.forEach(function(row){\r\n\t\t\t\tvar val = column.getFieldValue(row);\r\n\r\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n\t\t\t\t\toutput[val] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"unable to find matching column to create select lookup list:\", field);\r\n\t\t}\r\n\r\n\t\treturn Object.keys(output);\r\n\t}\r\n\r\n\tfunction parseItems(inputValues, curentValues){\r\n\t\tvar dataList = [];\r\n\t\tvar displayList = [];\r\n\r\n\t\tfunction processComplexListItem(item){\r\n\t\t\tvar item = {\r\n\t\t\t\tlabel:item.label,\r\n\t\t\t\tvalue:item.value,\r\n\t\t\t\titemParams:item.itemParams,\r\n\t\t\t\telementAttributes: item.elementAttributes,\r\n\t\t\t\telement:false,\r\n\t\t\t};\r\n\r\n\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t// }\r\n\r\n\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\tsetItem(item);\r\n\t\t\t}\r\n\r\n\t\t\tdataList.push(item);\r\n\t\t\tdisplayList.push(item);\r\n\r\n\t\t\treturn item;\r\n\t\t}\r\n\r\n\t\tif(typeof inputValues == \"function\"){\r\n\t\t\tinputValues = inputValues(cell);\r\n\t\t}\r\n\r\n\t\tif(Array.isArray(inputValues)){\r\n\t\t\tinputValues.forEach(function(value){\r\n\t\t\t\tvar item;\r\n\r\n\t\t\t\tif(typeof value === \"object\"){\r\n\r\n\t\t\t\t\tif(value.options){\r\n\t\t\t\t\t\titem = {\r\n\t\t\t\t\t\t\tlabel:value.label,\r\n\t\t\t\t\t\t\tgroup:true,\r\n\t\t\t\t\t\t\titemParams:value.itemParams,\r\n\t\t\t\t\t\t\telementAttributes:value.elementAttributes,\r\n\t\t\t\t\t\t\telement:false,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tdisplayList.push(item);\r\n\r\n\t\t\t\t\t\tvalue.options.forEach(function(item){\r\n\t\t\t\t\t\t\tprocessComplexListItem(item);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tprocessComplexListItem(value);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\titem = {\r\n\t\t\t\t\t\tlabel:value,\r\n\t\t\t\t\t\tvalue:value,\r\n\t\t\t\t\t\telement:false,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\t\t\tsetItem(item);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataList.push(item);\r\n\t\t\t\t\tdisplayList.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tfor(var key in inputValues){\r\n\t\t\t\tvar item = {\r\n\t\t\t\t\tlabel:inputValues[key],\r\n\t\t\t\t\tvalue:key,\r\n\t\t\t\t\telement:false,\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// if(item.value === curentValue || (!isNaN(parseFloat(item.value)) && !isNaN(parseFloat(item.value)) && parseFloat(item.value) === parseFloat(curentValue))){\r\n\t\t\t\t// \tsetCurrentItem(item);\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tif(curentValues.indexOf(item.value) > -1){\r\n\t\t\t\t\tsetItem(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataList.push(item);\r\n\t\t\t\tdisplayList.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(editorParams.sortValuesList){\r\n\t\t\tdataList.sort((a, b) => {\r\n\t\t\t\treturn a.label < b.label ? -1 : (a.label > b.label ? 1 : 0);\r\n\t\t\t});\r\n\r\n\t\t\tdisplayList.sort((a, b) => {\r\n\t\t\t\treturn a.label < b.label ? -1 : (a.label > b.label ? 1 : 0);\r\n\t\t\t});\r\n\r\n\t\t\tif(editorParams.sortValuesList !== \"asc\"){\r\n\t\t\t\tdataList.reverse();\r\n\t\t\t\tdisplayList.reverse();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tdataItems = dataList;\r\n\t\tdisplayItems = displayList;\r\n\r\n\t\tfillList();\r\n\t}\r\n\r\n\tfunction fillList(){\r\n\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\r\n\t\tdisplayItems.forEach(function(item){\r\n\r\n\t\t\tvar el = item.element;\r\n\r\n\t\t\tif(!el){\r\n\t\t\t\tel = document.createElement(\"div\");\r\n\t\t\t\titem.label = editorParams.listItemFormatter ? editorParams.listItemFormatter(item.value, item.label, cell, el, item.itemParams) : item.label;\r\n\t\t\t\tif(item.group){\r\n\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-group\");\r\n\t\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\r\n\t\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\t\tel.innerHTML = item.label === \"\" ? \"&nbsp;\" : item.label;\r\n\r\n\t\t\t\t\tel.addEventListener(\"click\", function(){\r\n\t\t\t\t\t\tblockListShow = true;\r\n\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tblockListShow = false;\r\n\t\t\t\t\t\t}, 10);\r\n\r\n\t\t\t\t\t\t// setCurrentItem(item);\r\n\t\t\t\t\t\t// chooseItem();\r\n\t\t\t\t\t\tif(multiselect){\r\n\t\t\t\t\t\t\ttoggleItem(item);\r\n\t\t\t\t\t\t\tinput.focus();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tchooseItem(item);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// if(item === currentItem){\r\n\t\t\t\t\t// \tel.classList.add(\"active\");\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tif(currentItems.indexOf(item) > -1){\r\n\t\t\t\t\t\tel.classList.add(\"active\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item.elementAttributes && typeof item.elementAttributes == \"object\"){\r\n\t\t\t\t\tfor (let key in item.elementAttributes){\r\n\t\t\t\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\t\t\t\tkey = key.slice(1);\r\n\t\t\t\t\t\t\tel.setAttribute(key, input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tel.setAttribute(key, item.elementAttributes[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tel.addEventListener(\"mousedown\", function(){\r\n\t\t\t\t\tblurable = false;\r\n\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tblurable = true;\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.element = el;\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(el);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction setCurrentItem(item, active){\r\n\r\n\t\tif(!multiselect && currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"active\");\r\n\t\t}\r\n\r\n\t\tif(currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"focused\");\r\n\t\t}\r\n\r\n\t\tcurrentItem = item;\r\n\r\n\t\tif(item.element){\r\n\t\t\titem.element.classList.add(\"focused\");\r\n\t\t\tif(active){\r\n\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(item && item.element && item.element.scrollIntoView){\r\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// function chooseItem(){\r\n\t// \thideList();\r\n\r\n\t// \tif(initialValue !== currentItem.value){\r\n\t// \t\tinitialValue = currentItem.value;\r\n\t// \t\tsuccess(currentItem.value);\r\n\t// \t}else{\r\n\t// \t\tcancel();\r\n\t// \t}\r\n\t// }\r\n\r\n\tfunction setItem(item) {\r\n\t\tvar index = currentItems.indexOf(item);\r\n\r\n\t\tif(index == -1){\r\n\t\t\tcurrentItems.push(item);\r\n\t\t\tsetCurrentItem(item, true);\r\n\t\t}\r\n\r\n\t\tfillInput();\r\n\t}\r\n\r\n\tfunction unsetItem(index) {\r\n\t\tvar item = currentItems[index];\r\n\r\n\t\tif(index > -1){\r\n\t\t\tcurrentItems.splice(index, 1);\r\n\t\t\tif(item.element){\r\n\t\t\t\titem.element.classList.remove(\"active\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction toggleItem(item) {\r\n\t\tif(!item){\r\n\t\t\titem = currentItem;\r\n\t\t}\r\n\r\n\t\tvar index = currentItems.indexOf(item);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tunsetItem(index);\r\n\t\t}else{\r\n\t\t\tif(multiselect !== true && currentItems.length >= multiselect){\r\n\t\t\t\tunsetItem(0);\r\n\t\t\t}\r\n\r\n\t\t\tsetItem(item);\r\n\t\t}\r\n\r\n\t\tfillInput();\r\n\r\n\t}\r\n\r\n\tfunction chooseItem(item){\r\n\t\thideList();\r\n\r\n\t\tif(!item){\r\n\t\t\titem = currentItem;\r\n\t\t}\r\n\r\n\t\tif(item){\r\n\t\t\tinput.value = item.label;\r\n\t\t\tsuccess(item.value);\r\n\t\t}\r\n\r\n\t\tinitialDisplayValue = [item.value];\r\n\t}\r\n\r\n\r\n\tfunction chooseItems(silent){\r\n\t\tif(!silent){\r\n\t\t\thideList();\r\n\t\t}\r\n\r\n\t\tvar output = [];\r\n\r\n\t\tcurrentItems.forEach((item) => {\r\n\t\t\toutput.push(item.value);\r\n\t\t});\r\n\r\n\t\tinitialDisplayValue = output;\r\n\r\n\t\tsuccess(output);\r\n\t}\r\n\r\n\tfunction fillInput(){\r\n\t\tvar output = [];\r\n\r\n\t\tcurrentItems.forEach((item) => {\r\n\t\t\toutput.push(item.label);\r\n\t\t});\r\n\r\n\t\tinput.value = output.join(\", \");\r\n\r\n\t\tif(self.currentCell === false){\r\n\t\t\tchooseItems(true);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction unsetItems() {\r\n\r\n\t\tvar len = currentItems.length;\r\n\r\n\t\tfor(let i = 0; i < len; i++){\r\n\t\t\tunsetItem(0);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction cancelItem(){\r\n\t\thideList();\r\n\t\tcancel();\r\n\t}\r\n\r\n\tfunction showList(){\r\n\t\tcurrentItems = [];\r\n\r\n\t\tif(!listEl.parentNode){\r\n\t\t\tif(editorParams.values === true){\r\n\t\t\t\tparseItems(getUniqueColumnValues(), initialDisplayValue);\r\n\t\t\t}else if(typeof editorParams.values === \"string\"){\r\n\t\t\t\tparseItems(getUniqueColumnValues(editorParams.values), initialDisplayValue);\r\n\t\t\t}else{\r\n\t\t\t\tparseItems(editorParams.values || [], initialDisplayValue);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar offset = Helpers.elOffset(cellEl);\r\n\r\n\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\r\n\r\n\t\t\tlistEl.style.top = (offset.top + cellEl.offsetHeight) + \"px\";\r\n\t\t\tlistEl.style.left = offset.left + \"px\";\r\n\r\n\r\n\t\t\tlistEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tblurable = false;\r\n\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tblurable = true;\r\n\t\t\t\t}, 10);\r\n\t\t\t});\r\n\r\n\t\t\tdocument.body.appendChild(listEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideList(){\r\n\t\tif(listEl.parentNode){\r\n\t\t\tlistEl.parentNode.removeChild(listEl);\r\n\t\t}\r\n\r\n\t\tremoveScrollListener();\r\n\t}\r\n\r\n\tfunction removeScrollListener() {\r\n\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\r\n\t}\r\n\r\n\tfunction scrollTovalue(char){\r\n\r\n\t\tclearTimeout(searchWordTimeout);\r\n\r\n\t\tvar character = String.fromCharCode(event.keyCode).toLowerCase();\r\n\t\tsearchWord += character.toLowerCase();\r\n\r\n\t\tvar match = dataItems.find((item) => {\r\n\t\t\treturn typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(searchWord);\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tsetCurrentItem(match, !multiselect);\r\n\t\t}\r\n\r\n\t\tsearchWordTimeout = setTimeout(() => {\r\n\t\t\tsearchWord = \"\";\r\n\t\t}, 800)\r\n\t}\r\n\r\n\t//style input\r\n\tinput.setAttribute(\"type\", \"text\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\tinput.style.cursor = \"default\";\r\n\tinput.readOnly = (this.currentCell != false);\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : \"\";\r\n\r\n\t// if(editorParams.values === true){\r\n\t// \tparseItems(getUniqueColumnValues(), initialValue);\r\n\t// }else if(typeof editorParams.values === \"string\"){\r\n\t// \tparseItems(getUniqueColumnValues(editorParams.values), initialValue);\r\n\t// }else{\r\n\t// \tparseItems(editorParams.values || [], initialValue);\r\n\t// }\r\n\r\n\tinput.addEventListener(\"search\", function(e){\r\n\t\tif(!input.value){\r\n\t\t\tunsetItems();\r\n\t\t\tchooseItems();\r\n\t\t}\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tvar index;\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tindex = dataItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index > 0){\r\n\t\t\t\t\tsetCurrentItem(dataItems[index - 1], !multiselect);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 40: //down arrow\r\n\t\t\tindex = dataItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index < dataItems.length - 1)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index < dataItems.length - 1){\r\n\t\t\t\t\tif(index == -1){\r\n\t\t\t\t\t\tsetCurrentItem(dataItems[0], !multiselect);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetCurrentItem(dataItems[index + 1], !multiselect);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\t// chooseItem();\r\n\r\n\t\t\tif(multiselect){\r\n\t\t\t\ttoggleItem();\r\n\t\t\t}else{\r\n\t\t\t\tchooseItem();\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancelItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 9: //tab\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tif(self.currentCell === false){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tif(e.keyCode >= 38 && e.keyCode <= 90){\r\n\t\t\t\tscrollTovalue(e.keyCode);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tif(blurable){\r\n\t\t\tif(multiselect){\r\n\t\t\t\tchooseItems();\r\n\t\t\t}else{\r\n\t\t\t\tcancelItem();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"focus\", function(e){\r\n\t\tif(!blockListShow){\r\n\t\t\tshowList();\r\n\t\t}\r\n\t});\r\n\r\n\t//style list element\r\n\tlistEl = document.createElement(\"div\");\r\n\tlistEl.classList.add(\"tabulator-edit-select-list\");\r\n\r\n\tonRendered(function(){\r\n\t\tinput.style.height = \"100%\";\r\n\t\tinput.focus({preventScroll: true});\r\n\t});\r\n\r\n\tsetTimeout(() => {\r\n\t\tthis.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\r\n\t}, 10);\r\n\r\n\treturn input;\r\n};", "import Helpers from '../../../../core/tools/Helpers.js';\r\nimport maskInput from '../../inputMask.js';\r\n\r\n//autocomplete\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\tcellEl = cell.getElement(),\r\n\tinitialValue = cell.getValue(),\r\n\tvertNav = editorParams.verticalNavigation || \"editor\",\r\n\tinitialDisplayValue = typeof initialValue !== \"undefined\" || initialValue === null ? initialValue : (typeof editorParams.defaultValue !== \"undefined\" ? editorParams.defaultValue : \"\"),\r\n\tinput = document.createElement(\"input\"),\r\n\tlistEl = document.createElement(\"div\"),\r\n\tallItems = [],\r\n\tdisplayItems = [],\r\n\tvalues = [],\r\n\tcurrentItem = false,\r\n\tblurable = true,\r\n\tuniqueColumnValues = false;\r\n\r\n\t//style input\r\n\tinput.setAttribute(\"type\", \"search\");\r\n\r\n\tinput.style.padding = \"4px\";\r\n\tinput.style.width = \"100%\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//style list element\r\n\tlistEl.classList.add(\"tabulator-edit-select-list\");\r\n\r\n\tlistEl.addEventListener(\"mousedown\", function(e){\r\n\t\tblurable = false;\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\tblurable = true;\r\n\t\t}, 10);\r\n\t});\r\n\r\n\r\n\tfunction genUniqueColumnValues(){\r\n\t\tif(editorParams.values === true){\r\n\t\t\tuniqueColumnValues = getUniqueColumnValues();\r\n\t\t}else if(typeof editorParams.values === \"string\"){\r\n\t\t\tuniqueColumnValues = getUniqueColumnValues(editorParams.values);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getUniqueColumnValues(field){\r\n\t\tvar output = {},\r\n\t\tdata = self.table.getData(),\r\n\t\tcolumn;\r\n\r\n\t\tif(field){\r\n\t\t\tcolumn = self.table.columnManager.getColumnByField(field);\r\n\t\t}else{\r\n\t\t\tcolumn = cell.getColumn()._getSelf();\r\n\t\t}\r\n\r\n\t\tif(column){\r\n\t\t\tdata.forEach(function(row){\r\n\t\t\t\tvar val = column.getFieldValue(row);\r\n\r\n\t\t\t\tif(val !== null && typeof val !== \"undefined\" && val !== \"\"){\r\n\t\t\t\t\toutput[val] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(editorParams.sortValuesList){\r\n\t\t\t\tif(editorParams.sortValuesList == \"asc\"){\r\n\t\t\t\t\toutput = Object.keys(output).sort();\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput = Object.keys(output).sort().reverse();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\toutput = Object.keys(output);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"unable to find matching column to create autocomplete lookup list:\", field);\r\n\t\t}\r\n\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfunction filterList(term, intialLoad){\r\n\t\tvar matches = [],\r\n\t\tvalues, items, searchEl;\r\n\r\n\t\t//lookup base values list\r\n\t\tif(uniqueColumnValues){\r\n\t\t\tvalues = uniqueColumnValues;\r\n\t\t}else{\r\n\t\t\tvalues = editorParams.values || [];\r\n\t\t}\r\n\r\n\t\tif(editorParams.searchFunc){\r\n\t\t\tmatches = editorParams.searchFunc(term, values);\r\n\r\n\t\t\tif(matches instanceof Promise){\r\n\r\n\t\t\t\taddNotice(typeof editorParams.searchingPlaceholder !== \"undefined\" ? editorParams.searchingPlaceholder : \"Searching...\");\r\n\r\n\t\t\t\tmatches.then((result) => {\r\n\t\t\t\t\tfillListIfNotEmpty(parseItems(result), intialLoad);\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.err(\"error in autocomplete search promise:\", err);\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tfillListIfNotEmpty(parseItems(matches), intialLoad);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\titems = parseItems(values);\r\n\r\n\t\t\tif(term === \"\"){\r\n\t\t\t\tif(editorParams.showListOnEmpty){\r\n\t\t\t\t\tmatches = items;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\titems.forEach(function(item){\r\n\t\t\t\t\tif(item.value !== null || typeof item.value !== \"undefined\"){\r\n\t\t\t\t\t\tif(String(item.value).toLowerCase().indexOf(String(term).toLowerCase()) > -1 || String(item.title).toLowerCase().indexOf(String(term).toLowerCase()) > -1){\r\n\t\t\t\t\t\t\tmatches.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfillListIfNotEmpty(matches, intialLoad);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction addNotice(notice){\r\n\t\tvar searchEl = document.createElement(\"div\");\r\n\r\n\t\tclearList();\r\n\r\n\t\tif(notice !== false){\r\n\t\t\tsearchEl.classList.add(\"tabulator-edit-select-list-notice\");\r\n\t\t\tsearchEl.tabIndex = 0;\r\n\r\n\t\t\tif(notice instanceof Node){\r\n\t\t\t\tsearchEl.appendChild(notice);\r\n\t\t\t}else{\r\n\t\t\t\tsearchEl.innerHTML = notice;\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(searchEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseItems(inputValues){\r\n\t\tvar itemList = [];\r\n\r\n\t\tif(Array.isArray(inputValues)){\r\n\t\t\tinputValues.forEach(function(value){\r\n\r\n\t\t\t\tvar item = {};\r\n\r\n\t\t\t\tif(typeof value === \"object\"){\r\n\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value.value, value.label) : value.label;\r\n\t\t\t\t\titem.value = value.value;\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem.title = editorParams.listItemFormatter ? editorParams.listItemFormatter(value, value) : value;\r\n\t\t\t\t\titem.value = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\titemList.push(item);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tfor(var key in inputValues){\r\n\t\t\t\tvar item = {\r\n\t\t\t\t\ttitle:editorParams.listItemFormatter ? editorParams.listItemFormatter(key, inputValues[key]) : inputValues[key],\r\n\t\t\t\t\tvalue:key,\r\n\t\t\t\t};\r\n\r\n\t\t\t\titemList.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn itemList;\r\n\t}\r\n\r\n\tfunction clearList(){\r\n\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\t}\r\n\r\n\tfunction fillListIfNotEmpty(items, intialLoad){\r\n\t\tif(items.length){\r\n\t\t\tfillList(items, intialLoad);\r\n\t\t}else{\r\n\t\t\tif(editorParams.emptyPlaceholder){\r\n\t\t\t\taddNotice(editorParams.emptyPlaceholder);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fillList(items, intialLoad){\r\n\t\tvar current = false;\r\n\r\n\t\tclearList();\r\n\r\n\t\tdisplayItems = items;\r\n\r\n\t\tdisplayItems.forEach(function(item){\r\n\t\t\tvar el = item.element;\r\n\r\n\t\t\tif(!el){\r\n\t\t\t\tel = document.createElement(\"div\");\r\n\t\t\t\tel.classList.add(\"tabulator-edit-select-list-item\");\r\n\t\t\t\tel.tabIndex = 0;\r\n\t\t\t\tel.innerHTML = item.title;\r\n\r\n\t\t\t\tel.addEventListener(\"click\", function(e){\r\n\t\t\t\t\tsetCurrentItem(item);\r\n\t\t\t\t\tchooseItem();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tel.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\t\tblurable = false;\r\n\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tblurable = true;\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.element = el;\r\n\r\n\t\t\t\tif(intialLoad && item.value == initialValue){\r\n\t\t\t\t\tinput.value = item.title;\r\n\t\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t\t\tcurrent = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item === currentItem){\r\n\t\t\t\t\titem.element.classList.add(\"active\");\r\n\t\t\t\t\tcurrent = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlistEl.appendChild(el);\r\n\t\t});\r\n\r\n\t\tif(!current){\r\n\t\t\tsetCurrentItem(false);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction chooseItem(){\r\n\t\thideList();\r\n\r\n\t\tif(currentItem){\r\n\t\t\tif(initialValue !== currentItem.value){\r\n\t\t\t\tinitialValue = currentItem.value;\r\n\t\t\t\tinput.value = currentItem.title;\r\n\t\t\t\tsuccess(currentItem.value);\r\n\t\t\t}else{\r\n\t\t\t\tcancel();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(editorParams.freetext){\r\n\t\t\t\tinitialValue = input.value;\r\n\t\t\t\tsuccess(input.value);\r\n\t\t\t}else{\r\n\t\t\t\tif(editorParams.allowEmpty && input.value === \"\"){\r\n\t\t\t\t\tinitialValue = input.value;\r\n\t\t\t\t\tsuccess(input.value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcancel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction showList(){\r\n\t\tif(!listEl.parentNode){\r\n\t\t\twhile(listEl.firstChild) listEl.removeChild(listEl.firstChild);\r\n\r\n\t\t\tvar offset = Helpers.elOffset(cellEl);\r\n\r\n\t\t\tlistEl.style.minWidth = cellEl.offsetWidth + \"px\";\r\n\r\n\t\t\tlistEl.style.top = (offset.top + cellEl.offsetHeight) + \"px\";\r\n\t\t\tlistEl.style.left = offset.left + \"px\";\r\n\t\t\tdocument.body.appendChild(listEl);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setCurrentItem(item, showInputValue){\r\n\t\tif(currentItem && currentItem.element){\r\n\t\t\tcurrentItem.element.classList.remove(\"active\");\r\n\t\t}\r\n\r\n\t\tcurrentItem = item;\r\n\r\n\t\tif(item && item.element){\r\n\t\t\titem.element.classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\tif(item && item.element && item.element.scrollIntoView){\r\n\t\t\titem.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction hideList(){\r\n\t\tif(listEl.parentNode){\r\n\t\t\tlistEl.parentNode.removeChild(listEl);\r\n\t\t}\r\n\r\n\t\tremoveScrollListener();\r\n\t}\r\n\r\n\r\n\tfunction cancelItem(){\r\n\t\thideList();\r\n\t\tcancel();\r\n\t}\r\n\r\n\tfunction removeScrollListener() {\r\n\t\tself.table.rowManager.element.removeEventListener(\"scroll\", cancelItem);\r\n\t}\r\n\r\n\t//allow key based navigation\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tvar index;\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tindex = displayItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index)){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index > 0){\r\n\t\t\t\t\tsetCurrentItem(displayItems[index - 1]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetCurrentItem(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 40: //down arrow\r\n\r\n\t\t\tindex = displayItems.indexOf(currentItem);\r\n\r\n\t\t\tif(vertNav == \"editor\" || (vertNav == \"hybrid\" && index < displayItems.length - 1)){\r\n\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tif(index < displayItems.length - 1){\r\n\t\t\t\t\tif(index == -1){\r\n\t\t\t\t\t\tsetCurrentItem(displayItems[0]);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsetCurrentItem(displayItems[index + 1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\te.stopPropagation();\r\n\t\t\t// e.preventDefault();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\tchooseItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancelItem();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 36: //home\r\n\t\t\tcase 35: //end\r\n\t\t\t//prevent table navigation while using input element\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"keyup\", function(e){\r\n\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 38: //up arrow\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tcase 39: //up arrow\r\n\t\t\tcase 40: //right arrow\r\n\t\t\tcase 13: //enter\r\n\t\t\tcase 27: //escape\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tfilterList(input.value);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tinput.addEventListener(\"search\", function(e){\r\n\t\tfilterList(input.value);\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tif(blurable){\r\n\t\t\tchooseItem();\r\n\t\t}\r\n\t});\r\n\r\n\tinput.addEventListener(\"focus\", function(e){\r\n\t\tvar value = initialDisplayValue;\r\n\t\tgenUniqueColumnValues();\r\n\t\tshowList();\r\n\t\tinput.value = value;\r\n\t\tfilterList(value, true);\r\n\t});\r\n\r\n\r\n\tonRendered(function(){\r\n\t\tinput.style.height = \"100%\";\r\n\t\tinput.focus({preventScroll: true});\r\n\t});\r\n\r\n\tif(editorParams.mask){\r\n\t\tmaskInput(input, editorParams);\r\n\t}\r\n\r\n\tsetTimeout(() => {\r\n\t\tthis.table.rowManager.element.addEventListener(\"scroll\", cancelItem);\r\n\t}, 10);\r\n\r\n\tgenUniqueColumnValues();\r\n\tinput.value = initialDisplayValue;\r\n\tfilterList(initialDisplayValue, true);\r\n\r\n\treturn input;\r\n};", "//star rating\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar self = this,\r\n\telement = cell.getElement(),\r\n\tvalue = cell.getValue(),\r\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\r\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\r\n\tstars = [],\r\n\tstarsHolder = document.createElement(\"div\"),\r\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\r\n\r\n\r\n\t//change star type\r\n\tfunction starChange(val){\r\n\t\tstars.forEach(function(star, i){\r\n\t\t\tif(i < val){\r\n\t\t\t\tif(self.table.browser == \"ie\"){\r\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\t\t\t}else{\r\n\t\t\t\tif(self.table.browser == \"ie\"){\r\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//build stars\r\n\tfunction buildStar(i){\r\n\r\n\t\tvar starHolder =  document.createElement(\"span\");\r\n\t\tvar nextStar = star.cloneNode(true);\r\n\r\n\t\tstars.push(nextStar);\r\n\r\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tstarChange(i);\r\n\t\t});\r\n\r\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t});\r\n\r\n\t\tstarHolder.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\t\t\tsuccess(i);\r\n\t\t\telement.blur();\r\n\t\t});\r\n\r\n\t\tstarHolder.appendChild(nextStar);\r\n\t\tstarsHolder.appendChild(starHolder);\r\n\r\n\t}\r\n\r\n\t//handle keyboard navigation value change\r\n\tfunction changeValue(val){\r\n\t\tvalue = val;\r\n\t\tstarChange(val);\r\n\t}\r\n\r\n\t//style cell\r\n\telement.style.whiteSpace = \"nowrap\";\r\n\telement.style.overflow = \"hidden\";\r\n\telement.style.textOverflow = \"ellipsis\";\r\n\r\n\t//style holding element\r\n\tstarsHolder.style.verticalAlign = \"middle\";\r\n\tstarsHolder.style.display = \"inline-block\";\r\n\tstarsHolder.style.padding = \"4px\";\r\n\r\n\t//style star\r\n\tstar.setAttribute(\"width\", size);\r\n\tstar.setAttribute(\"height\", size);\r\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\r\n\tstar.setAttribute(\"xml:space\", \"preserve\");\r\n\tstar.style.padding = \"0 1px\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//create correct number of stars\r\n\tfor(var i=1;i<= maxStars;i++){\r\n\t\tbuildStar(i);\r\n\t}\r\n\r\n\t//ensure value does not exceed number of stars\r\n\tvalue = Math.min(parseInt(value), maxStars);\r\n\r\n\t// set initial styling of stars\r\n\tstarChange(value);\r\n\r\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\r\n\t\tstarChange(0);\r\n\t});\r\n\r\n\tstarsHolder.addEventListener(\"click\", function(e){\r\n\t\tsuccess(0);\r\n\t});\r\n\r\n\telement.addEventListener(\"blur\", function(e){\r\n\t\tcancel();\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\telement.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 39: //right arrow\r\n\t\t\tchangeValue(value + 1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\tchangeValue(value - 1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 13: //enter\r\n\t\t\tsuccess(value);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n\r\n\treturn starsHolder;\r\n};", "//draggable progress bar\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar element = cell.getElement(),\r\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\r\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\r\n\tpercent = (max - min) / 100,\r\n\tvalue = cell.getValue() || 0,\r\n\thandle = document.createElement(\"div\"),\r\n\tbar = document.createElement(\"div\"),\r\n\tmouseDrag, mouseDragWidth;\r\n\r\n\t//set new value\r\n\tfunction updateValue(){\r\n\t\tvar style = window.getComputedStyle(element, null);\r\n\r\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\r\n\t\tsuccess(calcVal);\r\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\r\n\t\telement.setAttribute(\"aria-label\", value);\r\n\t}\r\n\r\n\t//style handle\r\n\thandle.style.position = \"absolute\";\r\n\thandle.style.right = \"0\";\r\n\thandle.style.top = \"0\";\r\n\thandle.style.bottom = \"0\";\r\n\thandle.style.width = \"5px\";\r\n\thandle.classList.add(\"tabulator-progress-handle\");\r\n\r\n\t//style bar\r\n\tbar.style.display = \"inline-block\";\r\n\tbar.style.position = \"relative\";\r\n\t// bar.style.top = \"8px\";\r\n\t// bar.style.bottom = \"8px\";\r\n\t// bar.style.left = \"4px\";\r\n\t// bar.style.marginRight = \"4px\";\r\n\tbar.style.height = \"100%\";\r\n\tbar.style.backgroundColor = \"#488CE9\";\r\n\tbar.style.maxWidth = \"100%\";\r\n\tbar.style.minWidth = \"0%\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//style cell\r\n\telement.style.padding = \"4px 4px\";\r\n\r\n\t//make sure value is in range\r\n\tvalue = Math.min(parseFloat(value), max);\r\n\tvalue = Math.max(parseFloat(value), min);\r\n\r\n\t//workout percentage\r\n\tvalue = Math.round((value - min) / percent);\r\n\t// bar.style.right = value + \"%\";\r\n\tbar.style.width = value + \"%\";\r\n\r\n\telement.setAttribute(\"aria-valuemin\", min);\r\n\telement.setAttribute(\"aria-valuemax\", max);\r\n\r\n\tbar.appendChild(handle);\r\n\r\n\thandle.addEventListener(\"mousedown\", function(e){\r\n\t\tmouseDrag = e.screenX;\r\n\t\tmouseDragWidth = bar.offsetWidth;\r\n\t});\r\n\r\n\thandle.addEventListener(\"mouseover\", function(){\r\n\t\thandle.style.cursor = \"ew-resize\";\r\n\t});\r\n\r\n\telement.addEventListener(\"mousemove\", function(e){\r\n\t\tif(mouseDrag){\r\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\r\n\t\t}\r\n\t});\r\n\r\n\telement.addEventListener(\"mouseup\", function(e){\r\n\t\tif(mouseDrag){\r\n\t\t\te.stopPropagation();\r\n\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\tmouseDrag = false;\r\n\t\t\tmouseDragWidth = false;\r\n\r\n\t\t\tupdateValue();\r\n\t\t}\r\n\t});\r\n\r\n\t//allow key based navigation\r\n\telement.addEventListener(\"keydown\", function(e){\r\n\t\tswitch(e.keyCode){\r\n\t\t\tcase 39: //right arrow\r\n\t\t\te.preventDefault();\r\n\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 37: //left arrow\r\n\t\t\te.preventDefault();\r\n\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 9: //tab\r\n\t\t\tcase 13: //enter\r\n\t\t\tupdateValue();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase 27: //escape\r\n\t\t\tcancel();\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\t});\r\n\r\n\telement.addEventListener(\"blur\", function(){\r\n\t\tcancel();\r\n\t});\r\n\r\n\treturn bar;\r\n};", "//checkbox\r\nexport default function(cell, onRendered, success, cancel, editorParams){\r\n\tvar value = cell.getValue(),\r\n\tinput = document.createElement(\"input\"),\r\n\ttristate = editorParams.tristate,\r\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\r\n\tindetermState = false;\r\n\r\n\tinput.setAttribute(\"type\", \"checkbox\");\r\n\tinput.style.marginTop = \"5px\";\r\n\tinput.style.boxSizing = \"border-box\";\r\n\r\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\r\n\t\tfor (let key in editorParams.elementAttributes){\r\n\t\t\tif(key.charAt(0) == \"+\"){\r\n\t\t\t\tkey = key.slice(1);\r\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\r\n\t\t\t}else{\r\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinput.value = value;\r\n\r\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\r\n\t\tindetermState = true;\r\n\t\tinput.indeterminate = true;\r\n\t}\r\n\r\n\tif(this.table.browser != \"firefox\"){ //prevent blur issue on mac firefox\r\n\t\tonRendered(function(){\r\n\t\t\tinput.focus({preventScroll: true});\r\n\t\t});\r\n\t}\r\n\r\n\tinput.checked = value === true || value === \"true\" || value === \"True\" || value === 1;\r\n\r\n\tonRendered(function(){\r\n\t\tinput.focus();\r\n\t});\r\n\r\n\tfunction setValue(blur){\r\n\t\tif(tristate){\r\n\t\t\tif(!blur){\r\n\t\t\t\tif(input.checked && !indetermState){\r\n\t\t\t\t\tinput.checked = false;\r\n\t\t\t\t\tinput.indeterminate = true;\r\n\t\t\t\t\tindetermState = true;\r\n\t\t\t\t\treturn indetermValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tindetermState = false;\r\n\t\t\t\t\treturn input.checked;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(indetermState){\r\n\t\t\t\t\treturn indetermValue;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn input.checked;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn input.checked;\r\n\t\t}\r\n\t}\r\n\r\n\t//submit new value on blur\r\n\tinput.addEventListener(\"change\", function(e){\r\n\t\tsuccess(setValue());\r\n\t});\r\n\r\n\tinput.addEventListener(\"blur\", function(e){\r\n\t\tsuccess(setValue(true));\r\n\t});\r\n\r\n\t//submit new value on enter\r\n\tinput.addEventListener(\"keydown\", function(e){\r\n\t\tif(e.keyCode == 13){\r\n\t\t\tsuccess(setValue());\r\n\t\t}\r\n\t\tif(e.keyCode == 27){\r\n\t\t\tcancel();\r\n\t\t}\r\n\t});\r\n\r\n\treturn input;\r\n};", "import input from './editors/input.js';\r\nimport textarea from './editors/textarea.js';\r\nimport number from './editors/number.js';\r\nimport range from './editors/range.js';\r\nimport select from './editors/select.js';\r\nimport autocomplete from './editors/autocomplete.js';\r\nimport star from './editors/star.js';\r\nimport progress from './editors/progress.js';\r\nimport tickCross from './editors/tickCross.js';\r\n\r\nexport default {\r\n\tinput:input,\r\n\ttextarea:textarea,\r\n    number:number,\r\n    range:range,\r\n\tselect:select,\r\n\tautocomplete:autocomplete,\r\n\tstar:star,\r\n\tprogress:progress,\r\n\ttickCross:tickCross,\r\n};", "import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nimport defaultEditors from './defaults/editors.js';\r\n\r\nclass Edit extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.currentCell = false; //hold currently editing cell\r\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\r\n\t\tthis.recursionBlock = false; //prevent focus recursion\r\n\t\tthis.invalidEdit = false;\r\n\t\tthis.editedCells = [];\r\n\r\n\t\tthis.editors = Edit.editors;\r\n\r\n\t\tthis.registerColumnOption(\"editable\");\r\n\t\tthis.registerColumnOption(\"editor\");\r\n\t\tthis.registerColumnOption(\"editorParams\");\r\n\r\n\t\tthis.registerColumnOption(\"cellEditing\");\r\n\t\tthis.registerColumnOption(\"cellEdited\");\r\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\r\n\r\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\r\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\r\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\r\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\r\n\r\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellisEdited.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\r\n\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\r\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\r\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\r\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\r\n\t\tthis.subscribe(\"data-refeshing\", this.cancelEdit.bind(this));\r\n\r\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this));\r\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\r\n\t\tthis.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this));\r\n\t\tthis.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this));\r\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this));\r\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this));\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t////// Keybinding Functions ///////\r\n\t///////////////////////////////////\r\n\r\n\tkeybindingNavigateNext(e){\r\n\t\tvar cell = this.currentCell,\r\n\t\tnewRow = this.options(\"tabEndNewRow\");\r\n\r\n\t\tif(cell){\r\n\t\t\tif(!this.navigateNext(e)){\r\n\t\t\t\tif(newRow){\r\n\t\t\t\t\tcell.getElement().firstChild.blur();\r\n\r\n\t\t\t\t\tif(newRow === true){\r\n\t\t\t\t\t\tnewRow = this.table.addRow({})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(typeof newRow == \"function\"){\r\n\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()))\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnewRow.then(() => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tnav.next();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Cell Functions //////////\r\n\t///////////////////////////////////\r\n\r\n\tcellisEdited(cell){\r\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\r\n\t}\r\n\r\n\tcellCancelEdit(cell){\r\n\t\tif(cell === this.currentCell){\r\n\t\t\tthis.table.modules.edit.cancelEdit();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\tclearCellEdited(cells){\r\n\t\tif(!cells){\r\n\t\t\tcells = this.modules.edit.getEditedCells();\r\n\t\t}\r\n\r\n\t\tif(!Array.isArray(cells)){\r\n\t\t\tcells = [cells];\r\n\t\t}\r\n\r\n\t\tcells.forEach((cell) => {\r\n\t\t\tthis.modules.edit.clearEdited(cell._getSelf());\r\n\t\t});\r\n\t}\r\n\r\n\tnavigatePrev(e){\r\n\t\tvar cell = this.currentCell,\r\n\t\tnextCell, prevRow;\r\n\r\n\t\tif(cell){\r\n\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tnextCell = this.navigateLeft();\r\n\r\n\t\t\tif(nextCell){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\r\n\r\n\t\t\t\tif(prevRow){\r\n\t\t\t\t\tnextCell = this.findNextEditableCell(prevRow, prevRow.cells.length);\r\n\r\n\t\t\t\t\tif(nextCell){\r\n\t\t\t\t\t\tnextCell.getComponent().edit();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateNext(e){\r\n\t\tvar cell = this.currentCell,\r\n\t\tnextCell, nextRow;\r\n\r\n\t\tif(cell){\r\n\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tnextCell = this.navigateRight();\r\n\r\n\t\t\tif(nextCell){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\r\n\r\n\t\t\t\tif(nextRow){\r\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\r\n\r\n\t\t\t\t\tif(nextCell){\r\n\t\t\t\t\t\tnextCell.getComponent().edit();\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateLeft(e){\r\n\t\tvar cell = this.currentCell,\r\n\t\tindex, nextCell;\r\n\r\n\t\tif(cell){\r\n\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tindex = cell.getIndex();\r\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\r\n\r\n\t\t\tif(nextCell){\r\n\t\t\t\tnextCell.getComponent().edit();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateRight(e){\r\n\t\tvar cell = this.currentCell,\r\n\t\tindex, nextCell;\r\n\r\n\t\tif(cell){\r\n\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tindex = cell.getIndex();\r\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\r\n\r\n\t\t\tif(nextCell){\r\n\t\t\t\tnextCell.getComponent().edit();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateUp(e){\r\n\t\tvar cell = this.currentCell,\r\n\t\tindex, nextRow;\r\n\r\n\t\tif(cell){\r\n\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tindex = cell.getIndex();\r\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\r\n\r\n\t\t\tif(nextRow){\r\n\t\t\t\tnextRow.cells[index].getComponent().edit();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tnavigateDown(e){\r\n\t\tvar cell = this.currentCell,\r\n\t\tindex, nextRow;\r\n\r\n\t\tif(cell){\r\n\r\n\t\t\tif(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tindex = cell.getIndex();\r\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\r\n\r\n\t\t\tif(nextRow){\r\n\t\t\t\tnextRow.cells[index].getComponent().edit();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfindNextEditableCell(row, index){\r\n\t\tvar nextCell = false;\r\n\r\n\t\tif(index < row.cells.length-1){\r\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\r\n\t\t\t\tlet cell = row.cells[i];\r\n\r\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\r\n\t\t\t\t\tlet allowEdit = true;\r\n\r\n\t\t\t\t\tif(typeof cell.column.modules.edit.check == \"function\"){\r\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(allowEdit){\r\n\t\t\t\t\t\tnextCell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn nextCell;\r\n\t}\r\n\r\n\tfindPrevEditableCell(row, index){\r\n\t\tvar prevCell = false;\r\n\r\n\t\tif(index > 0){\r\n\t\t\tfor(var i = index-1; i >= 0; i--){\r\n\t\t\t\tlet cell = row.cells[i],\r\n\t\t\t\tallowEdit = true;\r\n\r\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\r\n\t\t\t\t\tif(typeof cell.column.modules.edit.check == \"function\"){\r\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(allowEdit){\r\n\t\t\t\t\t\tprevCell = cell;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn prevCell;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tinitializeColumnCheck(column){\r\n\t\tif(typeof column.definition.editor !== \"undefined\"){\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t}\r\n\t}\r\n\r\n\tcolumnDeleteCheck(column){\r\n\t\tif(this.currentCell && this.currentCell.column === column){\r\n\t\t\tthis.cancelEdit();\r\n\t\t}\r\n\t}\r\n\r\n\trowDeleteCheck(row){\r\n\t\tif(this.currentCell && this.currentCell.row === row){\r\n\t\t\tthis.cancelEdit();\r\n\t\t}\r\n\t}\r\n\r\n\t//initialize column editor\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = {\r\n\t\t\teditor:false,\r\n\t\t\tblocked:false,\r\n\t\t\tcheck:column.definition.editable,\r\n\t\t\tparams:column.definition.editorParams || {}\r\n\t\t};\r\n\r\n\t\t//set column editor\r\n\t\tswitch(typeof column.definition.editor){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(this.editors[column.definition.editor]){\r\n\t\t\t\tconfig.editor = this.editors[column.definition.editor];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tconfig.editor = column.definition.editor;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"boolean\":\r\n\t\t\tif(column.definition.editor === true){\r\n\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\r\n\t\t\t\t\tif(this.editors[column.definition.formatter]){\r\n\t\t\t\t\t\tconfig.editor = this.editors[column.definition.formatter];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconfig.editor = this.editors[\"input\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(config.editor){\r\n\t\t\tcolumn.modules.edit = config;\r\n\t\t}\r\n\t}\r\n\r\n\tgetCurrentCell(){\r\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\r\n\t}\r\n\r\n\tclearEditor(cancel){\r\n\t\tvar cell = this.currentCell,\r\n\t\tcellEl;\r\n\r\n\t\tthis.invalidEdit = false;\r\n\r\n\t\tconsole.log(\"clear\", cancel, cell, cell.validate)\r\n\r\n\t\tif(cell){\r\n\t\t\tthis.currentCell = false;\r\n\r\n\t\t\tcellEl = cell.getElement();\r\n\r\n\t\t\tif(cancel){\r\n\t\t\t\tif(cell.column.modules.validate && this.table.modExists(\"validate\")){\r\n\t\t\t\t\tthis.table.modules.validate.cellValidate(cell);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tcellEl.classList.remove(\"tabulator-validation-fail\");\r\n\t\t\t}\r\n\r\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\r\n\r\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\r\n\r\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-row-editing\");\r\n\t\t}\r\n\t}\r\n\r\n\tcancelEdit(){\r\n\t\tif(this.currentCell){\r\n\t\t\tvar cell = this.currentCell;\r\n\t\t\tvar component = this.currentCell.getComponent();\r\n\r\n\t\t\tthis.clearEditor(true);\r\n\t\t\tcell.setValueActual(cell.getValue());\r\n\t\t\tcell.cellRendered();\r\n\r\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\r\n\t\t\t\tcell.row.normalizeHeight(true);\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.column.definition.cellEditCancelled){\r\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\r\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\r\n\t\t}\r\n\t}\r\n\r\n\t//return a formatted value for a cell\r\n\tbindEditor(cell){\r\n\t\tif(cell.column.modules.edit){\r\n\t\t\tvar self = this,\r\n\t\t\telement = cell.getElement(true);\r\n\r\n\t\t\telement.setAttribute(\"tabindex\", 0);\r\n\r\n\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\r\n\t\t\t\t\telement.focus({preventScroll: true});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\telement.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tif (e.button === 2) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.mouseClick = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\telement.addEventListener(\"focus\", function(e){\r\n\t\t\t\tif(!self.recursionBlock){\r\n\t\t\t\t\tself.edit(cell, e, false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfocusCellNoEvent(cell, block){\r\n\t\tthis.recursionBlock = true;\r\n\r\n\t\tif(!(block && this.table.browser === \"ie\")){\r\n\t\t\tcell.getElement().focus({preventScroll: true});\r\n\t\t}\r\n\r\n\t\tthis.recursionBlock = false;\r\n\t}\r\n\r\n\teditCell(cell, forceEdit){\r\n\t\tthis.focusCellNoEvent(cell);\r\n\t\tthis.edit(cell, false, forceEdit);\r\n\t}\r\n\r\n\tfocusScrollAdjust(cell){\r\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\r\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\r\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\r\n\t\t\trowEl = cell.row.getElement(),\r\n\t\t\toffset = rowEl.offsetTop;\r\n\r\n\t\t\tif(rowEl.offsetTop < topEdge){\r\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\r\n\t\t\t}else{\r\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\r\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\r\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\r\n\t\t\tcellEl = cell.getElement(),\r\n\t\t\toffset = cellEl.offsetLeft;\r\n\r\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\r\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\r\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\r\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\r\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\r\n\t\t\t}\r\n\r\n\t\t\tif(cellEl.offsetLeft < leftEdge){\r\n\r\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\r\n\t\t\t}else{\r\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\r\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tedit(cell, e, forceEdit){\r\n\t\tvar self = this,\r\n\t\tallowEdit = true,\r\n\t\trendered = function(){},\r\n\t\telement = cell.getElement(),\r\n\t\tcellEditor, component, params;\r\n\r\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\r\n\t\tif(this.currentCell){\r\n\t\t\tif(!this.invalidEdit){\r\n\t\t\t\tthis.cancelEdit();\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//handle successfull value change\r\n\t\tfunction success(value){\r\n\t\t\tif(self.currentCell === cell){\r\n\t\t\t\tvar valid = true;\r\n\r\n\t\t\t\tif(cell.column.modules.validate && self.table.modExists(\"validate\") && self.table.options.validationMode != \"manual\"){\r\n\t\t\t\t\tvalid = self.table.modules.validate.validate(cell.column.modules.validate, cell, value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\r\n\t\t\t\t\tself.clearEditor();\r\n\r\n\r\n\t\t\t\t\tif(!cell.modules.edit){\r\n\t\t\t\t\t\tcell.modules.edit = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcell.modules.edit.edited = true;\r\n\r\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\r\n\t\t\t\t\t\tself.editedCells.push(cell);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcell.setValue(value, true);\r\n\r\n\t\t\t\t\tif(valid !== true){\r\n\t\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\r\n\t\t\t\t\t\tself.table.externalEvents.dispatch(\"validationFailed\", cell.getComponent(), value, valid);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.invalidEdit = true;\r\n\t\t\t\t\telement.classList.add(\"tabulator-validation-fail\");\r\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\r\n\t\t\t\t\trendered();\r\n\t\t\t\t\tself.table.externalEvents.dispatch(\"validationFailed\", cell.getComponent(), value, valid);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//handle aborted edit\r\n\t\tfunction cancel(){\r\n\t\t\tif(self.currentCell === cell){\r\n\t\t\t\tself.cancelEdit();\r\n\t\t\t}else{\r\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\trendered = callback;\r\n\t\t}\r\n\r\n\t\tif(!cell.column.modules.edit.blocked){\r\n\t\t\tif(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\r\n\t\t\tswitch(typeof cell.column.modules.edit.check){\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\tallowEdit = cell.column.modules.edit.check;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(allowEdit || forceEdit){\r\n\r\n\t\t\t\tself.cancelEdit();\r\n\r\n\t\t\t\tself.currentCell = cell;\r\n\r\n\t\t\t\tthis.focusScrollAdjust(cell);\r\n\r\n\t\t\t\tcomponent = cell.getComponent();\r\n\r\n\t\t\t\tif(this.mouseClick){\r\n\t\t\t\t\tthis.mouseClick = false;\r\n\r\n\t\t\t\t\tif(cell.column.definition.cellClick){\r\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(cell.column.definition.cellEditing){\r\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\r\n\r\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\r\n\r\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\r\n\r\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\r\n\t\t\t\tif(cellEditor !== false){\r\n\r\n\t\t\t\t\tif(cellEditor instanceof Node){\r\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\r\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-row-editing\");\r\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\t\t\t\t\telement.appendChild(cellEditor);\r\n\r\n\t\t\t\t\t\t//trigger onRendered Callback\r\n\t\t\t\t\t\trendered();\r\n\r\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\r\n\t\t\t\t\t\tvar children = element.children;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\r\n\t\t\t\t\t\telement.blur();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.blur();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.mouseClick = false;\r\n\t\t\t\telement.blur();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.mouseClick = false;\r\n\t\t\telement.blur();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetEditedCells(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.editedCells.forEach((cell) => {\r\n\t\t\toutput.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tclearEdited(cell){\r\n\t\tvar editIndex;\r\n\r\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\r\n\t\t\tcell.modules.edit.edited = false;\r\n\r\n\t\t\tif(cell.modules.validate){\r\n\t\t\t\tcell.modules.validate.invalid = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\teditIndex = this.editedCells.indexOf(cell);\r\n\r\n\t\tif(editIndex > -1){\r\n\t\t\tthis.editedCells.splice(editIndex, 1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nEdit.moduleName = \"edit\";\r\n\r\n//load defaults\r\nEdit.editors = defaultEditors;\r\n\r\n\r\nexport default Edit;", "class ExportRow{\r\n\tconstructor(type, columns, component, indent){\r\n\t\tthis.type = type;\r\n\t\tthis.columns = columns;\r\n\t\tthis.component = component || false;\r\n\t\tthis.indent = indent || 0;\r\n\t}\r\n}\r\n\r\nexport default ExportRow;", "class ExportColumn{\r\n\tconstructor(value, component, width, height, depth){\r\n\t\tthis.value = value;\r\n\t\tthis.component = component || false;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.depth = depth;\r\n\t}\r\n}\r\n\r\nexport default ExportColumn;", "import Module from '../../core/Module.js';\r\n\r\nimport ExportRow from './ExportRow.js';\r\nimport ExportColumn from './ExportColumn.js';\r\n\r\nclass Export extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.config = {};\r\n\t\tthis.cloneTableStyle = true;\r\n\t\tthis.colVisProp = \"\";\r\n\r\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html outypu config\r\n\r\n\t\tthis.registerColumnOption(\"htmlOutput\");\r\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tgenerateExportList(config, style, range, colVisProp){\r\n\t\tthis.cloneTableStyle = style;\r\n\t\tthis.config = config || {};\r\n\t\tthis.colVisProp = colVisProp;\r\n\r\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\r\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\r\n\r\n\t\treturn headers.concat(body);\r\n\t}\r\n\r\n\tgenereateTable(config, style, range, colVisProp){\r\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\r\n\r\n\t\treturn this.genereateTableElement(list);\r\n\t}\r\n\r\n\trowLookup(range){\r\n\t\tvar rows = [];\r\n\r\n\t\tif(typeof range == \"function\"){\r\n\t\t\trange.call(this.table).forEach((row) =>{\r\n\t\t\t\trow = this.table.rowManager.findRow(row);\r\n\r\n\t\t\t\tif(row){\r\n\t\t\t\t\trows.push(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tswitch(range){\r\n\t\t\t\tcase true:\r\n\t\t\t\tcase \"visible\":\r\n\t\t\t\trows = this.table.rowManager.getVisibleRows(false, true);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"all\":\r\n\t\t\t\trows = this.table.rowManager.rows;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"selected\":\r\n\t\t\t\trows = this.table.modules.selectRow.selectedRows;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"active\":\r\n\t\t\t\tdefault:\r\n\t\t\t\tif(this.table.options.pagination){\r\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\r\n\t\t\t\t}else{\r\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Object.assign([], rows);\r\n\t}\r\n\r\n\tgenerateColumnGroupHeaders(){\r\n\t\tvar output = [];\r\n\r\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\tvar colData = this.processColumnGroup(column);\r\n\r\n\t\t\tif(colData){\r\n\t\t\t\toutput.push(colData);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tprocessColumnGroup(column){\r\n\t\tvar subGroups = column.columns,\r\n\t\tmaxDepth = 0,\r\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\r\n\r\n\t\tvar groupData = {\r\n\t\t\ttitle:title,\r\n\t\t\tcolumn:column,\r\n\t\t\tdepth:1,\r\n\t\t};\r\n\r\n\t\tif(subGroups.length){\r\n\t\t\tgroupData.subGroups = [];\r\n\t\t\tgroupData.width = 0;\r\n\r\n\t\t\tsubGroups.forEach((subGroup) => {\r\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\r\n\r\n\t\t\t\tif(subGroupData){\r\n\t\t\t\t\tgroupData.width += subGroupData.width;\r\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\r\n\r\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\r\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tgroupData.depth += maxDepth;\r\n\r\n\t\t\tif(!groupData.width){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.columnVisCheck(column)){\r\n\t\t\t\tgroupData.width = 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn groupData;\r\n\t}\r\n\r\n\tcolumnVisCheck(column){\r\n\t\treturn column.definition[this.colVisProp] !== false && (column.visible || (!column.visible && column.definition[this.colVisProp]));\r\n\t}\r\n\r\n\theadersToExportRows(columns){\r\n\t\tvar headers = [],\r\n\t\theaderDepth = 0,\r\n\t\texportRows = [];\r\n\r\n\t\tfunction parseColumnGroup(column, level){\r\n\r\n\t\t\tvar depth = headerDepth - level;\r\n\r\n\t\t\tif(typeof headers[level] === \"undefined\"){\r\n\t\t\t\theaders[level] = [];\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\r\n\r\n\t\t\theaders[level].push(column);\r\n\r\n\t\t\tif(column.height > 1){\r\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\r\n\r\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\r\n\t\t\t\t\t\theaders[level + i] = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\theaders[level + i].push(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(column.width > 1){\r\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\r\n\t\t\t\t\theaders[level].push(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(column.subGroups){\r\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\r\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//calculate maximum header debth\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tif(column.depth > headerDepth){\r\n\t\t\t\theaderDepth = column.depth;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tparseColumnGroup(column,0);\r\n\t\t});\r\n\r\n\t\theaders.forEach((header) => {\r\n\t\t\tvar columns = [];\r\n\r\n\t\t\theader.forEach((col) => {\r\n\t\t\t\tif(col){\r\n\t\t\t\t\tcolumns.push(new ExportColumn(col.title, col.column.getComponent(), col.width, col.height, col.depth));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolumns.push(null);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\r\n\t\t});\r\n\r\n\t\treturn exportRows;\r\n\t}\r\n\r\n\tbodyToExportRows(rows){\r\n\r\n\t\tvar columns = [];\r\n\t\tvar exportRows = [];\r\n\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tif (this.columnVisCheck(column)) {\r\n\t\t\t\tcolumns.push(column.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\r\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\r\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trows = rows.filter((row) => {\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\treturn this.config.rowGroups !== false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\":\r\n\t\t\t\treturn this.config.columnCalcs !== false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\trows.forEach((row, i) => {\r\n\t\t\tvar rowData = row.getData(this.colVisProp);\r\n\t\t\tvar exportCols = [];\r\n\t\t\tvar indent = 0;\r\n\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\tindent = row.level;\r\n\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\" :\r\n\t\t\t\tcase \"row\" :\r\n\t\t\t\tcolumns.forEach((col) => {\r\n\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\r\n\t\t\t\t\tindent = row.modules.dataTree.index;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\r\n\t\t});\r\n\r\n\t\treturn exportRows;\r\n\t}\r\n\r\n\tgenereateTableElement(list){\r\n\t\tvar table = document.createElement(\"table\"),\r\n\t\theaderEl = document.createElement(\"thead\"),\r\n\t\tbodyEl = document.createElement(\"tbody\"),\r\n\t\tstyles = this.lookupTableStyles(),\r\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\r\n\t\tsetup = {};\r\n\r\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\r\n\r\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\r\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\r\n\t\t}\r\n\r\n\t\t//assign group header formatter\r\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\r\n\r\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\r\n\t\t\tsetup.groupHeader = [setup.groupHeader];\r\n\t\t}\r\n\r\n\t\ttable.classList.add(\"tabulator-print-table\");\r\n\r\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\r\n\r\n\t\tif(list.length > 1000){\r\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\r\n\t\t}\r\n\r\n\t\tlist.forEach((row, i) => {\r\n\t\t\tswitch(row.type){\r\n\t\t\t\tcase \"header\":\r\n\t\t\t\theaderEl.appendChild(this.genereateHeaderElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\tbodyEl.appendChild(this.genereateGroupElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"calc\":\r\n\t\t\t\tbodyEl.appendChild(this.genereateCalcElement(row, setup, styles));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"row\":\r\n\t\t\t\tlet rowEl = this.genereateRowElement(row, setup, styles);\r\n\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\t\t\t\tbodyEl.appendChild(rowEl);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(headerEl.innerHTML){\r\n\t\t\ttable.appendChild(headerEl);\r\n\t\t}\r\n\r\n\t\ttable.appendChild(bodyEl);\r\n\r\n\r\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\r\n\t\treturn table;\r\n\t}\r\n\r\n\tlookupTableStyles(){\r\n\t\tvar styles = {};\r\n\r\n\t\t//lookup row styles\r\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\r\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\r\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\r\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\r\n\r\n\t\t\tif(styles.firstRow){\r\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\r\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\r\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn styles;\r\n\t}\r\n\r\n\tgenereateHeaderElement(row, setup, styles){\r\n\t\tvar rowEl = document.createElement(\"tr\");\r\n\r\n\t\trow.columns.forEach((column) => {\r\n\t\t\tif(column){\r\n\t\t\t\tvar cellEl = document.createElement(\"th\");\r\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\r\n\r\n\t\t\t\tcellEl.colSpan = column.width;\r\n\t\t\t\tcellEl.rowSpan = column.height;\r\n\r\n\t\t\t\tcellEl.innerHTML = column.value;\r\n\r\n\t\t\t\tif(this.cloneTableStyle){\r\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclassNames.forEach(function(className) {\r\n\t\t\t\t\tcellEl.classList.add(className);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\r\n\r\n\t\t\t\tif(column.component._column.visible){\r\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(column.component._column.definition.width){\r\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(column.component._column.parent){\r\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowEl.appendChild(cellEl);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateGroupElement(row, setup, styles){\r\n\r\n\t\tvar rowEl = document.createElement(\"tr\"),\r\n\t\tcellEl = document.createElement(\"td\"),\r\n\t\tgroup = row.columns[0];\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\r\n\r\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\r\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t}else{\r\n\t\t\tif(setup.groupHeader === false){\r\n\t\t\t\tgroup.value = group.value;\r\n\t\t\t}else{\r\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcellEl.colSpan = group.width;\r\n\t\tcellEl.innerHTML = group.value;\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\r\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\r\n\r\n\t\tif(group.component.isVisible()){\r\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\r\n\t\t}\r\n\r\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\r\n\r\n\t\trowEl.appendChild(cellEl);\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateCalcElement(row, setup, styles){\r\n\t\tvar rowEl = this.genereateRowElement(row, setup, styles);\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\r\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateRowElement(row, setup, styles){\r\n\t\tvar rowEl = document.createElement(\"tr\");\r\n\r\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\r\n\r\n\t\trow.columns.forEach((col) => {\r\n\r\n\t\t\tif(col){\r\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\r\n\t\t\t\tcolumn = col.component._column,\r\n\t\t\t\tvalue = col.value;\r\n\r\n\t\t\t\tvar cellWrapper = {\r\n\t\t\t\t\tmodules:{},\r\n\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetField:function(){\r\n\t\t\t\t\t\treturn column.definition.field;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\treturn cellEl;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetData:function(){\r\n\t\t\t\t\t\treturn row.component.getData();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\treturn row.component;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetComponent:function(){\r\n\t\t\t\t\t\treturn cellWrapper;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcolumn:column,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\r\n\r\n\t\t\t\tclassNames.forEach(function(className) {\r\n\t\t\t\t\tcellEl.classList.add(className);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\r\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\t\tvalue = JSON.stringify(value);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\t\tcase \"null\":\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tvalue = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(value instanceof Node){\r\n\t\t\t\t\tcellEl.appendChild(value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellEl.innerHTML = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(styles.firstCell){\r\n\t\t\t\t\tthis.mapElementStyles(styles.firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\r\n\r\n\t\t\t\t\tif(column.definition.align){\r\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\r\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\r\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\r\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\r\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowEl.appendChild(cellEl);\r\n\r\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\r\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(setup.rowFormatter && this.config.formatCells !== false){\r\n\t\t\t\t\tsetup.rowFormatter(row.component);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn rowEl;\r\n\t}\r\n\r\n\tgenereateHTMLTable(list){\r\n\t\tvar holder = document.createElement(\"div\");\r\n\r\n\t\tholder.appendChild(this.genereateTableElement(list));\r\n\r\n\t\treturn holder.innerHTML;\r\n\t}\r\n\r\n\tgetHtml(visible, style, config, colVisProp){\r\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\r\n\r\n\t\treturn this.genereateHTMLTable(list);\r\n\t}\r\n\r\n\tmapElementStyles(from, to, props){\r\n\t\tif(this.cloneTableStyle && from && to){\r\n\r\n\t\t\tvar lookup = {\r\n\t\t\t\t\"background-color\" : \"backgroundColor\",\r\n\t\t\t\t\"color\" : \"fontColor\",\r\n\t\t\t\t\"width\" : \"width\",\r\n\t\t\t\t\"font-weight\" : \"fontWeight\",\r\n\t\t\t\t\"font-family\" : \"fontFamily\",\r\n\t\t\t\t\"font-size\" : \"fontSize\",\r\n\t\t\t\t\"text-align\" : \"textAlign\",\r\n\t\t\t\t\"border-top\" : \"borderTop\",\r\n\t\t\t\t\"border-left\" : \"borderLeft\",\r\n\t\t\t\t\"border-right\" : \"borderRight\",\r\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\r\n\t\t\t\t\"padding-top\" : \"paddingTop\",\r\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\r\n\t\t\t\t\"padding-right\" : \"paddingRight\",\r\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\r\n\t\t\t};\r\n\r\n\t\t\tif(window.getComputedStyle){\r\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\r\n\r\n\t\t\t\tprops.forEach(function(prop){\r\n\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nExport.moduleName = \"export\";\r\n\r\nexport default Export;\r\n", "export default {\r\n\r\n\t//equal to\r\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal == filterVal ? true : false;\r\n\t},\r\n\r\n\t//less than\r\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal < filterVal ? true : false;\r\n\t},\r\n\r\n\t//less than or equal to\r\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal <= filterVal ? true : false;\r\n\t},\r\n\r\n\t//greater than\r\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal > filterVal ? true : false;\r\n\t},\r\n\r\n\t//greater than or equal to\r\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal >= filterVal ? true : false;\r\n\t},\r\n\r\n\t//not equal to\r\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\treturn rowVal != filterVal ? true : false;\r\n\t},\r\n\r\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\r\n\r\n\t\tif(typeof filterVal == \"string\"){\r\n\t\t\tfilterVal = new RegExp(filterVal);\r\n\t\t}\r\n\r\n\t\treturn filterVal.test(rowVal);\r\n\t},\r\n\r\n\t//contains the string\r\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//contains the keywords\r\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\r\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\r\n\t\tmatches = [];\r\n\r\n\t\tkeywords.forEach((keyword) =>{\r\n\t\t\tif(value.includes(keyword)){\r\n\t\t\t\tmatches.push(true);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\r\n\t},\r\n\r\n\t//starts with the string\r\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//ends with the string\r\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\r\n\t\t\treturn rowVal === filterVal ? true : false;\r\n\t\t}else{\r\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\r\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t//in array\r\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\r\n\t\tif(Array.isArray(filterVal)){\r\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultFilters from './defaults/filters.js';\r\n\r\nclass Filter extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.filterList = []; //hold filter list\r\n\t\tthis.headerFilters = {}; //hold column filters\r\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\r\n\r\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\r\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\r\n\r\n\t\tthis.changed = false; //has filtering changed since last render\r\n\t\tthis.tableInitialized = false;\r\n\r\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\r\n\r\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\r\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\r\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\r\n\r\n\t\tthis.registerColumnOption(\"headerFilter\");\r\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\r\n\t\tthis.registerColumnOption(\"headerFilterParams\");\r\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\r\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\r\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\r\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\r\n\r\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\r\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\r\n\r\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\r\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\r\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\r\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\r\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\r\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\r\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\r\n\r\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\r\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\r\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\r\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\r\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\r\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\r\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\r\n\r\n\t\tif(this.table.options.filterMode === \"remote\"){\r\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\r\n\t\t}\r\n\r\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\r\n\t}\r\n\r\n\ttableBuilt(){\r\n\t\tif(this.table.options.initialFilter){\r\n\t\t\tthis.setFilter(this.table.options.initialFilter);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.initialHeaderFilter){\r\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\r\n\r\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.tableInitialized = true;\r\n\t}\r\n\r\n\tremoteFilterParams(data, config, silent, params){\r\n\t\tparams.filter = this.getFilters(true, true);\r\n\t\treturn params;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\t//set standard filters\r\n\tuserSetFilter(field, type, value, params){\r\n\t\tthis.setFilter(field, type, value, params);\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\t//set standard filters\r\n\tuserRefreshFilter(){\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\t//add filter to array\r\n\tuserAddFilter(field, type, value, params){\r\n\t\tthis.addFilter(field, type, value, params);\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\tuserSetHeaderFilterFocus(field){\r\n\t\tvar column = this.table.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tthis.setHeaderFilterFocus(column);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tuserGetHeaderFilterValue(field) {\r\n\t\tvar column = this.table.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\treturn this.getHeaderFilterValue(column);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\r\n\t\t}\r\n\t}\r\n\r\n\tuserSetHeaderFilterValue(field, value){\r\n\t\tvar column = this.table.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tthis.setHeaderFilterValue(column, value);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//remove filter from array\r\n\tuserRemoveFilter(field, type, value){\r\n\t\tthis.removeFilter(field, type, value);\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\t//clear filters\r\n\tuserClearFilter(all){\r\n\t\tthis.clearFilter(all);\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\t//clear header filters\r\n\tuserClearHeaderFilter(){\r\n\t\tthis.clearHeaderFilter();\r\n\t\tthis.refreshFilter();\r\n\t}\r\n\r\n\r\n\t//search for specific row components\r\n\tsearchRows(field, type, value){\r\n\t\treturn this.search(\"rows\", field, type, value);\r\n\t}\r\n\r\n\t//search for specific data\r\n\tsearchData(field, type, value){\r\n\t\treturn this.search(\"data\", field, type, value);\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tinitializeColumnHeaderFilter(column){\r\n\t\tvar def = column.definition;\r\n\r\n\t\tif(def.headerFilter){\r\n\r\n\t\t\tif(typeof def.headerFilterPlaceholder !== \"undefined\" && def.field){\r\n\t\t\t\tthis.module(\"localize\").setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t}\r\n\t}\r\n\r\n\t//initialize column header filter\r\n\tinitializeColumn(column, value){\r\n\t\tvar self = this,\r\n\t\tfield = column.getField(),\r\n\t\tparams;\r\n\r\n\t\t//handle successfull value change\r\n\t\tfunction success(value){\r\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\r\n\t\t\ttype = \"\",\r\n\t\t\tfilterChangeCheck = \"\",\r\n\t\t\tfilterFunc;\r\n\r\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\r\n\r\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\r\n\r\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\r\n\t\t\t\t\tcolumn.modules.filter.value = value;\r\n\r\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\r\n\t\t\t\t\t\tcase \"string\":\r\n\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\r\n\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\r\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\r\n\r\n\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\r\n\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\r\n\r\n\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\ttype = filterFunc;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!filterFunc){\r\n\t\t\t\t\t\tswitch(filterType){\r\n\t\t\t\t\t\t\tcase \"partial\":\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\r\n\r\n\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\r\n\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttype = \"like\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttype = \"=\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type, params:params || {}};\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdelete self.headerFilters[field];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\r\n\r\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\r\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\r\n\r\n\t\t\t\t\tself.trackChanges();\r\n\t\t\t\t\tself.refreshFilter();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tcolumn.modules.filter = {\r\n\t\t\tsuccess:success,\r\n\t\t\tattrType:false,\r\n\t\t\ttagType:false,\r\n\t\t\temptyFunc:false,\r\n\t\t};\r\n\r\n\t\tthis.generateHeaderFilterElement(column);\r\n\t}\r\n\r\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\r\n\t\tvar self = this,\r\n\t\tsuccess = column.modules.filter.success,\r\n\t\tfield = column.getField(),\r\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params;\r\n\r\n\t\t//handle aborted edit\r\n\t\tfunction cancel(){}\r\n\r\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\r\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\r\n\t\t}\r\n\r\n\t\tif(field){\r\n\r\n\t\t\t//set empty value function\r\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\r\n\t\t\t\treturn !value && value !== \"0\" && value !== 0;\r\n\t\t\t};\r\n\r\n\t\t\tfilterElement = document.createElement(\"div\");\r\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\r\n\r\n\t\t\t//set column editor\r\n\t\t\tswitch(typeof column.definition.headerFilter){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\r\n\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\r\n\r\n\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\r\n\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\r\n\t\t\t\t\t\t\treturn value !== true && value !== false;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\teditor = column.definition.headerFilter;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"boolean\":\r\n\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\r\n\t\t\t\t\teditor = column.modules.edit.editor;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\r\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\r\n\r\n\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\r\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\r\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(editor){\r\n\r\n\t\t\t\tcellWrapper = {\r\n\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetField:function(){\r\n\t\t\t\t\t\treturn column.definition.field;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\treturn filterElement;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tnormalizeHeight:function(){\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tparams = column.definition.headerFilterParams || {};\r\n\r\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table) : params;\r\n\r\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, function(){}, success, cancel, params);\r\n\r\n\t\t\t\tif(!editorElement){\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!(editorElement instanceof Node)){\r\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//set Placeholder Text\r\n\t\t\t\tif(field){\r\n\t\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.langText(\"headerFilters|default\"));\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tself.langBind(\"headerFilters|default\", function(value){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", value);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//focus on element on click\r\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\teditorElement.focus();\r\n\t\t\t\t});\r\n\r\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\r\n\t\t\t\t\tvar left = this.table.columnManager.element.scrollLeft;\r\n\r\n\t\t\t\t\tif(left !== this.table.rowManager.element.scrollLeft){\r\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//live update filters as user types\r\n\t\t\t\ttypingTimer = false;\r\n\r\n\t\t\t\tsearchTrigger = function(e){\r\n\t\t\t\t\tif(typingTimer){\r\n\t\t\t\t\t\tclearTimeout(typingTimer);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttypingTimer = setTimeout(function(){\r\n\t\t\t\t\t\tsuccess(editorElement.value);\r\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\r\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\r\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\r\n\r\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!(\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\r\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\r\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\r\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\r\n\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\r\n\r\n\r\n\t\t\t\t\t//update number filtered columns on change\r\n\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\r\n\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\r\n\t\t\t\t\t\t\tsuccess(editorElement.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\r\n\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\r\n\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\r\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t\t//prevent input and select elements from propegating click to column sorters etc\r\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\r\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilterElement.appendChild(editorElement);\r\n\r\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\r\n\r\n\t\t\t\tif(!reinitialize){\r\n\t\t\t\t\tself.headerFilterColumns.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\r\n\t\t}\r\n\t}\r\n\r\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n\thideHeaderFilterElements(){\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n\tshowHeaderFilterElements(){\r\n\t\tthis.headerFilterColumns.forEach(function(column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//programatically set focus of header filter\r\n\tsetHeaderFilterFocus(column){\r\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\tcolumn.modules.filter.headerElement.focus();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\r\n\t\t}\r\n\t}\r\n\r\n\t//programmatically get value of header filter\r\n\tgetHeaderFilterValue(column){\r\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\treturn column.modules.filter.headerElement.value;\r\n\t\t} else {\r\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t}\r\n\t}\r\n\r\n\t//programatically set value of header filter\r\n\tsetHeaderFilterValue(column, value){\r\n\t\tif (column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\r\n\t\t\t\tcolumn.modules.filter.success(value);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treloadHeaderFilter(column){\r\n\t\tif (column){\r\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\r\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trefreshFilter(){\r\n\t\tif(this.tableInitialized){\r\n\t\t\tif(this.table.options.filterMode === \"remote\"){\r\n\t\t\t\tthis.reloadData();\r\n\t\t\t}else{\r\n\t\t\t\tthis.refreshData(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//TODO - Persist left position of row manager\r\n\t\t// left = this.scrollLeft;\r\n\t\t// this.scrollHorizontal(left);\r\n\t}\r\n\r\n\t//check if the filters has changed since last use\r\n\ttrackChanges(){\r\n\t\tthis.changed = true;\r\n\t\tthis.dispatch(\"filter-changed\");\r\n\t}\r\n\r\n\t//check if the filters has changed since last use\r\n\thasChanged(){\r\n\t\tvar changed = this.changed;\r\n\t\tthis.changed = false;\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t//set standard filters\r\n\tsetFilter(field, type, value, params){\r\n\t\tthis.filterList = [];\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\r\n\t\t}\r\n\r\n\t\tthis.addFilter(field);\r\n\t}\r\n\r\n\t//add filter to array\r\n\taddFilter(field, type, value, params){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\r\n\t\t}\r\n\r\n\t\tfield.forEach((filter) => {\r\n\r\n\t\t\tfilter = this.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\tthis.filterList.push(filter);\r\n\t\t\t\tthis.changed = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(changed){\r\n\t\t\tthis.trackChanges();\r\n\t\t}\r\n\t}\r\n\r\n\tfindFilter(filter){\r\n\t\tvar column;\r\n\r\n\t\tif(Array.isArray(filter)){\r\n\t\t\treturn this.findSubFilters(filter);\r\n\t\t}\r\n\r\n\t\tvar filterFunc = false;\r\n\r\n\t\tif(typeof filter.field == \"function\"){\r\n\t\t\tfilterFunc = function(data){\r\n\t\t\t\treturn filter.field(data, filter.type || {})// pass params to custom filter function\r\n\t\t\t};\r\n\t\t}else{\r\n\r\n\t\t\tif(Filter.filters[filter.type]){\r\n\r\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\r\n\t\t\t\t\t};\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfilterFunc = function(data){\r\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfilter.func = filterFunc;\r\n\r\n\t\treturn filter.func ? filter : false;\r\n\t}\r\n\r\n\tfindSubFilters(filters){\r\n\t\tvar output = [];\r\n\r\n\t\tfilters.forEach((filter) => {\r\n\t\t\tfilter = this.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\toutput.push(filter);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output.length ? output : false;\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetFilters(all, ajax){\r\n\t\tvar output = [];\r\n\r\n\t\tif(all){\r\n\t\t\toutput = this.getHeaderFilters();\r\n\t\t}\r\n\r\n\t\tif(ajax){\r\n\t\t\toutput.forEach(function(item){\r\n\t\t\t\tif(typeof item.type == \"function\"){\r\n\t\t\t\t\titem.type = \"function\";\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//filter to Object\r\n\tfiltersToArray(filterList, ajax){\r\n\t\tvar output = [];\r\n\r\n\t\tfilterList.forEach((filter) => {\r\n\t\t\tvar item;\r\n\r\n\t\t\tif(Array.isArray(filter)){\r\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\r\n\t\t\t}else{\r\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value}\r\n\r\n\t\t\t\tif(ajax){\r\n\t\t\t\t\tif(typeof item.type == \"function\"){\r\n\t\t\t\t\t\titem.type = \"function\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//get all filters\r\n\tgetHeaderFilters(){\r\n\t\tvar output = [];\r\n\r\n\t\tfor(var key in this.headerFilters){\r\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//remove filter from array\r\n\tremoveFilter(field, type, value){\r\n\t\tvar changed = false;\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value}];\r\n\t\t}\r\n\r\n\t\tfield.forEach((filter) => {\r\n\t\t\tvar index = -1;\r\n\r\n\t\t\tif(typeof filter.field == \"object\"){\r\n\t\t\t\tindex = this.filterList.findIndex((element) => {\r\n\t\t\t\t\treturn filter === element;\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tindex = this.filterList.findIndex((element) => {\r\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.filterList.splice(index, 1);\r\n\t\t\t\tchanged = true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\t//clear filters\r\n\tclearFilter(all){\r\n\t\tthis.filterList = [];\r\n\r\n\t\tif(all){\r\n\t\t\tthis.clearHeaderFilter();\r\n\t\t}\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\t//clear header filters\r\n\tclearHeaderFilter(){\r\n\t\tthis.headerFilters = {};\r\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\r\n\r\n\t\tthis.headerFilterColumns.forEach((column) => {\r\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\r\n\t\t\t\tdelete column.modules.filter.value;\r\n\t\t\t}\r\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\r\n\t\t\tthis.reloadHeaderFilter(column);\r\n\t\t});\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\t//search data and return matching rows\r\n\tsearch (searchType, field, type, value){\r\n\t\tvar activeRows = [],\r\n\t\tfilterList = [];\r\n\r\n\t\tif(!Array.isArray(field)){\r\n\t\t\tfield = [{field:field, type:type, value:value}];\r\n\t\t}\r\n\r\n\t\tfield.forEach((filter) => {\r\n\t\t\tfilter = this.findFilter(filter);\r\n\r\n\t\t\tif(filter){\r\n\t\t\t\tfilterList.push(filter);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\tvar match = true;\r\n\r\n\t\t\tfilterList.forEach((filter) => {\r\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn activeRows;\r\n\t}\r\n\r\n\t//filter row array\r\n\tfilter(rowList, filters){\r\n\t\tvar activeRows = [],\r\n\t\tactiveRowComponents = [];\r\n\r\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\r\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters());\r\n\t\t}\r\n\r\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\r\n\r\n\t\t\trowList.forEach((row) => {\r\n\t\t\t\tif(this.filterRow(row)){\r\n\t\t\t\t\tactiveRows.push(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}else{\r\n\t\t\tactiveRows = rowList.slice(0);\r\n\t\t}\r\n\r\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\r\n\r\n\t\t\tactiveRows.forEach((row) => {\r\n\t\t\t\tactiveRowComponents.push(row.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(), activeRowComponents);\r\n\t\t}\r\n\r\n\t\treturn activeRows;\r\n\t}\r\n\r\n\t//filter individual row\r\n\tfilterRow(row, filters){\r\n\t\tvar match = true,\r\n\t\tdata = row.getData();\r\n\r\n\t\tthis.filterList.forEach((filter) => {\r\n\t\t\tif(!this.filterRecurse(filter, data)){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tfor(var field in this.headerFilters){\r\n\t\t\tif(!this.headerFilters[field].func(data)){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tfilterRecurse(filter, data){\r\n\t\tvar match = false;\r\n\r\n\t\tif(Array.isArray(filter)){\r\n\t\t\tfilter.forEach((subFilter) => {\r\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\r\n\t\t\t\t\tmatch = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tmatch = filter.func(data);\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n}\r\n\r\nFilter.moduleName = \"filter\";\r\n\r\n//load defaults\r\nFilter.filters = defaultFilters;\r\n\r\nexport default Filter;", "export default function(cell, formatterParams, onRendered){\r\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\treturn cell.getValue();\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\r\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tvar floatVal = parseFloat(cell.getValue()),\r\n\tsign = \"\",\r\n\tnumber, integer, decimal, rgx;\r\n\r\n\tvar decimalSym = formatterParams.decimal || \".\";\r\n\tvar thousandSym = formatterParams.thousand || \",\";\r\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\r\n\tvar symbol = formatterParams.symbol || \"\";\r\n\tvar after = !!formatterParams.symbolAfter;\r\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\r\n\r\n\tif(isNaN(floatVal)){\r\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\r\n\t}\r\n\r\n\tif(floatVal < 0){\r\n\t\tfloatVal = Math.abs(floatVal);\r\n\t\tsign = negativeSign;\r\n\t}\r\n\r\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\r\n\tnumber = String(number).split(\".\");\r\n\r\n\tinteger = number[0];\r\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\r\n\r\n\trgx = /(\\d+)(\\d{3})/;\r\n\r\n\twhile (rgx.test(integer)){\r\n\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\r\n\t}\r\n\r\n\treturn after ? sign + integer + decimal + symbol : sign + symbol + integer + decimal;\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\turlPrefix = formatterParams.urlPrefix || \"\",\r\n\tdownload = formatterParams.download,\r\n\tlabel = value,\r\n\tel = document.createElement(\"a\"),\r\n\tdata;\r\n\r\n\tif(formatterParams.labelField){\r\n\t\tdata = cell.getData();\r\n\t\tlabel = data[formatterParams.labelField];\r\n\t}\r\n\r\n\tif(formatterParams.label){\r\n\t\tswitch(typeof formatterParams.label){\r\n\t\t\tcase \"string\":\r\n\t\t\tlabel = formatterParams.label;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tlabel = formatterParams.label(cell);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tif(label){\r\n\t\tif(formatterParams.urlField){\r\n\t\t\tdata = cell.getData();\r\n\t\t\tvalue = data[formatterParams.urlField];\r\n\t\t}\r\n\r\n\t\tif(formatterParams.url){\r\n\t\t\tswitch(typeof formatterParams.url){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tvalue = formatterParams.url;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tvalue = formatterParams.url(cell);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tel.setAttribute(\"href\", urlPrefix + value);\r\n\r\n\t\tif(formatterParams.target){\r\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\r\n\t\t}\r\n\r\n\t\tif(formatterParams.download){\r\n\r\n\t\t\tif(typeof download == \"function\"){\r\n\t\t\t\tdownload = download(cell);\r\n\t\t\t}else{\r\n\t\t\t\tdownload = download === true ? \"\" : download;\r\n\t\t\t}\r\n\r\n\t\t\tel.setAttribute(\"download\", download);\r\n\t\t}\r\n\r\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\r\n\r\n\t\treturn el;\r\n\t}else{\r\n\t\treturn \"&nbsp;\";\r\n\t}\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tvar el = document.createElement(\"img\"),\r\n\tsrc = cell.getValue();\r\n\r\n\tif(formatterParams.urlPrefix){\r\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\r\n\t}\r\n\r\n\tif(formatterParams.urlSuffix){\r\n\t\tsrc = src + formatterParams.urlSuffix;\r\n\t}\r\n\r\n\tel.setAttribute(\"src\", src);\r\n\r\n\tswitch(typeof formatterParams.height){\r\n\t\tcase \"number\":\r\n\t\tel.style.height = formatterParams.height + \"px\";\r\n\t\tbreak;\r\n\r\n\t\tcase \"string\":\r\n\t\tel.style.height = formatterParams.height;\r\n\t\tbreak;\r\n\t}\r\n\r\n\tswitch(typeof formatterParams.width){\r\n\t\tcase \"number\":\r\n\t\tel.style.width = formatterParams.width + \"px\";\r\n\t\tbreak;\r\n\r\n\t\tcase \"string\":\r\n\t\tel.style.width = formatterParams.width;\r\n\t\tbreak;\r\n\t}\r\n\r\n\tel.addEventListener(\"load\", function(){\r\n\t\tcell.getRow().normalizeHeight();\r\n\t});\r\n\r\n\treturn el;\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\telement = cell.getElement(),\r\n\tempty = formatterParams.allowEmpty,\r\n\ttruthy = formatterParams.allowTruthy,\r\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\r\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\r\n\r\n\tif((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")){\r\n\t\telement.setAttribute(\"aria-checked\", true);\r\n\t\treturn tick || \"\";\r\n\t}else{\r\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\r\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\r\n\t\t\treturn \"\";\r\n\t\t}else{\r\n\t\t\telement.setAttribute(\"aria-checked\", false);\r\n\t\t\treturn cross || \"\";\r\n\t\t}\r\n\t}\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tvar DT = window.DateTime || luxon.DateTime;\r\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\r\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\r\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\r\n\tvar value = cell.getValue();\r\n\r\n\tif(typeof DT != \"undefined\"){\r\n\t\tvar newDatetime = DT.fromFormat(String(value), inputFormat);\r\n\r\n\t\tif(newDatetime.isValid){\r\n\r\n\t\t\tif(formatterParams.timezone){\r\n\t\t\t\tnewDatetime = newDatetime.shiftTimezone(formatterParams.timezone);\r\n\t\t\t}\r\n\r\n\t\t\treturn newDatetime.toFormat(outputFormat);\r\n\t\t}else{\r\n\r\n\t\t\tif(invalid === true || !value){\r\n\t\t\t\treturn value;\r\n\t\t\t}else if(typeof invalid === \"function\"){\r\n\t\t\t\treturn invalid(value);\r\n\t\t\t}else{\r\n\t\t\t\treturn invalid;\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\r\n\t}\r\n};", "export default function (cell, formatterParams, onRendered) {\r\n\tvar DT = window.DateTime || luxon.DateTime;\r\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\r\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\r\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\r\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\r\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\r\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\r\n\tvar value = cell.getValue();\r\n\r\n\tif(typeof DT != \"undefined\"){\r\n\t\tvar newDatetime = DT.fromFormat(String(value), inputFormat);\r\n\r\n\t\tif (newDatetime.isValid){\r\n\t\t\tif(humanize){\r\n\t\t\t\t// return moment.duration(newDatetime.diff(date)).humanize(suffix);\r\n\t\t\t}else{\r\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\r\n\t\t\t}\r\n\t\t} else {\r\n\r\n\t\t\tif (invalid === true) {\r\n\t\t\t\treturn value;\r\n\t\t\t} else if (typeof invalid === \"function\") {\r\n\t\t\t\treturn invalid(value);\r\n\t\t\t} else {\r\n\t\t\t\treturn invalid;\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\r\n\t}\r\n};", "export default function (cell, formatterParams, onRendered) {\r\n\tvar value = cell.getValue();\r\n\r\n\tif (typeof formatterParams[value] === \"undefined\") {\r\n\t\tconsole.warn('Missing display value for ' + value);\r\n\t\treturn value;\r\n\t}\r\n\r\n\treturn formatterParams[value];\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tvar value = cell.getValue(),\r\n\telement = cell.getElement(),\r\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\r\n\tstars = document.createElement(\"span\"),\r\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\r\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\r\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\r\n\r\n\t//style stars holder\r\n\tstars.style.verticalAlign = \"middle\";\r\n\r\n\t//style star\r\n\tstar.setAttribute(\"width\", \"14\");\r\n\tstar.setAttribute(\"height\", \"14\");\r\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\r\n\tstar.setAttribute(\"xml:space\", \"preserve\");\r\n\tstar.style.padding = \"0 1px\";\r\n\r\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\r\n\r\n\tvalue = Math.max(0, Math.min(value, maxStars));\r\n\r\n\tfor(var i=1;i<= maxStars;i++){\r\n\t\tvar nextStar = star.cloneNode(true);\r\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\r\n\r\n\t\tstars.appendChild(nextStar);\r\n\t}\r\n\r\n\telement.style.whiteSpace = \"nowrap\";\r\n\telement.style.overflow = \"hidden\";\r\n\telement.style.textOverflow = \"ellipsis\";\r\n\r\n\telement.setAttribute(\"aria-label\", value);\r\n\r\n\treturn stars;\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\r\n\tel = document.createElement(\"span\"),\r\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\r\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\r\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\r\n\tcolor = \"#666666\",\r\n\tpercent, percentValue;\r\n\r\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\r\n\t\treturn;\r\n\t}\r\n\r\n\tel.classList.add(\"tabulator-traffic-light\");\r\n\r\n\t//make sure value is in range\r\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\r\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\r\n\r\n\t//workout percentage\r\n\tpercent = (max - min) / 100;\r\n\tpercentValue = Math.round((percentValue - min) / percent);\r\n\r\n\t//set color\r\n\tswitch(typeof colors){\r\n\t\tcase \"string\":\r\n\t\tcolor = colors;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tcolor = colors(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(colors)){\r\n\t\t\tvar unit = 100 / colors.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, colors.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tcolor = colors[index];\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tel.style.backgroundColor = color;\r\n\r\n\treturn el;\r\n};", "import CellComponent from '../../../../core/cell/CellComponent.js';\r\n\r\nexport default function(cell, formatterParams, onRendered){ //progress bar\r\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\r\n\telement = cell.getElement(),\r\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\r\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\r\n\tlegendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\r\n\tpercent, percentValue, color, legend, legendColor, top, left, right, bottom;\r\n\r\n\t//make sure value is in range\r\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\r\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\r\n\r\n\t//workout percentage\r\n\tpercent = (max - min) / 100;\r\n\tpercentValue = Math.round((percentValue - min) / percent);\r\n\r\n\t//set bar color\r\n\tswitch(typeof formatterParams.color){\r\n\t\tcase \"string\":\r\n\t\tcolor = formatterParams.color;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tcolor = formatterParams.color(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(formatterParams.color)){\r\n\t\t\tvar unit = 100 / formatterParams.color.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tcolor = formatterParams.color[index];\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:\r\n\t\tcolor = \"#2DC214\";\r\n\t}\r\n\r\n\t//generate legend\r\n\tswitch(typeof formatterParams.legend){\r\n\t\tcase \"string\":\r\n\t\tlegend = formatterParams.legend;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tlegend = formatterParams.legend(value);\r\n\t\tbreak;\r\n\t\tcase \"boolean\":\r\n\t\tlegend = value;\r\n\t\tbreak;\r\n\t\tdefault:\r\n\t\tlegend = false;\r\n\t}\r\n\r\n\t//set legend color\r\n\tswitch(typeof formatterParams.legendColor){\r\n\t\tcase \"string\":\r\n\t\tlegendColor = formatterParams.legendColor;\r\n\t\tbreak;\r\n\t\tcase \"function\":\r\n\t\tlegendColor = formatterParams.legendColor(value);\r\n\t\tbreak;\r\n\t\tcase \"object\":\r\n\t\tif(Array.isArray(formatterParams.legendColor)){\r\n\t\t\tvar unit = 100 / formatterParams.legendColor.length;\r\n\t\t\tvar index = Math.floor(percentValue / unit);\r\n\r\n\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\r\n\t\t\tindex = Math.max(index, 0);\r\n\t\t\tlegendColor = formatterParams.legendColor[index];\r\n\t\t}\r\n\t\tbreak;\r\n\t\tdefault:\r\n\t\tlegendColor = \"#000\";\r\n\t}\r\n\r\n\telement.style.minWidth = \"30px\";\r\n\telement.style.position = \"relative\";\r\n\r\n\telement.setAttribute(\"aria-label\", percentValue);\r\n\r\n\tvar barEl = document.createElement(\"div\");\r\n\tbarEl.style.display = \"inline-block\";\r\n\tbarEl.style.position = \"absolute\";\r\n\tbarEl.style.width = percentValue + \"%\";\r\n\tbarEl.style.backgroundColor = color;\r\n\tbarEl.style.height = \"100%\";\r\n\r\n\tbarEl.setAttribute('data-max', max);\r\n\tbarEl.setAttribute('data-min', min);\r\n\r\n\tvar barContainer = document.createElement(\"div\");\r\n\tbarContainer.style.position = \"relative\";\r\n\tbarContainer.style.width = \"100%\";\r\n\tbarContainer.style.height = \"100%\";\r\n\r\n\tif(legend){\r\n\t\tvar legendEl = document.createElement(\"div\");\r\n\t\tlegendEl.style.position = \"absolute\";\r\n\t\tlegendEl.style.top = 0;\r\n\t\tlegendEl.style.left = 0;\r\n\t\tlegendEl.style.textAlign = legendAlign;\r\n\t\tlegendEl.style.width = \"100%\";\r\n\t\tlegendEl.style.color = legendColor;\r\n\t\tlegendEl.innerHTML = legend;\r\n\t}\r\n\r\n\tonRendered(function(){\r\n\r\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\r\n\t\tif(!(cell instanceof CellComponent)){\r\n\t\t\tvar holderEl = document.createElement(\"div\");\r\n\t\t\tholderEl.style.position = \"absolute\";\r\n\t\t\tholderEl.style.top = \"4px\";\r\n\t\t\tholderEl.style.bottom = \"4px\";\r\n\t\t\tholderEl.style.left = \"4px\";\r\n\t\t\tholderEl.style.right = \"4px\";\r\n\r\n\t\t\telement.appendChild(holderEl);\r\n\r\n\t\t\telement = holderEl;\r\n\t\t}\r\n\r\n\t\telement.appendChild(barContainer);\r\n\t\tbarContainer.appendChild(barEl);\r\n\r\n\t\tif(legend){\r\n\t\t\tbarContainer.appendChild(legendEl);\r\n\t\t}\r\n\t});\r\n\r\n\treturn \"\";\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\r\n\treturn \"\";\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\treturn this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1;\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\r\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\r\n};", "export default function(cell, formatterParams, onRendered){\r\n\tvar open = false,\r\n\tel = document.createElement(\"div\"),\r\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\r\n\r\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\r\n\tel.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\r\n\r\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\r\n\r\n\tfunction toggleList(isOpen){\r\n\t\tvar collapseEl = config.element;\r\n\r\n\t\tconfig.open = isOpen;\r\n\r\n\t\tif(collapseEl){\r\n\r\n\t\t\tif(config.open){\r\n\t\t\t\tel.classList.add(\"open\");\r\n\t\t\t\tcollapseEl.style.display = '';\r\n\t\t\t}else{\r\n\t\t\t\tel.classList.remove(\"open\");\r\n\t\t\t\tcollapseEl.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tel.addEventListener(\"click\", function(e){\r\n\t\te.stopImmediatePropagation();\r\n\t\ttoggleList(!config.open);\r\n\t});\r\n\r\n\ttoggleList(config.open);\r\n\r\n\treturn el;\r\n};", "import RowComponent from '../../../../core/row/RowComponent.js';\r\n\r\nexport default function(cell, formatterParams, onRendered){\r\n\tvar checkbox = document.createElement(\"input\");\r\n\r\n\tcheckbox.type = 'checkbox';\r\n\r\n\tif(this.table.modExists(\"selectRow\", true)){\r\n\r\n\t\tcheckbox.addEventListener(\"click\", (e) => {\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tif(typeof cell.getRow == 'function'){\r\n\t\t\tvar row = cell.getRow();\r\n\r\n\t\t\tif(row instanceof RowComponent){\r\n\r\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\r\n\t\t\t\t\trow.toggleSelect();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\r\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\r\n\t\t\t}else{\r\n\t\t\t\tcheckbox = \"\";\r\n\t\t\t}\r\n\t\t}else {\r\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\r\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\r\n\t\t\t\t\tthis.table.deselectRow();\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\r\n\t\t}\r\n\t}\r\n\r\n\treturn checkbox;\r\n};", "import plaintext from './formatters/plaintext.js';\r\nimport html from './formatters/html.js';\r\nimport textarea from './formatters/textarea.js';\r\nimport money from './formatters/money.js';\r\nimport link from './formatters/link.js';\r\nimport image from './formatters/image.js';\r\nimport tickCross from './formatters/tickCross.js';\r\nimport datetime from './formatters/datetime.js';\r\nimport datetimediff from './formatters/datetimediff.js';\r\nimport lookup from './formatters/lookup.js';\r\nimport star from './formatters/star.js';\r\nimport traffic from './formatters/traffic.js';\r\nimport progress from './formatters/progress.js';\r\nimport color from './formatters/color.js';\r\nimport buttonTick from './formatters/buttonTick.js';\r\nimport buttonCross from './formatters/buttonCross.js';\r\nimport rownum from './formatters/rownum.js';\r\nimport handle from './formatters/handle.js';\r\nimport responsiveCollapse from './formatters/responsiveCollapse.js';\r\nimport rowSelection from './formatters/rowSelection.js';\r\n\r\nexport default {\r\n\tplaintext:plaintext,\r\n\thtml:html,\r\n\ttextarea:textarea,\r\n\tmoney:money,\r\n\tlink:link,\r\n\timage:image,\r\n\ttickCross:tickCross,\r\n\tdatetime:datetime,\r\n\tdatetimediff:datetimediff,\r\n\tlookup:lookup,\r\n\tstar:star,\r\n\ttraffic:traffic,\r\n\tprogress:progress,\r\n\tcolor:color,\r\n\tbuttonTick:buttonTick,\r\n\tbuttonCross:buttonCross,\r\n\trownum:rownum,\r\n\thandle:handle,\r\n\tresponsiveCollapse:responsiveCollapse,\r\n\trowSelection:rowSelection,\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultFormatters from './defaults/formatters.js';\r\n\r\nclass Format extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.registerColumnOption(\"formatter\");\r\n\t\tthis.registerColumnOption(\"formatterParams\");\r\n\r\n\t\tthis.registerColumnOption(\"formatterPrint\");\r\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\r\n\t\tthis.registerColumnOption(\"formatterClipboard\");\r\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\r\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\r\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\r\n\t\tthis.registerColumnOption(\"titleFormatter\");\r\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\r\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\r\n\t}\r\n\r\n\t//initialize column formatter\r\n\tinitializeColumn(column){\r\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\r\n\r\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\r\n\t\t}\r\n\r\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\r\n\t\t}\r\n\r\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\r\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\r\n\t\t}\r\n\t}\r\n\r\n\tlookupFormatter(column, type){\r\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\r\n\t\tformatter = column.definition[\"formatter\" + type];\r\n\r\n\t\t//set column formatter\r\n\t\tswitch(typeof formatter){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Format.formatters[formatter]){\r\n\t\t\t\tconfig.formatter = Format.formatters[formatter];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\r\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tconfig.formatter = formatter;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tconfig.formatter = Format.formatters.plaintext;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn config;\r\n\t}\r\n\r\n\tcellRendered(cell){\r\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\r\n\t\t\tcell.modules.format.renderedCallback();\r\n\t\t\tcell.modules.format.rendered = true;\r\n\t\t}\r\n\t}\r\n\r\n\t//return a formatted value for a column header\r\n\tformatHeader(column, title, el){\r\n\t\tvar formatter, params, onRendered, mockCell;\r\n\r\n\t\tif(column.definition.titleFormatter){\r\n\t\t\tformatter = this.getFormatter(column.definition.titleFormatter);\r\n\r\n\t\t\tonRendered = (callback) => {\r\n\t\t\t\tcolumn.titleFormatterRendered = callback;\r\n\t\t\t};\r\n\r\n\t\t\tmockCell = {\r\n\t\t\t\tgetValue:function(){\r\n\t\t\t\t\treturn title;\r\n\t\t\t\t},\r\n\t\t\t\tgetElement:function(){\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tparams = column.definition.titleFormatterParams || {};\r\n\r\n\t\t\tparams = typeof params === \"function\" ? params() : params;\r\n\r\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\r\n\t\t}else{\r\n\t\t\treturn title;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//return a formatted value for a cell\r\n\tformatValue(cell){\r\n\t\tvar component = cell.getComponent(),\r\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\r\n\r\n\t\tfunction onRendered(callback){\r\n\t\t\tif(!cell.modules.format){\r\n\t\t\t\tcell.modules.format = {};\r\n\t\t\t}\r\n\r\n\t\t\tcell.modules.format.renderedCallback = callback;\r\n\t\t\tcell.modules.format.rendered = false;\r\n\t\t}\r\n\r\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\r\n\t}\r\n\r\n\tformatExportValue(cell, type){\r\n\t\tvar formatter = cell.column.modules.format[type],\r\n\t\tparams;\r\n\r\n\t\tif(formatter){\r\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\r\n\r\n\t\t\tfunction onRendered(callback){\r\n\t\t\t\tif(!cell.modules.format){\r\n\t\t\t\t\tcell.modules.format = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcell.modules.format.renderedCallback = callback;\r\n\t\t\t\tcell.modules.format.rendered = false;\r\n\t\t\t}\r\n\r\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\r\n\r\n\t\t}else{\r\n\t\t\treturn this.formatValue(cell);\r\n\t\t}\r\n\t}\r\n\r\n\tsanitizeHTML(value){\r\n\t\tif(value){\r\n\t\t\tvar entityMap = {\r\n\t\t\t\t'&': '&amp;',\r\n\t\t\t\t'<': '&lt;',\r\n\t\t\t\t'>': '&gt;',\r\n\t\t\t\t'\"': '&quot;',\r\n\t\t\t\t\"'\": '&#39;',\r\n\t\t\t\t'/': '&#x2F;',\r\n\t\t\t\t'`': '&#x60;',\r\n\t\t\t\t'=': '&#x3D;'\r\n\t\t\t};\r\n\r\n\t\t\treturn String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n\t\t\t\treturn entityMap[s];\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\r\n\temptyToSpace(value){\r\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\r\n\t}\r\n\r\n\t//get formatter for cell\r\n\tgetFormatter(formatter){\r\n\t\tvar formatter;\r\n\r\n\t\tswitch(typeof formatter){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Format.formatters[formatter]){\r\n\t\t\t\tformatter = Format.formatters[formatter]\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\r\n\t\t\t\tformatter = Format.formatters.plaintext;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tformatter = formatter;\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tformatter = Format.formatters.plaintext;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn formatter;\r\n\t}\r\n}\r\n\r\nFormat.moduleName = \"format\";\r\n\r\n//load defaults\r\nFormat.formatters = defaultFormatters;\r\n\r\nexport default Format;", "import Module from '../../core/Module.js';\r\n\r\nclass FrozenColumns extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.leftColumns = [];\r\n\t\tthis.rightColumns = [];\r\n\t\tthis.leftMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.rightPadding = 0;\r\n\t\tthis.initializationMode = \"left\";\r\n\t\tthis.active = false;\r\n\t\tthis.scrollEndTimer = false;\r\n\r\n\t\tthis.registerColumnOption(\"frozen\");\r\n\t}\r\n\r\n\t//reset initial state\r\n\treset(){\r\n\t\tthis.initializationMode = \"left\";\r\n\t\tthis.leftColumns = [];\r\n\t\tthis.rightColumns = [];\r\n\t\tthis.leftMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.rightMargin = 0;\r\n\t\tthis.active = false;\r\n\r\n\t\tthis.table.columnManager.headersElement.style.marginLeft = 0;\r\n\t\tthis.table.columnManager.element.style.paddingRight = 0;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\r\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\r\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\r\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\r\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\r\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\r\n\t}\r\n\r\n\tlayoutCell(cell){\r\n\t\tthis.layoutElement(cell.element, cell.column)\r\n\t}\r\n\r\n\t//initialize specific column\r\n\tinitializeColumn(column){\r\n\t\tvar config = {margin:0, edge:false};\r\n\r\n\t\tif(!column.isGroup){\r\n\r\n\t\t\tif(this.frozenCheck(column)){\r\n\r\n\t\t\t\tconfig.position = this.initializationMode;\r\n\r\n\t\t\t\tif(this.initializationMode == \"left\"){\r\n\t\t\t\t\tthis.leftColumns.push(column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.rightColumns.unshift(column);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.active = true;\r\n\r\n\t\t\t\tcolumn.modules.frozen = config;\r\n\t\t\t}else{\r\n\t\t\t\tthis.initializationMode = \"right\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfrozenCheck(column){\r\n\t\tvar frozen = false;\r\n\r\n\t\tif(column.parent.isGroup && column.definition.frozen){\r\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\r\n\t\t}\r\n\r\n\t\tif(column.parent.isGroup){\r\n\t\t\treturn this.frozenCheck(column.parent);\r\n\t\t}else{\r\n\t\t\treturn column.definition.frozen;\r\n\t\t}\r\n\r\n\t\treturn frozen;\r\n\t}\r\n\r\n\t//quick layout to smooth horizontal scrolling\r\n\tscrollHorizontal(){\r\n\t\tvar rows;\r\n\r\n\t\tif(this.active){\r\n\t\t\tclearTimeout(this.scrollEndTimer);\r\n\r\n\t\t\t//layout all rows after scroll is complete\r\n\t\t\tthis.scrollEndTimer = setTimeout(() => {\r\n\t\t\t\tthis.layout();\r\n\t\t\t}, 100);\r\n\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\t\tthis.calcMargins();\r\n\r\n\t\t\tthis.layoutColumnPosition();\r\n\r\n\t\t\tthis.layoutCalcRows();\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type === \"row\"){\r\n\t\t\t\t\tthis.layoutRow(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\r\n\t\t}\r\n\t}\r\n\r\n\t//calculate margins for rows\r\n\tcalcMargins(){\r\n\t\tthis.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\r\n\t\tthis.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\r\n\r\n\t\tthis.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\r\n\t\tthis.table.columnManager.element.style.paddingRight = this.rightMargin;\r\n\r\n\t\t//calculate right frozen columns\r\n\t\tthis.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\r\n\t}\r\n\r\n\t//layout calculation rows\r\n\tlayoutCalcRows(){\r\n\t\tif(this.table.modExists(\"columnCalcs\")){\r\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\r\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\r\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.modExists(\"groupRows\")){\r\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups())\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutGroupCalcs(groups){\r\n\t\tgroups.forEach((group) => {\r\n\t\t\tif(group.calcs.top){\r\n\t\t\t\tthis.layoutRow(group.calcs.top);\r\n\t\t\t}\r\n\r\n\t\t\tif(group.calcs.bottom){\r\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\r\n\t\t\t}\r\n\r\n\t\t\tif(group.groupList && group.groupList.length){\r\n\t\t\t\tthis.layoutGroupCalcs(group.groupList && group.groupList);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//calculate column positions and layout headers\r\n\tlayoutColumnPosition(allCells){\r\n\r\n\t\tvar leftParents = [];\r\n\r\n\t\tthis.leftColumns.forEach((column, i) => {\r\n\t\t\tcolumn.modules.frozen.margin = (this._calcSpace(this.leftColumns, i) + this.table.columnManager.scrollLeft) + \"px\";\r\n\r\n\t\t\tif(i == this.leftColumns.length - 1){\r\n\t\t\t\tcolumn.modules.frozen.edge = true;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.modules.frozen.edge = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(column.parent.isGroup){\r\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\r\n\t\t\t\tif(!leftParents.includes(parentEl)){\r\n\t\t\t\t\tthis.layoutElement(parentEl, column);\r\n\t\t\t\t\tleftParents.push(parentEl);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(column.modules.frozen.edge){\r\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.layoutElement(column.getElement(), column);\r\n\t\t\t}\r\n\r\n\t\t\tif(allCells){\r\n\t\t\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.rightColumns.forEach((column, i) => {\r\n\t\t\tcolumn.modules.frozen.margin = (this.rightPadding - this._calcSpace(this.rightColumns, i + 1)) + \"px\";\r\n\r\n\t\t\tif(i == this.rightColumns.length - 1){\r\n\t\t\t\tcolumn.modules.frozen.edge = true;\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.modules.frozen.edge = false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(column.parent.isGroup){\r\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\r\n\t\t\t}else{\r\n\t\t\t\tthis.layoutElement(column.getElement(), column);\r\n\t\t\t}\r\n\r\n\t\t\tif(allCells){\r\n\t\t\t\tcolumn.cells.forEach((cell) => {\r\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tgetColGroupParentElement(column){\r\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\r\n\t}\r\n\r\n\t//layout columns appropropriatly\r\n\tlayout(){\r\n\t\tvar rightMargin = 0;\r\n\r\n\t\tif(this.active){\r\n\r\n\t\t\t//calculate row padding\r\n\t\t\tthis.calcMargins();\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\r\n\t\t\t\tif(row.type === \"row\"){\r\n\t\t\t\t\tthis.layoutRow(row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.layoutCalcRows();\r\n\r\n\t\t\t//calculate left columns\r\n\t\t\tthis.layoutColumnPosition(true);\r\n\r\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\trowEl.style.paddingLeft = this.leftMargin;\r\n\r\n\t\tthis.leftColumns.forEach((column) => {\r\n\t\t\tvar cell = row.getCell(column);\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.rightColumns.forEach((column) => {\r\n\t\t\tvar cell = row.getCell(column);\r\n\r\n\t\t\tif(cell){\r\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tlayoutElement(element, column){\r\n\r\n\t\tif(column.modules.frozen){\r\n\t\t\telement.style.position = \"absolute\";\r\n\t\t\telement.style.left = column.modules.frozen.margin;\r\n\r\n\t\t\telement.classList.add(\"tabulator-frozen\");\r\n\r\n\t\t\tif(column.modules.frozen.edge){\r\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_calcSpace(columns, index){\r\n\t\tvar width = 0;\r\n\r\n\t\tfor (let i = 0; i < index; i++){\r\n\t\t\tif(columns[i].visible){\r\n\t\t\t\twidth += columns[i].getWidth();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn width;\r\n\t}\r\n}\r\n\r\nFrozenColumns.moduleName = \"frozenColumns\";\r\n\r\nexport default FrozenColumns;", "import Module from '../../core/Module.js';\r\n\r\nclass FrozenRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.topElement = document.createElement(\"div\");\r\n\t\tthis.rows = [];\r\n\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.rows = [];\r\n\r\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\r\n\r\n\t\t// this.table.columnManager.element.append(this.topElement);\r\n\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\r\n\r\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\r\n\r\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\r\n\t}\r\n\r\n\tisRowFrozen(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\t\treturn index > -1;\r\n\t}\r\n\r\n\tisFrozen(){\r\n\t\treturn !!this.rows.length;\r\n\t}\r\n\r\n\t//filter frozen rows out of display data\r\n\tgetRows(rows){\r\n\t\tvar self = this,\r\n\t\tfrozen = [],\r\n\t\toutput = rows.slice(0);\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\tvar index = output.indexOf(row);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\toutput.splice(index, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tfreezeRow(row){\r\n\t\tif(!row.modules.frozen){\r\n\t\t\trow.modules.frozen = true;\r\n\t\t\tthis.topElement.appendChild(row.getElement());\r\n\t\t\trow.initialize();\r\n\t\t\trow.normalizeHeight();\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\tthis.rows.push(row);\r\n\r\n\t\t\tthis.refreshData(false, \"display\")\r\n\r\n\t\t\tthis.styleRows();\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\r\n\t\t}\r\n\t}\r\n\r\n\tunfreezeRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\r\n\t\tif(row.modules.frozen){\r\n\r\n\t\t\trow.modules.frozen = false;\r\n\r\n\t\t\tthis.detachRow(row);\r\n\r\n\t\t\tthis.table.rowManager.adjustTableSize();\r\n\r\n\t\t\tthis.refreshData(false, \"display\")\r\n\r\n\t\t\tif(this.rows.length){\r\n\t\t\t\tthis.styleRows();\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\r\n\t\t}\r\n\t}\r\n\r\n\tdetachRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tvar rowEl = row.getElement();\r\n\r\n\t\t\tif(rowEl.parentNode){\r\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rows.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tstyleRows(row){\r\n\t\tthis.rows.forEach((row, i) => {\r\n\t\t\tthis.table.rowManager.styleRow(row, i);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nFrozenRows.moduleName = \"frozenRows\";\r\n\r\nexport default FrozenRows;", "//public group object\r\nclass GroupComponent {\r\n\tconstructor (group){\r\n\t\tthis._group = group;\r\n\t\tthis.type = \"GroupComponent\";\r\n\r\n\t\treturn new Proxy(this, {\r\n\t\t\tget: function(target, name, receiver) {\r\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\r\n\t\t\t\t\treturn target[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn target._group.table.componentFunctionBinder.handle(\"row\", target._group, name)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tgetKey(){\r\n\t\treturn this._group.key;\r\n\t}\r\n\r\n\tgetField(){\r\n\t\treturn this._group.field;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this._group.element;\r\n\t}\r\n\r\n\tgetRows(){\r\n\t\treturn this._group.getRows(true);\r\n\t}\r\n\r\n\tgetSubGroups(){\r\n\t\treturn this._group.getSubGroups(true);\r\n\t}\r\n\r\n\tgetParentGroup(){\r\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\r\n\t}\r\n\r\n\tisVisible(){\r\n\t\treturn this._group.visible;\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis._group.show();\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis._group.hide();\r\n\t}\r\n\r\n\ttoggle(){\r\n\t\tthis._group.toggleVisibility();\r\n\t}\r\n\r\n\t_getSelf(){\r\n\t\treturn this._group;\r\n\t}\r\n\r\n\tgetTable(){\r\n\t\treturn this._group.groupManager.table;\r\n\t}\r\n}\r\n\r\nexport default GroupComponent;", "import Helpers from '../../core/tools/Helpers.js';\r\nimport GroupComponent from './GroupComponent.js';\r\n\r\n//Group functions\r\nclass Group{\r\n\r\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\r\n\t\tthis.groupManager = groupManager;\r\n\t\tthis.parent = parent;\r\n\t\tthis.key = key;\r\n\t\tthis.level = level;\r\n\t\tthis.field = field;\r\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\r\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\r\n\t\tthis.type = \"group\"; //type of element\r\n\t\tthis.old = oldGroup;\r\n\t\tthis.rows = [];\r\n\t\tthis.groups = [];\r\n\t\tthis.groupList = [];\r\n\t\tthis.generator = generator;\r\n\t\tthis.elementContents = false;\r\n\t\tthis.height = 0;\r\n\t\tthis.outerHeight = 0;\r\n\t\tthis.initialized = false;\r\n\t\tthis.calcs = {};\r\n\t\tthis.initialized = false;\r\n\t\tthis.modules = {};\r\n\t\tthis.arrowElement = false;\r\n\r\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\r\n\r\n\t\tthis.component = null;\r\n\r\n\t\tthis.createElements();\r\n\t\tthis.addBindings();\r\n\r\n\t\tthis.createValueGroups();\r\n\t}\r\n\r\n\twipe(){\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\tgroup.wipe();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\tif(row.modules){\r\n\t\t\t\t\tdelete row.modules.group;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.arrowElement = false;\r\n\t\tthis.elementContents = false;\r\n\t}\r\n\r\n\tcreateElements(){\r\n\t\tvar arrow = document.createElement(\"div\");\r\n\t\tarrow.classList.add(\"tabulator-arrow\");\r\n\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-row\");\r\n\t\tthis.element.classList.add(\"tabulator-group\");\r\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\r\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\r\n\r\n\t\tthis.arrowElement = document.createElement(\"div\");\r\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\r\n\t\tthis.arrowElement.appendChild(arrow);\r\n\r\n\t\t//setup movable rows\r\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\r\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\r\n\t\t}\r\n\t}\r\n\r\n\tcreateValueGroups(){\r\n\t\tvar level = this.level + 1;\r\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\r\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\r\n\t\t\t\tthis._createGroup(value, level);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\taddBindings(){\r\n\t\tvar dblTap,\ttapHold, tap, toggleElement;\r\n\r\n\t\tif ((this.groupManager.table.options.groupContextMenu || this.groupManager.table.options.groupClickMenu) && this.groupManager.table.modExists(\"menu\")){\r\n\t\t\tthis.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu, this);\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupTap){\r\n\t\t\ttap = false;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\ttap = true;\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(tap){\r\n\t\t\t\t\tthis.groupManager.table.options.groupTap(e, this.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttap = false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupDblTap){\r\n\t\t\tdblTap = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tif(dblTap){\r\n\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\tdblTap = null;\r\n\r\n\t\t\t\t\tthis.groupManager.table.options.groupDblTap(e, this.getComponent());\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tdblTap = setTimeout(() => {\r\n\t\t\t\t\t\tclearTimeout(dblTap);\r\n\t\t\t\t\t\tdblTap = null;\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.groupManager.table.options.groupTapHold){\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\r\n\t\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\t\ttapHold = null;\r\n\t\t\t\t\ttap = false;\r\n\t\t\t\t\tthis.groupManager.table.options.groupTapHold(e, this.getComponent());\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}, {passive: true});\r\n\r\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.groupManager.table.options.groupToggleElement){\r\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\r\n\r\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\tthis.toggleVisibility();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_createGroup(groupID, level){\r\n\t\tvar groupKey = level + \"_\" + groupID;\r\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\r\n\r\n\t\tthis.groups[groupKey] = group;\r\n\t\tthis.groupList.push(group);\r\n\t}\r\n\r\n\t_addRowToGroup(row){\r\n\r\n\t\tvar level = this.level + 1;\r\n\r\n\t\tif(this.hasSubGroups){\r\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\r\n\t\t\tgroupKey = level + \"_\" + groupID;\r\n\r\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\r\n\t\t\t\tif(this.groups[groupKey]){\r\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!this.groups[groupKey]){\r\n\t\t\t\t\tthis._createGroup(groupID, level);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_addRow(row){\r\n\t\tthis.rows.push(row);\r\n\t\trow.modules.group = this;\r\n\t}\r\n\r\n\tinsertRow(row, to, after){\r\n\t\tvar data = this.conformRowData({});\r\n\r\n\t\trow.updateData(data);\r\n\r\n\t\tvar toIndex = this.rows.indexOf(to);\r\n\r\n\t\tif(toIndex > -1){\r\n\t\t\tif(after){\r\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(after){\r\n\t\t\t\tthis.rows.push(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.unshift(row);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trow.modules.group = this;\r\n\r\n\t\tthis.generateGroupHeaderContents();\r\n\r\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.updateGroupRows(true);\r\n\t}\r\n\r\n\tscrollHeader(left){\r\n\t\tthis.arrowElement.style.marginLeft = left;\r\n\r\n\t\tthis.groupList.forEach(function(child){\r\n\t\t\tchild.scrollHeader(left);\r\n\t\t});\r\n\t}\r\n\r\n\tgetRowIndex(row){}\r\n\r\n\t//update row data to match grouping contraints\r\n\tconformRowData(data){\r\n\t\tif(this.field){\r\n\t\t\tdata[this.field] = this.key;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\r\n\t\t}\r\n\r\n\t\tif(this.parent){\r\n\t\t\tdata = this.parent.conformRowData(data);\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tremoveRow(row){\r\n\t\tvar index = this.rows.indexOf(row);\r\n\t\tvar el = row.getElement();\r\n\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.rows.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\r\n\t\t\tif(this.parent){\r\n\t\t\t\tthis.parent.removeGroup(this);\r\n\t\t\t}else{\r\n\t\t\t\tthis.groupManager.removeGroup(this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}else{\r\n\r\n\t\t\tif(el.parentNode){\r\n\t\t\t\tel.parentNode.removeChild(el);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateGroupHeaderContents();\r\n\t\t\t\r\n\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tremoveGroup(group){\r\n\t\tvar groupKey = group.level + \"_\" + group.key,\r\n\t\tindex;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tdelete this.groups[groupKey];\r\n\r\n\t\t\tindex = this.groupList.indexOf(group);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.groupList.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t\tif(!this.groupList.length){\r\n\t\t\t\tif(this.parent){\r\n\t\t\t\t\tthis.parent.removeGroup(this);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.groupManager.removeGroup(this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetHeadersAndRows(noCalc){\r\n\t\tvar output = [];\r\n\r\n\t\toutput.push(this);\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(this.visible){\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows(noCalc));\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\r\n\t\t\t\t\tif(this.calcs.top){\r\n\t\t\t\t\t\tthis.calcs.top.detachElement();\r\n\t\t\t\t\t\tthis.calcs.top.deleteCells();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\r\n\t\t\t\t\toutput.push(this.calcs.top);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput = output.concat(this.rows);\r\n\r\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\r\n\t\t\t\t\tif(this.calcs.bottom){\r\n\t\t\t\t\t\tthis.calcs.bottom.detachElement();\r\n\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\r\n\t\t\t\t\toutput.push(this.calcs.bottom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\r\n\r\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\r\n\r\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\r\n\t\t\t\t\t\tif(this.calcs.top){\r\n\t\t\t\t\t\t\tthis.calcs.top.detachElement();\r\n\t\t\t\t\t\t\tthis.calcs.top.deleteCells();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\r\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\r\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\r\n\t\t\t\t\t\tif(this.calcs.bottom){\r\n\t\t\t\t\t\t\tthis.calcs.bottom.detachElement();\r\n\t\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\r\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\r\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetData(visible, transform){\r\n\t\tvar output = [];\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(!visible || (visible && this.visible)){\r\n\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetRowCount(){\r\n\t\tvar count = 0;\r\n\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\tcount += group.getRowCount();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcount = this.rows.length;\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n\r\n\ttoggleVisibility(){\r\n\t\tif(this.visible){\r\n\t\t\tthis.hide();\r\n\t\t}else{\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\r\n\thide(){\r\n\t\tthis.visible = false;\r\n\r\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination){\r\n\r\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\r\n\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach((group) => {\r\n\r\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\r\n\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\trow.detachElement();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\r\n\r\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\r\n\r\n\t\t}else{\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\r\n\t}\r\n\r\n\tshow(){\r\n\t\tthis.visible = true;\r\n\r\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination){\r\n\r\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\r\n\r\n\t\t\tvar prev = this.generateElement();\r\n\r\n\t\t\tif(this.groupList.length){\r\n\t\t\t\tthis.groupList.forEach((group) => {\r\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\r\n\r\n\t\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\r\n\t\t\t\t\t\trow.initialize();\r\n\t\t\t\t\t\tprev = rowEl;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.rows.forEach((row) => {\r\n\t\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\r\n\t\t\t\t\trow.initialize();\r\n\t\t\t\t\tprev = rowEl;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\r\n\r\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\r\n\t\t}else{\r\n\t\t\tthis.groupManager.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\r\n\t}\r\n\r\n\t_visSet(){\r\n\t\tvar data = [];\r\n\r\n\t\tif(typeof this.visible == \"function\"){\r\n\r\n\t\t\tthis.rows.forEach(function(row){\r\n\t\t\t\tdata.push(row.getData());\r\n\t\t\t});\r\n\r\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\r\n\t\t}\r\n\t}\r\n\r\n\tgetRowGroup(row){\r\n\t\tvar match = false;\r\n\t\tif(this.groupList.length){\r\n\t\t\tthis.groupList.forEach(function(group){\r\n\t\t\t\tvar result = group.getRowGroup(row);\r\n\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tmatch = result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tif(this.rows.find(function(item){\r\n\t\t\t\treturn item === row;\r\n\t\t\t})){\r\n\t\t\t\tmatch = this;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tgetSubGroups(component){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.groupList.forEach(function(child){\r\n\t\t\toutput.push(component ? child.getComponent() : child);\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetRows(compoment){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\toutput.push(compoment ? row.getComponent() : row);\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgenerateGroupHeaderContents(){\r\n\t\tvar data = [];\r\n\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\tdata.push(row.getData());\r\n\t\t});\r\n\r\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\r\n\r\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\r\n\r\n\t\tif(typeof this.elementContents === \"string\"){\r\n\t\t\tthis.element.innerHTML = this.elementContents;\r\n\t\t}else{\r\n\t\t\tthis.element.appendChild(this.elementContents);\r\n\t\t}\r\n\r\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\r\n\t}\r\n\r\n\tgetPath(path = []) {\r\n\t\tpath.unshift(this.key);\r\n\t\tif(this.parent) {\r\n\t\t\tthis.parent.getPath(path);\r\n\t\t}\r\n\t\treturn path;\r\n\t}\r\n\r\n\t////////////// Standard Row Functions //////////////\r\n\r\n\tgetElement(){\r\n\t\treturn this.elementContents ? this.element : this.generateElement();\r\n\t}\r\n\r\n\tgenerateElement(){\r\n\t\tthis.addBindings = false;\r\n\r\n\t\tthis._visSet();\r\n\r\n\t\tif(this.visible){\r\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\r\n\t\t}else{\r\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\r\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\r\n\t\t}\r\n\r\n\t\tthis.generateGroupHeaderContents();\r\n\r\n\t\t// this.addBindings();\r\n\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tdetachElement(){\r\n\t\tif (this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\t//normalize the height of elements in the row\r\n\tnormalizeHeight(){\r\n\t\tthis.setHeight(this.element.clientHeight);\r\n\t}\r\n\r\n\tinitialize(force){\r\n\t\tif(!this.initialized || force){\r\n\t\t\tthis.normalizeHeight();\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\treinitialize(){\r\n\t\tthis.initialized = false;\r\n\t\tthis.height = 0;\r\n\r\n\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\tthis.initialize(true);\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeight(height){\r\n\t\tif(this.height != height){\r\n\t\t\tthis.height = height;\r\n\t\t\tthis.outerHeight = this.element.offsetHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t//return rows outer height\r\n\tgetHeight(){\r\n\t\treturn this.outerHeight;\r\n\t}\r\n\r\n\tgetGroup(){\r\n\t\treturn this;\r\n\t}\r\n\r\n\treinitializeHeight(){}\r\n\r\n\tcalcHeight(){}\r\n\r\n\tsetCellHeight(){}\r\n\r\n\tclearCellHeight(){}\r\n\r\n\tdeinitializeHeight(){}\r\n\r\n\t//////////////// Object Generation /////////////////\r\n\tgetComponent(){\r\n\t\tif(!this.component){\r\n\t\t\tthis.component = new GroupComponent(this);\r\n\t\t}\r\n\r\n\t\treturn this.component;\r\n\t}\r\n}\r\n\r\nexport default Group;", "import Module from '../../core/Module.js';\r\n\r\nimport GroupComponent from './GroupComponent.js';\r\nimport Group from './Group.js';\r\n\r\nclass GroupRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\r\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\r\n\t\tthis.headerGenerator = [function(){return \"\";}];\r\n\t\tthis.groupList = []; //ordered list of groups\r\n\t\tthis.allowedValues = false;\r\n\t\tthis.groups = {}; //hold row groups\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\r\n\t\tthis.displayHandler = this.getRows.bind(this);\r\n\r\n\t\t//register table options\r\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\r\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\r\n\t\tthis.registerTableOption(\"groupValues\", false);\r\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\r\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\r\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\r\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\r\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\r\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\r\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\r\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\r\n\r\n\t\t//register table functions\r\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\r\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\r\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\r\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\r\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\r\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\r\n\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\r\n\t}\r\n\r\n\t//initialize group configuration\r\n\tinitialize(){\r\n\t\tif(this.table.options.groupBy){\r\n\r\n\t\t\tthis.configureGroupSetup();\r\n\r\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\r\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\r\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\r\n\t\t\t}\r\n\r\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\r\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\r\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\r\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\r\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\r\n\r\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\r\n\r\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\r\n\r\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\r\n\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tconfigureGroupSetup(){\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tvar groupBy = this.table.options.groupBy,\r\n\t\t\tstartOpen = this.table.options.groupStartOpen,\r\n\t\t\tgroupHeader = this.table.options.groupHeader;\r\n\r\n\t\t\tthis.allowedValues = this.table.options.groupValues;\r\n\r\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\r\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\r\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\r\n\r\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\r\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\r\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tthis.groupIDLookups = [];\r\n\r\n\t\t\tif(Array.isArray(groupBy) || groupBy){\r\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\r\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\r\n\r\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\r\n\r\n\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\tif(col.definition.topCalc){\r\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(col.definition.bottomCalc){\r\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!Array.isArray(groupBy)){\r\n\t\t\t\tgroupBy = [groupBy];\r\n\t\t\t}\r\n\r\n\t\t\tgroupBy.forEach((group, i) => {\r\n\t\t\t\tvar lookupFunc, column;\r\n\r\n\t\t\t\tif(typeof group == \"function\"){\r\n\t\t\t\t\tlookupFunc = group;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\r\n\r\n\t\t\t\t\tif(column){\r\n\t\t\t\t\t\tlookupFunc = function(data){\r\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlookupFunc = function(data){\r\n\t\t\t\t\t\t\treturn data[group];\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.groupIDLookups.push({\r\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\r\n\t\t\t\t\tfunc:lookupFunc,\r\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tif(startOpen){\r\n\t\t\t\tif(!Array.isArray(startOpen)){\r\n\t\t\t\t\tstartOpen = [startOpen];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstartOpen.forEach((level) => {\r\n\t\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.startOpen = startOpen;\r\n\t\t\t}\r\n\r\n\t\t\tif(groupHeader){\r\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trowSample(rows, prevValue){\r\n\t\tvar group = this.getGroups(false)[0];\r\n\r\n\t\tprevValue.push(group.getRows(false)[0]);\r\n\r\n\t\treturn prevValue;\r\n\t}\r\n\r\n\tvirtualRenderFill(){\r\n\t\tvar el = this.table.rowManager.tableElement;\r\n\t\tvar rows = this.table.rowManager.getVisibleRows();\r\n\r\n\t\trows = rows.filter((row) => {\r\n\t\t\treturn row.type !== \"group\";\r\n\t\t});\r\n\r\n\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\r\n\r\n\t\t// if(this.table.options.groupBy){\r\n\t\t// \tif(this.layoutMode() != \"fitDataFill\" && rowsCount == this.table.modules.groupRows.countGroups()){\r\n\t\t// \t\tel.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t// \t}\r\n\t\t// }\r\n\t}\r\n\r\n\trowAddingIndex(row, index, top){\r\n\t\tthis.assignRowToGroup(row);\r\n\r\n\t\tvar groupRows = row.modules.group.rows;\r\n\r\n\t\tif(groupRows.length > 1){\r\n\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\r\n\t\t\t\tif(top){\r\n\t\t\t\t\tif(groupRows[0] !== row){\r\n\t\t\t\t\t\tindex = groupRows[0];\r\n\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\r\n\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\r\n\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn index;\r\n\t}\r\n\r\n\ttrackChanges(){\r\n\t\tthis.dispatch(\"group-changed\");\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tsetGroupBy(groups){\r\n\t\tthis.table.options.groupBy = groups;\r\n\t\tif(!this.initialized){\r\n\t\t\tthis.initialize();\r\n\t\t}else{\r\n\t\t\tthis.configureGroupSetup();\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\tsetGroupValues(groupValues){\r\n\t\tthis.table.options.groupValues = groupValues;\r\n\t\tthis.configureGroupSetup();\r\n\t\tthis.refreshData();\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\tsetGroupStartOpen(values){\r\n\t\tthis.table.options.groupStartOpen = values;\r\n\t\tthis.configureGroupSetup();\r\n\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tthis.refreshData();\r\n\r\n\t\t\tthis.trackChanges();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetGroupHeader(values){\r\n\t\tthis.table.options.groupHeader = values;\r\n\t\tthis.configureGroupSetup();\r\n\r\n\t\tif(this.table.options.groupBy){\r\n\t\t\tthis.refreshData();\r\n\r\n\t\t\tthis.trackChanges();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\r\n\t\t}\r\n\t}\r\n\r\n\tuserGetGroups(values){\r\n\t\treturn this.getGroups(true);\r\n\t}\r\n\r\n\t// get grouped table data in the same format as getData()\r\n\tuserGetGroupedData(){\r\n\t\treturn this.table.options.groupBy ?\r\n\t\tthis.getGroupedData() : this.getData()\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////////\r\n\t///////// Component Functions /////////\r\n\t///////////////////////////////////////\r\n\r\n\trowGetGroup(row){\r\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\trowMoving(from, to, after){\r\n\t\tif(!after && to instanceof Group){\r\n\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\r\n\t\t}\r\n\r\n\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\r\n\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\r\n\r\n\t\tif(toGroup === fromGroup){\r\n\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\r\n\t\t}else{\r\n\t\t\tif(fromGroup){\r\n\t\t\t\tfromGroup.removeRow(from);\r\n\t\t\t}\r\n\r\n\t\t\ttoGroup.insertRow(from, to, after);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trowDeleting(row){\r\n\t\t//remove from group\r\n\t\tif(row.modules.group){\r\n\t\t\trow.modules.group.removeRow(row);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trowsUpdated(row){\r\n\t\tthis.updateGroupRows(true);\r\n\t}\r\n\r\n\tcellUpdated(cell){\r\n\t\tthis.reassignRowToGroup(cell.row);\r\n\t}\r\n\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\t//return appropriate rows with group headers\r\n\tgetRows(rows){\r\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\r\n\r\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\r\n\r\n\t\t\tthis.generateGroups(rows);\r\n\r\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\r\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\r\n\t\t\t}\r\n\r\n\t\t\treturn this.updateGroupRows();\r\n\r\n\t\t}else{\r\n\t\t\treturn rows.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\tgetGroups(component){\r\n\t\tvar groupComponents = [];\r\n\r\n\t\tthis.groupList.forEach(function(group){\r\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\r\n\t\t});\r\n\r\n\t\treturn groupComponents;\r\n\t}\r\n\r\n\tgetChildGroups(group){\r\n\t\tvar groupComponents = [];\r\n\r\n\t\tif(!group){\r\n\t\t\tgroup = this;\r\n\t\t}\r\n\r\n\t\tgroup.groupList.forEach((child) => {\r\n\t\t\tif(child.groupList.length){\r\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\r\n\t\t\t}else{\r\n\t\t\t\tgroupComponents.push(child);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn groupComponents;\r\n\t}\r\n\r\n\twipe(){\r\n\t\tthis.groupList.forEach(function(group){\r\n\t\t\tgroup.wipe();\r\n\t\t});\r\n\t}\r\n\r\n\tpullGroupListData(groupList) {\r\n\t\tvar groupListData = [];\r\n\r\n\t\tgroupList.forEach((group) => {\r\n\t\t\tvar groupHeader = {};\r\n\t\t\tgroupHeader.level = 0;\r\n\t\t\tgroupHeader.rowCount = 0;\r\n\t\t\tgroupHeader.headerContent = \"\";\r\n\t\t\tvar childData = [];\r\n\r\n\t\t\tif (group.hasSubGroups) {\r\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\r\n\r\n\t\t\t\tgroupHeader.level = group.level;\r\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\r\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\r\n\r\n\t\t\t\tgroupListData.push(groupHeader);\r\n\t\t\t\tgroupListData = groupListData.concat(childData);\r\n\t\t\t}\r\n\r\n\t\t\telse {\r\n\t\t\t\tgroupHeader.level = group.level;\r\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\r\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\r\n\r\n\t\t\t\tgroupListData.push(groupHeader);\r\n\r\n\t\t\t\tgroup.getRows().forEach((row) => {\r\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn groupListData\r\n\t}\r\n\r\n\tgetGroupedData(){\r\n\r\n\t\treturn this.pullGroupListData(this.groupList);\r\n\t}\r\n\r\n\tgetRowGroup(row){\r\n\t\tvar match = false;\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\tvar result = group.getRowGroup(row);\r\n\r\n\t\t\tif(result){\r\n\t\t\t\tmatch = result;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn match;\r\n\t}\r\n\r\n\tcountGroups(){\r\n\t\treturn this.groupList.length;\r\n\t}\r\n\r\n\tgenerateGroups(rows){\r\n\t\tvar oldGroups = this.groups;\r\n\r\n\t\tthis.groups = {};\r\n\t\tthis.groupList = [];\r\n\r\n\t\tif(this.allowedValues && this.allowedValues[0]){\r\n\t\t\tthis.allowedValues[0].forEach((value) => {\r\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\r\n\t\t\t});\r\n\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcreateGroup(groupID, level, oldGroups){\r\n\t\tvar groupKey = level + \"_\" + groupID,\r\n\t\tgroup;\r\n\r\n\t\toldGroups = oldGroups || [];\r\n\r\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\r\n\r\n\t\tthis.groups[groupKey] = group;\r\n\t\tthis.groupList.push(group);\r\n\t}\r\n\r\n\tassignRowToExistingGroup(row, oldGroups){\r\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\r\n\t\tgroupKey = \"0_\" + groupID;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tthis.groups[groupKey].addRow(row);\r\n\t\t}\r\n\t}\r\n\r\n\tassignRowToGroup(row, oldGroups){\r\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\r\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\r\n\r\n\t\tif(newGroupNeeded){\r\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\r\n\t\t}\r\n\r\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\r\n\r\n\t\treturn !newGroupNeeded;\r\n\t}\r\n\r\n\treassignRowToGroup(row){\r\n\t\tif(row.type === \"row\"){\r\n\t\t\tvar oldRowGroup = row.modules.group,\r\n\t\t\toldGroupPath = oldRowGroup.getPath(),\r\n\t\t\tnewGroupPath = this.getExpectedPath(row),\r\n\t\t\tsamePath = true;\r\n\r\n\t\t\t// figure out if new group path is the same as old group path\r\n\t\t\tvar samePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\r\n\t\t\t\treturn element === newGroupPath[index];\r\n\t\t\t});\r\n\r\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\r\n\t\t\tif(!samePath) {\r\n\t\t\t\toldRowGroup.removeRow(row);\r\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\r\n\t\t\t\tthis.refreshData(true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetExpectedPath(row) {\r\n\t\tvar groupPath = [], rowData = row.getData();\r\n\r\n\t\tthis.groupIDLookups.forEach((groupId) => {\r\n\t\t\tgroupPath.push(groupId.func(rowData));\r\n\t\t});\r\n\r\n\t\treturn groupPath;\r\n\t}\r\n\r\n\tupdateGroupRows(force){\r\n\t\tvar output = [],\r\n\t\toldRowCount;\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\toutput = output.concat(group.getHeadersAndRows());\r\n\t\t});\r\n\r\n\t\tif(force){\r\n\t\t\tthis.refreshData(true, this.displayHandler);\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tscrollHeaders(left){\r\n\t\tif(this.table.options.renderHorizontal === \"virtual\"){\r\n\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\r\n\t\t}\r\n\r\n\t\tleft = left + \"px\";\r\n\r\n\t\tthis.groupList.forEach((group) => {\r\n\t\t\tgroup.scrollHeader(left);\r\n\t\t});\r\n\t}\r\n\r\n\tremoveGroup(group){\r\n\t\tvar groupKey = group.level + \"_\" + group.key,\r\n\t\tindex;\r\n\r\n\t\tif(this.groups[groupKey]){\r\n\t\t\tdelete this.groups[groupKey];\r\n\r\n\t\t\tindex = this.groupList.indexOf(group);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.groupList.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nGroupRows.moduleName = \"groupRows\";\r\n\r\nexport default GroupRows;", "export default {\r\n\tcellEdit: function(action){\r\n\t\taction.component.setValueProcessData(action.data.oldValue);\r\n\t\taction.component.cellRendered();\r\n\t},\r\n\r\n\trowAdd: function(action){\r\n\t\taction.component.deleteActual();\r\n\t},\r\n\r\n\trowDelete: function(action){\r\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis._rebindRow(action.component, newRow);\r\n\t},\r\n\r\n\trowMove: function(action){\r\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\r\n\t\tthis.table.rowManager.redraw();\r\n\t},\r\n};", "export default {\r\n\tcellEdit: function(action){\r\n\t\taction.component.setValueProcessData(action.data.newValue);\r\n\t\taction.component.cellRendered();\r\n\t},\r\n\r\n\trowAdd: function(action){\r\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\r\n\r\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\r\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\r\n\t\t}\r\n\r\n\t\tthis._rebindRow(action.component, newRow);\r\n\t},\r\n\r\n\trowDelete:function(action){\r\n\t\taction.component.deleteActual();\r\n\t},\r\n\r\n\trowMove: function(action){\r\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\r\n\t\tthis.table.rowManager.redraw();\r\n\t},\r\n};", "import Module from '../../core/Module.js';\r\nimport Row from '../../core/row/Row.js';\r\nimport Cell from '../../core/cell/Cell.js';\r\n\r\nimport defaultUndoers from './defaults/undoers.js';\r\nimport defaultRedoers from './defaults/redoers.js';\r\n\r\nclass History extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.history = [];\r\n\t\tthis.index = -1;\r\n\r\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.history){\r\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\r\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\r\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\r\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\r\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\r\n\t\t}\r\n\r\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\r\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\r\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\r\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\r\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\r\n\t}\r\n\r\n\trowMoved(from, to, after){\r\n\t\tthis.action(\"rowMove\", from, {posFrom:this.table.rowManager.getRowPosition(from), posTo:this.table.rowManager.getRowPosition(to), to:to, after:after});\r\n\t}\r\n\r\n\trowAdded(row, data, pos, index){\r\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\r\n\t}\r\n\r\n\trowDeleted(row){\r\n\t\tvar index, rows;\r\n\r\n\t\tif(this.table.options.groupBy){\r\n\r\n\t\t\trows = row.getComponent().getGroup().rows\r\n\t\t\tindex = rows.indexOf(row);\r\n\r\n\t\t\tif(index){\r\n\t\t\t\tindex = rows[index-1];\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\r\n\r\n\t\t\tif(index){\r\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\r\n\t}\r\n\r\n\tcellUpdated(cell){\r\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\r\n\t}\r\n\r\n\tclear(){\r\n\t\tthis.history = [];\r\n\t\tthis.index = -1;\r\n\t}\r\n\r\n\taction(type, component, data){\r\n\t\tthis.history = this.history.slice(0, this.index + 1);\r\n\r\n\t\tthis.history.push({\r\n\t\t\ttype:type,\r\n\t\t\tcomponent:component,\r\n\t\t\tdata:data,\r\n\t\t});\r\n\r\n\t\tthis.index ++;\r\n\t}\r\n\r\n\tgetHistoryUndoSize(){\r\n\t\treturn this.index + 1;\r\n\t}\r\n\r\n\tgetHistoryRedoSize(){\r\n\t\treturn this.history.length - (this.index + 1);\r\n\t}\r\n\r\n\tclearComponentHistory(component){\r\n\t\tvar index = this.history.findIndex(function(item){\r\n\t\t\treturn item.component === component;\r\n\t\t});\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.history.splice(index, 1);\r\n\t\t\tif(index <= this.index){\r\n\t\t\t\tthis.index--;\r\n\t\t\t}\r\n\r\n\t\t\tthis.clearComponentHistory(component);\r\n\t\t}\r\n\t}\r\n\r\n\tundo(){\r\n\t\tif(this.index > -1){\r\n\t\t\tlet action = this.history[this.index];\r\n\r\n\t\t\tHistory.undoers[action.type].call(this, action);\r\n\r\n\t\t\tthis.index--;\r\n\r\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tredo(){\r\n\t\tif(this.history.length-1 > this.index){\r\n\r\n\t\t\tthis.index++;\r\n\r\n\t\t\tlet action = this.history[this.index];\r\n\r\n\t\t\tHistory.redoers[action.type].call(this, action);\r\n\r\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//rebind rows to new element after deletion\r\n\t_rebindRow(oldRow, newRow){\r\n\t\tthis.history.forEach(function(action){\r\n\t\t\tif(action.component instanceof Row){\r\n\t\t\t\tif(action.component === oldRow){\r\n\t\t\t\t\taction.component = newRow;\r\n\t\t\t\t}\r\n\t\t\t}else if(action.component instanceof Cell){\r\n\t\t\t\tif(action.component.row === oldRow){\r\n\t\t\t\t\tvar field = action.component.column.getField();\r\n\r\n\t\t\t\t\tif(field){\r\n\t\t\t\t\t\taction.component = newRow.getCell(field);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nHistory.moduleName = \"history\";\r\n\r\n//load defaults\r\nHistory.undoers = defaultUndoers;\r\nHistory.redoers = defaultRedoers;\r\n\r\nexport default History;", "import Module from '../../core/Module.js';\r\nimport Column from '../../core/column/Column.js';\r\n\r\nclass HtmlTableImport extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.fieldIndex = [];\r\n\t\tthis.hasIndex = false;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.tableElementCheck();\r\n\t}\r\n\r\n\ttableElementCheck(){\r\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\r\n\t\t\tthis.parseTable();\r\n\t\t}\r\n\t}\r\n\r\n\tparseTable(){\r\n\t\tvar element = this.table.originalElement,\r\n\t\toptions = this.table.options,\r\n\t\tcolumns = options.columns,\r\n\t\theaders = element.getElementsByTagName(\"th\"),\r\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\r\n\t\tdata = [],\r\n\t\tnewTable;\r\n\r\n\t\tthis.hasIndex = false;\r\n\r\n\t\tthis.dispatchExternal(\"htmlImporting\");\r\n\r\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\r\n\r\n\t\t//check for Tabulator inline options\r\n\t\tthis._extractOptions(element, options);\r\n\r\n\t\tif(headers.length){\r\n\t\t\tthis._extractHeaders(headers, rows);\r\n\t\t}else{\r\n\t\t\tthis._generateBlankHeaders(headers, rows);\r\n\t\t}\r\n\r\n\t\t//iterate through table rows and build data set\r\n\t\tfor(var index = 0; index < rows.length; index++){\r\n\t\t\tvar row = rows[index],\r\n\t\t\tcells = row.getElementsByTagName(\"td\"),\r\n\t\t\titem = {};\r\n\r\n\t\t\t//create index if the dont exist in table\r\n\t\t\tif(!this.hasIndex){\r\n\t\t\t\titem[options.index] = index;\r\n\t\t\t}\r\n\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\tvar cell = cells[i];\r\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\r\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//add row data to item\r\n\t\t\tdata.push(item);\r\n\t\t}\r\n\r\n\t\toptions.data = data;\r\n\r\n\t\tthis.dispatchExternal(\"htmlImported\");\r\n\t}\r\n\r\n\t//extract tabulator attribute options\r\n\t_extractOptions(element, options, defaultOptions){\r\n\t\tvar attributes = element.attributes;\r\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\r\n\t\tvar optionsList = {};\r\n\r\n\t\toptionsArr.forEach((item) => {\r\n\t\t\toptionsList[item.toLowerCase()] = item;\r\n\t\t});\r\n\r\n\t\tfor(var index in attributes){\r\n\t\t\tvar attrib = attributes[index];\r\n\t\t\tvar name;\r\n\r\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\r\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\r\n\r\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\r\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//get value of attribute\r\n\t_attribValue(value){\r\n\t\tif(value === \"true\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(value === \"false\"){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\t//find column if it has already been defined\r\n\t_findCol(title){\r\n\t\tvar match = this.table.options.columns.find((column) => {\r\n\t\t\treturn column.title === title;\r\n\t\t});\r\n\r\n\t\treturn match || false;\r\n\t}\r\n\r\n\t//extract column from headers\r\n\t_extractHeaders(headers, rows){\r\n\t\tfor(var index = 0; index < headers.length; index++){\r\n\t\t\tvar header = headers[index],\r\n\t\t\texists = false,\r\n\t\t\tcol = this._findCol(header.textContent),\r\n\t\t\twidth, attributes;\r\n\r\n\t\t\tif(col){\r\n\t\t\t\texists = true;\r\n\t\t\t}else{\r\n\t\t\t\tcol = {title:header.textContent.trim()};\r\n\t\t\t}\r\n\r\n\t\t\tif(!col.field) {\r\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\r\n\t\t\t}\r\n\r\n\t\t\twidth = header.getAttribute(\"width\");\r\n\r\n\t\t\tif(width && !col.width)\t{\r\n\t\t\t\tcol.width = width;\r\n\t\t\t}\r\n\r\n\t\t\t//check for Tabulator inline options\r\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\r\n\r\n\t\t\tthis.fieldIndex[index] = col.field;\r\n\r\n\t\t\tif(col.field == this.table.options.index){\r\n\t\t\t\tthis.hasIndex = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(!exists){\r\n\t\t\t\tthis.table.options.columns.push(col);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t//generate blank headers\r\n\t_generateBlankHeaders(headers, rows){\r\n\t\tfor(var index = 0; index < headers.length; index++){\r\n\t\t\tvar header = headers[index],\r\n\t\t\tcol = {title:\"\", field:\"col\" + index};\r\n\r\n\t\t\tthis.fieldIndex[index] = col.field;\r\n\r\n\t\t\tvar width = header.getAttribute(\"width\");\r\n\r\n\t\t\tif(width){\r\n\t\t\t\tcol.width = width;\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.options.columns.push(col);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nHtmlTableImport.moduleName = \"htmlTableImport\";\r\n\r\nexport default HtmlTableImport;", "import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nimport Cell from '../../core/cell/Cell';\r\nimport Column from '../../core/column/Column';\r\n\r\nclass Interaction extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.eventMap = {\r\n\t\t\t//row events\r\n\t\t\trowClick:\"row-click\",\r\n\t\t\trowDblClick:\"row-dblclick\",\r\n\t\t\trowContext:\"row-contextmenu\",\r\n\t\t\trowMouseEnter:\"row-mouseenter\",\r\n\t\t\trowMouseLeave:\"row-mouseleave\",\r\n\t\t\trowMouseOver:\"row-mouseover\",\r\n\t\t\trowMouseOut:\"row-mouseout\",\r\n\t\t\trowMouseMove:\"row-mousemove\",\r\n\t\t\trowTap:\"row\",\r\n\t\t\trowDblTap:\"row\",\r\n\t\t\trowTapHold:\"row\",\r\n\r\n\t\t\t//cell events\r\n\t\t\tcellClick:\"cell-click\",\r\n\t\t\tcellDblClick:\"cell-dblclick\",\r\n\t\t\tcellContext:\"cell-contextmenu\",\r\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\r\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\r\n\t\t\tcellMouseOver:\"cell-mouseover\",\r\n\t\t\tcellMouseOut:\"cell-mouseout\",\r\n\t\t\tcellMouseMove:\"cell-mousemove\",\r\n\t\t\tcellTap:\"cell\",\r\n\t\t\tcellDblTap:\"cell\",\r\n\t\t\tcellTapHold:\"cell\",\r\n\r\n\t\t\t//column header events\r\n\t\t\theaderClick:\"column-click\",\r\n\t\t\theaderDblClick:\"column-dblclick\",\r\n\t\t\theaderContext:\"column-contextmenu\",\r\n\t\t\theaderMouseEnter:\"column-mouseenter\",\r\n\t\t\theaderMouseLeave:\"column-mouseleave\",\r\n\t\t\theaderMouseOver:\"column-mouseover\",\r\n\t\t\theaderMouseOut:\"column-mouseout\",\r\n\t\t\theaderMouseMove:\"column-mousemove\",\r\n\t\t\theaderTap:\"column\",\r\n\t\t\theaderDblTap:\"column\",\r\n\t\t\theaderTapHold:\"column\",\r\n\r\n\t\t\t//group header\r\n\t\t\tgroupClick:\"group-click\",\r\n\t\t\tgroupDblClick:\"group-dblclick\",\r\n\t\t\tgroupContext:\"group-contextmenu\",\r\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\r\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\r\n\t\t\tgroupMouseOver:\"group-mouseover\",\r\n\t\t\tgroupMouseOut:\"group-mouseout\",\r\n\t\t\tgroupMouseMove:\"group-mousemove\",\r\n\t\t\tgroupTap:\"group\",\r\n\t\t\tgroupDblTap:\"group\",\r\n\t\t\tgroupTapHold:\"group\",\r\n\t\t}\r\n\r\n\t\tthis.subscribers = {};\r\n\r\n\t\tthis.touchSubscribers = {};\r\n\r\n\t\tthis.columnSubscribers = {};\r\n\r\n\t\tthis.touchWatchers = {\r\n\t\t\trow:{\r\n\t\t\t\ttap:null,\r\n\t\t\t\ttapDbl:null,\r\n\t\t\t\ttapHold:null,\r\n\t\t\t},\r\n\t\t\tcell:{\r\n\t\t\t\ttap:null,\r\n\t\t\t\ttapDbl:null,\r\n\t\t\t\ttapHold:null,\r\n\t\t\t},\r\n\t\t\tcolumn:{\r\n\t\t\t\ttap:null,\r\n\t\t\t\ttapDbl:null,\r\n\t\t\t\ttapHold:null,\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.registerColumnOption(\"headerClick\");\r\n\t\tthis.registerColumnOption(\"headerDblClick\");\r\n\t\tthis.registerColumnOption(\"headerContext\");\r\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\r\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\r\n\t\tthis.registerColumnOption(\"headerMouseOver\");\r\n\t\tthis.registerColumnOption(\"headerMouseOut\");\r\n\t\tthis.registerColumnOption(\"headerMouseMove\");\r\n\t\tthis.registerColumnOption(\"headerTap\");\r\n\t\tthis.registerColumnOption(\"headerDblTap\");\r\n\t\tthis.registerColumnOption(\"headerTapHold\");\r\n\r\n\t\tthis.registerColumnOption(\"cellClick\");\r\n\t\tthis.registerColumnOption(\"cellDblClick\");\r\n\t\tthis.registerColumnOption(\"cellContext\");\r\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\r\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\r\n\t\tthis.registerColumnOption(\"cellMouseOver\");\r\n\t\tthis.registerColumnOption(\"cellMouseOut\");\r\n\t\tthis.registerColumnOption(\"cellMouseMove\");\r\n\t\tthis.registerColumnOption(\"cellTap\");\r\n\t\tthis.registerColumnOption(\"cellDblTap\");\r\n\t\tthis.registerColumnOption(\"cellTapHold\");\r\n\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.initializeExternalEvents();\r\n\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this))\r\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this))\r\n\t}\r\n\r\n\tcellContentsSelectionFixer(e, cell){\r\n\t\tif(this.table.modExists(\"edit\")){\r\n\t\t\tif (this.table.modules.edit.currentCell === this){\r\n\t\t\t\treturn; //prevent instant selection of editor content\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\ttry{\r\n\t\t\tif (document.selection) { // IE\r\n\t\t\t\tvar range = document.body.createTextRange();\r\n\t\t\t\trange.moveToElementText(this.element);\r\n\t\t\t\trange.select();\r\n\t\t\t} else if (window.getSelection) {\r\n\t\t\t\tvar range = document.createRange();\r\n\t\t\t\trange.selectNode(this.element);\r\n\t\t\t\twindow.getSelection().removeAllRanges();\r\n\t\t\t\twindow.getSelection().addRange(range);\r\n\t\t\t}\r\n\t\t}catch(e){}\r\n\t}\r\n\r\n\tinitializeExternalEvents(){\r\n\t\tfor(let key in this.eventMap){\r\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key))\r\n\t\t}\r\n\t}\r\n\r\n\tsubscriptionChanged(key, added){\r\n\t\tvar index;\r\n\r\n\t\tif(added){\r\n\t\t\tif(!this.subscribers[key]){\r\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\r\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\r\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.subscribeTouchEvents(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.eventMap[key].includes(\"-\")){\r\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\r\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\r\n\t\t\t\t\tdelete this.subscribers[key];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.unsubscribeTouchEvents(key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tsubscribeTouchEvents(key){\r\n\t\tvar type = this.eventMap[key];\r\n\r\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\r\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\r\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\r\n\r\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\r\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\r\n\t\t}\r\n\r\n\t\tthis.subscribers[key] = true;\r\n\t}\r\n\r\n\tunsubscribeTouchEvents(key){\r\n\t\tvar notouch = true,\r\n\t\ttype = this.eventMap[key];\r\n\r\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\r\n\t\t\tdelete this.subscribers[key];\r\n\r\n\t\t\tfor(let i in this.eventMap){\r\n\t\t\t\tif(this.eventMap[i] === type){\r\n\t\t\t\t\tif(this.subscribers[i]){\r\n\t\t\t\t\t\tnotouch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(notouch){\r\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\r\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\r\n\r\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\r\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.definition;\r\n\r\n\t\tfor(let key in this.eventMap){\r\n\t\t\tif(def[key]){\r\n\t\t\t\tthis.subscriptionChanged(key, true);\r\n\r\n\t\t\t\tif(!this.columnSubscribers[key]){\r\n\t\t\t\t\tthis.columnSubscribers[key] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.columnSubscribers[key].push(column);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandle(action, e, component){\r\n\t\tthis.dispatchEvent(action, e, component);\r\n\t}\r\n\r\n\thandleTouch(type, action, e, component){\r\n\t\tvar watchers = this.touchWatchers[type];\r\n\r\n\t\tif(type === \"column\"){\r\n\t\t\ttype = \"header\";\r\n\t\t}\r\n\r\n\t\tswitch(action){\r\n\t\t\tcase \"start\":\r\n\t\t\twatchers.tap = true;\r\n\r\n\t\t\tclearTimeout(watchers.tapHold);\r\n\r\n\t\t\twatchers.tapHold = setTimeout(() => {\r\n\t\t\t\tclearTimeout(watchers.tapHold);\r\n\t\t\t\twatchers.tapHold = null;\r\n\r\n\t\t\t\twatchers.tap = null;\r\n\t\t\t\tclearTimeout(watchers.tapDbl);\r\n\t\t\t\twatchers.tapDbl = null;\r\n\r\n\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\r\n\t\t\t}, 1000);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"end\":\r\n\t\t\tif(watchers.tap){\r\n\r\n\t\t\t\twatchers.tap = null;\r\n\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\r\n\t\t\t}\r\n\r\n\t\t\tif(watchers.tapDbl){\r\n\t\t\t\tclearTimeout(watchers.tapDbl);\r\n\t\t\t\twatchers.tapDbl = null;\r\n\r\n\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\r\n\t\t\t}else{\r\n\t\t\t\twatchers.tapDbl = setTimeout(() => {\r\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\r\n\t\t\t\t\twatchers.tapDbl = null;\r\n\t\t\t\t}, 300);\r\n\t\t\t}\r\n\r\n\t\t\tclearTimeout(watchers.tapHold);\r\n\t\t\twatchers.tapHold = null;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tdispatchEvent(action, e, component){\r\n\t\tvar componentObj = component.getComponent(),\r\n\t\tcallback;\r\n\r\n\t\tif(this.columnSubscribers[action]){\r\n\r\n\t\t\tif(component instanceof Cell){\r\n\t\t\t\tcallback = component.column.definition[action];\r\n\t\t\t}else if(component instanceof Column){\r\n\t\t\t\tcallback = component.definition[action];\r\n\t\t\t}\r\n\r\n\t\t\tif(callback){\r\n\t\t\t\tcallback(e, componentObj);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.dispatchExternal(action, e, componentObj);\r\n\t}\r\n}\r\n\r\nInteraction.moduleName = \"interaction\";\r\n\r\nexport default Interaction;", "export default {\r\n\tnavPrev:\"shift + 9\",\r\n\tnavNext:9,\r\n\tnavUp:38,\r\n\tnavDown:40,\r\n\tscrollPageUp:33,\r\n\tscrollPageDown:34,\r\n\tscrollToStart:36,\r\n\tscrollToEnd:35,\r\n\tundo:\"ctrl + 90\",\r\n\tredo:\"ctrl + 89\",\r\n\tcopyToClipboard:\"ctrl + 67\",\r\n};", "export default {\r\n\tkeyBlock:function(e){\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t},\r\n\tscrollPageUp:function(e){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight,\r\n\t\tscrollMax = rowManager.element.scrollHeight;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\tif(newPos >= 0){\r\n\t\t\t\trowManager.element.scrollTop = newPos;\r\n\t\t\t}else{\r\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tscrollPageDown:function(e){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\r\n\t\tscrollMax = rowManager.element.scrollHeight;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\tif(newPos <= scrollMax){\r\n\t\t\t\trowManager.element.scrollTop = newPos;\r\n\t\t\t}else{\r\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\r\n\t},\r\n\tscrollToStart:function(e){\r\n\t\tvar rowManager = this.table.rowManager;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tscrollToEnd:function(e){\r\n\t\tvar rowManager = this.table.rowManager;\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif(rowManager.displayRowsCount){\r\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\r\n\t\t}\r\n\r\n\t\tthis.table.element.focus();\r\n\t},\r\n\tnavPrev:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\r\n\t},\r\n\r\n\tnavNext:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\r\n\t},\r\n\r\n\tnavLeft:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\r\n\t},\r\n\r\n\tnavRight:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\r\n\t},\r\n\r\n\tnavUp:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\r\n\t},\r\n\r\n\tnavDown:function(e){\r\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\r\n\t},\r\n\r\n\tundo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.undo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tredo:function(e){\r\n\t\tvar cell = false;\r\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\r\n\r\n\t\t\tcell = this.table.modules.edit.currentCell;\r\n\r\n\t\t\tif(!cell){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tthis.table.modules.history.redo();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcopyToClipboard:function(e){\r\n\t\tif(!this.table.modules.edit.currentCell){\r\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\r\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultBindings from './defaults/bindings.js';\r\nimport defaultActions from './defaults/actions.js';\r\n\r\nclass Keybindings extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.watchKeys = null;\r\n\t\tthis.pressedKeys = null;\r\n\t\tthis.keyupBinding = false;\r\n\t\tthis.keydownBinding = false;\r\n\r\n\t\tthis.registerTableOption(\"keybindings\", []); //array for keybindings\r\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tvar bindings = this.table.options.keybindings,\r\n\t\tmergedBindings = {};\r\n\r\n\t\tthis.watchKeys = {};\r\n\t\tthis.pressedKeys = [];\r\n\r\n\t\tif(bindings !== false){\r\n\r\n\t\t\tfor(let key in Keybindings.bindings){\r\n\t\t\t\tmergedBindings[key] = Keybindings.bindings[key];\r\n\t\t\t}\r\n\r\n\t\t\tif(Object.keys(bindings).length){\r\n\r\n\t\t\t\tfor(let key in bindings){\r\n\t\t\t\t\tmergedBindings[key] = bindings[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.mapBindings(mergedBindings);\r\n\t\t\tthis.bindEvents();\r\n\t\t}\r\n\r\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\r\n\t}\r\n\r\n\tmapBindings(bindings){\r\n\t\tfor(let key in bindings){\r\n\t\t\tif(Keybindings.actions[key]){\r\n\t\t\t\tif(bindings[key]){\r\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\r\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindings[key].forEach((binding) => {\r\n\t\t\t\t\t\tthis.mapBinding(key, binding);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmapBinding(action, symbolsList){\r\n\t\tvar binding = {\r\n\t\t\taction: Keybindings.actions[action],\r\n\t\t\tkeys: [],\r\n\t\t\tctrl: false,\r\n\t\t\tshift: false,\r\n\t\t\tmeta: false,\r\n\t\t};\r\n\r\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\r\n\r\n\t\tsymbols.forEach((symbol) => {\r\n\t\t\tswitch(symbol){\r\n\t\t\t\tcase \"ctrl\":\r\n\t\t\t\tbinding.ctrl = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"shift\":\r\n\t\t\t\tbinding.shift = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"meta\":\r\n\t\t\t\tbinding.meta = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tsymbol = parseInt(symbol);\r\n\t\t\t\tbinding.keys.push(symbol);\r\n\r\n\t\t\t\tif(!this.watchKeys[symbol]){\r\n\t\t\t\t\tthis.watchKeys[symbol] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.watchKeys[symbol].push(binding);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tbindEvents(){\r\n\t\tvar self = this;\r\n\r\n\t\tthis.keyupBinding = function(e){\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tvar bindings = self.watchKeys[code];\r\n\r\n\t\t\tif(bindings){\r\n\r\n\t\t\t\tself.pressedKeys.push(code);\r\n\r\n\t\t\t\tbindings.forEach(function(binding){\r\n\t\t\t\t\tself.checkBinding(e, binding);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.keydownBinding = function(e){\r\n\t\t\tvar code = e.keyCode;\r\n\t\t\tvar bindings = self.watchKeys[code];\r\n\r\n\t\t\tif(bindings){\r\n\r\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\r\n\r\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\r\n\t}\r\n\r\n\tclearBindings(){\r\n\t\tif(this.keyupBinding){\r\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\r\n\t\t}\r\n\r\n\t\tif(this.keydownBinding){\r\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\r\n\t\t}\r\n\t}\r\n\r\n\tcheckBinding(e, binding){\r\n\t\tvar match = true;\r\n\r\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\r\n\t\t\tbinding.keys.forEach((key) => {\r\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\r\n\r\n\t\t\t\tif(index == -1){\r\n\t\t\t\t\tmatch = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tbinding.action.call(this, e);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nKeybindings.moduleName = \"keybindings\";\r\n\r\n//load defaults\r\nKeybindings.bindings = defaultBindings;\r\nKeybindings.actions = defaultActions;\r\n\r\nexport default Keybindings;", "import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nclass Menu extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.menuElements = [];\r\n\t\tthis.blurEvent = this.hideMenu.bind(this);\r\n\t\tthis.escEvent = this.escMenu.bind(this);\r\n\t\tthis.nestedMenuBlock = false;\r\n\t\tthis.positionReversedX = false;\r\n\r\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\r\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\r\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\r\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\r\n\r\n\t\tthis.registerColumnOption(\"headerContextMenu\");\r\n\t\tthis.registerColumnOption(\"headerMenu\");\r\n\t\tthis.registerColumnOption(\"contextMenu\");\r\n\t\tthis.registerColumnOption(\"clickMenu\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\r\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t}\r\n\r\n\tlayoutCell(cell){\r\n\t\tif(cell.column.definition.contextMenu || cell.column.definition.clickMenu){\r\n\t\t\tthis.initializeCell(cell);\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.definition;\r\n\r\n\t\tif(def.headerContextMenu || def.headerClickMenu || def.headerMenu){\r\n\t\t\tthis.initializeColumnHeader(column);\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeColumnHeader(column){\r\n\t\tvar headerMenuEl;\r\n\r\n\t\tif(column.definition.headerContextMenu){\r\n\t\t\tcolumn.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, column, column.definition.headerContextMenu));\r\n\t\t\tthis.tapHold(column, column.definition.headerContextMenu);\r\n\t\t}\r\n\r\n\t\t// if(column.definition.headerClickMenu){\r\n\t\t// \tcolumn.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, column, column.definition.headerClickMenu));\r\n\t\t// }\r\n\r\n\t\tif(column.definition.headerMenu){\r\n\r\n\t\t\theaderMenuEl = document.createElement(\"span\");\r\n\t\t\theaderMenuEl.classList.add(\"tabulator-header-menu-button\");\r\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\r\n\r\n\t\t\theaderMenuEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.LoadMenuEvent(column, column.definition.headerMenu, e);\r\n\t\t\t});\r\n\r\n\t\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\r\n\t\t}\r\n\t}\r\n\r\n\tLoadMenuEvent(component, menu, e){\r\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, component.getComponent(), e) : menu;\r\n\r\n\t\t// if(component instanceof Cell){\r\n\t\t// \te.stopImmediatePropagation();\r\n\t\t// }\r\n\r\n\t\tthis.loadMenu(e, component, menu);\r\n\t}\r\n\r\n\ttapHold(component, menu){\r\n\t\tvar element = component.getElement(),\r\n\t\ttapHold = null,\r\n\t\tloaded = false;\r\n\r\n\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tclearTimeout(tapHold);\r\n\t\t\tloaded = false;\r\n\r\n\t\t\ttapHold = setTimeout(() => {\r\n\t\t\t\tclearTimeout(tapHold);\r\n\t\t\t\ttapHold = null;\r\n\t\t\t\tloaded = true;\r\n\r\n\t\t\t\tthis.LoadMenuEvent(component, menu, e);\r\n\t\t\t}, 1000);\r\n\r\n\t\t}, {passive: true});\r\n\r\n\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\tclearTimeout(tapHold);\r\n\t\t\ttapHold = null;\r\n\r\n\t\t\tif(loaded){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tinitializeCell(cell){\r\n\t\tif(cell.column.definition.contextMenu){\r\n\t\t\tcell.getElement(true).addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.contextMenu));\r\n\t\t\tthis.tapHold(cell, cell.column.definition.contextMenu);\r\n\t\t}\r\n\r\n\t\tif(cell.column.definition.clickMenu){\r\n\t\t\tcell.getElement(true).addEventListener(\"click\", this.LoadMenuEvent.bind(this, cell, cell.column.definition.clickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tif(this.table.options.rowContextMenu){\r\n\t\t\trow.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, row, this.table.options.rowContextMenu));\r\n\t\t\tthis.tapHold(row, this.table.options.rowContextMenu);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.rowClickMenu){\r\n\t\t\trow.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, row, this.table.options.rowClickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeGroup (group){\r\n\t\tif(this.table.options.groupContextMenu){\r\n\t\t\tgroup.getElement().addEventListener(\"contextmenu\", this.LoadMenuEvent.bind(this, group, this.table.options.groupContextMenu));\r\n\t\t\tthis.tapHold(group, this.table.options.groupContextMenu);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.groupClickMenu){\r\n\t\t\tgroup.getElement().addEventListener(\"click\", this.LoadMenuEvent.bind(this, group, this.table.options.groupClickMenu));\r\n\t\t}\r\n\t}\r\n\r\n\tloadMenu(e, component, menu, parentEl){\r\n\r\n\t\tvar touch = !(e instanceof MouseEvent);\r\n\r\n\t\tvar menuEl = document.createElement(\"div\");\r\n\t\tmenuEl.classList.add(\"tabulator-menu\");\r\n\r\n\t\tif(!touch){\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\t//abort if no menu set\r\n\t\tif(!menu || !menu.length){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(!parentEl){\r\n\t\t\tif(this.nestedMenuBlock){\r\n\t\t\t\t//abort if child menu already open\r\n\t\t\t\tif(this.isOpen()){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\r\n\t\t\t\t\tthis.nestedMenuBlock = false;\r\n\t\t\t\t}, 100)\r\n\t\t\t}\r\n\r\n\t\t\tthis.hideMenu();\r\n\t\t\tthis.menuElements = [];\r\n\t\t}\r\n\r\n\t\tmenu.forEach((item) => {\r\n\t\t\tvar itemEl = document.createElement(\"div\"),\r\n\t\t\tlabel = item.label,\r\n\t\t\tdisabled = item.disabled;\r\n\r\n\t\t\tif(item.separator){\r\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\r\n\t\t\t}else{\r\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\r\n\r\n\t\t\t\tif(typeof label == \"function\"){\r\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(label instanceof Node){\r\n\t\t\t\t\titemEl.appendChild(label);\r\n\t\t\t\t}else{\r\n\t\t\t\t\titemEl.innerHTML = label;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof disabled == \"function\"){\r\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(disabled){\r\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\r\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(item.menu && item.menu.length){\r\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\tthis.hideOldSubMenus(menuEl);\r\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(item.action){\r\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(item.menu && item.menu.length){\r\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tmenuEl.appendChild(itemEl);\r\n\t\t});\r\n\r\n\t\tmenuEl.addEventListener(\"click\", (e) => {\r\n\t\t\tthis.hideMenu();\r\n\t\t});\r\n\r\n\t\tthis.menuElements.push(menuEl);\r\n\t\tthis.positionMenu(menuEl, parentEl, touch, e);\r\n\t}\r\n\r\n\thideOldSubMenus(menuEl){\r\n\t\tvar index = this.menuElements.indexOf(menuEl);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tfor(let i = this.menuElements.length - 1; i > index; i--){\r\n\t\t\t\tvar el = this.menuElements[i];\r\n\r\n\t\t\t\tif(el.parentNode){\r\n\t\t\t\t\tel.parentNode.removeChild(el);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.menuElements.pop();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpositionMenu(element, parentEl, touch, e){\r\n\t\tvar docHeight = Math.max(document.body.offsetHeight, window.innerHeight),\r\n\t\tx, y, parentOffset;\r\n\r\n\t\tif(!parentEl){\r\n\t\t\tx = touch ? e.touches[0].pageX : e.pageX;\r\n\t\t\ty = touch ? e.touches[0].pageY : e.pageY;\r\n\r\n\t\t\tthis.positionReversedX = false;\r\n\t\t}else{\r\n\t\t\tparentOffset = Helpers.elOffset(parentEl);\r\n\t\t\tx = parentOffset.left + parentEl.offsetWidth;\r\n\t\t\ty = parentOffset.top - 1;\r\n\t\t}\r\n\r\n\t\telement.style.top = y + \"px\";\r\n\t\telement.style.left = x + \"px\";\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"click\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"contextmenu\", this.blurEvent);\r\n\t\t\twindow.addEventListener(\"resize\", this.blurEvent);\r\n\t\t\tdocument.body.addEventListener(\"keydown\", this.escEvent);\r\n\t\t}, 100);\r\n\r\n\t\tdocument.body.appendChild(element);\r\n\r\n\t\t//move menu to start on bottom edge if it is too close to the edge of the screen\r\n\t\tif((y + element.offsetHeight) >= docHeight){\r\n\t\t\telement.style.top = \"\";\r\n\r\n\t\t\tif(parentEl){\r\n\t\t\t\telement.style.bottom = (docHeight - parentOffset.top - parentEl.offsetHeight - 1) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\telement.style.bottom = (docHeight - y) + \"px\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//move menu to start on right edge if it is too close to the edge of the screen\r\n\t\tif((x + element.offsetWidth) >= document.body.offsetWidth || this.positionReversedX){\r\n\t\t\telement.style.left = \"\";\r\n\r\n\t\t\tif(parentEl){\r\n\t\t\t\telement.style.right = (document.documentElement.offsetWidth - parentOffset.left) + \"px\";\r\n\t\t\t}else{\r\n\t\t\t\telement.style.right = (document.documentElement.offsetWidth - x) + \"px\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.positionReversedX = true;\r\n\t\t}\r\n\t}\r\n\r\n\tisOpen(){\r\n\t\treturn !!this.menuElements.length;\r\n\t}\r\n\r\n\tescMenu(e){\r\n\t\tif(e.keyCode == 27){\r\n\t\t\tthis.hideMenu();\r\n\t\t}\r\n\t}\r\n\r\n\thideMenu(){\r\n\t\tthis.menuElements.forEach((menuEl) => {\r\n\t\t\tif(menuEl.parentNode){\r\n\t\t\t\tmenuEl.parentNode.removeChild(menuEl);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.body.removeEventListener(\"keydown\", this.escEvent);\r\n\t\tdocument.body.removeEventListener(\"click\", this.blurEvent);\r\n\t\tdocument.body.removeEventListener(\"contextmenu\", this.blurEvent);\r\n\t\twindow.removeEventListener(\"resize\", this.blurEvent);\r\n\t\tthis.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\r\n\t}\r\n}\r\n\r\nMenu.moduleName = \"menu\";\r\n\r\nexport default Menu;", "import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nclass MoveColumns extends Module{\r\n\t\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.placeholderElement = this.createPlaceholderElement();\r\n\t\tthis.hoverElement = false; //floating column header element\r\n\t\tthis.checkTimeout = false; //click check timeout holder\r\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\r\n\t\tthis.moving = false; //currently moving column\r\n\t\tthis.toCol = false; //destination column\r\n\t\tthis.toColAfter = false; //position of moving column relative to the desitnation column\r\n\t\tthis.startX = 0; //starting position within header element\r\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\r\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\r\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\r\n\t\tthis.touchMove = false;\r\n\t\t\r\n\t\tthis.moveHover = this.moveHover.bind(this);\r\n\t\tthis.endMove = this.endMove.bind(this);\r\n\t\t\r\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\r\n\t}\r\n\t\r\n\tcreatePlaceholderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\t\r\n\t\tel.classList.add(\"tabulator-col\");\r\n\t\tel.classList.add(\"tabulator-col-placeholder\");\r\n\t\t\r\n\t\treturn el;\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tif(this.table.options.movableColumns){\r\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\t}\r\n\t}\r\n\t\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\tcolEl;\r\n\t\t\r\n\t\tif(!column.modules.frozen){\r\n\t\t\tcolEl = column.getElement();\r\n\t\t\t\r\n\t\t\tconfig.mousemove = function(e){\r\n\t\t\t\tif(column.parent === self.moving.parent){\r\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.element.scrollLeft) > (column.getWidth() / 2)){\r\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\r\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\r\n\t\t\t\t\t\t\tself.moveColumn(column, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\r\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\r\n\t\t\t\t\t\t\tself.moveColumn(column, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}.bind(self);\r\n\t\t\t\r\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tself.touchMove = false;\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, column);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tself.bindTouchEvents(column);\r\n\t\t}\r\n\t\t\r\n\t\tcolumn.modules.moveColumn = config;\r\n\t}\r\n\t\r\n\tbindTouchEvents(column){\r\n\t\tvar colEl = column.getElement(),\r\n\t\tstartXMove = false, //shifting center position of the cell\r\n\t\tdir = false,\r\n\t\tcurrentCol, nextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\r\n\t\t\r\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tthis.checkTimeout = setTimeout(() => {\r\n\t\t\t\tthis.touchMove = true;\r\n\t\t\t\tcurrentCol = column;\r\n\t\t\t\tnextCol = column.nextColumn();\r\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\r\n\t\t\t\tprevCol = column.prevColumn();\r\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\r\n\t\t\t\tnextColWidthLast = 0;\r\n\t\t\t\tprevColWidthLast = 0;\r\n\t\t\t\tstartXMove = false;\r\n\t\t\t\t\r\n\t\t\t\tthis.startMove(e, column);\r\n\t\t\t}, this.checkPeriod);\r\n\t\t}, {passive: true});\r\n\t\t\r\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\r\n\t\t\tvar halfCol, diff, moveToCol;\r\n\t\t\t\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.moveHover(e);\r\n\t\t\t\t\r\n\t\t\t\tif(!startXMove){\r\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\r\n\t\t\t\t\r\n\t\t\t\tif(diff > 0){\r\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\r\n\t\t\t\t\t\tmoveToCol = nextCol;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(moveToCol !== column){\r\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\r\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\r\n\t\t\t\t\t\tmoveToCol = prevCol;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(moveToCol !== column){\r\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\r\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\r\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(moveToCol){\r\n\t\t\t\t\tcurrentCol = moveToCol;\r\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\r\n\t\t\t\t\tnextColWidthLast = nextColWidth;\r\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\r\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\r\n\t\t\t\t\tprevColWidthLast = prevColWidth;\r\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, {passive: true});\r\n\t\t\r\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\r\n\t\t\tif(this.checkTimeout){\r\n\t\t\t\tclearTimeout(this.checkTimeout);\r\n\t\t\t}\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.endMove(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tstartMove(e, column){\r\n\t\tvar element = column.getElement(),\r\n\t\theaderElement = this.table.columnManager.getElement(),\r\n\t\theadersElement = this.table.columnManager.getHeadersElement();\r\n\t\t\r\n\t\tthis.moving = column;\r\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\r\n\t\t\r\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\r\n\t\t\r\n\t\t//create placeholder\r\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\r\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\r\n\t\t\r\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\r\n\t\telement.parentNode.removeChild(element);\r\n\t\t\r\n\t\t//create hover element\r\n\t\tthis.hoverElement = element.cloneNode(true);\r\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\r\n\t\t\r\n\t\tthis.table.columnManager.getElement().appendChild(this.hoverElement);\r\n\t\t\r\n\t\tthis.hoverElement.style.left = \"0\";\r\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\r\n\t\t\r\n\t\tif(!this.touchMove){\r\n\t\t\tthis._bindMouseMove();\r\n\t\t\t\r\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\r\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\r\n\t\t}\r\n\t\t\r\n\t\tthis.moveHover(e);\r\n\t}\r\n\t\r\n\t_bindMouseMove(){\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\r\n\t\t\tif(column.modules.moveColumn.mousemove){\r\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t_unbindMouseMove(){\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\r\n\t\t\tif(column.modules.moveColumn.mousemove){\r\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tmoveColumn(column, after){\r\n\t\tvar movingCells = this.moving.getCells();\r\n\t\t\r\n\t\tthis.toCol = column;\r\n\t\tthis.toColAfter = after;\r\n\t\t\r\n\t\tif(after){\r\n\t\t\tcolumn.getCells().forEach(function(cell, i){\r\n\t\t\t\tvar cellEl = cell.getElement(true);\r\n\t\t\t\t\r\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\r\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tcolumn.getCells().forEach(function(cell, i){\r\n\t\t\t\tvar cellEl = cell.getElement(true);\r\n\t\t\t\t\r\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\r\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\tendMove(e){\r\n\t\tif(e.which === 1 || this.touchMove){\r\n\t\t\tthis._unbindMouseMove();\r\n\t\t\t\r\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\r\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\r\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\r\n\t\t\t\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\r\n\t\t\t\r\n\t\t\tif(this.toCol){\r\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.moving = false;\r\n\t\t\tthis.toCol = false;\r\n\t\t\tthis.toColAfter = false;\r\n\t\t\t\r\n\t\t\tif(!this.touchMove){\r\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\r\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tmoveHover(e){\r\n\t\tvar columnHolder = this.table.columnManager.getElement(),\r\n\t\tscrollLeft = columnHolder.scrollLeft,\r\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\r\n\t\tscrollPos;\r\n\t\t\r\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\r\n\t\t\r\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\r\n\t\t\tif(!this.autoScrollTimeout){\r\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\r\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\r\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\r\n\t\t\t\t\tthis.autoScrollTimeout = false;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\r\n\t\t\tif(!this.autoScrollTimeout){\r\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\r\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\r\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\r\n\t\t\t\t\tthis.autoScrollTimeout = false;\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMoveColumns.moduleName = \"moveColumn\";\r\n\r\nexport default MoveColumns;\r\n", "import Module from '../../core/Module.js';\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nclass MoveRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.placeholderElement = this.createPlaceholderElement();\r\n\t\tthis.hoverElement = false; //floating row header element\r\n\t\tthis.checkTimeout = false; //click check timeout holder\r\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\r\n\t\tthis.moving = false; //currently moving row\r\n\t\tthis.toRow = false; //destination row\r\n\t\tthis.toRowAfter = false; //position of moving row relative to the desitnation row\r\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\r\n\t\tthis.startY = 0; //starting Y position within header element\r\n\t\tthis.startX = 0; //starting X position within header element\r\n\r\n\t\tthis.moveHover = this.moveHover.bind(this);\r\n\t\tthis.endMove = this.endMove.bind(this);\r\n\t\tthis.tableRowDropEvent = false;\r\n\r\n\t\tthis.touchMove = false;\r\n\r\n\t\tthis.connection = false;\r\n\t\tthis.connectionSelectorsTables = false;\r\n\t\tthis.connectionSelectorsElements = false;\r\n\t\tthis.connectionElements = [];\r\n\t\tthis.connections = [];\r\n\r\n\t\tthis.connectedTable = false;\r\n\t\tthis.connectedRow = false;\r\n\r\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\r\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\r\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\r\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\r\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\r\n\r\n\t\tthis.registerColumnOption(\"rowHandle\");\r\n\t}\r\n\r\n\tcreatePlaceholderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\tel.classList.add(\"tabulator-row-placeholder\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.movableRows){\r\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\r\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\r\n\r\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\r\n\r\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\r\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeGroupHeader(group){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\trowEl;\r\n\r\n\t\t//inter table drag drop\r\n\t\tconfig.mouseup = function(e){\r\n\t\t\tself.tableRowDrop(e, row);\r\n\t\t}.bind(self);\r\n\r\n\t\t//same table drag drop\r\n\t\tconfig.mousemove = function(e){\r\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\r\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\r\n\t\t\t\t\tvar rowEl = group.getElement();\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\r\n\t\t\t\t\tself.moveRow(group, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\r\n\t\t\t\t\tvar rowEl = group.getElement();\r\n\t\t\t\t\tif(rowEl.previousSibling){\r\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\r\n\t\t\t\t\t\tself.moveRow(group, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(self);\r\n\r\n\t\tgroup.modules.moveRow = config;\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\tconfig = {},\r\n\t\trowEl;\r\n\r\n\t\t//inter table drag drop\r\n\t\tconfig.mouseup = function(e){\r\n\t\t\tself.tableRowDrop(e, row);\r\n\t\t}.bind(self);\r\n\r\n\t\t//same table drag drop\r\n\t\tconfig.mousemove = function(e){\r\n\t\t\tvar rowEl = row.getElement();\r\n\r\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\r\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\r\n\t\t\t\t\tself.moveRow(row, true);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\r\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\r\n\t\t\t\t\tself.moveRow(row, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}.bind(self);\r\n\r\n\r\n\t\tif(!this.hasHandle){\r\n\r\n\t\t\trowEl = row.getElement();\r\n\r\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, row);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.bindTouchEvents(row, row.getElement());\r\n\t\t}\r\n\r\n\t\trow.modules.moveRow = config;\r\n\t}\r\n\r\n\tinitializeColumn(column){\r\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\r\n\t\t\tthis.hasHandle = true;\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeCell(cell){\r\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\r\n\t\t\tvar self = this,\r\n\t\t\tcellEl = cell.getElement(true);\r\n\r\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\r\n\t\t\t\t\t\tself.startMove(e, cell.row);\r\n\t\t\t\t\t}, self.checkPeriod);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\r\n\t\t\t\tif(e.which === 1){\r\n\t\t\t\t\tif(self.checkTimeout){\r\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\r\n\t\t}\r\n\t}\r\n\r\n\tbindTouchEvents(row, element){\r\n\t\tvar startYMove = false, //shifting center position of the cell\r\n\t\tdir = false,\r\n\t\tcurrentRow, nextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\r\n\r\n\t\telement.addEventListener(\"touchstart\", (e) => {\r\n\t\t\tthis.checkTimeout = setTimeout(() => {\r\n\t\t\t\tthis.touchMove = true;\r\n\t\t\t\tcurrentRow = row;\r\n\t\t\t\tnextRow = row.nextRow();\r\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\r\n\t\t\t\tprevRow = row.prevRow();\r\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\r\n\t\t\t\tnextRowHeightLast = 0;\r\n\t\t\t\tprevRowHeightLast = 0;\r\n\t\t\t\tstartYMove = false;\r\n\r\n\t\t\t\tthis.startMove(e, row);\r\n\t\t\t}, this.checkPeriod);\r\n\t\t}, {passive: true});\r\n\t\tthis.moving, this.toRow, this.toRowAfter\r\n\t\telement.addEventListener(\"touchmove\", (e) => {\r\n\r\n\t\t\tvar halfCol, diff, moveToRow;\r\n\r\n\t\t\tif(this.moving){\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tthis.moveHover(e);\r\n\r\n\t\t\t\tif(!startYMove){\r\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\r\n\r\n\t\t\t\tif(diff > 0){\r\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\r\n\t\t\t\t\t\tmoveToRow = nextRow;\r\n\r\n\t\t\t\t\t\tif(moveToRow !== row){\r\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY\r\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\r\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\r\n\t\t\t\t\t\tmoveToRow = prevRow;\r\n\r\n\t\t\t\t\t\tif(moveToRow !== row){\r\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\r\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\r\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(moveToRow){\r\n\t\t\t\t\tcurrentRow = moveToRow;\r\n\t\t\t\t\tnextRow = moveToRow.nextRow();\r\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\r\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\r\n\t\t\t\t\tprevRow = moveToRow.prevRow();\r\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\r\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\telement.addEventListener(\"touchend\", (e) => {\r\n\t\t\tif(this.checkTimeout){\r\n\t\t\t\tclearTimeout(this.checkTimeout);\r\n\t\t\t}\r\n\t\t\tif(this.moving){\r\n\t\t\t\tthis.endMove(e);\r\n\t\t\t\tthis.touchMove = false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_bindMouseMove(){\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\r\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t_unbindMouseMove(){\r\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\r\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tstartMove(e, row){\r\n\t\tvar element = row.getElement();\r\n\r\n\t\tthis.setStartPosition(e, row);\r\n\r\n\t\tthis.moving = row;\r\n\r\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\t//create placeholder\r\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\r\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\r\n\r\n\t\tif(!this.connection){\r\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\r\n\t\t\telement.parentNode.removeChild(element);\r\n\t\t}else{\r\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\r\n\t\t\tthis.connectToTables(row);\r\n\t\t}\r\n\r\n\t\t//create hover element\r\n\t\tthis.hoverElement = element.cloneNode(true);\r\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\r\n\r\n\t\tif(this.connection){\r\n\t\t\tdocument.body.appendChild(this.hoverElement);\r\n\t\t\tthis.hoverElement.style.left = \"0\";\r\n\t\t\tthis.hoverElement.style.top = \"0\";\r\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\r\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\r\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\r\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\r\n\t\t}else{\r\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\r\n\r\n\t\t\tthis.hoverElement.style.left = \"0\";\r\n\t\t\tthis.hoverElement.style.top = \"0\";\r\n\r\n\t\t\tthis._bindMouseMove();\r\n\t\t}\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\r\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\r\n\r\n\t\tthis.moveHover(e);\r\n\t}\r\n\r\n\tsetStartPosition(e, row){\r\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\r\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\r\n\t\telement, position;\r\n\r\n\t\telement = row.getElement();\r\n\t\tif(this.connection){\r\n\t\t\tposition = element.getBoundingClientRect();\r\n\r\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\r\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\r\n\t\t}else{\r\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\r\n\t\t}\r\n\t}\r\n\r\n\tendMove(e){\r\n\t\tif(!e || e.which === 1 || this.touchMove){\r\n\t\t\tthis._unbindMouseMove();\r\n\r\n\t\t\tif(!this.connection){\r\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\r\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\r\n\t\t\t}\r\n\r\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tif(this.toRow){\r\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\r\n\t\t\t}\r\n\r\n\t\t\tthis.moving = false;\r\n\t\t\tthis.toRow = false;\r\n\t\t\tthis.toRowAfter = false;\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\r\n\r\n\t\t\tif(this.connection){\r\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\r\n\t\t\t\tthis.disconnectFromTables();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tmoveRow(row, after){\r\n\t\tthis.toRow = row;\r\n\t\tthis.toRowAfter = after;\r\n\t}\r\n\r\n\tmoveHover(e){\r\n\t\tif(this.connection){\r\n\t\t\tthis.moveHoverConnections.call(this, e);\r\n\t\t}else{\r\n\t\t\tthis.moveHoverTable.call(this, e);\r\n\t\t}\r\n\t}\r\n\r\n\tmoveHoverTable(e){\r\n\t\tvar rowHolder = this.table.rowManager.getElement(),\r\n\t\tscrollTop = rowHolder.scrollTop,\r\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop,\r\n\t\tscrollPos;\r\n\r\n\t\tthis.hoverElement.style.top = (yPos - this.startY) + \"px\";\r\n\t}\r\n\r\n\tmoveHoverConnections(e){\r\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\r\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\r\n\t}\r\n\r\n\telementRowDrop(e, element, row){\r\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\r\n\t}\r\n\r\n\t//establish connection with other tables\r\n\tconnectToTables(row){\r\n\t\tvar connectionTables;\r\n\r\n\t\tif(this.connectionSelectorsTables){\r\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\r\n\r\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\r\n\t\t\t\trow:row,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.connectionSelectorsElements){\r\n\r\n\t\t\tthis.connectionElements = [];\r\n\r\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\r\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\r\n\t\t\t}\r\n\r\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\r\n\t\t\t\tif(typeof query === \"string\"){\r\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.connectionElements.push(query);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.connectionElements.forEach((element) => {\r\n\t\t\t\tvar dropEvent = (e) => {\r\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\r\n\t\t\t\t};\r\n\r\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\r\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\r\n\r\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//disconnect from other tables\r\n\tdisconnectFromTables(){\r\n\t\tvar connectionTables;\r\n\r\n\t\tif(this.connectionSelectorsTables){\r\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\r\n\r\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\r\n\t\t}\r\n\r\n\t\tthis.connectionElements.forEach((element) => {\r\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\r\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\r\n\t\t\tdelete element.tabulatorElementDropEvent;\r\n\t\t});\r\n\t}\r\n\r\n\t//accept incomming connection\r\n\tconnect(table, row){\r\n\t\tif(!this.connectedTable){\r\n\t\t\tthis.connectedTable = table;\r\n\t\t\tthis.connectedRow = row;\r\n\r\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\r\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\r\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\r\n\r\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\r\n\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//close incomming connection\r\n\tdisconnect(table){\r\n\t\tif(table === this.connectedTable){\r\n\t\t\tthis.connectedTable = false;\r\n\t\t\tthis.connectedRow = false;\r\n\r\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\r\n\r\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\r\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\r\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\")\r\n\t\t}\r\n\t}\r\n\r\n\tdropComplete(table, row, success){\r\n\t\tvar sender = false;\r\n\r\n\t\tif(success){\r\n\r\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"function\":\r\n\t\t\t\tsender = this.table.options.movableRowsSender;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(sender){\r\n\t\t\t\tsender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table)\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.movableRowsSender){\r\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\r\n\t\t}else{\r\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\r\n\t\t}\r\n\r\n\t\tthis.endMove();\r\n\t}\r\n\r\n\ttableRowDrop(e, row){\r\n\t\tvar receiver = false,\r\n\t\tsuccess = false;\r\n\r\n\t\te.stopImmediatePropagation();\r\n\r\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\r\n\t\t\tcase \"string\":\r\n\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\treceiver = this.table.options.movableRowsReceiver;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(receiver){\r\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver)\r\n\t\t}\r\n\r\n\t\tif(success){\r\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}else{\r\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\r\n\t\t}\r\n\r\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\r\n\t\t\trow:row,\r\n\t\t\tsuccess:success,\r\n\t\t});\r\n\t}\r\n\r\n\tcommsReceived(table, action, data){\r\n\t\tswitch(action){\r\n\t\t\tcase \"connect\":\r\n\t\t\treturn this.connect(table, data.row);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"disconnect\":\r\n\t\t\treturn this.disconnect(table);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"dropcomplete\":\r\n\t\t\treturn this.dropComplete(table, data.row, data.success);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nMoveRows.prototype.receivers = {\r\n\tinsert:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\treturn true;\r\n\t},\r\n\r\n\tadd:function(fromRow, toRow, fromTable){\r\n\t\tthis.table.addRow(fromRow.getData());\r\n\t\treturn true;\r\n\t},\r\n\r\n\tupdate:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\ttoRow.update(fromRow.getData());\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n\r\n\treplace:function(fromRow, toRow, fromTable){\r\n\t\tif(toRow){\r\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\r\n\t\t\ttoRow.delete();\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t},\r\n};\r\n\r\nMoveRows.prototype.senders = {\r\n\tdelete:function(fromRow, toRow, toTable){\r\n\t\tfromRow.delete();\r\n\t}\r\n};\r\n\r\nMoveRows.moduleName = \"moveRow\";\r\n\r\nexport default MoveRows;", "export default {};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultMutators from './defaults/mutators.js';\r\n\r\nclass Mutator extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.registerColumnOption(\"mutator\");\r\n\t\tthis.registerColumnOption(\"mutatorParams\");\r\n\t\tthis.registerColumnOption(\"mutatorData\");\r\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\r\n\t\tthis.registerColumnOption(\"mutatorEdit\");\r\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\r\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\r\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\r\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\r\n\t}\r\n\r\n\trowDataChanged(row, tempData, updatedData){\r\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\r\n\t}\r\n\r\n\t//initialize column mutator\r\n\tinitializeColumn(column){\r\n\t\tvar match = false,\r\n\t\tconfig = {};\r\n\r\n\t\tthis.allowedTypes.forEach((type) => {\r\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\t\tmutator;\r\n\r\n\t\t\tif(column.definition[key]){\r\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\r\n\r\n\t\t\t\tif(mutator){\r\n\t\t\t\t\tmatch = true;\r\n\r\n\t\t\t\t\tconfig[key] = {\r\n\t\t\t\t\t\tmutator:mutator,\r\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(match){\r\n\t\t\tcolumn.modules.mutate = config;\r\n\t\t}\r\n\t}\r\n\r\n\tlookupMutator(value){\r\n\t\tvar mutator = false;\r\n\r\n\t\t//set column mutator\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Mutator.mutators[value]){\r\n\t\t\t\tmutator = Mutator.mutators[value];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tmutator = value;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn mutator;\r\n\t}\r\n\r\n\t//apply mutator to row\r\n\ttransformRow(data, type, updatedData){\r\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\r\n\t\tvalue;\r\n\r\n\t\tif(this.enabled){\r\n\r\n\t\t\tthis.table.columnManager.traverse((column) => {\r\n\t\t\t\tvar mutator, params, component;\r\n\r\n\t\t\t\tif(column.modules.mutate){\r\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\r\n\r\n\t\t\t\t\tif(mutator){\r\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\r\n\r\n\t\t\t\t\t\tif(type == \"data\" || typeof value !== \"undefined\"){\r\n\t\t\t\t\t\t\tcomponent = column.getComponent();\r\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\r\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//apply mutator to new cell value\r\n\ttransformCell(cell, value){\r\n\t\tif(cell.column.modules.mutate){\r\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\r\n\t\t\ttempData = {};\r\n\r\n\t\t\tif(mutator){\r\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\r\n\t\t\t\tcell.column.setFieldValue(tempData, value);\r\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tenable(){\r\n\t\tthis.enabled = true;\r\n\t}\r\n\r\n\tdisable(){\r\n\t\tthis.enabled = false;\r\n\t}\r\n}\r\n\r\nMutator.moduleName = \"mutator\";\r\n\r\n//load defaults\r\nMutator.mutators = defaultMutators;\r\n\r\nexport default Mutator;", "import Module from '../../core/Module.js';\r\n\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nclass Page extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = \"local\";\r\n\t\tthis.progressiveLoad = false;\r\n\r\n\t\tthis.size = 0;\r\n\t\tthis.page = 1;\r\n\t\tthis.count = 5;\r\n\t\tthis.max = 1;\r\n\r\n\t\tthis.displayIndex = 0; //index in display pipeline\r\n\r\n\t\tthis.initialLoad = true;\r\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\r\n\r\n\t\tthis.pageSizes = [];\r\n\r\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\r\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\r\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\r\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\r\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\r\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\r\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\r\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\r\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\r\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\r\n\r\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\r\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\r\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\r\n\r\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\r\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\r\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\r\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\r\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\r\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\r\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\r\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\r\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\r\n\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.pagination){\r\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\r\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\r\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\r\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\r\n\r\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\r\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\r\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.progressiveLoad){\r\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\r\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\r\n\r\n\t\t\tthis.createElements();\r\n\t\t\tthis.initializePaginator();\r\n\t\t}else if(this.table.options.progressiveLoad){\r\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\r\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\r\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\r\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\r\n\r\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad)\r\n\r\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\r\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trowAddingPosition(row, top){\r\n\t\tvar rowManager = this.table.rowManager,\r\n\t\tdispRows = rowManager.getDisplayRows(),\r\n\t\tindex;\r\n\r\n\t\tif(top){\r\n\t\t\tif(dispRows.length){\r\n\t\t\t\tindex = dispRows[0];\r\n\t\t\t}else{\r\n\t\t\t\tif(rowManager.activeRows.length){\r\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\r\n\t\t\t\t\ttop = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(dispRows.length){\r\n\t\t\t\tindex = dispRows[dispRows.length - 1];\r\n\t\t\t\ttop = dispRows.length < this.size ? false : true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {index, top}\r\n\t}\r\n\r\n\tcalculatePageSizes(){\r\n\t\tvar testElRow, testElCell;\r\n\r\n\t\tif(this.table.options.paginationSize){\r\n\t\t\tthis.size = this.table.options.paginationSize;\r\n\t\t}else{\r\n\t\t\ttestElRow = document.createElement(\"div\");\r\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\r\n\t\t\ttestElRow.style.visibility = \"hidden\";\r\n\r\n\t\t\ttestElCell = document.createElement(\"div\");\r\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\r\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\r\n\r\n\t\t\ttestElRow.appendChild(testElCell);\r\n\r\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\r\n\r\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\r\n\r\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\r\n\t\t}\r\n\r\n\t\tthis.generatePageSizeSelectList();\r\n\t}\r\n\r\n\tinitialLoadComplete(){\r\n\t\tthis.initialLoad = false;\r\n\t}\r\n\r\n\tremotePageParams(data, config, silent, params){\r\n\t\tif(!this.initialLoad){\r\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\r\n\t\t\t\tthis.reset(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//configure request params\r\n\t\tparams.page = this.page;\r\n\r\n\t\t//set page size if defined\r\n\t\tif(this.size){\r\n\t\t\tparams.size = this.size;\r\n\t\t}\r\n\r\n\t\treturn params;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tuserSetPageToRow(row){\r\n\t\tif(this.table.options.pagination){\r\n\t\t\trow = this.rowManager.findRow(row);\r\n\r\n\t\t\tif(row){\r\n\t\t\t\treturn this.setPageToRow(row)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Promise.reject();\r\n\t}\r\n\r\n\tuserSetPageSize(size){\r\n\t\tif(this.table.options.pagination){\r\n\t\t\tthis.setPageSize(size);\r\n\t\t\treturn this.setPage(1);\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tscrollVertical(top, dir){\r\n\t\tvar element, diff, margin;\r\n\t\tif(!dir && !this.table.dataLoader.loading){\r\n\t\t\telement = this.table.rowManager.getElement();\r\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\r\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\r\n\r\n\t\t\tif(diff < margin){\r\n\t\t\t\tthis.nextPage()\r\n\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trestOnRenderBefore(rows, renderInPosition){\r\n\t\tif(!renderInPosition){\r\n\t\t\tif(this.mode === \"local\"){\r\n\t\t\t\tthis.reset();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\trowsUpdated(){\r\n\t\tthis.refreshData(true, \"all\");\r\n\t}\r\n\r\n\tcreateElements(){\r\n\t\tvar button;\r\n\r\n\t\tthis.element = document.createElement(\"span\");\r\n\t\tthis.element.classList.add(\"tabulator-paginator\");\r\n\r\n\t\tthis.pagesElement = document.createElement(\"span\");\r\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\r\n\r\n\t\tbutton = document.createElement(\"button\");\r\n\t\tbutton.classList.add(\"tabulator-page\");\r\n\t\tbutton.setAttribute(\"type\", \"button\");\r\n\t\tbutton.setAttribute(\"role\", \"button\");\r\n\t\tbutton.setAttribute(\"aria-label\", \"\");\r\n\t\tbutton.setAttribute(\"title\", \"\");\r\n\r\n\t\tthis.firstBut = button.cloneNode(true);\r\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\r\n\r\n\t\tthis.prevBut = button.cloneNode(true);\r\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\r\n\r\n\t\tthis.nextBut = button.cloneNode(true);\r\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\r\n\r\n\t\tthis.lastBut = button.cloneNode(true);\r\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\r\n\r\n\t\tif(this.table.options.paginationSizeSelector){\r\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\r\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\r\n\t\t}\r\n\t}\r\n\r\n\tgeneratePageSizeSelectList(){\r\n\t\tvar pageSizes = [];\r\n\r\n\t\tif(this.pageSizeSelect){\r\n\r\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\r\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\r\n\t\t\t\tthis.pageSizes = pageSizes;\r\n\r\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\r\n\t\t\t\t\tpageSizes.unshift(this.size);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\r\n\t\t\t\t\tpageSizes = [];\r\n\r\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\r\n\t\t\t\t\t\tpageSizes.push(this.size * i);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.pageSizes = pageSizes;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpageSizes = this.pageSizes;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\r\n\r\n\t\t\tpageSizes.forEach((item) => {\r\n\t\t\t\tvar itemEl = document.createElement(\"option\");\r\n\t\t\t\titemEl.value = item;\r\n\r\n\t\t\t\tif(item === true){\r\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\r\n\t\t\t\t\t\titemEl.innerHTML = value;\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\titemEl.innerHTML = item;\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\r\n\t\t\t});\r\n\r\n\t\t\tthis.pageSizeSelect.value = this.size;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup pageination\r\n\tinitializePaginator(hidden){\r\n\t\tvar pageSelectLabel;\r\n\r\n\t\tif(!hidden){\r\n\t\t\t//build pagination element\r\n\r\n\t\t\t//bind localizations\r\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\r\n\t\t\t\tthis.firstBut.innerHTML = value;\r\n\t\t\t});\r\n\r\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\r\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\r\n\t\t\t});\r\n\r\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\r\n\t\t\t\tthis.prevBut.innerHTML = value;\r\n\t\t\t});\r\n\r\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\r\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\r\n\t\t\t});\r\n\r\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\r\n\t\t\t\tthis.nextBut.innerHTML = value;\r\n\t\t\t});\r\n\r\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\r\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\r\n\t\t\t});\r\n\r\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\r\n\t\t\t\tthis.lastBut.innerHTML = value;\r\n\t\t\t});\r\n\r\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\r\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\r\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\r\n\t\t\t});\r\n\r\n\t\t\t//click bindings\r\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.setPage(1)\r\n\t\t\t});\r\n\r\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.previousPage()\r\n\t\t\t});\r\n\r\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.nextPage()\r\n\t\t\t});\r\n\r\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\r\n\t\t\t\tthis.setPage(this.max)\r\n\t\t\t});\r\n\r\n\t\t\tif(this.table.options.paginationElement){\r\n\t\t\t\tthis.element = this.table.options.paginationElement;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.pageSizeSelect){\r\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\r\n\r\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\r\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\r\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\r\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\r\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\r\n\r\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\r\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\r\n\t\t\t\t\tthis.setPage(1)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//append to DOM\r\n\t\t\tthis.element.appendChild(this.firstBut);\r\n\t\t\tthis.element.appendChild(this.prevBut);\r\n\t\t\tthis.element.appendChild(this.pagesElement);\r\n\t\t\tthis.element.appendChild(this.nextBut);\r\n\t\t\tthis.element.appendChild(this.lastBut);\r\n\r\n\t\t\tif(!this.table.options.paginationElement && !hidden){\r\n\t\t\t\tthis.table.footerManager.append(this.element, this);\r\n\t\t\t}\r\n\r\n\t\t\tthis.page = this.table.options.paginationInitialPage;\r\n\t\t\tthis.count = this.table.options.paginationButtonCount;\r\n\t\t}\r\n\r\n\t\t//set default values\r\n\t\tthis.mode = this.table.options.paginationMode;\r\n\t}\r\n\r\n\tinitializeProgressive(mode){\r\n\t\tthis.initializePaginator(true);\r\n\t\tthis.mode = \"progressive_\" + mode;\r\n\t\tthis.progressiveLoad = true;\r\n\t}\r\n\r\n\ttrackChanges(){\r\n\t\tthis.dispatch(\"page-changed\");\r\n\t}\r\n\r\n\tsetDisplayIndex(index){\r\n\t\tthis.displayIndex = index;\r\n\t}\r\n\r\n\tgetDisplayIndex(){\r\n\t\treturn this.displayIndex;\r\n\t}\r\n\r\n\t//calculate maximum page from number of rows\r\n\tsetMaxRows(rowCount){\r\n\t\tif(!rowCount){\r\n\t\t\tthis.max = 1;\r\n\t\t}else{\r\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\r\n\t\t}\r\n\r\n\t\tif(this.page > this.max){\r\n\t\t\tthis.page = this.max;\r\n\t\t}\r\n\t}\r\n\r\n\t//reset to first page without triggering action\r\n\treset(force){\r\n\t\tif(!this.initialLoad){\r\n\t\t\tif(this.mode == \"local\" || force){\r\n\t\t\t\tthis.page = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//set the maximum page\r\n\tsetMaxPage(max){\r\n\r\n\t\tmax = parseInt(max);\r\n\r\n\t\tthis.max = max || 1;\r\n\r\n\t\tif(this.page > this.max){\r\n\t\t\tthis.page = this.max;\r\n\t\t\tthis.trigger();\r\n\t\t}\r\n\t}\r\n\r\n\t//set current page number\r\n\tsetPage(page){\r\n\t\tswitch(page){\r\n\t\t\tcase \"first\":\r\n\t\t\treturn this.setPage(1);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"prev\":\r\n\t\t\treturn this.previousPage();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"next\":\r\n\t\t\treturn this.nextPage();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"last\":\r\n\t\t\treturn this.setPage(this.max);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\tpage = parseInt(page);\r\n\r\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\r\n\t\t\tthis.page = page;\r\n\r\n\t\t\tthis.trackChanges();\r\n\r\n\t\t\treturn this.trigger();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\r\n\tsetPageToRow(row){\r\n\t\tvar rows = this.table.rowManager.getDisplayRows(this.displayIndex - 1);\r\n\t\tvar index = rows.indexOf(row);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\r\n\r\n\t\t\treturn this.setPage(page)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\r\n\tsetPageSize(size){\r\n\t\tif(size !== true){\r\n\t\t\tsize = parseInt(size);\r\n\t\t}\r\n\r\n\t\tif(size > 0){\r\n\t\t\tthis.size = size;\r\n\t\t}\r\n\r\n\t\tif(this.pageSizeSelect){\r\n\t\t\t// this.pageSizeSelect.value = size;\r\n\t\t\tthis.generatePageSizeSelectList();\r\n\t\t}\r\n\r\n\t\tthis.trackChanges();\r\n\t}\r\n\r\n\t//setup the pagination buttons\r\n\t_setPageButtons(){\r\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\r\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\r\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\r\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\r\n\r\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\r\n\r\n\t\tif(this.page == 1){\r\n\t\t\tthis.firstBut.disabled = true;\r\n\t\t\tthis.prevBut.disabled = true;\r\n\t\t}else{\r\n\t\t\tthis.firstBut.disabled = false;\r\n\t\t\tthis.prevBut.disabled = false;\r\n\t\t}\r\n\r\n\t\tif(this.page == this.max){\r\n\t\t\tthis.lastBut.disabled = true;\r\n\t\t\tthis.nextBut.disabled = true;\r\n\t\t}else{\r\n\t\t\tthis.lastBut.disabled = false;\r\n\t\t\tthis.nextBut.disabled = false;\r\n\t\t}\r\n\r\n\t\tfor(let i = min; i <= max; i++){\r\n\t\t\tif(i>0 && i <= this.max){\r\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.footerRedraw();\r\n\t}\r\n\r\n\t_generatePageButton(page){\r\n\t\tvar button = document.createElement(\"button\");\r\n\r\n\t\tbutton.classList.add(\"tabulator-page\");\r\n\t\tif(page == this.page){\r\n\t\t\tbutton.classList.add(\"active\");\r\n\t\t}\r\n\r\n\t\tbutton.setAttribute(\"type\", \"button\");\r\n\t\tbutton.setAttribute(\"role\", \"button\");\r\n\r\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\r\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\r\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\r\n\t\t});\r\n\r\n\t\tbutton.setAttribute(\"data-page\", page);\r\n\t\tbutton.textContent = page;\r\n\r\n\t\tbutton.addEventListener(\"click\", (e) => {\r\n\t\t\tthis.setPage(page)\r\n\t\t});\r\n\r\n\t\treturn button;\r\n\t}\r\n\r\n\t//previous page\r\n\tpreviousPage(){\r\n\t\tif(this.page > 1){\r\n\t\t\tthis.page--;\r\n\r\n\t\t\tthis.trackChanges();\r\n\r\n\t\t\treturn this.trigger()\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\r\n\t//next page\r\n\tnextPage(){\r\n\t\tif(this.page < this.max){\r\n\t\t\tthis.page++;\r\n\r\n\t\t\tthis.trackChanges();\r\n\r\n\t\t\treturn this.trigger();\r\n\r\n\t\t}else{\r\n\t\t\tif(!this.progressiveLoad){\r\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\r\n\t\t\t}\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\r\n\t//return current page number\r\n\tgetPage(){\r\n\t\treturn this.page;\r\n\t}\r\n\r\n\t//return max page number\r\n\tgetPageMax(){\r\n\t\treturn this.max;\r\n\t}\r\n\r\n\tgetPageSize(size){\r\n\t\treturn this.size;\r\n\t}\r\n\r\n\tgetMode(){\r\n\t\treturn this.mode;\r\n\t}\r\n\r\n\t//return appropriate rows for current page\r\n\tgetRows(data){\r\n\t\tvar output, start, end;\r\n\r\n\t\tif(this.mode == \"local\"){\r\n\t\t\toutput = [];\r\n\r\n\t\t\tthis.setMaxRows(data.length);\r\n\r\n\t\t\tif(this.size === true){\r\n\t\t\t\tstart = 0;\r\n\t\t\t\tend = data.length;\r\n\t\t\t}else{\r\n\t\t\t\tstart = this.size * (this.page - 1);\r\n\t\t\t\tend = start + parseInt(this.size);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setPageButtons();\r\n\r\n\t\t\tfor(let i = start; i < end; i++){\r\n\t\t\t\tif(data[i]){\r\n\t\t\t\t\toutput.push(data[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\t\t}else{\r\n\t\t\tthis._setPageButtons();\r\n\r\n\t\t\treturn data.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\ttrigger(){\r\n\t\tvar left;\r\n\r\n\t\tswitch(this.mode){\r\n\t\t\tcase \"local\":\r\n\t\t\tleft = this.table.rowManager.scrollLeft;\r\n\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\r\n\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\r\n\r\n\t\t\treturn Promise.resolve();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"remote\":\r\n\t\t\tthis.dataChanging = true;\r\n\t\t\treturn this.reloadData(null)\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.dataChanging = false;\r\n\t\t\t})\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"progressive_load\":\r\n\t\t\tcase \"progressive_scroll\":\r\n\t\t\treturn this.reloadData(null, true);\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\r\n\t_parseRemoteData(data){\r\n\t\tvar left, data, margin;\r\n\r\n\t\tif(typeof data.last_page === \"undefined\"){\r\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\r\n\t\t}\r\n\r\n\t\tif(data.data){\r\n\t\t\tthis.max = parseInt(data.last_page) || 1;\r\n\r\n\t\t\tif(this.progressiveLoad){\r\n\t\t\t\tswitch(this.mode){\r\n\t\t\t\t\tcase \"progressive_load\":\r\n\r\n\t\t\t\t\tif(this.page == 1){\r\n\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.page < this.max){\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.nextPage();\r\n\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"progressive_scroll\":\r\n\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\r\n\r\n\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\r\n\r\n\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\r\n\r\n\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.nextPage();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}else{\r\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\r\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\r\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\r\n\t\t}\r\n\r\n\t\treturn data.data;\r\n\t}\r\n\r\n\t//handle the footer element being redrawn\r\n\tfooterRedraw(){\r\n\t\tvar footer = this.table.footerManager.element;\r\n\r\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\r\n\t\t\tthis.pagesElement.style.display = 'none';\r\n\t\t}else{\r\n\t\t\tthis.pagesElement.style.display = '';\r\n\r\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\r\n\t\t\t\tthis.pagesElement.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nPage.moduleName = \"page\";\r\n\r\nexport default Page;", "// read peristence information from storage\r\nexport default {\r\n\tlocal:function(id, type){\r\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\r\n\r\n\t\treturn data ? JSON.parse(data) : false;\r\n\t},\r\n\tcookie:function(id, type){\r\n\t\tvar cookie = document.cookie,\r\n\t\tkey = id + \"-\" + type,\r\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\r\n\t\tend, data;\r\n\r\n\t\t//if cookie exists, decode and load column data into tabulator\r\n\t\tif(cookiePos > -1){\r\n\t\t\tcookie = cookie.substr(cookiePos);\r\n\r\n\t\t\tend = cookie.indexOf(\";\");\r\n\r\n\t\t\tif(end > -1){\r\n\t\t\t\tcookie = cookie.substr(0, end);\r\n\t\t\t}\r\n\r\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\r\n\t\t}\r\n\r\n\t\treturn data ? JSON.parse(data) : false;\r\n\t}\r\n};", "//write persistence information to storage\r\nexport default {\r\n\tlocal:function(id, type, data){\r\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\r\n\t},\r\n\tcookie:function(id, type, data){\r\n\t\tvar expireDate = new Date();\r\n\r\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\r\n\r\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\r\n\t}\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultReaders from './defaults/readers.js';\r\nimport defaultWriters from './defaults/writers.js';\r\n\r\nclass Persistence extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.mode = \"\";\r\n\t\tthis.id = \"\";\r\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\r\n\t\tthis.defWatcherBlock = false;\r\n\t\tthis.config = {};\r\n\t\tthis.readFunc = false;\r\n\t\tthis.writeFunc = false;\r\n\r\n\t\tthis.registerTableOption(\"persistence\", false);\r\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\r\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\r\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\r\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\r\n\t}\r\n\r\n\t// Test for whether localStorage is available for use.\r\n\tlocalStorageTest() {\r\n\t\tvar  testKey =  \"_tabulator_test\";\r\n\r\n\t\ttry {\r\n\t\t\twindow.localStorage.setItem( testKey, testKey);\r\n\t\t\twindow.localStorage.removeItem( testKey );\r\n\t\t\treturn true;\r\n\t\t} catch(e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup parameters\r\n\tinitialize(){\r\n\t\tif(this.table.options.persistence){\r\n\t\t\t//determine persistent layout storage type\r\n\t\t\tvar mode = this.table.options.persistenceMode,\r\n\t\t\tid = this.table.options.persistenceID,\r\n\t\t\tretreivedData;\r\n\r\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\r\n\r\n\t\t\tif(this.table.options.persistenceReaderFunc){\r\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\r\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\r\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(Persistence.readers[this.mode]){\r\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.table.options.persistenceWriterFunc){\r\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\r\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\r\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(Persistence.writers[this.mode]){\r\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//set storage tag\r\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\r\n\r\n\t\t\tthis.config = {\r\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\r\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\r\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\r\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\r\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\r\n\t\t\t};\r\n\r\n\t\t\t//load pagination data if needed\r\n\t\t\tif(this.config.page){\r\n\t\t\t\tretreivedData = this.retreiveData(\"page\");\r\n\r\n\t\t\t\tif(retreivedData){\r\n\t\t\t\t\tif(typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\r\n\t\t\t\t\t\tthis.table.options.paginationSize = retreivedData.paginationSize;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\r\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//load group data if needed\r\n\t\t\tif(this.config.group){\r\n\t\t\t\tretreivedData = this.retreiveData(\"group\");\r\n\r\n\t\t\t\tif(retreivedData){\r\n\t\t\t\t\tif(typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\r\n\t\t\t\t\t\tthis.table.options.groupBy = retreivedData.groupBy;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\r\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retreivedData.groupStartOpen;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\r\n\t\t\t\t\t\tthis.table.options.groupHeader = retreivedData.groupHeader;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.columns){\r\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\r\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\r\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\r\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\r\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\r\n\t\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\r\n\t\t\t}\r\n\r\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\r\n\r\n\r\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\r\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\r\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\r\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\r\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\r\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\r\n\t\t}\r\n\r\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\r\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\r\n\t}\r\n\r\n\teventSave(type){\r\n\t\tif(this.config[type]){\r\n\t\t\tthis.save(type);\r\n\t\t}\r\n\t}\r\n\r\n\ttableBuilt(){\r\n\t\tvar options = this.table.options,\r\n\t\tsorters, filters;\r\n\r\n\t\tif(this.config.sort){\r\n\t\t\tsorters = this.load(\"sort\");\r\n\r\n\t\t\tif(!sorters === false){\r\n\t\t\t\tthis.table.initialSort = sorters;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.config.filter){\r\n\t\t\tfilters = this.load(\"filter\");\r\n\r\n\t\t\tif(!filters === false){\r\n\t\t\t\tthis.table.initialFilter = filters;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttableRedraw(force){\r\n\t\tif(force && this.config.columns){\r\n\t\t\tthis.save(\"columns\");\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tgetColumnLayout(){\r\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\r\n\t}\r\n\r\n\tsetColumnLayout(layout){\r\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout))\r\n\t\treturn true;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tinitializeColumn(column){\r\n\t\tvar def, keys;\r\n\r\n\t\tif(this.config.columns){\r\n\t\t\tthis.defWatcherBlock = true;\r\n\r\n\t\t\tdef = column.getDefinition();\r\n\r\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\r\n\r\n\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\r\n\t\t\t\tvar value = def[key];\r\n\t\t\t\tif(props){\r\n\t\t\t\t\tObject.defineProperty(def, key, {\r\n\t\t\t\t\t\tset: function(newValue){\r\n\t\t\t\t\t\t\tvalue = newValue;\r\n\r\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\r\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif(props.set){\r\n\t\t\t\t\t\t\t\tprops.set(newValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tget:function(){\r\n\t\t\t\t\t\t\tif(props.get){\r\n\t\t\t\t\t\t\t\tprops.get();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.defWatcherBlock = false;\r\n\t\t}\r\n\t}\r\n\r\n\t//load saved definitions\r\n\tload(type, current){\r\n\t\tvar data = this.retreiveData(type);\r\n\r\n\t\tif(current){\r\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//retreive data from memory\r\n\tretreiveData(type){\r\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\r\n\t}\r\n\r\n\t//merge old and new column definitions\r\n\tmergeDefinition(oldCols, newCols){\r\n\t\tvar output = [];\r\n\r\n\t\tnewCols = newCols || [];\r\n\r\n\t\tnewCols.forEach((column, to) => {\r\n\t\t\tvar from = this._findColumn(oldCols, column),\r\n\t\t\tkeys;\r\n\r\n\t\t\tif(from){\r\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\r\n\t\t\t\t\tkeys =  Object.keys(from);\r\n\t\t\t\t\tkeys.push(\"width\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tkeys = this.config.columns;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\r\n\t\t\t\t\t\tfrom[key] = column[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(from.columns){\r\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\r\n\t\t\t\t}\r\n\r\n\t\t\t\toutput.push(from);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\toldCols.forEach((column, i) => {\r\n\t\t\tvar from = this._findColumn(newCols, column);\r\n\r\n\t\t\tif (!from) {\r\n\t\t\t\tif(output.length>i){\r\n\t\t\t\t\toutput.splice(i, 0, column);\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput.push(column);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//find matching columns\r\n\t_findColumn(columns, subject){\r\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\r\n\r\n\t\treturn columns.find(function(col){\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase \"group\":\r\n\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"field\":\r\n\t\t\t\treturn col.field === subject.field;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\treturn col === subject;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//save data\r\n\tsave(type){\r\n\t\tvar data = {};\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"columns\":\r\n\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns())\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"filter\":\r\n\t\t\tdata = this.table.modules.filter.getFilters();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"sort\":\r\n\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"group\":\r\n\t\t\tdata = this.getGroupConfig();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"page\":\r\n\t\t\tdata = this.getPageConfig();\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tif(this.writeFunc){\r\n\t\t\tthis.writeFunc(this.id, type, data);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//ensure sorters contain no function data\r\n\tvalidateSorters(data){\r\n\t\tdata.forEach(function(item){\r\n\t\t\titem.column = item.field;\r\n\t\t\tdelete item.field;\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetGroupConfig(){\r\n\t\tvar data = {};\r\n\r\n\t\tif(this.config.group){\r\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\r\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\r\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\r\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetPageConfig(){\r\n\t\tvar data = {};\r\n\r\n\t\tif(this.config.page){\r\n\t\t\tif(this.config.page === true || this.config.page.size){\r\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\r\n\t\t\t}\r\n\r\n\t\t\tif(this.config.page === true || this.config.page.page){\r\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\r\n\t//parse columns for data to store\r\n\tparseColumns(columns){\r\n\t\tvar definitions = [],\r\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\tvar defStore = {},\r\n\t\t\tcolDef = column.getDefinition(),\r\n\t\t\tkeys;\r\n\r\n\t\t\tif(column.isGroup){\r\n\t\t\t\tdefStore.title = colDef.title;\r\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\r\n\t\t\t}else{\r\n\t\t\t\tdefStore.field = column.getField();\r\n\r\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\r\n\t\t\t\t\tkeys =  Object.keys(colDef);\r\n\t\t\t\t\tkeys.push(\"width\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tkeys = this.config.columns;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkeys.forEach((key)=>{\r\n\t\t\t\t\tswitch(key){\r\n\t\t\t\t\t\tcase \"width\":\r\n\t\t\t\t\t\tdefStore.width = column.getWidth();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"visible\":\r\n\t\t\t\t\t\tdefStore.visible = column.visible;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\r\n\t\t\t\t\t\t\tdefStore[key] = colDef[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdefinitions.push(defStore);\r\n\t\t});\r\n\r\n\t\treturn definitions;\r\n\t}\r\n}\r\n\r\nPersistence.moduleName = \"persistence\";\r\n\r\n//load defaults\r\nPersistence.readers = defaultReaders;\r\nPersistence.writers = defaultWriters;\r\n\r\nexport default Persistence;", "import Module from '../../core/Module.js';\r\n\r\nclass Print extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.element = false;\r\n\t\tthis.manualBlock = false;\r\n\r\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\r\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\r\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\r\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\r\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\r\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\r\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\r\n\r\n\t\tthis.registerColumnOption(\"print\");\r\n\t\tthis.registerColumnOption(\"titlePrint\");\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.printAsHtml){\r\n\t\t\twindow.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\r\n\t\t\twindow.addEventListener(\"afterprint\", this.cleanup.bind(this));\r\n\t\t}\r\n\r\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\treplaceTable(){\r\n\t\tif(!this.manualBlock){\r\n\t\t\tthis.element = document.createElement(\"div\");\r\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\r\n\r\n\t\t\tthis.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\r\n\r\n\t\t\tthis.table.element.style.display = \"none\";\r\n\r\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\r\n\t\t}\r\n\t}\r\n\r\n\tcleanup(){\r\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\r\n\r\n\t\tif(this.element && this.element.parentNode){\r\n\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\tthis.table.element.style.display = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tprintFullscreen(visible, style, config){\r\n\t\tvar scrollX = window.scrollX,\r\n\t\tscrollY = window.scrollY,\r\n\t\theaderEl = document.createElement(\"div\"),\r\n\t\tfooterEl = document.createElement(\"div\"),\r\n\t\ttableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\r\n\t\theaderContent, footerContent;\r\n\r\n\t\tthis.manualBlock = true;\r\n\r\n\t\tthis.element = document.createElement(\"div\");\r\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\r\n\r\n\t\tif(this.table.options.printHeader){\r\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\r\n\r\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\r\n\r\n\t\t\tif(typeof headerContent == \"string\"){\r\n\t\t\t\theaderEl.innerHTML = headerContent;\r\n\t\t\t}else{\r\n\t\t\t\theaderEl.appendChild(headerContent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.appendChild(headerEl);\r\n\t\t}\r\n\r\n\t\tthis.element.appendChild(tableEl);\r\n\r\n\t\tif(this.table.options.printFooter){\r\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\r\n\r\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\r\n\r\n\r\n\t\t\tif(typeof footerContent == \"string\"){\r\n\t\t\t\tfooterEl.innerHTML = footerContent;\r\n\t\t\t}else{\r\n\t\t\t\tfooterEl.appendChild(footerContent);\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.appendChild(footerEl);\r\n\t\t}\r\n\r\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\r\n\t\tdocument.body.appendChild(this.element);\r\n\r\n\t\tif(this.table.options.printFormatter){\r\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\r\n\t\t}\r\n\r\n\t\twindow.print();\r\n\r\n\t\tthis.cleanup();\r\n\r\n\t\twindow.scrollTo(scrollX, scrollY);\r\n\r\n\t\tthis.manualBlock = false;\r\n\t}\r\n}\r\n\r\nPrint.moduleName = \"print\";\r\n\r\nexport default Print;", "import Module from '../../core/Module.js';\r\n\r\nclass ReactiveData extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.data = false;\r\n\t\tthis.blocked = false; //block reactivity while performing update\r\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\r\n\t\tthis.currentVersion = 0;\r\n\r\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.reactiveData){\r\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this));\r\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this));\r\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this));\r\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this));\r\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\r\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\r\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\twatchData(data){\r\n\t\tvar self = this,\r\n\t\tpushFunc, version;\r\n\r\n\t\tthis.currentVersion ++;\r\n\r\n\t\tversion = this.currentVersion;\r\n\r\n\t\tthis.unwatchData();\r\n\r\n\t\tthis.data = data;\r\n\r\n\t\t//override array push function\r\n\t\tthis.origFuncs.push = data.push;\r\n\r\n\t\tObject.defineProperty(this.data, \"push\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar args = Array.from(arguments);\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\targs.forEach((arg) => {\r\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.push.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//override array unshift function\r\n\t\tthis.origFuncs.unshift = data.unshift;\r\n\r\n\t\tObject.defineProperty(this.data, \"unshift\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar args = Array.from(arguments);\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\targs.forEach((arg) => {\r\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.unshift.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t//override array shift function\r\n\t\tthis.origFuncs.shift = data.shift;\r\n\r\n\t\tObject.defineProperty(this.data, \"shift\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar row;\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tif(self.data.length){\r\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\r\n\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.deleteActual();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.shift.call(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//override array pop function\r\n\t\tthis.origFuncs.pop = data.pop;\r\n\r\n\t\tObject.defineProperty(this.data, \"pop\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar row;\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\t\t\t\t\tif(self.data.length){\r\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\r\n\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.deleteActual();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn self.origFuncs.pop.call(data);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t//override array splice function\r\n\t\tthis.origFuncs.splice = data.splice;\r\n\r\n\t\tObject.defineProperty(this.data, \"splice\", {\r\n\t\t\tenumerable: false,\r\n\t\t\tconfigurable: true,\r\n\t\t\tvalue: function(){\r\n\t\t\t\tvar args = Array.from(arguments),\r\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\r\n\t\t\t\tend = args[1],\r\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\r\n\t\t\t\tstartRow;\r\n\r\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\r\n\r\n\t\t\t\t\t//add new rows\r\n\t\t\t\t\tif(newRows){\r\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\r\n\r\n\t\t\t\t\t\tif(startRow){\r\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\r\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\r\n\r\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\r\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//delete removed rows\r\n\t\t\t\t\tif(end !== 0){\r\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\r\n\r\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\r\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\r\n\r\n\t\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(newRows || end !== 0){\r\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn self.origFuncs.splice.apply(data, arguments);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tunwatchData(){\r\n\t\tif(this.data !== false){\r\n\t\t\tfor(var key in this.origFuncs){\r\n\t\t\t\tObject.defineProperty(this.data, key, {\r\n\t\t\t\t\tenumerable: true,\r\n\t\t\t\t\tconfigurable:true,\r\n\t\t\t\t\twritable:true,\r\n\t\t\t\t\tvalue: this.origFuncs.key,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\twatchRow(row){\r\n\t\tvar data = row.getData();\r\n\r\n\t\tthis.blocked = true;\r\n\r\n\t\tfor(var key in data){\r\n\t\t\tthis.watchKey(row, data, key);\r\n\t\t}\r\n\r\n\t\tif(this.table.options.dataTree){\r\n\t\t\tthis.watchTreeChildren(row);\r\n\t\t}\r\n\r\n\t\tthis.blocked = false;\r\n\t}\r\n\r\n\twatchTreeChildren (row){\r\n\t\tvar childField = row.getData()[this.table.options.dataTreeChildField],\r\n\t\torigFuncs = {};\r\n\r\n\t\tfunction rebuildTree(){\r\n\t\t\tthis.table.modules.dataTree.initializeRow(row);\r\n\t\t\tthis.table.modules.dataTree.layoutRow(row);\r\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\r\n\t\t}\r\n\r\n\t\tif(childField){\r\n\r\n\t\t\torigFuncs.push = childField.push;\r\n\r\n\t\t\tObject.defineProperty(childField, \"push\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.unshift = childField.unshift;\r\n\r\n\t\t\tObject.defineProperty(childField, \"unshift\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.shift = childField.shift;\r\n\r\n\t\t\tObject.defineProperty(childField, \"shift\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.pop = childField.pop;\r\n\r\n\t\t\tObject.defineProperty(childField, \"pop\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\torigFuncs.splice = childField.splice;\r\n\r\n\t\t\tObject.defineProperty(childField, \"splice\", {\r\n\t\t\t\tenumerable: false,\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tvalue: () => {\r\n\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\r\n\r\n\t\t\t\t\trebuildTree();\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\twatchKey(row, data, key){\r\n\t\tvar props = Object.getOwnPropertyDescriptor(data, key),\r\n\t\tvalue = data[key],\r\n\t\tversion = this.currentVersion;\r\n\r\n\t\tObject.defineProperty(data, key, {\r\n\t\t\tset: (newValue) => {\r\n\t\t\t\tvalue = newValue;\r\n\t\t\t\tif(!this.blocked && version === this.currentVersion){\r\n\t\t\t\t\tvar update = {};\r\n\t\t\t\t\tupdate[key] = newValue;\r\n\t\t\t\t\trow.updateData(update);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(props.set){\r\n\t\t\t\t\tprops.set(newValue);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget:() => {\r\n\r\n\t\t\t\tif(props.get){\r\n\t\t\t\t\tprops.get();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tunwatchRow(row){\r\n\t\tvar data = row.getData();\r\n\r\n\t\tfor(var key in data){\r\n\t\t\tObject.defineProperty(data, key, {\r\n\t\t\t\tvalue:data[key],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tblock(){\r\n\t\tthis.blocked = true;\r\n\t}\r\n\r\n\tunblock(){\r\n\t\tthis.blocked = false;\r\n\t}\r\n}\r\n\r\nReactiveData.moduleName = \"reactiveData\";\r\n\r\nexport default ReactiveData;\r\n\r\n\r\n\r\n", "import Module from '../../core/Module.js';\r\n\r\nclass ResizeColumns extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.startColumn = false;\r\n\t\tthis.startX = false;\r\n\t\tthis.startWidth = false;\r\n\t\tthis.handle = null;\r\n\t\tthis.prevHandle = null;\r\n\r\n\t\tthis.registerColumnOption(\"resizable\", true);\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\t// if(this.table.options.resizableColumns){\r\n\t\t\tthis.subscribe(\"cell-layout\", this.layoutCellHandles.bind(this));\r\n\t\t\tthis.subscribe(\"column-init\", this.layoutColumnHeader.bind(this));\r\n\t\t// }\r\n\t}\r\n\r\n\tlayoutCellHandles(cell){\r\n\t\tif(cell.row.type === \"row\"){\r\n\t\t\tthis.initializeColumn(\"cell\", cell.column, cell.element);\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutColumnHeader(column){\r\n\t\tthis.initializeColumn(\"header\", column, column.element);\r\n\t}\r\n\r\n\tinitializeColumn(type, column, element){\r\n\t\tvar self = this,\r\n\t\tvariableHeight = false,\r\n\t\tmode = column.definition.resizable;\r\n\r\n\t\t//set column resize mode\r\n\t\tif(type === \"header\"){\r\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\r\n\t\t\tcolumn.modules.resize = {variableHeight:variableHeight};\r\n\t\t}\r\n\r\n\t\tif(mode === true || mode == type){\r\n\r\n\t\t\tvar handle = document.createElement('div');\r\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\r\n\r\n\r\n\t\t\tvar prevHandle = document.createElement('div');\r\n\t\t\tprevHandle.className = \"tabulator-col-resize-handle prev\";\r\n\r\n\t\t\thandle.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tvar handleDown = function(e){\r\n\t\t\t\tvar nearestColumn = column.getLastColumn();\r\n\r\n\t\t\t\tif(nearestColumn && self._checkResizability(nearestColumn)){\r\n\t\t\t\t\tself.startColumn = column;\r\n\t\t\t\t\tself._mouseDown(e, nearestColumn, handle);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\r\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\r\n\r\n\t\t\t//reszie column on  double click\r\n\t\t\thandle.addEventListener(\"dblclick\", function(e){\r\n\t\t\t\tvar col = column.getLastColumn();\r\n\r\n\t\t\t\tif(col && self._checkResizability(col)){\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tcol.reinitializeWidth(true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\tprevHandle.addEventListener(\"click\", function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\r\n\t\t\tvar prevHandleDown = function(e){\r\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\r\n\r\n\t\t\t\tnearestColumn = column.getFirstColumn();\r\n\r\n\t\t\t\tif(nearestColumn){\r\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\r\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\r\n\r\n\t\t\t\t\tif(prevColumn && self._checkResizability(prevColumn)){\r\n\t\t\t\t\t\tself.startColumn = column;\r\n\t\t\t\t\t\tself._mouseDown(e, prevColumn, prevHandle);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tprevHandle.addEventListener(\"mousedown\", prevHandleDown);\r\n\t\t\tprevHandle.addEventListener(\"touchstart\", prevHandleDown, {passive: true});\r\n\r\n\t\t\t//resize column on double click\r\n\t\t\tprevHandle.addEventListener(\"dblclick\", function(e){\r\n\t\t\t\tvar nearestColumn, colIndex, prevColumn;\r\n\r\n\t\t\t\tnearestColumn = column.getFirstColumn();\r\n\r\n\t\t\t\tif(nearestColumn){\r\n\t\t\t\t\tcolIndex = self.table.columnManager.findColumnIndex(nearestColumn);\r\n\t\t\t\t\tprevColumn = colIndex > 0 ? self.table.columnManager.getColumnByIndex(colIndex - 1) : false;\r\n\r\n\t\t\t\t\tif(prevColumn && self._checkResizability(prevColumn)){\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tprevColumn.reinitializeWidth(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\telement.appendChild(handle);\r\n\t\t\telement.appendChild(prevHandle);\r\n\t\t}\r\n\t}\r\n\r\n\t_checkResizability(column){\r\n\t\treturn column.definition.resizable;\r\n\t}\r\n\r\n\t_mouseDown(e, column, handle){\r\n\t\tvar self = this;\r\n\r\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tfunction mouseMove(e){\r\n\t\t\t// self.table.columnManager.tempScrollBlock();\r\n\r\n\t\t\tif(self.table.rtl){\r\n\t\t\t\tcolumn.setWidth(self.startWidth - ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.setWidth(self.startWidth + ((typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX) - self.startX));\r\n\t\t\t}\r\n\r\n\t\t\tself.table.columnManager.renderer.rerenderColumns(true);\r\n\r\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\r\n\t\t\t\tcolumn.checkCellHeights();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(e){\r\n\r\n\t\t\t//block editor from taking action while resizing is taking place\r\n\t\t\tif(self.startColumn.modules.edit){\r\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\r\n\t\t\t}\r\n\r\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\r\n\t\t\t\tcolumn.checkCellHeights();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\r\n\r\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\r\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\r\n\r\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tself.dispatch(\"column-resized\", column);\r\n\t\t\tself.table.externalEvents.dispatch(\"columnResized\", column.getComponent());\r\n\t\t}\r\n\r\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\r\n\r\n\t\t//block editor from taking action while resizing is taking place\r\n\t\tif(self.startColumn.modules.edit){\r\n\t\t\tself.startColumn.modules.edit.blocked = true;\r\n\t\t}\r\n\r\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\r\n\t\tself.startWidth = column.getWidth();\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\r\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\r\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\r\n\t\thandle.addEventListener(\"touchend\", mouseUp);\r\n\t}\r\n}\r\n\r\nResizeColumns.moduleName = \"resizeColumns\";\r\n\r\nexport default ResizeColumns;", "import Module from '../../core/Module.js';\r\n\r\nclass ResizeRows extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.startColumn = false;\r\n\t\tthis.startY = false;\r\n\t\tthis.startHeight = false;\r\n\t\tthis.handle = null;\r\n\t\tthis.prevHandle = null;\r\n\r\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.resizableRows){\r\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\trowEl = row.getElement();\r\n\r\n\t\tvar handle = document.createElement('div');\r\n\t\thandle.className = \"tabulator-row-resize-handle\";\r\n\r\n\t\tvar prevHandle = document.createElement('div');\r\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\r\n\r\n\t\thandle.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tvar handleDown = function(e){\r\n\t\t\tself.startRow = row;\r\n\t\t\tself._mouseDown(e, row, handle);\r\n\t\t};\r\n\r\n\t\thandle.addEventListener(\"mousedown\", handleDown);\r\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\r\n\r\n\t\tprevHandle.addEventListener(\"click\", function(e){\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\r\n\t\tvar prevHandleDown =  function(e){\r\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\r\n\r\n\t\t\tif(prevRow){\r\n\t\t\t\tself.startRow = prevRow;\r\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\r\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\r\n\r\n\t\trowEl.appendChild(handle);\r\n\t\trowEl.appendChild(prevHandle);\r\n\t}\r\n\r\n\t_mouseDown(e, row, handle){\r\n\t\tvar self = this;\r\n\r\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tfunction mouseMove(e){\r\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(e){\r\n\r\n\t\t\t// //block editor from taking action while resizing is taking place\r\n\t\t\t// if(self.startColumn.modules.edit){\r\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\r\n\t\t\t// }\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\r\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\r\n\r\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\r\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\r\n\r\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\r\n\r\n\t\t\tthis.dispatchExternal(\"rowResized\", row.getComponent());\r\n\t\t}\r\n\r\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\r\n\r\n\t\t//block editor from taking action while resizing is taking place\r\n\t\t// if(self.startColumn.modules.edit){\r\n\t\t// \tself.startColumn.modules.edit.blocked = true;\r\n\t\t// }\r\n\r\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\r\n\t\tself.startHeight = row.getHeight();\r\n\r\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\r\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\r\n\r\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\r\n\t\thandle.addEventListener(\"touchend\", mouseUp);\r\n\t}\r\n}\r\n\r\nResizeRows.moduleName = \"resizeRows\";\r\n\r\nexport default ResizeRows;", "import Module from '../../core/Module.js';\r\n\r\nclass ResizeTable extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.binding = false;\r\n\t\tthis.observer = false;\r\n\t\tthis.containerObserver = false;\r\n\r\n\t\tthis.tableHeight = 0;\r\n\t\tthis.tableWidth = 0;\r\n\t\tthis.containerHeight = 0;\r\n\t\tthis.containerWidth = 0;\r\n\r\n\t\tthis.autoResize = false;\r\n\r\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.autoResize){\r\n\t\t\tvar table = this.table,\r\n\t\t\ttableStyle;\r\n\r\n\t\t\tthis.tableHeight = table.element.clientHeight;\r\n\t\t\tthis.tableWidth = table.element.clientWidth;\r\n\r\n\t\t\tif(table.element.parentNode){\r\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\r\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\r\n\r\n\t\t\t\tthis.autoResize = true;\r\n\r\n\t\t\t\tthis.observer = new ResizeObserver((entry) => {\r\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\r\n\r\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\r\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\r\n\r\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\r\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\r\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\r\n\r\n\t\t\t\t\t\t\tif(table.element.parentNode){\r\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\r\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.rerenderColumns(true);\r\n\r\n\t\t\t\t\t\t\ttable.redraw();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.observer.observe(table.element);\r\n\r\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\r\n\r\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\r\n\r\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\r\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\r\n\r\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\r\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\r\n\r\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\r\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\r\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\r\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\r\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ttable.columnManager.renderer.rerenderColumns(true);\r\n\r\n\t\t\t\t\t\t\ttable.redraw();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\r\n\r\n\t\t\t}else{\r\n\t\t\t\tthis.binding = function(){\r\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\r\n\r\n\t\t\t\t\t\ttable.columnManager.renderer.rerenderColumns(true);\r\n\r\n\t\t\t\t\t\ttable.redraw();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\r\n\t\t\t}\r\n\r\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\r\n\t\t}\r\n\t}\r\n\r\n\ttableResized(){\r\n\t\tthis.table.rowManager.redraw();\r\n\t}\r\n\r\n\tclearBindings(){\r\n\t\tif(this.binding){\r\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\r\n\t\t}\r\n\r\n\t\tif(this.observer){\r\n\t\t\tthis.observer.unobserve(this.table.element);\r\n\t\t}\r\n\r\n\t\tif(this.containerObserver){\r\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nResizeTable.moduleName = \"resizeTable\";\r\n\r\nexport default ResizeTable;", "import Module from '../../core/Module.js';\r\n\r\nclass ResponsiveLayout extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.hiddenColumns = [];\r\n\t\tthis.mode = \"\";\r\n\t\tthis.index = 0;\r\n\t\tthis.collapseFormatter = [];\r\n\t\tthis.collapseStartOpen = true;\r\n\t\tthis.collapseHandleColumn = false;\r\n\r\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\r\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\r\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\r\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\r\n\r\n\t\tthis.registerColumnOption(\"responsive\");\r\n\t}\r\n\r\n\t//generate responsive columns list\r\n\tinitialize(){\r\n\t\tvar self = this,\r\n\t\tcolumns = [];\r\n\r\n\t\tif(this.table.options.responsiveLayout){\r\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\r\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\r\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\r\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\r\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\r\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\r\n\r\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\r\n\r\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\r\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttableRedraw(force){\r\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\r\n\t\t\tif(!force){\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeResponsivity(){\r\n\t\tvar columns = [];\r\n\r\n\t\tthis.mode = this.table.options.responsiveLayout;\r\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\r\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\r\n\t\tthis.hiddenColumns = [];\r\n\r\n\t\t//determine level of responsivity for each column\r\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column, i){\r\n\t\t\tif(column.modules.responsive){\r\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\r\n\t\t\t\t\tcolumn.modules.responsive.index = i;\r\n\t\t\t\t\tcolumns.push(column);\r\n\r\n\t\t\t\t\tif(!column.visible && self.mode === \"collapse\"){\r\n\t\t\t\t\t\tself.hiddenColumns.push(column);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//sort list by responsivity\r\n\t\tcolumns = columns.reverse();\r\n\t\tcolumns = columns.sort(function(a, b){\r\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\r\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\r\n\t\t});\r\n\r\n\t\tthis.columns = columns;\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tthis.generateCollapsedContent();\r\n\t\t}\r\n\r\n\t\t//assign collapse column\r\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\r\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\r\n\t\t\t\tthis.collapseHandleColumn = col;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.collapseHandleColumn){\r\n\t\t\tif(this.hiddenColumns.length){\r\n\t\t\t\tthis.collapseHandleColumn.show();\r\n\t\t\t}else{\r\n\t\t\t\tthis.collapseHandleColumn.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//define layout information\r\n\tinitializeColumn(column){\r\n\t\tvar def = column.getDefinition();\r\n\r\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar el;\r\n\r\n\t\tif(row.type !== \"calc\"){\r\n\t\t\tel = document.createElement(\"div\");\r\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\r\n\r\n\t\t\trow.modules.responsiveLayout = {\r\n\t\t\t\telement:el,\r\n\t\t\t\topen:this.collapseStartOpen,\r\n\t\t\t};\r\n\r\n\t\t\tif(!this.collapseStartOpen){\r\n\t\t\t\tel.style.display = 'none';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tlayoutRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(row.modules.responsiveLayout){\r\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\r\n\t\t\tthis.generateCollapsedRowContent(row);\r\n\t\t}\r\n\t}\r\n\r\n\t//update column visibility\r\n\tupdateColumnVisibility(column, responsiveToggle){\r\n\t\tif(!responsiveToggle && column.modules.responsive){\r\n\t\t\tcolumn.modules.responsive.visible = column.visible;\r\n\t\t\tthis.initializeResponsivity();\r\n\t\t}\r\n\t}\r\n\r\n\thideColumn(column){\r\n\t\tvar colCount = this.hiddenColumns.length;\r\n\r\n\t\tcolumn.hide(false, true);\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tthis.hiddenColumns.unshift(column);\r\n\t\t\tthis.generateCollapsedContent();\r\n\r\n\t\t\tif(this.collapseHandleColumn && !colCount){\r\n\t\t\t\tthis.collapseHandleColumn.show();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tshowColumn(column){\r\n\t\tvar index;\r\n\r\n\t\tcolumn.show(false, true);\r\n\t\t//set column width to prevent calculation loops on uninitialized columns\r\n\t\tcolumn.setWidth(column.getWidth());\r\n\r\n\t\tif(this.mode === \"collapse\"){\r\n\t\t\tindex = this.hiddenColumns.indexOf(column);\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\r\n\t\t\t}\r\n\r\n\t\t\tthis.generateCollapsedContent();\r\n\r\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\r\n\t\t\t\tthis.collapseHandleColumn.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//redraw columns to fit space\r\n\tupdate(){\r\n\t\tvar self = this,\r\n\t\tworking = true;\r\n\r\n\t\twhile(working){\r\n\r\n\t\t\tlet width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\r\n\r\n\t\t\tlet diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\r\n\r\n\t\t\tif(diff < 0){\r\n\t\t\t\t//table is too wide\r\n\t\t\t\tlet column = self.columns[self.index];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tself.hideColumn(column);\r\n\t\t\t\t\tself.index ++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\r\n\t\t\t\t//table has spare space\r\n\t\t\t\tlet column = self.columns[self.index -1];\r\n\r\n\t\t\t\tif(column){\r\n\t\t\t\t\tif(diff > 0){\r\n\t\t\t\t\t\tif(diff >= column.getWidth()){\r\n\t\t\t\t\t\t\tself.showColumn(column);\r\n\t\t\t\t\t\t\tself.index --;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tworking = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tworking = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.table.rowManager.activeRowsCount){\r\n\t\t\t\tself.table.rowManager.renderEmptyScroll();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCollapsedContent(){\r\n\t\tvar self = this,\r\n\t\trows = this.table.rowManager.getDisplayRows();\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\tself.generateCollapsedRowContent(row);\r\n\t\t});\r\n\t}\r\n\r\n\tgenerateCollapsedRowContent(row){\r\n\t\tvar el, contents;\r\n\r\n\t\tif(row.modules.responsiveLayout){\r\n\t\t\tel = row.modules.responsiveLayout.element;\r\n\r\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\r\n\r\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\r\n\t\t\tif(contents){\r\n\t\t\t\tel.appendChild(contents);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateCollapsedRowData(row){\r\n\t\tvar self = this,\r\n\t\tdata = row.getData(),\r\n\t\toutput = [],\r\n\t\tmockCellComponent;\r\n\r\n\t\tthis.hiddenColumns.forEach(function(column){\r\n\t\t\tvar value = column.getFieldValue(data);\r\n\r\n\t\t\tif(column.definition.title && column.field){\r\n\t\t\t\tif(column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters){\r\n\r\n\t\t\t\t\tmockCellComponent = {\r\n\t\t\t\t\t\tvalue:false,\r\n\t\t\t\t\t\tdata:{},\r\n\t\t\t\t\t\tgetValue:function(){\r\n\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetData:function(){\r\n\t\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetElement:function(){\r\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetRow:function(){\r\n\t\t\t\t\t\t\treturn row.getComponent();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetColumn:function(){\r\n\t\t\t\t\t\t\treturn column.getComponent();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction onRendered(callback){\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tfield: column.field,\r\n\t\t\t\t\t\ttitle: column.definition.title,\r\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\toutput.push({\r\n\t\t\t\t\t\tfield: column.field,\r\n\t\t\t\t\t\ttitle: column.definition.title,\r\n\t\t\t\t\t\tvalue: value\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tformatCollapsedData(data){\r\n\t\tvar list = document.createElement(\"table\");\r\n\r\n\t\tdata.forEach(function(item){\r\n\t\t\tvar row = document.createElement(\"tr\");\r\n\t\t\tvar titleData = document.createElement(\"td\");\r\n\t\t\tvar valueData = document.createElement(\"td\");\r\n\t\t\tvar node_content;\r\n\r\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\r\n\t\t\ttitleData.appendChild(titleHighlight);\r\n\t\t\tthis.langBind(\"columns|\" + item.field, function(text){\r\n\t\t\t\ttitleHighlight.innerText = text || item.title;\r\n\t\t\t});\r\n\r\n\t\t\tif(item.value instanceof Node){\r\n\t\t\t\tnode_content = document.createElement(\"div\");\r\n\t\t\t\tnode_content.appendChild(item.value);\r\n\t\t\t\tvalueData.appendChild(node_content);\r\n\t\t\t}else{\r\n\t\t\t\tvalueData.innerHTML = item.value;\r\n\t\t\t}\r\n\r\n\t\t\trow.appendChild(titleData);\r\n\t\t\trow.appendChild(valueData);\r\n\t\t\tlist.appendChild(row);\r\n\t\t}, this);\r\n\r\n\t\treturn Object.keys(data).length ? list : \"\";\r\n\t}\r\n}\r\n\r\nResponsiveLayout.moduleName = \"responsiveLayout\";\r\n\r\nexport default ResponsiveLayout;", "import Module from '../../core/Module.js';\r\n\r\nclass SelectRow extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.selecting = false; //flag selecting in progress\r\n\t\tthis.lastClickedRow = false; //last clicked row\r\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\r\n\t\tthis.selectedRows = []; //hold selected rows\r\n\t\tthis.headerCheckboxElement = null; // hold header select element\r\n\r\n\t\tthis.registerTableOption(\"selectable\", \"highlight\"); //highlight rows on hover\r\n\t\tthis.registerTableOption(\"selectableRangeMode\", \"drag\");  //highlight rows on hover\r\n\t\tthis.registerTableOption(\"selectableRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\r\n\t\tthis.registerTableOption(\"selectablePersistence\", true); // maintain selection when table view is updated\r\n\t\tthis.registerTableOption(\"selectableCheck\", function(data, row){return true;}); //check wheather row is selectable\r\n\r\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\r\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\r\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\r\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\r\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\r\n\r\n\t\t//register component functions\r\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tif(this.table.options.selectable !== false){\r\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\r\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\r\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\r\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\r\n\r\n\t\t\tif(this.table.options.selectable && !this.table.options.selectablePersistence){\r\n\t\t\t\tthis.subscribe(\"data-refeshing\", this.deselectRows.bind(this));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trowRetrieve(type, prevValue){\r\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\r\n\t}\r\n\r\n\trowDeleted(row){\r\n\t\tthis._deselectRow(row, true);\r\n\t}\r\n\r\n\tclearSelectionData(silent){\r\n\t\tthis.selecting = false;\r\n\t\tthis.lastClickedRow = false;\r\n\t\tthis.selectPrev = [];\r\n\t\tthis.selectedRows = [];\r\n\r\n\t\tif(silent !== true){\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRow(row){\r\n\t\tvar self = this,\r\n\t\telement = row.getElement();\r\n\r\n\t\t// trigger end of row selection\r\n\t\tvar endSelect = function(){\r\n\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tself.selecting = false;\r\n\t\t\t}, 50);\r\n\r\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\r\n\t\t};\r\n\r\n\t\trow.modules.select = {selected:false};\r\n\r\n\t\t//set row selection class\r\n\t\tif(self.table.options.selectableCheck.call(this.table, row.getComponent())){\r\n\t\t\telement.classList.add(\"tabulator-selectable\");\r\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\r\n\r\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\r\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\r\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.lastClickedRow = self.lastClickedRow || row;\r\n\r\n\t\t\t\t\t\t\tvar lastClickedRowIdx = self.table.rowManager.getDisplayRowIndex(self.lastClickedRow);\r\n\t\t\t\t\t\t\tvar rowIdx = self.table.rowManager.getDisplayRowIndex(row);\r\n\r\n\t\t\t\t\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\r\n\t\t\t\t\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\r\n\r\n\t\t\t\t\t\t\tvar rows = self.table.rowManager.getDisplayRows().slice(0);\r\n\t\t\t\t\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\r\n\r\n\t\t\t\t\t\t\tif(e.ctrlKey || e.metaKey){\r\n\t\t\t\t\t\t\t\ttoggledRows.forEach(function(toggledRow){\r\n\t\t\t\t\t\t\t\t\tif(toggledRow !== self.lastClickedRow){\r\n\r\n\t\t\t\t\t\t\t\t\t\tif(self.table.options.selectable !== true && !self.isRowSelected(row)){\r\n\t\t\t\t\t\t\t\t\t\t\tif(self.selectedRows.length < self.table.options.selectable){\r\n\t\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tself.toggleRow(toggledRow);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tself.deselectRows(undefined, true);\r\n\r\n\t\t\t\t\t\t\t\tif(self.table.options.selectable !== true){\r\n\t\t\t\t\t\t\t\t\tif(toggledRows.length > self.table.options.selectable){\r\n\t\t\t\t\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, self.table.options.selectable)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tself.selectRows(toggledRows);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(e.ctrlKey || e.metaKey){\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tself.deselectRows(undefined, true);\r\n\t\t\t\t\t\t\tself.selectRows(row);\r\n\t\t\t\t\t\t\tself.lastClickedRow = row;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\r\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif(!self.selecting){\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\r\n\t\t\t\t\t\t\tself.selecting = true;\r\n\r\n\t\t\t\t\t\t\tself.selectPrev = [];\r\n\r\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\r\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\r\n\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\r\n\t\t\t\t\t\tif(self.selecting){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.toggleRow(row);\r\n\r\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\r\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\r\n\t\t\t\t\t\tif(self.selecting){\r\n\t\t\t\t\t\t\tself.table._clearSelection();\r\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\telement.classList.add(\"tabulator-unselectable\");\r\n\t\t\telement.classList.remove(\"tabulator-selectable\");\r\n\t\t}\r\n\t}\r\n\r\n\t//toggle row selection\r\n\ttoggleRow(row){\r\n\t\tif(this.table.options.selectableCheck.call(this.table, row.getComponent())){\r\n\t\t\tif(row.modules.select && row.modules.select.selected){\r\n\t\t\t\tthis._deselectRow(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis._selectRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//select a number of rows\r\n\tselectRows(rows){\r\n\t\tvar rowMatch;\r\n\r\n\t\tswitch(typeof rows){\r\n\t\t\tcase \"undefined\":\r\n\t\t\tthis.table.rowManager.rows.forEach((row) => {\r\n\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t});\r\n\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\trowMatch = this.table.rowManager.findRow(rows);\r\n\r\n\t\t\tif(rowMatch){\r\n\t\t\t\tthis._selectRow(rowMatch, true, true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.rowManager.getRows(rows).forEach((row) => {\r\n\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis._rowSelectionChanged();\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\tif(Array.isArray(rows)){\r\n\t\t\t\trows.forEach((row) => {\r\n\t\t\t\t\tthis._selectRow(row, true, true);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._rowSelectionChanged();\r\n\t\t\t}else{\r\n\t\t\t\tthis._selectRow(rows, false, true);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//select an individual row\r\n\t_selectRow(rowInfo, silent, force){\r\n\t\tvar index;\r\n\r\n\t\t//handle max row count\r\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\r\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\r\n\t\t\t\tif(this.table.options.selectableRollingSelection){\r\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\r\n\r\n\t\tif(row){\r\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\r\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\r\n\t\t\t\tif(!row.modules.select){\r\n\t\t\t\t\trow.modules.select = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow.modules.select.selected = true;\r\n\t\t\t\tif(row.modules.select.checkboxEl){\r\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.selectedRows.push(row);\r\n\r\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\r\n\t\t\t\t\tthis.childRowSelection(row, true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\r\n\r\n\t\t\t\tthis._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisRowSelected(row){\r\n\t\treturn this.selectedRows.indexOf(row) !== -1;\r\n\t}\r\n\r\n\t//deselect a number of rows\r\n\tdeselectRows(rows, silent){\r\n\t\tvar self = this,\r\n\t\trowCount;\r\n\t\t\r\n\t\tif(typeof rows == \"undefined\"){\r\n\r\n\t\t\trowCount = self.selectedRows.length;\r\n\r\n\t\t\tfor(let i = 0; i < rowCount; i++){\r\n\t\t\t\tself._deselectRow(self.selectedRows[0], true);\r\n\t\t\t}\r\n\r\n\t\t\tself._rowSelectionChanged(silent);\r\n\r\n\t\t}else{\r\n\t\t\tif(Array.isArray(rows)){\r\n\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\tself._deselectRow(row, true);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}else{\r\n\t\t\t\tself._deselectRow(rows, silent);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//deselect an individual row\r\n\t_deselectRow(rowInfo, silent){\r\n\t\tvar self = this,\r\n\t\trow = self.table.rowManager.findRow(rowInfo),\r\n\t\tindex;\r\n\r\n\t\tif(row){\r\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\r\n\t\t\t\treturn selectedRow == row;\r\n\t\t\t});\r\n\r\n\t\t\tif(index > -1){\r\n\r\n\t\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\r\n\t\t\t\tif(!row.modules.select){\r\n\t\t\t\t\trow.modules.select = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\trow.modules.select.selected = false;\r\n\t\t\t\tif(row.modules.select.checkboxEl){\r\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\r\n\t\t\t\t}\r\n\t\t\t\tself.selectedRows.splice(index, 1);\r\n\r\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\r\n\t\t\t\t\tthis.childRowSelection(row, false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\r\n\r\n\t\t\t\tself._rowSelectionChanged(silent);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetSelectedData(){\r\n\t\tvar data = [];\r\n\r\n\t\tthis.selectedRows.forEach(function(row){\r\n\t\t\tdata.push(row.getData());\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tgetSelectedRows(){\r\n\r\n\t\tvar rows = [];\r\n\r\n\t\tthis.selectedRows.forEach(function(row){\r\n\t\t\trows.push(row.getComponent());\r\n\t\t});\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\t_rowSelectionChanged(silent){\r\n\t\tif(this.headerCheckboxElement){\r\n\t\t\tif(this.selectedRows.length === 0){\r\n\t\t\t\tthis.headerCheckboxElement.checked = false;\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\r\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\r\n\t\t\t\tthis.headerCheckboxElement.checked = true;\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\r\n\t\t\t\tthis.headerCheckboxElement.checked = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(!silent){\r\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows());\r\n\t\t}\r\n\t}\r\n\r\n\tregisterRowSelectCheckbox (row, element) {\r\n\t\tif(!row._row.modules.select){\r\n\t\t\trow._row.modules.select = {};\r\n\t\t}\r\n\r\n\t\trow._row.modules.select.checkboxEl = element;\r\n\t}\r\n\r\n\tregisterHeaderSelectCheckbox (element) {\r\n\t\tthis.headerCheckboxElement = element;\r\n\t}\r\n\r\n\tchildRowSelection(row, select){\r\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\r\n\r\n\t\tif(select){\r\n\t\t\tfor(let child of children){\r\n\t\t\t\tthis._selectRow(child, true);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tfor(let child of children){\r\n\t\t\t\tthis._deselectRow(child, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nSelectRow.moduleName = \"selectRow\";\r\n\r\nexport default SelectRow;", "//sort numbers\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar decimal = params.decimalSeparator;\r\n\tvar thousand = params.thousandSeparator;\r\n\tvar emptyAlign = 0;\r\n\r\n\ta = String(a);\r\n\tb = String(b);\r\n\r\n\tif(thousand){\r\n\t\ta = a.split(thousand).join(\"\");\r\n\t\tb = b.split(thousand).join(\"\");\r\n\t}\r\n\r\n\tif(decimal){\r\n\t\ta = a.split(decimal).join(\".\");\r\n\t\tb = b.split(decimal).join(\".\");\r\n\t}\r\n\r\n\ta = parseFloat(a);\r\n\tb = parseFloat(b);\r\n\r\n\t//handle non numeric values\r\n\tif(isNaN(a)){\r\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\r\n\t}else if(isNaN(b)){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\t\t//compare valid values\r\n\t\treturn a - b;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};", "//sort strings\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\tvar locale;\r\n\r\n\t//handle empty values\r\n\tif(!a){\r\n\t\temptyAlign =  !b ? 0 : -1;\r\n\t}else if(!b){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\t\t//compare valid values\r\n\t\tswitch(typeof params.locale){\r\n\t\t\tcase \"boolean\":\r\n\t\t\tif(params.locale){\r\n\t\t\t\tlocale = this.langLocale();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\t\tcase \"string\":\r\n\t\t\tlocale = params.locale;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};", "//sort datetime\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar DT = window.DateTime || luxon.DateTime;\r\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\r\n\talignEmptyValues = params.alignEmptyValues,\r\n\temptyAlign = 0;\r\n\r\n\tif(typeof DT != \"undefined\"){\r\n\t\ta = DT.fromFormat(String(a), format);\r\n\t\tb = DT.fromFormat(String(b), format);\r\n\r\n\t\tif(!a.isValid){\r\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\r\n\t\t}else if(!b.isValid){\r\n\t\t\temptyAlign =  1;\r\n\t\t}else{\r\n\t\t\t//compare valid values\r\n\t\t\treturn a - b;\r\n\t\t}\r\n\r\n\t\t//fix empty values in position\r\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\t\temptyAlign *= -1;\r\n\t\t}\r\n\r\n\t\treturn emptyAlign;\r\n\r\n\t}else{\r\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\r\n\t}\r\n};", "import datetime from './datetime.js';\r\n\r\n//sort date\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tif(!params.format){\r\n\t\tparams.format = \"dd/MM/yyyy\";\r\n\t}\r\n\r\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\r\n};", "import datetime from './datetime.js';\r\n\r\n//sort times\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tif(!params.format){\r\n\t\tparams.format = \"HH:mm\";\r\n\t}\r\n\r\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\r\n};", "//sort booleans\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\r\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\r\n\r\n\treturn el1 - el2;\r\n};", "//sort if element contains any data\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = 0;\r\n\tvar el2 = 0;\r\n\tvar type = params.type || \"length\";\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\r\n\tfunction calc(value){\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"length\":\r\n\t\t\treturn value.length;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"sum\":\r\n\t\t\treturn value.reduce(function(c, d){\r\n\t\t\t\treturn c + d;\r\n\t\t\t});\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"max\":\r\n\t\t\treturn Math.max.apply(null, value) ;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"min\":\r\n\t\t\treturn Math.min.apply(null, value) ;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"avg\":\r\n\t\t\treturn value.reduce(function(c, d){\r\n\t\t\t\treturn c + d;\r\n\t\t\t}) / value.length;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t//handle non array values\r\n\tif(!Array.isArray(a)){\r\n\t\talignEmptyValues = !Array.isArray(b) ? 0 : -1;\r\n\t}else if(!Array.isArray(b)){\r\n\t\talignEmptyValues = 1;\r\n\t}else{\r\n\r\n\t\t//compare valid values\r\n\t\tel1 = a ? calc(a) : 0;\r\n\t\tel2 = b ? calc(b) : 0;\r\n\r\n\t\treturn el1 - el2;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};", "//sort if element contains any data\r\nexport default function(a, b, aRow, bRow, column, dir, params){\r\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\r\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\r\n\r\n\treturn el1 - el2;\r\n};", "//sort alpha numeric strings\r\nexport default function(as, bs, aRow, bRow, column, dir, params){\r\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\r\n\tvar alignEmptyValues = params.alignEmptyValues;\r\n\tvar emptyAlign = 0;\r\n\r\n\t//handle empty values\r\n\tif(!as && as!== 0){\r\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\r\n\t}else if(!bs && bs!== 0){\r\n\t\temptyAlign =  1;\r\n\t}else{\r\n\r\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\r\n\t\ta = String(as).toLowerCase();\r\n\t\tb = String(bs).toLowerCase();\r\n\t\tif(a === b) return 0;\r\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\r\n\t\ta = a.match(rx);\r\n\t\tb = b.match(rx);\r\n\t\tL = a.length > b.length ? b.length : a.length;\r\n\t\twhile(i < L){\r\n\t\t\ta1= a[i];\r\n\t\t\tb1= b[i++];\r\n\t\t\tif(a1 !== b1){\r\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\r\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\r\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\r\n\t\t\t\t\treturn a1 - b1;\r\n\t\t\t\t}\r\n\t\t\t\telse return a1 > b1 ? 1 : -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn a.length > b.length;\r\n\t}\r\n\r\n\t//fix empty values in position\r\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\r\n\t\temptyAlign *= -1;\r\n\t}\r\n\r\n\treturn emptyAlign;\r\n};", "import number from './sorters/number.js';\r\nimport string from './sorters/string.js';\r\nimport date from './sorters/date.js';\r\nimport time from './sorters/time.js';\r\nimport datetime from './sorters/datetime.js';\r\nimport boolean from './sorters/boolean.js';\r\nimport array from './sorters/array.js';\r\nimport exists from './sorters/exists.js';\r\nimport alphanum from './sorters/alphanum.js';\r\n\r\nexport default {\r\n\tnumber:number,\r\n\tstring:string,\r\n\tdate:date,\r\n\ttime:time,\r\n\tdatetime:datetime,\r\n\tboolean:boolean,\r\n\tarray:array,\r\n\texists:exists,\r\n\talphanum:alphanum\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultSorters from './defaults/sorters.js';\r\n\r\nclass Sort extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t \tthis.sortList = []; //holder current sort\r\n\t \tthis.changed = false; //has the sort changed since last render\r\n\r\n\t \tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\r\n\r\n\t \tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\r\n\t \tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\r\n\t \tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\r\n\t \tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\r\n\r\n\t \tthis.registerColumnOption(\"sorter\");\r\n\t \tthis.registerColumnOption(\"sorterParams\");\r\n\r\n\t \tthis.registerColumnOption(\"headerSort\", true);\r\n\t \tthis.registerColumnOption(\"headerSortStartingDir\");\r\n\t \tthis.registerColumnOption(\"headerSortTristate\");\r\n\r\n\t }\r\n\r\n\t initialize(){\r\n\t \tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\r\n\t \tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\r\n\t \tthis.registerDataHandler(this.sort.bind(this), 20);\r\n\r\n\t \tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\r\n\t \tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\r\n\t \tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\r\n\r\n\t \tif(this.table.options.sortMode === \"remote\"){\r\n\t \t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\r\n\t \t}\r\n\t }\r\n\r\n\t tableBuilt(){\r\n\t \tif(this.table.options.initialSort){\r\n\t \t\tthis.setSort(this.table.options.initialSort);\r\n\t \t}\r\n\t }\r\n\r\n\t remoteSortParams(data, config, silent, params){\r\n\t \tvar sorters = this.getSort();\r\n\r\n\t \tsorters.forEach((item) => {\r\n\t \t\tdelete item.column;\r\n\t \t});\r\n\r\n\t \tparams.sort = sorters;\r\n\r\n\t \treturn params;\r\n\t }\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tuserSetSort(sortList, dir){\r\n\t\tthis.setSort(sortList, dir);\r\n\t\t// this.table.rowManager.sorterRefresh();\r\n\t\tthis.refreshSort();\r\n\t}\r\n\r\n\tclearSort(){\r\n\t\tthis.clear();\r\n\t\t// this.table.rowManager.sorterRefresh();\r\n\t\tthis.refreshSort();\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\t//initialize column header for sorting\r\n\tinitializeColumn(column){\r\n\t\tvar sorter = false,\r\n\t\tcolEl,\r\n\t\tarrowEl;\r\n\r\n\t\tswitch(typeof column.definition.sorter){\r\n\t\t\tcase \"string\":\r\n\t\t\tif(Sort.sorters[column.definition.sorter]){\r\n\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\tsorter = column.definition.sorter;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tcolumn.modules.sort = {\r\n\t\t\tsorter:sorter, dir:\"none\",\r\n\t\t\tparams:column.definition.sorterParams || {},\r\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\r\n\t\t\ttristate: column.definition.headerSortTristate,\r\n\t\t};\r\n\r\n\t\tif(column.definition.headerSort !== false){\r\n\r\n\t\t\tcolEl = column.getElement();\r\n\r\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\r\n\r\n\r\n\t\t\tarrowEl = document.createElement(\"div\");\r\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\r\n\r\n\t\t\tif(typeof this.table.options.headerSortElement == \"object\"){\r\n\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\r\n\t\t\t}else{\r\n\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\r\n\t\t\t}\r\n\r\n\t\t\t//create sorter arrow\r\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\r\n\r\n\t\t\tcolumn.modules.sort.element = arrowEl;\r\n\r\n\t\t\t//sort on click\r\n\t\t\tcolEl.addEventListener(\"click\", (e) => {\r\n\t\t\t\tvar dir = \"\",\r\n\t\t\t\tsorters=[],\r\n\t\t\t\tmatch = false;\r\n\r\n\t\t\t\tif(column.modules.sort){\r\n\t\t\t\t\tif(column.modules.sort.tristate){\r\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\r\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\r\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tdir = \"none\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\r\n\t\t\t\t\t\t\tcase \"asc\":\r\n\t\t\t\t\t\t\tdir = \"desc\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase \"desc\":\r\n\t\t\t\t\t\t\tdir = \"asc\";\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\r\n\t\t\t\t\t\tsorters = this.getSort();\r\n\r\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\r\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif(match > -1){\r\n\t\t\t\t\t\t\tsorters[match].dir = dir;\r\n\r\n\t\t\t\t\t\t\tif(match != sorters.length -1){\r\n\t\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\r\n\t\t\t\t\t\t\t\tif(dir != \"none\"){\r\n\t\t\t\t\t\t\t\t\tsorters.push(match);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(dir != \"none\"){\r\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//add to existing sort\r\n\t\t\t\t\t\tthis.setSort(sorters);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(dir == \"none\"){\r\n\t\t\t\t\t\t\tthis.clear();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t//sort by column only\r\n\t\t\t\t\t\t\tthis.setSort(column, dir);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\r\n\t\t\t\t\tthis.refreshSort();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trefreshSort(){\r\n\t\tif(this.table.options.sortMode === \"remote\"){\r\n\t\t\tthis.reloadData();\r\n\t\t}else{\r\n\t\t\tthis.refreshData(true);\r\n\t\t}\r\n\r\n\t\t//TODO - Persist left position of row manager\r\n\t\t// left = this.scrollLeft;\r\n\t\t// this.scrollHorizontal(left);\r\n\t}\r\n\r\n\t//check if the sorters have changed since last use\r\n\thasChanged(){\r\n\t\tvar changed = this.changed;\r\n\t\tthis.changed = false;\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t//return current sorters\r\n\tgetSort(){\r\n\t\tvar self = this,\r\n\t\tsorters = [];\r\n\r\n\t\tself.sortList.forEach(function(item){\r\n\t\t\tif(item.column){\r\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn sorters;\r\n\t}\r\n\r\n\t//change sort list and trigger sort\r\n\tsetSort(sortList, dir){\r\n\t\tvar self = this,\r\n\t\tnewSortList = [];\r\n\r\n\t\tif(!Array.isArray(sortList)){\r\n\t\t\tsortList = [{column: sortList, dir:dir}];\r\n\t\t}\r\n\r\n\t\tsortList.forEach(function(item){\r\n\t\t\tvar column;\r\n\r\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\titem.column = column;\r\n\t\t\t\tnewSortList.push(item);\r\n\t\t\t\tself.changed = true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tself.sortList = newSortList;\r\n\r\n\t\tthis.dispatch(\"sort-changed\");\r\n\t}\r\n\r\n\t//clear sorters\r\n\tclear(){\r\n\t\tthis.setSort([]);\r\n\t}\r\n\r\n\t//find appropriate sorter for column\r\n\tfindSorter(column){\r\n\t\tvar row = this.table.rowManager.activeRows[0],\r\n\t\tsorter = \"string\",\r\n\t\tfield, value;\r\n\r\n\t\tif(row){\r\n\t\t\trow = row.getData();\r\n\t\t\tfield = column.getField();\r\n\r\n\t\t\tif(field){\r\n\r\n\t\t\t\tvalue = column.getFieldValue(row);\r\n\r\n\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tsorter = \"boolean\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\r\n\t\t\t\t\t\tsorter = \"number\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\r\n\t\t\t\t\t\t\tsorter = \"alphanum\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Sort.sorters[sorter];\r\n\t}\r\n\r\n\t//work through sort list sorting data\r\n\tsort(data){\r\n\t\tvar self = this,\r\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\r\n\t\tsortListActual = [],\r\n\t\trowComponents = [],\r\n\t\tlastSort;\r\n\r\n\t\tif(this.subscribedExternal(\"dataSorting\")){\r\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\r\n\t\t}\r\n\r\n\t\tself.clearColumnHeaders();\r\n\r\n\t\tif(this.table.options.sortMode !== \"remote\"){\r\n\r\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\r\n\t\t\tsortList.forEach(function(item, i){\r\n\t\t\t\tvar sortObj = item.column.modules.sort;\r\n\r\n\t\t\t\tif(item.column && sortObj){\r\n\r\n\t\t\t\t\t//if no sorter has been defined, take a guess\r\n\t\t\t\t\tif(!sortObj.sorter){\r\n\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\r\n\r\n\t\t\t\t\tsortListActual.push(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\r\n\t\t\t});\r\n\r\n\t\t\t//sort data\r\n\t\t\tif (sortListActual.length) {\r\n\t\t\t\tself._sortItems(data, sortListActual);\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tsortList.forEach(function(item, i){\r\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(this.subscribedExternal(\"dataSorted\")){\r\n\t\t\tdata.forEach((row) => {\r\n\t\t\t\trowComponents.push(row.getComponent());\r\n\t\t\t});\r\n\r\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t//clear sort arrows on columns\r\n\tclearColumnHeaders(){\r\n\t\tthis.table.columnManager.getRealColumns().forEach(function(column){\r\n\t\t\tif(column.modules.sort){\r\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\r\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//set the column header sort direction\r\n\tsetColumnHeader(column, dir){\r\n\t\tcolumn.modules.sort.dir = dir;\r\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir);\r\n\t}\r\n\r\n\t//sort each item in sort list\r\n\t_sortItems(data, sortList){\r\n\t\tvar sorterCount = sortList.length - 1;\r\n\r\n\t\tdata.sort((a, b) => {\r\n\t\t\tvar result;\r\n\r\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\r\n\t\t\t\tlet sortItem = sortList[i];\r\n\r\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\r\n\r\n\t\t\t\tif(result !== 0){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t});\r\n\t}\r\n\r\n\t//process individual rows for a sort function on active data\r\n\t_sortRow(a, b, column, dir, params){\r\n\t\tvar el1Comp, el2Comp, colComp;\r\n\r\n\t\t//switch elements depending on search direction\r\n\t\tvar el1 = dir == \"asc\" ? a : b;\r\n\t\tvar el2 = dir == \"asc\" ? b : a;\r\n\r\n\t\ta = column.getFieldValue(el1.getData());\r\n\t\tb = column.getFieldValue(el2.getData());\r\n\r\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\r\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\r\n\r\n\t\tel1Comp = el1.getComponent();\r\n\t\tel2Comp = el2.getComponent();\r\n\r\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\r\n\t}\r\n}\r\n\r\nSort.moduleName = \"sort\";\r\n\r\n//load defaults\r\nSort.sorters = defaultSorters;\r\n\r\nexport default Sort;", "export default {\r\n\t//is integer\r\n\tinteger: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvalue = Number(value);\r\n\t\treturn typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\r\n\t},\r\n\r\n\t//is float\r\n\tfloat: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvalue = Number(value);\r\n\t\treturn typeof value === 'number' && isFinite(value) && value % 1 !== 0;\r\n\t},\r\n\r\n\t//must be a number\r\n\tnumeric: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn !isNaN(value);\r\n\t},\r\n\r\n\t//must be a string\r\n\tstring: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn isNaN(value);\r\n\t},\r\n\r\n\t//maximum value\r\n\tmax: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn parseFloat(value) <= parameters;\r\n\t},\r\n\r\n\t//minimum value\r\n\tmin: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn parseFloat(value) >= parameters;\r\n\t},\r\n\r\n\t//starts with  value\r\n\tstarts: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\r\n\t},\r\n\r\n\t//ends with  value\r\n\tends: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\r\n\t},\r\n\r\n\r\n\t//minimum string length\r\n\tminLength: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).length >= parameters;\r\n\t},\r\n\r\n\t//maximum string length\r\n\tmaxLength: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn String(value).length <= parameters;\r\n\t},\r\n\r\n\t//in provided value list\r\n\tin: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif(typeof parameters == \"string\"){\r\n\t\t\tparameters = parameters.split(\"|\");\r\n\t\t}\r\n\r\n\t\treturn value === \"\" || parameters.indexOf(value) > -1;\r\n\t},\r\n\r\n\t//must match provided regex\r\n\tregex: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar reg = new RegExp(parameters);\r\n\r\n\t\treturn reg.test(value);\r\n\t},\r\n\r\n\t//value must be unique in this column\r\n\tunique: function(cell, value, parameters){\r\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tvar unique = true;\r\n\r\n\t\tvar cellData = cell.getData();\r\n\t\tvar column = cell.getColumn()._getSelf();\r\n\r\n\t\tthis.table.rowManager.rows.forEach(function(row){\r\n\t\t\tvar data = row.getData();\r\n\r\n\t\t\tif(data !== cellData){\r\n\t\t\t\tif(value == column.getFieldValue(data)){\r\n\t\t\t\t\tunique = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn unique;\r\n\t},\r\n\r\n\t//must have a value\r\n\trequired:function(cell, value, parameters){\r\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\r\n\t},\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultValidators from './defaults/validators.js';\r\n\r\nclass Validate extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.invalidCells = [];\r\n\r\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\r\n\r\n\t\tthis.registerColumnOption(\"validator\");\r\n\r\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\r\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\r\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\r\n\r\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\r\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\r\n\r\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\r\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\r\n\t}\r\n\r\n\r\n\tinitialize(){\r\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\r\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t////////// Cell Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\tcellIsValid(cell){\r\n\t\treturn cell.modules.validate ? !cell.modules.validate.invalid : true;\r\n\t}\r\n\r\n\tcellValidate(cell){\r\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Column Functions ////////\r\n\t///////////////////////////////////\r\n\r\n\tcolumnValidate(column){\r\n\t\tvar invalid = [];\r\n\r\n\t\tcolumn.cells.forEach(function(cell){\r\n\t\t\tif(!this.cellValidate(cell)){\r\n\t\t\t\tinvalid.push(cell.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn invalid.length ? invalid : true;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t////////// Row Functions //////////\r\n\t///////////////////////////////////\r\n\r\n\trowValidate(row){\r\n\t\tvar invalid = [];\r\n\r\n\t\trow.cells.forEach(function(cell){\r\n\t\t\tif(!this.cellValidate(cell)){\r\n\t\t\t\tinvalid.push(cell.getComponent());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn invalid.length ? invalid : true;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Table Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\r\n\tuserClearCellValidation(cells){\r\n\t\tif(!cells){\r\n\t\t\tcells = this.getInvalidCells();\r\n\t\t}\r\n\r\n\t\tif(!Array.isArray(cells)){\r\n\t\t\tcells = [cells];\r\n\t\t}\r\n\r\n\t\tcells.forEach((cell) => {\r\n\t\t\tthis.clearValidation(cell._getSelf());\r\n\t\t});\r\n\t}\r\n\r\n\tuserValidate(cells){\r\n\t\tvar output = [];\r\n\r\n\t\t//clear row data\r\n\t\tthis.table.rowManager.rows.forEach(function(row){\r\n\t\t\tvar valid = row.validate();\r\n\r\n\t\t\tif(valid !== true){\r\n\t\t\t\toutput = output.concat(valid);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output.length ? output : true;\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t///////// Internal Logic //////////\r\n\t///////////////////////////////////\r\n\r\n\tinitializeColumnCheck(column){\r\n\t\tif(typeof column.definition.validator !== \"undefined\"){\r\n\t\t\tthis.initializeColumn(column);\r\n\t\t}\r\n\t}\r\n\r\n\t//validate\r\n\tinitializeColumn(column){\r\n\t\tvar self = this,\r\n\t\tconfig = [],\r\n\t\tvalidator;\r\n\r\n\t\tif(column.definition.validator){\r\n\r\n\t\t\tif(Array.isArray(column.definition.validator)){\r\n\t\t\t\tcolumn.definition.validator.forEach(function(item){\r\n\t\t\t\t\tvalidator = self._extractValidator(item);\r\n\r\n\t\t\t\t\tif(validator){\r\n\t\t\t\t\t\tconfig.push(validator);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}else{\r\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\r\n\r\n\t\t\t\tif(validator){\r\n\t\t\t\t\tconfig.push(validator);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tcolumn.modules.validate = config.length ? config : false;\r\n\t\t}\r\n\t}\r\n\r\n\t_extractValidator(value){\r\n\t\tvar type, params, pos;\r\n\r\n\t\tswitch(typeof value){\r\n\t\t\tcase \"string\":\r\n\t\t\tpos = value.indexOf(':');\r\n\r\n\t\t\tif(pos > -1){\r\n\t\t\t\ttype = value.substring(0,pos);\r\n\t\t\t\tparams = value.substring(pos+1);\r\n\t\t\t}else{\r\n\t\t\t\ttype = value;\r\n\t\t\t}\r\n\r\n\t\t\treturn this._buildValidator(type, params);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"function\":\r\n\t\t\treturn this._buildValidator(value);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"object\":\r\n\t\t\treturn this._buildValidator(value.type, value.parameters);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t_buildValidator(type, params){\r\n\r\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\r\n\r\n\t\tif(!func){\r\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\treturn {\r\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\r\n\t\t\t\tfunc:func,\r\n\t\t\t\tparams:params,\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tvalidate(validators, cell, value){\r\n\t\tvar self = this,\r\n\t\tvalid = [],\r\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\r\n\r\n\t\tif(validators){\r\n\t\t\tvalidators.forEach(function(item){\r\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\r\n\t\t\t\t\tvalid.push({\r\n\t\t\t\t\t\ttype:item.type,\r\n\t\t\t\t\t\tparameters:item.params\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvalid = valid.length ? valid : true;\r\n\r\n\t\tif(!cell.modules.validate){\r\n\t\t\tcell.modules.validate = {};\r\n\t\t}\r\n\r\n\t\tif(valid === true){\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\r\n\t\t\tif(invalidIndex > -1){\r\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcell.modules.validate.invalid = true;\r\n\r\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\r\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\r\n\t\t\t}\r\n\r\n\t\t\tif(invalidIndex == -1){\r\n\t\t\t\tthis.invalidCells.push(cell);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tgetInvalidCells(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.invalidCells.forEach((cell) => {\r\n\t\t\toutput.push(cell.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tclearValidation(cell){\r\n\t\tvar invalidIndex;\r\n\r\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\r\n\r\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\r\n\t\t\tcell.modules.validate.invalid = false;\r\n\r\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\r\n\r\n\t\t\tif(invalidIndex > -1){\r\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nValidate.moduleName = \"validate\";\r\n\r\n//load defaults\r\nValidate.validators = defaultValidators;\r\n\r\nexport default Validate;", "export default {\r\n\r\n\tdebugEventsExternal:false, //flag to console log events\r\n\tdebugEventsInternal:false, //flag to console log events\r\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\r\n\r\n\theight:false, //height of tabulator\r\n\tminHeight:false, //minimum height of tabulator\r\n\tmaxHeight:false, //maximum height of tabulator\r\n\r\n\tcolumnMaxWidth:false, //minimum global width for a column\r\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\r\n\r\n\tcolumns:[],//store for colum header info\r\n\tcolumnDefaults:{}, //store column default props\r\n\r\n\tdata:false, //default starting data\r\n\r\n\tautoColumns:false, //build columns from data row structure\r\n\tautoColumnsDefinitions:false,\r\n\r\n\tnestedFieldSeparator:\".\", //separator for nested data\r\n\r\n\ttooltipGenerationMode:\"load\", //when to generate tooltips\r\n\r\n\tfooterElement:false, //hold footer element\r\n\r\n\tindex:\"id\", //filed for row index\r\n\r\n\ttextDirection:\"auto\",\r\n\r\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\r\n\r\n\theaderVisible:true, //hide header\r\n\r\n\trenderVertical:\"virtual\",\r\n\trenderHorizontal:\"basic\",\r\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\r\n\r\n\tscrollToRowPosition:\"top\",\r\n\tscrollToRowIfVisible:true,\r\n\r\n\tscrollToColumnPosition:\"left\",\r\n\tscrollToColumnIfVisible:true,\r\n\r\n\trowFormatter:false,\r\n\trowFormatterPrint:null,\r\n\trowFormatterClipboard:null,\r\n\trowFormatterHtmlOutput:null,\r\n\r\n\tplaceholder:false,\r\n\r\n\tdataLoader:true,\r\n\tdataLoaderLoading:false,\r\n\tdataLoaderError:false,\r\n\r\n\tdataSendParams:{},\r\n\r\n\tdataReceiveParams:{},\r\n}", "export default class OptionsList {\r\n\tconstructor(table, msgType, defaults = {}){\r\n\t\tthis.table = table;\r\n\t\tthis.msgType = msgType;\r\n\t\tthis.registeredDefaults = Object.assign({}, defaults)\r\n\t}\r\n\r\n\tregister(option, value){\r\n\t\tthis.registeredDefaults[option] = value;\r\n\t}\r\n\r\n\tgenerate(defaultOptions, userOptions = {}){\r\n\t\tvar output = Object.assign({}, this.registeredDefaults);\r\n\r\n\t\tObject.assign(output, defaultOptions);\r\n\r\n\t\tif(userOptions.debugInvalidOptions !== false || this.table.options.debugInvalidOptions){\r\n\t\t\tfor (var key in userOptions){\r\n\t\t\t\tif(!output.hasOwnProperty(key)){\r\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var key in output){\r\n\t\t\tif(key in userOptions){\r\n\t\t\t\toutput[key] = userOptions[key];\r\n\t\t\t}else{\r\n\t\t\t\tif(Array.isArray(output[key])){\r\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\r\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\r\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\r\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\r\n\t\t\t\t\tdelete output[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n}", "import CoreFeature from '../CoreFeature.js';\r\nimport Helpers from '../tools/Helpers.js';\r\n\r\nexport default class Renderer extends CoreFeature{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.elementVertical = table.rowManager.element;\r\n\t\tthis.elementHorizontal = table.columnManager.element;\r\n\t\tthis.tableElement =  table.rowManager.tableElement;\r\n\r\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determin how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the contianer without resizing it)\r\n\t}\r\n\r\n\r\n\t///////////////////////////////////\r\n\t/////// Internal Bindings /////////\r\n\t///////////////////////////////////\r\n\r\n\tinitialize(){\r\n\t\t//initialize core functionality\r\n\t}\r\n\r\n\tclearRows(){\r\n\t\t//clear down existing rows layout\r\n\t}\r\n\r\n\tclearColumns(){\r\n\t\t//clear down existing columns layout\r\n\t}\r\n\r\n\r\n\treinitializeColumnWidths(columns){\r\n\t\t//resize columns to fit data\r\n\t}\r\n\r\n\r\n\trenderRows(){\r\n\t\t//render rows from a clean slate\r\n\t}\r\n\r\n\trenderColumns(){\r\n\t\t//render columns from a clean slate\r\n\t}\r\n\r\n\trerenderRows(callback){\r\n\t\t// rerender rows and keep position\r\n\t\tif(callback){\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\trerenderColumns(update, blockRedraw){\r\n\t\t//rerender columns\r\n\t}\r\n\r\n\trenderRowCells(row){\r\n\t\t//render the cells in a row\r\n\t}\r\n\r\n\trerenderRowCells(row, force){\r\n\t\t//rerender the cells in a row\r\n\t}\r\n\r\n\tscrollColumns(left, dir){\r\n\t\t//handle horizontal scrolling\r\n\t}\r\n\r\n\tscrollRows(top, dir){\r\n\t\t//handle vertical scolling\r\n\t}\r\n\r\n\tresize(){\r\n\t\t//container has rezied, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\r\n\t}\r\n\r\n\tscrollToRow(row){\r\n\t\t//scroll to a specific row\r\n\t}\r\n\r\n\tscrollToRowNearestTop(row){\r\n\t\t//determine weather the row is nearest the top or bottom of the table, retur true for top or false for bottom\r\n\t}\r\n\r\n\tvisibleRows(includingBuffer){\r\n\t\t//return the visible rows\r\n\t\treturn [];\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t//////// Helper Functions /////////\r\n\t///////////////////////////////////\r\n\r\n\trows(){\r\n\t\treturn this.table.rowManager.getDisplayRows();\r\n\t}\r\n\r\n\tstyleRow(row, index){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(index % 2){\r\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\r\n\t\t}else{\r\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\r\n\t\t}\r\n\t}\r\n\r\n\t///////////////////////////////////\r\n\t/////// External Triggers /////////\r\n\t/////// (DO NOT OVERRIDE) /////////\r\n\t///////////////////////////////////\r\n\r\n\tclear(){\r\n\t\t//clear down existing layout\r\n\t\tthis.clearRows();\r\n\t\tthis.clearColumns();\r\n\t}\r\n\r\n\trender(){\r\n\t\t//render from a clean slate\r\n\t\tthis.renderRows();\r\n\t\tthis.renderColumns();\r\n\t}\r\n\r\n\trerender(callback){\r\n\t\t// rerender and keep position\r\n\t\tthis.rerenderRows();\r\n\t\tthis.rerenderColumns();\r\n\t}\r\n\r\n\tscrollToRowPosition(row, position, ifVisible){\r\n\t\tvar rowIndex = this.rows().indexOf(row),\r\n\t\trowEl = row.getElement(),\r\n\t\toffset = 0;\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif(rowIndex > -1){\r\n\r\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\r\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//check row visibility\r\n\t\t\t\tif(!ifVisible){\r\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\r\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\r\n\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof position === \"undefined\"){\r\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(position === \"nearest\"){\r\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\"\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//scroll to row\r\n\t\t\t\tthis.scrollToRow(row);\r\n\r\n\t\t\t\t//align to correct position\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tcase \"center\":\r\n\r\n\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\r\n\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"bottom\":\r\n\r\n\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\r\n\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresolve();\r\n\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\r\n\t\t\t\treject(\"Scroll Error - Row not visible\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}", "import Renderer from '../Renderer.js';\r\nimport Helpers from '../../tools/Helpers.js';\r\n\r\nexport default class BaiscHorizontal extends Renderer{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t}\r\n\r\n\trenderRowCells(row){\r\n\t\trow.cells.forEach((cell) => {\r\n\t\t\trow.element.appendChild(cell.getElement());\r\n\t\t\tcell.cellRendered();\r\n\t\t});\r\n\t}\r\n\r\n\treinitializeColumnWidths(columns){\r\n\t\tcolumns.forEach(function(column){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t});\r\n\t}\r\n}", "import Renderer from '../Renderer.js';\r\nimport Helpers from '../../tools/Helpers.js';\r\n\r\nexport default class VirtualDomHorizontal extends Renderer{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.leftCol = 0;\r\n\t\tthis.rightCol = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\t\t\r\n\t\tthis.vDomScrollPosLeft = 0;\r\n\t\tthis.vDomScrollPosRight = 0;\r\n\t\t\r\n\t\tthis.vDomPadLeft = 0;\r\n\t\tthis.vDomPadRight = 0;\r\n\t\t\r\n\t\tthis.fitDataColAvg = 0;\r\n\t\t\r\n\t\tthis.window = 200; //pixel margin to make column visible before it is shown on screen\r\n\t\t\r\n\t\tthis.initialized = false;\r\n\t\t\r\n\t\tthis.columns = [];\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.compatabilityCheck();\r\n\t}\r\n\t\r\n\tcompatabilityCheck(){\r\n\t\tvar columns = this.options(\"columns\"),\r\n\t\tfrozen = false,\r\n\t\tok = true;\r\n\t\t\r\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\r\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"responsiveLayout\")){\r\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(this.options(\"rtl\")){\r\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\r\n\t\t\tok = false;\r\n\t\t}\r\n\t\t\r\n\t\tif(columns){\r\n\t\t\tfrozen = columns.find((col) => {\r\n\t\t\t\treturn col.frozen;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(frozen){\r\n\t\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with frozen columns\");\r\n\t\t\t\tok = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// if(!ok){\r\n\t\t// \toptions.virtualDomHoz = false;\r\n\t\t// }\r\n\t\t\r\n\t\treturn ok;\r\n\t}\r\n\t\r\n\t//////////////////////////////////////\r\n\t///////// Public Functions ///////////\r\n\t//////////////////////////////////////\r\n\t\r\n\trenderColumns(row, force){\r\n\t\tthis.dataChange();\r\n\t}\r\n\t\r\n\tscrollColumns(left, dir){\r\n\t\tif(this.scrollLeft != left){\r\n\t\t\tthis.scrollLeft = left;\r\n\t\t\t\r\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.window));\r\n\t\t}\r\n\t}\r\n\t\r\n\trerenderColumns(update, blockRedraw){\t\t\r\n\t\tvar old = {\r\n\t\t\tcols:this.columns,\r\n\t\t\tleftCol:this.leftCol,\r\n\t\t\trightCol:this.rightCol,\r\n\t\t};\r\n\t\t\r\n\t\tif(update && !this.initialized){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tthis.clear();\r\n\t\t\r\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\r\n\t\t\r\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.window;\r\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.window;\r\n\t\t\r\n\t\tvar colPos = 0;\r\n\t\t\r\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\tvar config = {};\r\n\t\t\t\r\n\t\t\tif(column.visible){\r\n\t\t\t\tvar width = column.getWidth();\r\n\t\t\t\t\r\n\t\t\t\tconfig.leftPos = colPos;\r\n\t\t\t\tconfig.rightPos = colPos + width;\r\n\t\t\t\t\r\n\t\t\t\tconfig.width = width;\r\n\t\t\t\t\r\n\t\t\t\tif (this.options(\"layout\") === \"fitData\") {\r\n\t\t\t\t\tconfig.fitDataCheck = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\r\n\t\t\t\t\t//column is visible\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.leftCol == -1){\r\n\t\t\t\t\t\tthis.leftCol = this.columns.length;\r\n\t\t\t\t\t\tthis.vDomPadLeft = colPos;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.rightCol = this.columns.length;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t// column is hidden\r\n\t\t\t\t\tif(this.leftCol !== -1){\r\n\t\t\t\t\t\tthis.vDomPadRight += width;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.columns.push(column);\r\n\t\t\t\t\r\n\t\t\t\tcolumn.modules.vdomHoz = config;\r\n\t\t\t\t\r\n\t\t\t\tcolPos += width;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\r\n\t\t\r\n\t\tthis.initialized = true;\r\n\t\t\r\n\t\tif(!blockRedraw){\r\n\t\t\tif(!update || this.reinitChanged(old)){\r\n\t\t\t\tthis.reinitializeRows();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\r\n\t}\r\n\t\r\n\trenderRowCells(row){\r\n\t\tif(this.initialized){\r\n\t\t\tthis.initializeRow(row);\r\n\t\t}else{\r\n\t\t\trow.cells.forEach((cell) => {\r\n\t\t\t\trow.element.appendChild(cell.getElement());\r\n\t\t\t\tcell.cellRendered();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\trerenderRowCells(row, force){\r\n\t\tthis.reinitializeRow(row, force);\r\n\t}\r\n\t\r\n\treinitializeColumnWidths(columns){\r\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\r\n\t\t\tthis.columns[i].reinitializeWidth();\r\n\t\t}\r\n\t}\r\n\t\r\n\t//////////////////////////////////////\r\n\t//////// Internal Rendering //////////\r\n\t//////////////////////////////////////\r\n\t\r\n\tdeinitialize(){\r\n\t\tthis.initialized = false;\r\n\t}\r\n\t\r\n\tclear(){\r\n\t\tthis.columns = [];\r\n\t\t\r\n\t\tthis.leftCol = -1;\r\n\t\tthis.rightCol = 0;\r\n\t\t\r\n\t\tthis.vDomScrollPosLeft = 0;\r\n\t\tthis.vDomScrollPosRight = 0;\r\n\t\tthis.vDomPadLeft = 0;\r\n\t\tthis.vDomPadRight = 0;\r\n\t}\r\n\t\r\n\tdataChange(){\r\n\t\tvar change = false,\r\n\t\tcollsWidth = 0,\r\n\t\tcolEnd = 0,\r\n\t\tgroup, row, rowEl;\r\n\t\t\r\n\t\tif(this.options(\"layout\") === \"fitData\"){\r\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\r\n\t\t\t\tif(!column.definition.width && column.visible){\r\n\t\t\t\t\tchange = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif(change){\r\n\t\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.window;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar row = this.chain(\"rows-sample\", [1], [], () => {\r\n\t\t\t\t\t\treturn this.table.rowManager.getDisplayRows()[0];\r\n\t\t\t\t\t})[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\trowEl = row.getElement();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\trow.generateCells();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.tableElement.appendChild(rowEl);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(var colEnd = 0; colEnd < row.cells.length; colEnd++){\r\n\t\t\t\t\t\t\tlet cell = row.cells[colEnd];\r\n\t\t\t\t\t\t\trowEl.appendChild(cell.getElement());\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcell.column.reinitializeWidth();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcollsWidth += cell.column.getWidth();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(collsWidth > this.vDomScrollPosRight){\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.fitDataColAvg = Math.floor(collsWidth / (colEnd + 1));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(colEnd; colEnd < this.table.columnManager.columnsByIndex.length; colEnd++){\r\n\t\t\t\t\t\t\tthis.table.columnManager.columnsByIndex[colEnd].setWidth(this.fitDataColAvg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.rerenderColumns(false, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\r\n\t\t\t\tthis.layoutRefresh();\r\n\t\t\t\tthis.rerenderColumns(false, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treinitChanged(old){\r\n\t\tvar match = true;\r\n\t\t\r\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\told.cols.forEach((col, i) => {\r\n\t\t\tif(col !== this.columns[i]){\r\n\t\t\t\tmatch = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn !match;\r\n\t}\r\n\t\r\n\treinitializeRows(){\r\n\t\tvar rows = this.table.rowManager.getVisibleRows();\r\n\t\trows.forEach((row) => {\r\n\t\t\tthis.reinitializeRow(row, true);\r\n\t\t});\r\n\t}\r\n\t\r\n\tscroll(diff){\r\n\t\tthis.vDomScrollPosLeft += diff;\r\n\t\tthis.vDomScrollPosRight += diff;\r\n\t\t\r\n\t\tif(diff > (this.elementVertical.clientWidth * .8)){\r\n\t\t\tthis.rerenderColumns();\r\n\t\t}else{\r\n\t\t\tif(diff > 0){\r\n\t\t\t\t//scroll right\r\n\t\t\t\tthis.addColRight();\r\n\t\t\t\tthis.removeColLeft();\r\n\t\t\t}else{\r\n\t\t\t\t//scroll left\r\n\t\t\t\tthis.addColLeft();\r\n\t\t\t\tthis.removeColRight();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcolPositionAdjust (start, end, diff){\r\n\t\tfor(let i = start; i < end; i++){\r\n\t\t\tlet column = this.columns[i];\r\n\t\t\t\r\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\r\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\r\n\t\t}\r\n\t}\r\n\t\r\n\taddColRight(){\r\n\t\tvar column = this.columns[this.rightCol + 1],\r\n\t\trows, newWidth, widthDiff;\r\n\t\t\r\n\t\tif(column && column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\t\t\t\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.fitDataColActualWidthCheck(column);\r\n\t\t\t\r\n\t\t\tthis.rightCol++;\r\n\t\t\t\r\n\t\t\tif(this.rightCol >= (this.columns.length - 1)){\r\n\t\t\t\tthis.vDomPadRight = 0;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomPadRight -= column.getWidth();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\r\n\t\t\t\r\n\t\t\tthis.addColRight();\r\n\t\t}\r\n\t}\r\n\t\r\n\taddColLeft(){\r\n\t\tvar column = this.columns[this.leftCol - 1],\r\n\t\trows;\r\n\t\t\r\n\t\tif(column && column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\r\n\t\t\tvar rows = this.table.rowManager.getVisibleRows();\r\n\t\t\t\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().prepend(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.fitDataColActualWidthCheck(column);\r\n\t\t\t\r\n\t\t\tif(!this.leftCol){\r\n\t\t\t\tthis.vDomPadLeft = 0;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomPadLeft -= column.getWidth();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\t\t\t\r\n\t\t\tthis.leftCol--;\r\n\t\t\t\r\n\t\t\tthis.addColLeft();\r\n\t\t}\r\n\t}\r\n\t\r\n\tremoveColRight(column){\r\n\t\tvar column = this.columns[this.rightCol],\r\n\t\trows;\r\n\t\t\r\n\t\tif(column && column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\t\t\t\r\n\t\t\tcolumn.modules.vdomHoz.visible = false;\r\n\t\t\t\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tvar cell = row.getCell(column);\r\n\t\t\t\t\trow.getElement().removeChild(cell.getElement());\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.vDomPadRight += column.getWidth();\r\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\r\n\t\t\t\r\n\t\t\tthis.rightCol --;\r\n\t\t\t\r\n\t\t\tthis.removeColRight();\r\n\t\t}\r\n\t}\r\n\t\r\n\tremoveColLeft(){\r\n\t\tvar column = this.columns[this.leftCol],\r\n\t\trows;\r\n\t\t\r\n\t\tif(column && column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\t\r\n\t\t\trows = this.table.rowManager.getVisibleRows();\r\n\t\t\t\r\n\t\t\trows.forEach((row) => {\r\n\t\t\t\tvar cell, el;\r\n\r\n\t\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\t\tcell = row.getCell(column);\r\n\r\n\t\t\t\t\tif(cell){\r\n\t\t\t\t\t\tel = cell.getElement();\r\n\r\n\t\t\t\t\t\tif(el.parentNode){\r\n\t\t\t\t\t\t\trow.getElement().removeChild(el);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.vDomPadLeft += column.getWidth();\r\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\r\n\t\t\t\r\n\t\t\tthis.leftCol ++;\r\n\t\t\t\r\n\t\t\tthis.removeColLeft();\r\n\t\t}\r\n\t}\r\n\t\r\n\tfitDataColActualWidthCheck(column){\r\n\t\tvar newWidth, widthDiff;\r\n\t\t\r\n\t\tif(column.modules.vdomHoz.fitDataCheck){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t\t\r\n\t\t\tnewWidth = column.getWidth();\r\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\r\n\t\t\t\r\n\t\t\tif(widthDiff){\r\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\r\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\r\n\t\t\t\tthis.colPositionAdjust(this.rightCol + 2, this.columns.length, widthDiff);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\r\n\t\t}\r\n\t};\r\n\t\r\n\tinitializeRow(row){\r\n\t\tif(row.type !== \"group\"){\r\n\t\t\trow.modules.vdomHoz = {\r\n\t\t\t\tleftCol:this.leftCol,\r\n\t\t\t\trightCol:this.rightCol,\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\r\n\t\t\t\tlet column = this.columns[i];\r\n\t\t\t\t\r\n\t\t\t\tif(column && column.visible){\r\n\t\t\t\t\tlet cell = row.getCell(column);\r\n\t\t\t\t\t\r\n\t\t\t\t\trow.getElement().appendChild(cell.getElement());\r\n\t\t\t\t\tcell.cellRendered();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treinitializeRow(row, force){\r\n\t\tif(row.type !== \"group\"){\r\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\r\n\t\t\t\tvar rowEl = row.getElement();\r\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\r\n\t\t\t\t\r\n\t\t\t\tthis.initializeRow(row);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}", "import CoreFeature from './CoreFeature.js';\r\nimport Column from './column/Column.js';\r\nimport ColumnComponent from './column/ColumnComponent.js';\r\nimport Helpers from './tools/Helpers.js';\r\nimport OptionsList from './tools/OptionsList.js';\r\n\r\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js';\r\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js';\r\n\r\nimport defaultColumnOptions from './column/defaults/options.js';\r\n\r\nexport default class ColumnManager extends CoreFeature {\r\n\r\n\tconstructor (table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.blockHozScrollEvent = false;\r\n\t\tthis.headersElement = null;\r\n\t\tthis.element = null ; //containing element\r\n\t\tthis.columns = []; // column definition object\r\n\t\tthis.columnsByIndex = []; //columns by index\r\n\t\tthis.columnsByField = {}; //columns by field\r\n\t\tthis.scrollLeft = 0;\r\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\r\n\r\n\t\tthis.renderer = null;\r\n\t}\r\n\r\n\t////////////// Setup Functions /////////////////\r\n\r\n\tinitialize(){\r\n\t\tthis.initializeRenderer();\r\n\r\n\t\tthis.headersElement = this.createHeadersElement();\r\n\t\tthis.element = this.createHeaderElement();\r\n\r\n\t\tthis.element.insertBefore(this.headersElement, this.element.firstChild);\r\n\r\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\r\n\t}\r\n\r\n\tinitializeRenderer(){\r\n\t\tvar renderClass;\r\n\r\n\t\tvar renderers = {\r\n\t\t\t\"virtual\": RendererVirtualDomHorizontal,\r\n\t\t\t\"basic\": RendererBasicHorizontal,\r\n\t\t};\r\n\r\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\r\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\r\n\t\t}else{\r\n\t\t\trenderClass = this.table.options.renderHorizontal;\r\n\t\t}\r\n\r\n\t\tif(renderClass){\r\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\r\n\t\t\tthis.renderer.initialize();\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Unable to find matching renderer:\", table.options.renderHorizontal);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tcreateHeadersElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-headers\");\r\n\t\tel.setAttribute(\"role\", \"row\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateHeaderElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-header\");\r\n\t\tel.setAttribute(\"role\", \"rowgroup\");\r\n\r\n\t\tif(!this.table.options.headerVisible){\r\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\r\n\t\t}\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t//return containing element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return header containing element\r\n\tgetHeadersElement(){\r\n\t\treturn this.headersElement;\r\n\t}\r\n\r\n\t//scroll horizontally to match table body\r\n\tscrollHorizontal(left){\r\n\t\tvar hozAdjust = 0,\r\n\t\tscrollWidth = this.element.scrollWidth - this.table.element.clientWidth;\r\n\r\n\t\t// this.tempScrollBlock();\r\n\t\tthis.element.scrollLeft = left;\r\n\r\n\t\t//adjust for vertical scrollbar moving table when present\r\n\t\tif(left > scrollWidth){\r\n\t\t\thozAdjust = left - scrollWidth;\r\n\t\t\tthis.element.style.marginLeft = (-(hozAdjust)) + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.element.style.marginLeft = 0;\r\n\t\t}\r\n\r\n\t\tthis.scrollLeft = left;\r\n\r\n\t\tthis.renderer.scrollColumns(left);\r\n\t}\r\n\r\n\t///////////// Column Setup Functions /////////////\r\n\tgenerateColumnsFromRowData(data){\r\n\t\tvar cols = [],\r\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\r\n\t\trow, sorter;\r\n\r\n\t\tif(data && data.length){\r\n\r\n\t\t\trow = data[0];\r\n\r\n\t\t\tfor(var key in row){\r\n\t\t\t\tlet col = {\r\n\t\t\t\t\tfield:key,\r\n\t\t\t\t\ttitle:key,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet value = row[key];\r\n\r\n\t\t\t\tswitch(typeof value){\r\n\t\t\t\t\tcase \"undefined\":\r\n\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"boolean\":\r\n\t\t\t\t\tsorter = \"boolean\";\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\tif(Array.isArray(value)){\r\n\t\t\t\t\t\tsorter = \"array\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\r\n\t\t\t\t\t\tsorter = \"number\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\r\n\t\t\t\t\t\t\tsorter = \"alphanum\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tsorter = \"string\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcol.sorter = sorter;\r\n\r\n\t\t\t\tcols.push(col);\r\n\t\t\t}\r\n\r\n\t\t\tif(definitions){\r\n\r\n\t\t\t\tswitch(typeof definitions){\r\n\t\t\t\t\tcase \"function\":\r\n\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"object\":\r\n\t\t\t\t\tif(Array.isArray(definitions)){\r\n\t\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\t\tvar match = definitions.find((def) => {\r\n\t\t\t\t\t\t\t\treturn def.field === col.field;\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif(match){\r\n\t\t\t\t\t\t\t\tObject.assign(col, match);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcols.forEach((col) => {\r\n\t\t\t\t\t\t\tif(definitions[col.field]){\r\n\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.table.options.columns = cols;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.table.options.columns = cols;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setColumns(this.table.options.columns);\r\n\t\t}\r\n\t}\r\n\r\n\tsetColumns(cols, row){\r\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\r\n\r\n\t\tthis.columns = [];\r\n\t\tthis.columnsByIndex = [];\r\n\t\tthis.columnsByField = {};\r\n\r\n\t\tthis.dispatch(\"columns-loading\");\r\n\r\n\t\tcols.forEach((def, i) => {\r\n\t\t\tthis._addColumn(def);\r\n\t\t});\r\n\r\n\t\tthis._reIndexColumns();\r\n\r\n\t\tthis.dispatch(\"columns-loaded\");\r\n\r\n\t\tthis.renderer.rerenderColumns(false, true);\r\n\r\n\t\tthis.redraw(true);\r\n\t}\r\n\r\n\t_addColumn(definition, before, nextToColumn){\r\n\t\tvar column = new Column(definition, this),\r\n\t\tcolEl = column.getElement(),\r\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\r\n\r\n\t\tif(nextToColumn && index > -1){\r\n\t\t\tvar topColumn = nextToColumn.getTopColumn()\r\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\r\n\t\t\tvar nextEl = topColumn.getElement();\r\n\r\n\t\t\tif(before){\r\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\r\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\r\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(before){\r\n\t\t\t\tthis.columns.unshift(column);\r\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\r\n\t\t\t}else{\r\n\t\t\t\tthis.columns.push(column);\r\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcolumn.columnRendered();\r\n\r\n\t\treturn column;\r\n\t}\r\n\r\n\tregisterColumnField(col){\r\n\t\tif(col.definition.field){\r\n\t\t\tthis.columnsByField[col.definition.field] = col;\r\n\t\t}\r\n\t}\r\n\r\n\tregisterColumnPosition(col){\r\n\t\tthis.columnsByIndex.push(col);\r\n\t}\r\n\r\n\t_reIndexColumns(){\r\n\t\tthis.columnsByIndex = [];\r\n\r\n\t\tthis.columns.forEach(function(column){\r\n\t\t\tcolumn.reRegisterPosition();\r\n\t\t});\r\n\t}\r\n\r\n\t//ensure column headers take up the correct amount of space in column groups\r\n\tverticalAlignHeaders(){\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\tvar height;\r\n\r\n\t\t\tcolumn.clearVerticalAlign();\r\n\r\n\t\t\theight = column.getHeight();\r\n\r\n\t\t\tif(height > minHeight){\r\n\t\t\t\tminHeight = height;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\r\n\t\t});\r\n\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\t//////////////// Column Details /////////////////\r\n\tfindColumn(subject){\r\n\t\tif(typeof subject == \"object\"){\r\n\r\n\t\t\tif(subject instanceof Column){\r\n\t\t\t\t//subject is column element\r\n\t\t\t\treturn subject;\r\n\t\t\t}else if(subject instanceof ColumnComponent){\r\n\t\t\t\t//subject is public column component\r\n\t\t\t\treturn subject._getSelf() || false;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\t//subject is a HTML element of the column header\r\n\t\t\t\tlet match = this.columns.find((column) => {\r\n\t\t\t\t\treturn column.element === subject;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn match || false;\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the field name of the column\r\n\t\t\treturn this.columnsByField[subject] || false;\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetColumnByField(field){\r\n\t\treturn this.columnsByField[field];\r\n\t}\r\n\r\n\tgetColumnsByFieldRoot(root){\r\n\t\tvar matches = [];\r\n\r\n\t\tObject.keys(this.columnsByField).forEach((field) => {\r\n\t\t\tvar fieldRoot = field.split(\".\")[0];\r\n\t\t\tif(fieldRoot === root){\r\n\t\t\t\tmatches.push(this.columnsByField[field]);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn matches;\r\n\t}\r\n\r\n\tgetColumnByIndex(index){\r\n\t\treturn this.columnsByIndex[index];\r\n\t}\r\n\r\n\tgetFirstVisibleColumn(index){\r\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\r\n\t\t\treturn col.visible;\r\n\t\t});\r\n\r\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\r\n\t}\r\n\r\n\tgetColumns(){\r\n\t\treturn this.columns;\r\n\t}\r\n\r\n\tfindColumnIndex(column){\r\n\t\treturn this.columnsByIndex.findIndex((col) => {\r\n\t\t\treturn column === col;\r\n\t\t});\r\n\t}\r\n\r\n\t//return all columns that are not groups\r\n\tgetRealColumns(){\r\n\t\treturn this.columnsByIndex;\r\n\t}\r\n\r\n\t//travers across columns and call action\r\n\ttraverse(callback){\r\n\t\tthis.columnsByIndex.forEach((column,i) =>{\r\n\t\t\tcallback(column, i);\r\n\t\t});\r\n\t}\r\n\r\n\t//get defintions of actual columns\r\n\tgetDefinitions(active){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tif(!active || (active && column.visible)){\r\n\t\t\t\toutput.push(column.getDefinition());\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t//get full nested definition tree\r\n\tgetDefinitionTree(){\r\n\t\tvar output = [];\r\n\r\n\t\tthis.columns.forEach((column) => {\r\n\t\t\toutput.push(column.getDefinition(true));\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetComponents(structured){\r\n\t\tvar output = [],\r\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\r\n\r\n\t\tcolumns.forEach((column) => {\r\n\t\t\toutput.push(column.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetWidth(){\r\n\t\tvar width = 0;\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tif(column.visible){\r\n\t\t\t\twidth += column.getWidth();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn width;\r\n\t}\r\n\r\n\tmoveColumn(from, to, after){\r\n\t\tthis.moveColumnActual(from, to, after);\r\n\r\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\r\n\r\n\t\tif(after){\r\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\r\n\t\t}\r\n\r\n\t\tthis.verticalAlignHeaders();\r\n\r\n\t\tthis.table.rowManager.reinitialize();\r\n\t}\r\n\r\n\tmoveColumnActual(from, to, after){\r\n\t\tif(from.parent.isGroup){\r\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\r\n\t\t}else{\r\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\r\n\t\t}\r\n\r\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\r\n\r\n\t\tthis.renderer.rerenderColumns(true);\r\n\r\n\t\tthis.dispatch(\"column-moved\", from, to, after);\r\n\r\n\t\tif(this.subscribedExternal(\"columnMoved\")){\r\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\r\n\t\t}\r\n\t}\r\n\r\n\t_moveColumnInArray(columns, from, to, after, updateRows){\r\n\t\tvar\tfromIndex = columns.indexOf(from),\r\n\t\ttoIndex, rows = [];\r\n\r\n\t\tif (fromIndex > -1) {\r\n\r\n\t\t\tcolumns.splice(fromIndex, 1);\r\n\r\n\t\t\ttoIndex = columns.indexOf(to);\r\n\r\n\t\t\tif (toIndex > -1) {\r\n\r\n\t\t\t\tif(after){\r\n\t\t\t\t\ttoIndex = toIndex+1;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\ttoIndex = fromIndex;\r\n\t\t\t}\r\n\r\n\t\t\tcolumns.splice(toIndex, 0, from);\r\n\r\n\t\t\tif(updateRows){\r\n\r\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\r\n\r\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\r\n\r\n\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\tif(row.cells.length){\r\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\r\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tscrollToColumn(column, position, ifVisible){\r\n\t\tvar left = 0,\r\n\t\toffset = 0,\r\n\t\tadjust = 0,\r\n\t\tcolEl = column.getElement();\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tif(typeof position === \"undefined\"){\r\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\r\n\t\t\t}\r\n\r\n\t\t\tif(typeof ifVisible === \"undefined\"){\r\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\r\n\t\t\t}\r\n\r\n\t\t\tif(column.visible){\r\n\r\n\t\t\t\t//align to correct position\r\n\t\t\t\tswitch(position){\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\tadjust = -this.element.clientWidth / 2;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//check column visibility\r\n\t\t\t\tif(!ifVisible){\r\n\r\n\t\t\t\t\toffset = colEl.offsetLeft;\r\n\r\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//calculate scroll position\r\n\t\t\t\tleft = colEl.offsetLeft + adjust;\r\n\r\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\r\n\r\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t\t\t\tthis.scrollHorizontal(left);\r\n\r\n\t\t\t\tresolve();\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\r\n\t\t\t\treject(\"Scroll Error - Column not visible\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t//////////////// Cell Management /////////////////\r\n\tgenerateCells(row){\r\n\t\tvar cells = [];\r\n\r\n\t\tthis.columnsByIndex.forEach((column) => {\r\n\t\t\tcells.push(column.generateCell(row));\r\n\t\t});\r\n\r\n\t\treturn cells;\r\n\t}\r\n\r\n\t//////////////// Column Management /////////////////\r\n\tgetFlexBaseWidth(){\r\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\r\n\t\tfixedWidth = 0;\r\n\r\n\t\t//adjust for vertical scrollbar if present\r\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\r\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\r\n\t\t}\r\n\r\n\t\tthis.columnsByIndex.forEach(function(column){\r\n\t\t\tvar width, minWidth, colWidth;\r\n\r\n\t\t\tif(column.visible){\r\n\r\n\t\t\t\twidth = column.definition.width || 0;\r\n\r\n\t\t\t\tminWidth = parseInt(column.minWidth);\r\n\r\n\t\t\t\tif(typeof(width) == \"string\"){\r\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\r\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcolWidth = parseInt(width);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcolWidth = width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn fixedWidth;\r\n\t}\r\n\r\n\taddColumn(definition, before, nextToColumn){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\r\n\r\n\t\t\tthis._reIndexColumns();\r\n\r\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\r\n\r\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\r\n\t\t\t\tcolumn.reinitializeWidth();\r\n\t\t\t}\r\n\r\n\t\t\tthis.redraw(true);\r\n\r\n\t\t\tthis.table.rowManager.reinitialize();\r\n\r\n\t\t\tthis.renderer.rerenderColumns();\r\n\r\n\t\t\tresolve(column);\r\n\t\t});\r\n\t}\r\n\r\n\t//remove column from system\r\n\tderegisterColumn(column){\r\n\t\tvar field = column.getField(),\r\n\t\tindex;\r\n\r\n\t\t//remove from field list\r\n\t\tif(field){\r\n\t\t\tdelete this.columnsByField[field];\r\n\t\t}\r\n\r\n\t\t//remove from index list\r\n\t\tindex = this.columnsByIndex.indexOf(column);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columnsByIndex.splice(index, 1);\r\n\t\t}\r\n\r\n\t\t//remove from column list\r\n\t\tindex = this.columns.indexOf(column);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis.columns.splice(index, 1);\r\n\t\t}\r\n\r\n\t\tthis.verticalAlignHeaders();\r\n\r\n\t\tthis.redraw();\r\n\t}\r\n\r\n\t//redraw columns\r\n\tredraw(force){\r\n\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\tthis.verticalAlignHeaders();\r\n\t\t}\r\n\r\n\t\tif(force){\r\n\t\t\tthis.table.rowManager.resetScroll();\r\n\t\t\tthis.table.rowManager.reinitialize();\r\n\t\t}\r\n\r\n\t\tif(!this.confirm(\"table-redrawing\", force)){\r\n\t\t\tthis.layoutRefresh();\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"table-redraw\", force);\r\n\r\n\t\tthis.table.footerManager.redraw();\r\n\t}\r\n}", "import Renderer from '../Renderer.js';\r\nimport Helpers from '../../tools/Helpers.js';\r\n\r\nexport default class BaiscVertical extends Renderer{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.verticalFillMode = \"fill\";\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\t}\r\n\r\n\tclearRows(){\r\n\t\tvar element = this.tableElement;\r\n\r\n\t\t// element.children.detach();\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\telement.scrollTop = 0;\r\n\t\telement.scrollLeft = 0;\r\n\r\n\t\telement.style.minWidth = \"\";\r\n\t\telement.style.minHeight = \"\";\r\n\t\telement.style.display = \"\";\r\n\t\telement.style.visibility = \"\";\r\n\t}\r\n\r\n\trenderRows(){\r\n\t\tvar element = this.tableElement,\r\n\t\tonlyGroupHeaders = true;\r\n\r\n\t\tthis.rows().forEach((row, index) => {\r\n\t\t\tthis.styleRow(row, index);\r\n\t\t\telement.appendChild(row.getElement());\r\n\t\t\trow.initialize(true);\r\n\r\n\t\t\tif(row.type !== \"group\"){\r\n\t\t\t\tonlyGroupHeaders = false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(onlyGroupHeaders){\r\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t}else{\r\n\t\t\telement.style.minWidth = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\r\n\trerenderRows(callback){\r\n\t\tthis.render();\r\n\r\n\t\tif(callback){\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\tscrollToRowNearestTop(row){\r\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\r\n\r\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\r\n\t}\r\n\r\n\tscrollToRow(row){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\r\n\t}\r\n\r\n\tvisibleRows(includingBuffer){\r\n\t\treturn this.rows();\r\n\t}\r\n\r\n}", "import Renderer from '../Renderer.js';\r\nimport Helpers from '../../tools/Helpers.js';\r\n\r\nexport default class VirtualDomVertical extends Renderer{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.verticalFillMode = \"fill\";\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\r\n\r\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\r\n\t\tthis.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\r\n\r\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\r\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\r\n\r\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\r\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\r\n\r\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\r\n\r\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\r\n\r\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\r\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\r\n\r\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\r\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\r\n\t}\r\n\r\n\t//////////////////////////////////////\r\n\t///////// Public Functions ///////////\r\n\t//////////////////////////////////////\r\n\r\n\tclearRows(){\r\n\t\tvar element = this.tableElement;\r\n\r\n\t\t// element.children.detach();\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\telement.style.paddingTop = \"\";\r\n\t\telement.style.paddingBottom = \"\";\r\n\t\t// element.style.minWidth = \"\";\r\n\t\telement.style.minHeight = \"\";\r\n\t\telement.style.display = \"\";\r\n\t\telement.style.visibility = \"\";\r\n\r\n\t\tthis.elementVertical.scrollTop = 0;\r\n\t\tthis.elementVertical.scrollLeft = 0;\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.vDomTop = 0;\r\n\t\tthis.vDomBottom = 0;\r\n\t\tthis.vDomTopPad = 0;\r\n\t\tthis.vDomBottomPad = 0;\r\n\t\tthis.vDomScrollPosTop = 0;\r\n\t\tthis.vDomScrollPosBottom = 0;\r\n\t}\r\n\r\n\trenderRows(){\r\n\t\tthis._virtualRenderFill();\r\n\t}\r\n\r\n\trerenderRows(callback){\r\n\t\tvar scrollTop = this.elementVertical.scrollTop;\r\n\t\tvar topRow = false;\r\n\t\tvar topOffset = false;\r\n\r\n\t\tvar left = this.table.rowManager.scrollLeft;\r\n\r\n\t\tvar rows = this.rows();\r\n\r\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\r\n\r\n\t\t\tif(rows[i]){\r\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\r\n\r\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\r\n\t\t\t\t\ttopOffset = diff;\r\n\t\t\t\t\ttopRow = i;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trows.forEach((row) => {\r\n\t\t\trow.deinitializeHeight();\r\n\t\t});\r\n\r\n\t\tif(callback){\r\n\t\t\tcallback();\r\n\t\t}\r\n\r\n\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\r\n\r\n\t\tthis.scrollColumns(left);\r\n\t}\r\n\r\n\tscrollColumns(left){\r\n\t\tthis.table.rowManager.scrollHorizontal(left);\r\n\t}\r\n\r\n\tscrollRows(top, dir){\r\n\t\tvar topDiff = top - this.vDomScrollPosTop;\r\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\r\n\t\tvar margin = this.vDomWindowBuffer * 2;\r\n\t\tvar rows = this.rows();\r\n\r\n\t\tthis.scrollTop = top;\r\n\r\n\t\tif(-topDiff > margin || bottomDiff > margin){\r\n\t\t\t//if big scroll redraw table;\r\n\t\t\tvar left = this.table.rowManager.scrollLeft;\r\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\r\n\t\t\tthis.scrollColumns(left);\r\n\t\t}else{\r\n\r\n\t\t\tif(dir){\r\n\t\t\t\t//scrolling up\r\n\t\t\t\tif(topDiff < 0){\r\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(bottomDiff < 0){\r\n\t\t\t\t\t//hide bottom row if needed\r\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\r\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(bottomDiff >= 0){\r\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//scrolling down\r\n\t\t\t\tif(topDiff >= 0){\r\n\t\t\t\t\t//hide top row if needed\r\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\r\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tresize(){\r\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\r\n\t}\r\n\r\n\tscrollToRowNearestTop(row){\r\n\t\tvar rowIndex = this.rows().indexOf(row);\r\n\r\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\r\n\t}\r\n\r\n\tscrollToRow(row){\r\n\t\tvar index = this.rows().indexOf(row);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tthis._virtualRenderFill(index, true);\r\n\t\t}\r\n\t}\r\n\r\n\tvisibleRows(includingBuffer){\r\n\t\tvar topEdge = this.elementVertical.scrollTop,\r\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\r\n\t\ttopFound = false,\r\n\t\ttopRow = 0,\r\n\t\tbottomRow = 0,\r\n\t\trows = this.rows();\r\n\r\n\t\tif(includingBuffer){\r\n\t\t\ttopRow = this.vDomTop;\r\n\t\t\tbottomRow = this.vDomBottom;\r\n\t\t}else{\r\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\r\n\t\t\t\tif(rows[i]){\r\n\t\t\t\t\tif(!topFound){\r\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\r\n\t\t\t\t\t\t\ttopRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\ttopFound = true;\r\n\r\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\r\n\t\t\t\t\t\t\t\tbottomRow = i;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\r\n\t\t\t\t\t\t\tbottomRow = i;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rows.slice(topRow, bottomRow + 1);\r\n\t}\r\n\r\n\t//////////////////////////////////////\r\n\t//////// Internal Rendering //////////\r\n\t//////////////////////////////////////\r\n\r\n\t//full virtual render\r\n\t_virtualRenderFill(position, forceMove, offset){\r\n\t\tvar\telement = this.tableElement,\r\n\t\tholder = this.elementVertical,\r\n\t\ttopPad = 0,\r\n\t\trowsHeight = 0,\r\n\t\theightOccupied = 0,\r\n\t\ttopPadHeight = 0,\r\n\t\ti = 0,\r\n\t\trows = this.rows(),\r\n\t\trowsCount = rows.length,\r\n\t\tcontainerHeight = this.elementVertical.clientHeight;\r\n\r\n\t\tposition = position || 0;\r\n\r\n\t\toffset = offset || 0;\r\n\r\n\t\tif(!position){\r\n\t\t\tthis.clear();\r\n\t\t}else{\r\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\t\t//check if position is too close to bottom of table\r\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\r\n\r\n\t\t\tif(heightOccupied < containerHeight){\r\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\r\n\t\t\t\tif(position < 0){\r\n\t\t\t\t\tposition = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//calculate initial pad\r\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\r\n\t\t\tposition -= topPad;\r\n\t\t}\r\n\r\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\r\n\t\t\tthis.vDomTop = position;\r\n\r\n\t\t\tthis.vDomBottom = position -1;\r\n\r\n\t\t\twhile ((rowsHeight <= containerHeight + this.vDomWindowBuffer || i < this.vDomWindowMinTotalRows) && this.vDomBottom < rowsCount -1){\r\n\t\t\t\tvar index = this.vDomBottom + 1,\r\n\t\t\t\trow = rows[index],\r\n\t\t\t\trowHeight = 0;\r\n\r\n\t\t\t\tthis.styleRow(row, index);\r\n\r\n\t\t\t\telement.appendChild(row.getElement());\r\n\r\n\t\t\t\trow.initialize();\r\n\r\n\t\t\t\tif(!row.heightInitialized){\r\n\t\t\t\t\trow.normalizeHeight(true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trowHeight = row.getHeight();\r\n\r\n\t\t\t\tif(i < topPad){\r\n\t\t\t\t\ttopPadHeight += rowHeight;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trowsHeight += rowHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\r\n\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.vDomBottom ++;\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\r\n\t\t\tif(!position){\r\n\t\t\t\tthis.vDomTopPad = 0;\r\n\t\t\t\t//adjust rowheight to match average of rendered elements\r\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\r\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\r\n\r\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\r\n\t\t\t}else{\r\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\r\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\r\n\t\t\t}\r\n\r\n\t\t\telement.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\telement.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\r\n\t\t\tif(forceMove){\r\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\r\n\r\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\r\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.offsetWidth && forceMove){\r\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\r\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\r\n\r\n\t\t\tholder.scrollTop = this.scrollTop;\r\n\r\n\t\t\tthis.dispatch(\"render-virtual-fill\");\r\n\t\t}\r\n\t}\r\n\r\n\t_addTopRow(rows, fillableSpace){\r\n\t\tvar table = this.tableElement,\r\n\t\taddedRows = [],\r\n\t\tpaddingAdjust = 0,\r\n\t\tindex = this.vDomTop -1,\r\n\t\ti = 0;\r\n\r\n\t\twhile(true){\r\n\t\t\tif(this.vDomTop){\r\n\t\t\t\tlet row = rows[index],\r\n\t\t\t\trowHeight, initialized;\r\n\r\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\r\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\r\n\t\t\t\t\tinitialized = row.initialized;\r\n\r\n\t\t\t\t\tif(fillableSpace >= rowHeight){\r\n\r\n\t\t\t\t\t\tthis.styleRow(row, index);\r\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\r\n\r\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\r\n\t\t\t\t\t\t\taddedRows.push(row);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\trow.initialize();\r\n\r\n\t\t\t\t\t\tif(!initialized){\r\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\r\n\r\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\r\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfillableSpace -= rowHeight;\r\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\r\n\r\n\t\t\t\t\t\tthis.vDomTop--;\r\n\t\t\t\t\t\tindex--;\r\n\t\t\t\t\t\ti++;\r\n\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let row of addedRows){\r\n\t\t\trow.clearCellHeight();\r\n\t\t}\r\n\r\n\t\tthis._quickNormalizeRowHeight(addedRows);\r\n\r\n\t\tif(paddingAdjust){\r\n\t\t\tthis.vDomTopPad -= paddingAdjust;\r\n\r\n\t\t\tif(this.vDomTopPad < 0){\r\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif(index < 1){\r\n\t\t\t\tthis.vDomTopPad = 0;\r\n\t\t\t}\r\n\r\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\r\n\t\t}\r\n\t}\r\n\r\n\t_removeTopRow(rows, fillableSpace){\r\n\t\tvar removableRows = [],\r\n\t\tpaddingAdjust = 0,\r\n\t\ti = 0;\r\n\r\n\t\twhile(true){\r\n\t\t\tlet row = rows[this.vDomTop],\r\n\t\t\trowHeight, diff;\r\n\r\n\t\t\tif(row && i < this.vDomMaxRenderChain){\r\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\r\n\r\n\t\t\t\tif(fillableSpace >= rowHeight){\r\n\t\t\t\t\tthis.vDomTop++;\r\n\r\n\t\t\t\t\tfillableSpace -= rowHeight;\r\n\t\t\t\t\tpaddingAdjust += rowHeight;\r\n\r\n\t\t\t\t\tremovableRows.push(row);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let row of removableRows){\r\n\t\t\tlet rowEl = row.getElement();\r\n\r\n\t\t\tif(rowEl.parentNode){\r\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(paddingAdjust){\r\n\t\t\tthis.vDomTopPad += paddingAdjust;\r\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\r\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\r\n\t\t}\r\n\t}\r\n\r\n\t_addBottomRow(rows, fillableSpace){\r\n\t\tvar table = this.tableElement,\r\n\t\taddedRows = [],\r\n\t\tpaddingAdjust = 0,\r\n\t\tindex = this.vDomBottom + 1,\r\n\t\ti = 0;\r\n\r\n\t\twhile(true){\r\n\t\t\tlet row = rows[index],\r\n\t\t\trowHeight, initialized;\r\n\r\n\t\t\tif(row && i < this.vDomMaxRenderChain){\r\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\r\n\t\t\t\tinitialized = row.initialized;\r\n\r\n\t\t\t\tif(fillableSpace >= rowHeight){\r\n\r\n\t\t\t\t\tthis.styleRow(row, index);\r\n\t\t\t\t\ttable.appendChild(row.getElement());\r\n\r\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\r\n\t\t\t\t\t\taddedRows.push(row);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trow.initialize();\r\n\r\n\t\t\t\t\tif(!initialized){\r\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\r\n\r\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\r\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfillableSpace -= rowHeight;\r\n\t\t\t\t\tpaddingAdjust += rowHeight;\r\n\r\n\t\t\t\t\tthis.vDomBottom++;\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let row of addedRows){\r\n\t\t\trow.clearCellHeight();\r\n\t\t}\r\n\r\n\t\tthis._quickNormalizeRowHeight(addedRows);\r\n\r\n\t\tif(paddingAdjust){\r\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\r\n\r\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\r\n\t\t\t\tthis.vDomBottomPad = 0;\r\n\t\t\t}\r\n\r\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\r\n\t\t}\r\n\t}\r\n\r\n\t_removeBottomRow(rows, fillableSpace){\r\n\t\tvar removableRows = [],\r\n\t\tpaddingAdjust = 0,\r\n\t\ti = 0;\r\n\r\n\t\twhile(true){\r\n\t\t\tlet row = rows[this.vDomBottom],\r\n\t\t\trowHeight, diff;\r\n\r\n\t\t\tif(row && i < this.vDomMaxRenderChain){\r\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\r\n\r\n\t\t\t\tif(fillableSpace >= rowHeight){\r\n\t\t\t\t\tthis.vDomBottom --;\r\n\r\n\t\t\t\t\tfillableSpace -= rowHeight;\r\n\t\t\t\t\tpaddingAdjust += rowHeight;\r\n\r\n\t\t\t\t\tremovableRows.push(row);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let row of removableRows){\r\n\t\t\tlet rowEl = row.getElement();\r\n\r\n\t\t\tif(rowEl.parentNode){\r\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(paddingAdjust){\r\n\t\t\tthis.vDomBottomPad += paddingAdjust;\r\n\r\n\t\t\tif(this.vDomBottomPad < 0){\r\n\t\t\t\tthis.vDomBottomPad = 0;\r\n\t\t\t}\r\n\r\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\r\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\r\n\t\t}\r\n\t}\r\n\r\n\t_quickNormalizeRowHeight(rows){\r\n\t\tfor(let row of rows){\r\n\t\t\trow.calcHeight();\r\n\t\t}\r\n\r\n\t\tfor(let row of rows){\r\n\t\t\trow.setCellHeight();\r\n\t\t}\r\n\t}\r\n}", "import CoreFeature from './CoreFeature.js';\r\nimport Row from './row/Row.js';\r\nimport RowComponent from './row/RowComponent.js';\r\nimport Helpers from './tools/Helpers.js';\r\n\r\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js';\r\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js';\r\n\r\nexport default class RowManager extends CoreFeature{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.element = this.createHolderElement(); //containing element\r\n\t\tthis.tableElement = this.createTableElement(); //table element\r\n\t\tthis.heightFixer = this.createTableElement(); //table element\r\n\r\n\t\tthis.firstRender = false; //handle first render\r\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\r\n\t\tthis.fixedHeight = false; //current rendering mode\r\n\r\n\t\tthis.rows = []; //hold row data objects\r\n\t\tthis.activeRowsPipeline = []; //hold caluclation of active rows\r\n\t\tthis.activeRows = []; //rows currently available to on display in the table\r\n\t\tthis.activeRowsCount = 0; //count of active rows\r\n\r\n\t\tthis.displayRows = []; //rows currently on display in the table\r\n\t\tthis.displayRowsCount = 0; //count of display rows\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.rowNumColumn = false; //hold column component for row number column\r\n\r\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations becore continuing\r\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\r\n\t\tthis.redrawBlockRederInPosition = false; //store latest redraw function calls for when redraw is needed\r\n\r\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\r\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\r\n\r\n\t\tthis.renderer = null;\r\n\t}\r\n\r\n\t//////////////// Setup Functions /////////////////\r\n\r\n\tcreateHolderElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-tableholder\");\r\n\t\tel.setAttribute(\"tabindex\", 0);\r\n\t\tel.setAttribute(\"role\", \"rowgroup\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateTableElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-table\");\r\n\t\tel.setAttribute(\"role\", \"rowgroup\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\t//return containing element\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\t//return table element\r\n\tgetTableElement(){\r\n\t\treturn this.tableElement;\r\n\t}\r\n\r\n\t//return position of row in table\r\n\tgetRowPosition(row, active){\r\n\t\tif(active){\r\n\t\t\treturn this.activeRows.indexOf(row);\r\n\t\t}else{\r\n\t\t\treturn this.rows.indexOf(row);\r\n\t\t}\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.initializeRenderer();\r\n\r\n\t\t//initialize manager\r\n\t\tthis.element.appendChild(this.tableElement);\r\n\r\n\t\tthis.firstRender = true;\r\n\r\n\t\t//scroll header along with table body\r\n\t\tthis.element.addEventListener(\"scroll\", () => {\r\n\t\t\tvar left = this.element.scrollLeft,\r\n\t\t\tleftDir = this.scrollLeft > left,\r\n\t\t\ttop = this.element.scrollTop,\r\n\t\t\ttopDir = this.scrollTop > top;\r\n\r\n\t\t\t//handle horizontal scrolling\r\n\t\t\tif(this.scrollLeft != left){\r\n\t\t\t\tthis.scrollLeft = left;\r\n\r\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\r\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\r\n\t\t\t}\r\n\r\n\t\t\t//handle verical scrolling\r\n\t\t\tif(this.scrollTop != top){\r\n\t\t\t\tthis.scrollTop = top;\r\n\r\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\r\n\r\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\r\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t////////////////// Row Manipulation //////////////////\r\n\tfindRow(subject){\r\n\t\tif(typeof subject == \"object\"){\r\n\t\t\tif(subject instanceof Row){\r\n\t\t\t\t//subject is row element\r\n\t\t\t\treturn subject;\r\n\t\t\t}else if(subject instanceof RowComponent){\r\n\t\t\t\t//subject is public row component\r\n\t\t\t\treturn subject._getSelf() || false;\r\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\r\n\t\t\t\t//subject is a HTML element of the row\r\n\t\t\t\tlet match = this.rows.find((row) => {\r\n\t\t\t\t\treturn row.getElement() === subject;\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn match || false;\r\n\t\t\t}\r\n\t\t}else if(typeof subject == \"undefined\" || subject === null){\r\n\t\t\treturn false;\r\n\t\t}else{\r\n\t\t\t//subject should be treated as the index of the row\r\n\t\t\tlet match = this.rows.find((row) => {\r\n\t\t\t\treturn row.data[this.table.options.index] == subject;\r\n\t\t\t});\r\n\r\n\t\t\treturn match || false;\r\n\t\t}\r\n\r\n\t\t//catch all for any other type of input\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetRowFromDataObject(data){\r\n\t\tvar match = this.rows.find((row) => {\r\n\t\t\treturn row.data === data;\r\n\t\t});\r\n\r\n\t\treturn match || false;\r\n\t}\r\n\r\n\tgetRowFromPosition(position, active){\r\n\t\tif(active){\r\n\t\t\treturn this.activeRows[position];\r\n\t\t}else{\r\n\t\t\treturn this.rows[position];\r\n\t\t}\r\n\t}\r\n\r\n\tscrollToRow(row, position, ifVisible){\r\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\r\n\t}\r\n\r\n\t////////////////// Data Handling //////////////////\r\n\tsetData(data, renderInPosition, columnsChanged){\r\n\t\treturn new Promise((resolve, reject)=>{\r\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\r\n\t\t\t\tif(this.table.options.pagination){\r\n\t\t\t\t\tthis._setDataActual(data, true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.reRenderInPosition(() => {\r\n\t\t\t\t\t\tthis._setDataActual(data);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\r\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\r\n\t\t\t\t}\r\n\t\t\t\tthis.resetScroll();\r\n\r\n\t\t\t\tthis._setDataActual(data);\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\t\t});\r\n\t}\r\n\r\n\t_setDataActual(data, renderInPosition){\r\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\r\n\r\n\t\tthis._wipeElements();\r\n\r\n\t\tif(Array.isArray(data)){\r\n\t\t\tthis.dispatch(\"data-processing\", data);\r\n\r\n\t\t\tdata.forEach((def, i) => {\r\n\t\t\t\tif(def && typeof def === \"object\"){\r\n\t\t\t\t\tvar row = new Row(def, this);\r\n\t\t\t\t\tthis.rows.push(row);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\r\n\r\n\t\t\tthis.dispatch(\"data-processed\", data);\r\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\r\n\t\t}\r\n\t}\r\n\r\n\t_wipeElements(){\r\n\t\tthis.dispatch(\"rows-wipe\");\r\n\r\n\t\tthis.rows.forEach((row) => {\r\n\t\t\trow.wipe();\r\n\t\t});\r\n\r\n\t\tthis.rows = [];\r\n\t\tthis.activeRows = [];\r\n\t\tthis.activeRowsPipeline = [];\r\n\t\tthis.activeRowsCount = 0;\r\n\t\tthis.displayRows = [];\r\n\t\tthis.displayRowsCount = 0;\r\n\r\n\t\tthis.adjustTableSize();\r\n\t}\r\n\r\n\tdeleteRow(row, blockRedraw){\r\n\t\tvar allIndex = this.rows.indexOf(row),\r\n\t\tactiveIndex = this.activeRows.indexOf(row);\r\n\r\n\t\tif(activeIndex > -1){\r\n\t\t\tthis.activeRows.splice(activeIndex, 1);\r\n\t\t}\r\n\r\n\t\tif(allIndex > -1){\r\n\t\t\tthis.rows.splice(allIndex, 1);\r\n\t\t}\r\n\r\n\t\tthis.setActiveRows(this.activeRows);\r\n\r\n\t\tthis.displayRowIterator((rows) => {\r\n\t\t\tvar displayIndex = rows.indexOf(row);\r\n\r\n\t\t\tif(displayIndex > -1){\r\n\t\t\t\trows.splice(displayIndex, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(!blockRedraw){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t}\r\n\r\n\t\tthis.regenerateRowNumbers();\r\n\r\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\r\n\r\n\t\tif(!this.displayRowsCount){\r\n\t\t\tthis._showPlaceholder();\r\n\t\t}\r\n\r\n\t\tif(this.subscribedExternal(\"dataChanged\")){\r\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\r\n\t\t}\r\n\t}\r\n\r\n\taddRow(data, pos, index, blockRedraw){\r\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\r\n\r\n\t\tthis.dispatch(\"row-added\", row, data, pos, index);\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\t//add multiple rows\r\n\taddRows(data, pos, index){\r\n\t\tvar length = 0,\r\n\t\trows = [];\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tpos = this.findAddRowPos(pos);\r\n\r\n\t\t\tif(!Array.isArray(data)){\r\n\t\t\t\tdata = [data];\r\n\t\t\t}\r\n\r\n\t\t\tlength = data.length - 1;\r\n\r\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\r\n\t\t\t\tdata.reverse();\r\n\t\t\t}\r\n\r\n\t\t\tdata.forEach((item, i) => {\r\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\r\n\t\t\t\trows.push(row);\r\n\t\t\t\tthis.dispatch(\"row-added\", row, data, pos, index);\r\n\t\t\t});\r\n\r\n\t\t\tthis.refreshActiveData(false, false, true);\r\n\r\n\t\t\tthis.regenerateRowNumbers();\r\n\r\n\t\t\tif(rows.length){\r\n\t\t\t\tthis._clearPlaceholder();\r\n\t\t\t}\r\n\r\n\t\t\tresolve(rows);\r\n\t\t});\r\n\t}\r\n\r\n\tfindAddRowPos(pos){\r\n\t\tif(typeof pos === \"undefined\"){\r\n\t\t\tpos = this.table.options.addRowPos;\r\n\t\t}\r\n\r\n\t\tif(pos === \"pos\"){\r\n\t\t\tpos = true;\r\n\t\t}\r\n\r\n\t\tif(pos === \"bottom\"){\r\n\t\t\tpos = false;\r\n\t\t}\r\n\r\n\t\treturn pos;\r\n\t}\r\n\r\n\taddRowActual(data, pos, index, blockRedraw){\r\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\r\n\t\ttop = this.findAddRowPos(pos),\r\n\t\tallIndex = -1,\r\n\t\tactiveIndex, chainResult;\r\n\r\n\t\tif(!index){\r\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\r\n\r\n\t\t\tindex = chainResult.index;\r\n\t\t\ttop = chainResult.top;\r\n\t\t}\r\n\r\n\t\tif(typeof index !== \"undefined\"){\r\n\t\t\tindex = this.findRow(index);\r\n\t\t}\r\n\r\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\r\n\r\n\t\tif(index){\r\n\t\t\tallIndex = this.rows.indexOf(index);\r\n\t\t}\r\n\r\n\t\tif(index && allIndex > -1){\r\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\r\n\r\n\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\tvar displayIndex = rows.indexOf(index);\r\n\r\n\t\t\t\tif(displayIndex > -1){\r\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(activeIndex > -1){\r\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\r\n\t\t\t}\r\n\r\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\r\n\r\n\t\t}else{\r\n\r\n\t\t\tif(top){\r\n\r\n\t\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\t\trows.unshift(row);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.activeRows.unshift(row);\r\n\t\t\t\tthis.rows.unshift(row);\r\n\t\t\t}else{\r\n\t\t\t\tthis.displayRowIterator(function(rows){\r\n\t\t\t\t\trows.push(row);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.activeRows.push(row);\r\n\t\t\t\tthis.rows.push(row);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setActiveRows(this.activeRows);\r\n\r\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\r\n\r\n\t\tif(this.subscribedExternal(\"dataChanged\")){\r\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\r\n\t\t}\r\n\r\n\t\tif(!blockRedraw){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\tmoveRow(from, to, after){\r\n\t\tthis.dispatch(\"row-move\", from, to, after);\r\n\r\n\t\tthis.moveRowActual(from, to, after);\r\n\r\n\t\tthis.regenerateRowNumbers();\r\n\r\n\t\tthis.dispatch(\"row-moved\", from, to, after);\r\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\r\n\t}\r\n\r\n\tmoveRowActual(from, to, after){\r\n\t\tthis.moveRowInArray(this.rows, from, to, after);\r\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\r\n\r\n\t\tthis.displayRowIterator((rows) => {\r\n\t\t\tthis.moveRowInArray(rows, from, to, after);\r\n\t\t});\r\n\r\n\t\tthis.dispatch(\"row-moving\", from, to, after);\r\n\t}\r\n\r\n\tmoveRowInArray(rows, from, to, after){\r\n\t\tvar\tfromIndex, toIndex, start, end;\r\n\r\n\t\tif(from !== to){\r\n\r\n\t\t\tfromIndex = rows.indexOf(from);\r\n\r\n\t\t\tif (fromIndex > -1) {\r\n\r\n\t\t\t\trows.splice(fromIndex, 1);\r\n\r\n\t\t\t\ttoIndex = rows.indexOf(to);\r\n\r\n\t\t\t\tif (toIndex > -1) {\r\n\r\n\t\t\t\t\tif(after){\r\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t\trows.splice(fromIndex, 0, from);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//restyle rows\r\n\t\t\tif(rows === this.getDisplayRows()){\r\n\r\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\r\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\r\n\r\n\t\t\t\tfor(let i = start; i <= end; i++){\r\n\t\t\t\t\tif(rows[i]){\r\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearData(){\r\n\t\tthis.setData([]);\r\n\t}\r\n\r\n\tgetRowIndex(row){\r\n\t\treturn this.findRowIndex(row, this.rows);\r\n\t}\r\n\r\n\tgetDisplayRowIndex(row){\r\n\t\tvar index = this.getDisplayRows().indexOf(row);\r\n\t\treturn index > -1 ? index : false;\r\n\t}\r\n\r\n\tnextDisplayRow(row, rowOnly){\r\n\t\tvar index = this.getDisplayRowIndex(row),\r\n\t\tnextRow = false;\r\n\r\n\r\n\t\tif(index !== false && index < this.displayRowsCount -1){\r\n\t\t\tnextRow = this.getDisplayRows()[index+1];\r\n\t\t}\r\n\r\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\r\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\r\n\t\t}\r\n\r\n\t\treturn nextRow;\r\n\t}\r\n\r\n\tprevDisplayRow(row, rowOnly){\r\n\t\tvar index = this.getDisplayRowIndex(row),\r\n\t\tprevRow = false;\r\n\r\n\t\tif(index){\r\n\t\t\tprevRow = this.getDisplayRows()[index-1];\r\n\t\t}\r\n\r\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\r\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\r\n\t\t}\r\n\r\n\t\treturn prevRow;\r\n\t}\r\n\r\n\tfindRowIndex(row, list){\r\n\t\tvar rowIndex;\r\n\r\n\t\trow = this.findRow(row);\r\n\r\n\t\tif(row){\r\n\t\t\trowIndex = list.indexOf(row);\r\n\r\n\t\t\tif(rowIndex > -1){\r\n\t\t\t\treturn rowIndex;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetData(active, transform){\r\n\t\tvar output = [],\r\n\t\trows = this.getRows(active);\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\tif(row.type == \"row\"){\r\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetComponents(active){\r\n\t\tvar\toutput = [],\r\n\t\trows = this.getRows(active);\r\n\r\n\t\trows.forEach(function(row){\r\n\t\t\toutput.push(row.getComponent());\r\n\t\t});\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetDataCount(active){\r\n\t\tvar rows = this.getRows(active);\r\n\r\n\t\treturn rows.length;\r\n\t}\r\n\r\n\tscrollHorizontal(left){\r\n\t\tthis.scrollLeft = left;\r\n\t\tthis.element.scrollLeft = left;\r\n\r\n\t\tthis.dispatch(\"scroll-horizontal\", left);\r\n\t}\r\n\r\n\tregisterDataPipelineHandler(handler, priority){\r\n\t\tif(typeof priority !== \"undefined\"){\r\n\t\t\tthis.dataPipeline.push({handler, priority})\r\n\t\t\tthis.dataPipeline.sort((a, b) => {\r\n\t\t\t\treturn a.priority - b.priority;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\")\r\n\t\t}\r\n\t}\r\n\r\n\tregisterDisplayPipelineHandler(handler, priority){\r\n\t\tif(typeof priority !== \"undefined\"){\r\n\t\t\tthis.displayPipeline.push({handler, priority})\r\n\t\t\tthis.displayPipeline.sort((a, b) => {\r\n\t\t\t\treturn a.priority - b.priority;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\")\r\n\t\t}\r\n\t}\r\n\r\n\t//set active data set\r\n\trefreshActiveData(handler, skipStage, renderInPosition){\r\n\t\tvar table = this.table,\r\n\t\tstage = \"\",\r\n\t\tindex = 0,\r\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"],\r\n\t\tdisplayIndex;\r\n\r\n\r\n\t\tif(typeof handler === \"function\"){\r\n\t\t\tindex = this.dataPipeline.findIndex((item) => {\r\n\t\t\t\treturn item.handler === handler;\r\n\t\t\t});\r\n\r\n\t\t\tif(index > -1){\r\n\t\t\t\tstage = \"dataPipeline\";\r\n\r\n\t\t\t\tif(skipStage){\r\n\t\t\t\t\tif(index == this.dataPipeline.length - 1){\r\n\t\t\t\t\t\tstage = \"display\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\r\n\t\t\t\t\treturn item.handler === handler;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tstage = \"displayPipeline\";\r\n\r\n\t\t\t\t\tif(skipStage){\r\n\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\r\n\t\t\t\t\t\t\tstage = \"end\";\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tstage = handler || \"all\";\r\n\t\t\tindex = 0;\r\n\t\t}\r\n\r\n\t\tif(this.redrawBlock){\r\n\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\r\n\t\t\t\tthis.redrawBlockRestoreConfig = {\r\n\t\t\t\t\thandler: handler,\r\n\t\t\t\t\tskipStage: skipStage,\r\n\t\t\t\t\trenderInPosition: renderInPosition,\r\n\t\t\t\t\tstage:stage,\r\n\t\t\t\t\tindex:index,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tthis.dispatch(\"data-refeshing\");\r\n\r\n\t\t\tif(!handler){\r\n\t\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\r\n\t\t\t}\r\n\r\n\t\t\t//cascade through data refresh stages\r\n\t\t\tswitch(stage){\r\n\t\t\t\tcase \"all\":\r\n\t\t\t\t//handle case where alldata needs refreshing\r\n\r\n\t\t\t\tcase \"dataPipeline\":\r\n\r\n\t\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\r\n\t\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\r\n\r\n\t\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\r\n\r\n\t\t\t\tthis.regenerateRowNumbers();\r\n\r\n\t\t\t\tcase \"display\":\r\n\t\t\t\tindex = 0;\r\n\t\t\t\tthis.resetDisplayRows();\r\n\r\n\t\t\t\tcase \"displayPipeline\":\r\n\t\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\r\n\t\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\r\n\r\n\t\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcase \"end\":\r\n\t\t\t\t//case to handle scenario when trying to skip past end stage\r\n\t\t\t}\r\n\r\n\t\t\tif(Helpers.elVisible(this.element)){\r\n\t\t\t\tif(renderInPosition){\r\n\t\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t\t}else{\r\n\r\n\t\t\t\t\tif(!handler){\r\n\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.renderTable();\r\n\r\n\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\r\n\t\t\t\t\t\tthis.table.columnManager.redraw(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatch(\"data-refeshed\");\r\n\t\t}\r\n\t}\r\n\r\n\t//regenerate row numbers for row number formatter if in use\r\n\tregenerateRowNumbers(){\r\n\t\tif(this.rowNumColumn){\r\n\t\t\tthis.activeRows.forEach((row) => {\r\n\t\t\t\tvar cell = row.getCell(this.rowNumColumn);\r\n\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tcell._generateContents();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsetActiveRows(activeRows){\r\n\t\tthis.activeRows = activeRows;\r\n\t\tthis.activeRowsCount = this.activeRows.length;\r\n\t}\r\n\r\n\t//reset display rows array\r\n\tresetDisplayRows(){\r\n\t\tthis.displayRows = [];\r\n\r\n\t\tthis.displayRows.push(this.activeRows.slice(0));\r\n\r\n\t\tthis.displayRowsCount = this.displayRows[0].length;\r\n\t}\r\n\r\n\tgetNextDisplayIndex(){\r\n\t\treturn this.displayRows.length;\r\n\t}\r\n\r\n\t//set display row pipeline data\r\n\tsetDisplayRows(displayRows, index){\r\n\r\n\t\tvar output = true;\r\n\r\n\t\tif(index && typeof this.displayRows[index] != \"undefined\"){\r\n\t\t\tthis.displayRows[index] = displayRows;\r\n\t\t\toutput = true;\r\n\t\t}else{\r\n\t\t\tthis.displayRows.push(displayRows)\r\n\t\t\toutput = index = this.displayRows.length -1;\r\n\t\t}\r\n\r\n\t\tif(index == this.displayRows.length -1){\r\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tgetDisplayRows(index){\r\n\t\tif(typeof index == \"undefined\"){\r\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\r\n\t\t}else{\r\n\t\t\treturn this.displayRows[index] || [];\r\n\t\t}\r\n\t}\r\n\r\n\tgetVisibleRows(chain, viewable){\r\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\r\n\r\n\t\tif(chain){\r\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\r\n\t\t}\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\t//repeat action accross display rows\r\n\tdisplayRowIterator(callback){\r\n\t\tthis.activeRowsPipeline.forEach(callback);\r\n\t\tthis.displayRows.forEach(callback);\r\n\r\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\r\n\t}\r\n\r\n\t//return only actual rows (not group headers etc)\r\n\tgetRows(type){\r\n\t\tvar rows;\r\n\r\n\t\tswitch(type){\r\n\t\t\tcase \"active\":\r\n\t\t\trows = this.activeRows;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"display\":\r\n\t\t\trows = this.table.rowManager.getDisplayRows();\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"visible\":\r\n\t\t\trows = this.getVisibleRows(true);\r\n\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\r\n\t\t}\r\n\r\n\t\treturn rows;\r\n\t}\r\n\r\n\t///////////////// Table Rendering /////////////////\r\n\t//trigger rerender of table in current position\r\n\treRenderInPosition(callback){\r\n\t\tif(this.redrawBlock){\r\n\t\t\tif(callback){\r\n\t\t\t\tcallback();\r\n\t\t\t}else{\r\n\t\t\t\tthis.redrawBlockRederInPosition = true;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderer.rerenderRows(callback);\r\n\t\t}\r\n\t}\r\n\r\n\tinitializeRenderer(){\r\n\t\tvar renderClass;\r\n\r\n\t\tvar renderers = {\r\n\t\t\t\"virtual\": RendererVirtualDomVertical,\r\n\t\t\t\"basic\": RendererBasicVertical,\r\n\t\t};\r\n\r\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\r\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\r\n\t\t}else{\r\n\t\t\trenderClass = this.table.options.renderVertical;\r\n\t\t}\r\n\r\n\t\tif(renderClass){\r\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\r\n\t\t\tthis.renderer.initialize();\r\n\r\n\t\t\tif((this.table.element.clientHeight || this.table.options.height)){\r\n\t\t\t\tthis.fixedHeight = true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.fixedHeight = false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Unable to find matching renderer:\", table.options.renderVertical);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRenderMode(){\r\n\t\treturn this.renderMode;\r\n\t}\r\n\r\n\trenderTable(){\r\n\t\tthis.dispatchExternal(\"renderStarted\");\r\n\r\n\t\tthis.element.scrollTop = 0;\r\n\r\n\t\tthis._clearTable();\r\n\r\n\t\tif(this.displayRowsCount){\r\n\t\t\tthis.renderer.renderRows();\r\n\r\n\t\t\tif(this.firstRender){\r\n\t\t\t\tthis.firstRender = false;\r\n\t\t\t\tthis.layoutRefresh();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderEmptyScroll();\r\n\t\t}\r\n\r\n\t\tif(!this.fixedHeight){\r\n\t\t\tthis.adjustTableSize();\r\n\t\t}\r\n\r\n\t\tthis.dispatch(\"table-layout\");\r\n\r\n\t\tif(!this.displayRowsCount){\r\n\t\t\tthis._showPlaceholder();\r\n\t\t}\r\n\r\n\t\tthis.dispatchExternal(\"renderComplete\");\r\n\t}\r\n\r\n\t//show scrollbars on empty table div\r\n\trenderEmptyScroll(){\r\n\t\tif(this.table.options.placeholder){\r\n\t\t\tthis.tableElement.style.display = \"none\";\r\n\t\t}else{\r\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\r\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\r\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\r\n\t\t}\r\n\t}\r\n\r\n\t_clearTable(){\r\n\t\tvar element = this.tableElement;\r\n\r\n\t\tthis._clearPlaceholder();\r\n\r\n\t\tthis.scrollTop = 0;\r\n\t\tthis.scrollLeft = 0;\r\n\r\n\t\tthis.renderer.clearRows();\r\n\t}\r\n\r\n\t_showPlaceholder(){\r\n\t\tif(this.table.options.placeholder){\r\n\r\n\t\t\tthis.table.options.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\r\n\r\n\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\r\n\t\t\tthis.table.options.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\t_clearPlaceholder(){\r\n\t\tif(this.table.options.placeholder && this.table.options.placeholder.parentNode){\r\n\t\t\tthis.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);\r\n\t\t}\r\n\t}\r\n\r\n\tstyleRow(row, index){\r\n\t\tvar rowEl = row.getElement();\r\n\r\n\t\tif(index % 2){\r\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\r\n\t\t}else{\r\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\r\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\r\n\t\t}\r\n\t}\r\n\r\n\t//normalize height of active rows\r\n\tnormalizeHeight(){\r\n\t\tthis.activeRows.forEach(function(row){\r\n\t\t\trow.normalizeHeight();\r\n\t\t});\r\n\t}\r\n\r\n\t//adjust the height of the table holder to fit in the Tabulator element\r\n\tadjustTableSize(){\r\n\t\tvar initialHeight = this.element.clientHeight,\r\n\t\tmodExists;\r\n\r\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\r\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\r\n\r\n\t\t\tif(this.fixedHeight){\r\n\t\t\t\tthis.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.element.style.height = \"\";\r\n\t\t\t\tthis.element.style.height = (this.table.element.clientHeight - otherHeight) + \"px\";\r\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\r\n\t\t\t}\r\n\r\n\t\t\tthis.renderer.resize();\r\n\r\n\t\t\t//check if the table has changed size when dealing with variable height tables\r\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\r\n\t\t\t\tif(this.subscribed(\"table-resize\")){\r\n\t\t\t\t\tthis.dispatch(\"table-resize\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.redraw();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//renitialize all rows\r\n\treinitialize(){\r\n\t\tthis.rows.forEach(function(row){\r\n\t\t\trow.reinitialize(true);\r\n\t\t});\r\n\t}\r\n\r\n\t//prevent table from being redrawn\r\n\tblockRedraw (){\r\n\t\tthis.redrawBlock = true;\r\n\t\tthis.redrawBlockRestoreConfig = false;\r\n\t}\r\n\r\n\t//restore table redrawing\r\n\trestoreRedraw (){\r\n\t\tthis.redrawBlock = false;\r\n\r\n\t\tif(this.redrawBlockRestoreConfig){\r\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition)\r\n\r\n\t\t\tthis.redrawBlockRestoreConfig = false;\r\n\t\t}else{\r\n\t\t\tif(this.redrawBlockRederInPosition){\r\n\t\t\t\tthis.reRenderInPosition();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.redrawBlockRederInPosition = false;\r\n\t}\r\n\r\n\t//redraw table\r\n\tredraw (force){\r\n\t\tvar pos = 0,\r\n\t\tleft = this.scrollLeft;\r\n\r\n\t\tthis.adjustTableSize();\r\n\r\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\r\n\r\n\t\tif(!force){\r\n\t\t\tthis.reRenderInPosition();\r\n\t\t\tthis.scrollHorizontal(left);\r\n\r\n\t\t\tif(!this.displayRowsCount){\r\n\t\t\t\tif(this.table.options.placeholder){\r\n\t\t\t\t\tthis.getElement().appendChild(this.table.options.placeholder);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.renderTable();\r\n\t\t}\r\n\t}\r\n\r\n\tresetScroll(){\r\n\t\tthis.element.scrollLeft = 0;\r\n\t\tthis.element.scrollTop = 0;\r\n\r\n\t\tif(this.table.browser === \"ie\"){\r\n\t\t\tvar event = document.createEvent(\"Event\");\r\n\t\t\tevent.initEvent(\"scroll\", false, true);\r\n\t\t\tthis.element.dispatchEvent(event);\r\n\t\t}else{\r\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\r\n\t\t}\r\n\t}\r\n}", "import CoreFeature from './CoreFeature.js';\r\n\r\nexport default class FooterManager extends CoreFeature{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.active = false;\r\n\t\tthis.element = this.createElement(); //containing element\r\n\t\tthis.external = false;\r\n\t\tthis.links = [];\r\n\r\n\t\tthis.initializeElement();\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.initializeElement();\r\n\t}\r\n\r\n\tcreateElement (){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-footer\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tinitializeElement(){\r\n\t\tif(this.table.options.footerElement){\r\n\r\n\t\t\tswitch(typeof this.table.options.footerElement){\r\n\t\t\t\tcase \"string\":\r\n\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\r\n\t\t\t\t\tthis.element.innerHTML = this.table.options.footerElement;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.external = true;\r\n\t\t\t\t\tthis.element = document.querySelector(this.table.options.footerElement);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\tthis.element = this.table.options.footerElement;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tappend(element, parent){\r\n\t\tthis.activate(parent);\r\n\r\n\t\tthis.element.appendChild(element);\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\tprepend(element, parent){\r\n\t\tthis.activate(parent);\r\n\r\n\t\tthis.element.insertBefore(element, this.element.firstChild);\r\n\t\tthis.table.rowManager.adjustTableSize();\r\n\t}\r\n\r\n\tremove(element){\r\n\t\telement.parentNode.removeChild(element);\r\n\t\tthis.deactivate();\r\n\t}\r\n\r\n\tdeactivate(force){\r\n\t\tif(!this.element.firstChild || force){\r\n\t\t\tif(!this.external){\r\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\r\n\t\t\t}\r\n\t\t\tthis.active = false;\r\n\t\t}\r\n\t}\r\n\r\n\tactivate(parent){\r\n\t\tif(!this.active){\r\n\t\t\tthis.active = true;\r\n\t\t\tif(!this.external){\r\n\t\t\t\tthis.table.element.appendChild(this.getElement());\r\n\t\t\t\tthis.table.element.style.display = '';\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(parent){\r\n\t\t\tthis.links.push(parent);\r\n\t\t}\r\n\t}\r\n\r\n\tredraw(){\r\n\t\tthis.links.forEach(function(link){\r\n\t\t\tlink.footerRedraw();\r\n\t\t});\r\n\t}\r\n}", "import CoreFeature from '../CoreFeature.js';\r\nimport Helpers from './Helpers.js';\r\n\r\nexport default class InteractionManager extends CoreFeature {\r\n\t\r\n\tconstructor (table){\r\n\t\tsuper(table);\r\n\t\t\r\n\t\tthis.el = null;\r\n\t\t\r\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\r\n\t\t\r\n\t\tthis.previousTargets = {};\r\n\t\t\r\n\t\tthis.listeners = [\r\n\t\t\t\"click\",\r\n\t\t\t\"dblclick\",\r\n\t\t\t\"contextmenu\",\r\n\t\t\t\"mouseenter\",\r\n\t\t\t\"mouseleave\",\r\n\t\t\t\"mouseover\",\r\n\t\t\t\"mouseout\",\r\n\t\t\t\"mousemove\",\r\n\t\t\t\"touchstart\",\r\n\t\t\t\"touchend\",\r\n\t\t];\r\n\t\t\r\n\t\tthis.componentMap = {\r\n\t\t\t\"tabulator-cell\":\"cell\",\r\n\t\t\t\"tabulator-row\":\"row\",\r\n\t\t\t\"tabulator-group\":\"group\",\r\n\t\t\t\"tabulator-col\":\"column\",\r\n\t\t};\r\n\r\n\t\tthis.pseudoTrackers = {\r\n\t\t\t\"row\":{\r\n\t\t\t\tsubscriber:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t},\r\n\t\t\t\"cell\":{\r\n\t\t\t\tsubscriber:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t},\r\n\t\t\t\"group\":{\r\n\t\t\t\tsubscriber:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t},\r\n\t\t\t\"column\":{\r\n\t\t\t\tsubscriber:null,\r\n\t\t\t\ttarget:null,\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t\tthis.pseudoTracking = false;\r\n\t}\r\n\t\r\n\tinitialize(){\r\n\t\tthis.el = this.table.element;\r\n\t\tthis.buildListenerMap();\r\n\t\tthis.bindSubscriptionWatchers();\r\n\t}\r\n\t\r\n\tbuildListenerMap(){\r\n\t\tvar listenerMap = {};\r\n\t\t\r\n\t\tthis.listeners.forEach((listener) => {\r\n\t\t\tlistenerMap[listener] = {\r\n\t\t\t\thandler:null,\r\n\t\t\t\tcomponents:[],\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\tthis.listeners = listenerMap;\r\n\t}\r\n\r\n\tbindPseudoEvents(){\r\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\r\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\r\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\r\n\t\t});\r\n\r\n\t\tthis.pseudoTracking = true;\r\n\t}\r\n\r\n\tpseudoMouseEnter(key, e, target){\r\n\t\tif(this.pseudoTrackers[key].target !== target){\r\n\t\t\t\r\n\t\t\tif(this.pseudoTrackers[key].target){\r\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\r\n\t\t\t}\r\n\r\n\t\t\tthis.pseudoMouseLeave(key, e);\r\n\r\n\t\t\tthis.pseudoTrackers[key].target = target;\r\n\r\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\r\n\t\t}\r\n\t}\r\n\r\n\tpseudoMouseLeave(key, e){\r\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\r\n\t\tlinkedKeys = {\r\n\t\t\t\"row\":[\"cell\"],\r\n\t\t\t\"cell\":[\"row\"],\r\n\t\t};\r\n\r\n\t\tleaveList = leaveList.filter((item) => {\r\n\t\t\tvar links = linkedKeys[key];\r\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\r\n\t\t});\r\n\r\n\t\r\n\t\tleaveList.forEach((key) => {\r\n\t\t\tvar target = this.pseudoTrackers[key].target;\r\n\r\n\t\t\tif(this.pseudoTrackers[key].target){\r\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\r\n\r\n\t\t\t\tthis.pseudoTrackers[key].target = null;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t\r\n\tbindSubscriptionWatchers(){\r\n\t\tvar listeners = Object.keys(this.listeners),\r\n\t\tcomponents = Object.values(this.componentMap);\r\n\t\t\r\n\t\tfor(let comp of components){\r\n\t\t\tfor(let listener of listeners){\r\n\t\t\t\tlet key = comp + \"-\" + listener;\r\n\t\t\t\t\r\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this))\r\n\t}\r\n\t\r\n\tsubscriptionChanged(component, key, added){\r\n\t\tvar listener = this.listeners[key].components,\r\n\t\tindex = listener.indexOf(component),\r\n\t\tchanged = false;\r\n\r\n\t\tif(added){\r\n\t\t\tif(index === -1){\r\n\t\t\t\tlistener.push(component);\r\n\t\t\t\tchanged = true;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tlistener.splice(index, 1);\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\r\n\t\t\tthis.bindPseudoEvents();\r\n\t\t}\r\n\t\t\r\n\t\tif(changed){\r\n\t\t\tthis.updateEventListeners();\r\n\t\t}\r\n\t}\r\n\t\r\n\tupdateEventListeners(){\r\n\t\tfor(let key in this.listeners){\r\n\t\t\tlet listener = this.listeners[key];\r\n\t\t\t\r\n\t\t\tif(listener.components.length){\r\n\t\t\t\tif(!listener.handler){\r\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\r\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler)\r\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(listener.handler){\r\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler)\r\n\t\t\t\t\tlistener.handler = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\ttrack(type, e){\r\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\r\n\t\t\r\n\t\tvar targets = this.findTargets(path);\r\n\t\ttargets = this.bindComponents(type, targets);\r\n\r\n\t\tthis.triggerEvents(type, e, targets);\r\n\r\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\r\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfindTargets(path){\r\n\t\tvar targets = {};\r\n\t\t\r\n\t\tlet componentMap = Object.keys(this.componentMap);\r\n\t\t\r\n\t\tfor (let el of path) {\r\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\r\n\t\t\t\r\n\t\t\tlet abort = classList.filter((item) => {\r\n\t\t\t\treturn this.abortClasses.includes(item);\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tif(abort.length){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet elTargets = classList.filter((item) => {\r\n\t\t\t\treturn componentMap.includes(item);\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tfor (let target of elTargets) {\r\n\t\t\t\ttargets[this.componentMap[target]] = el;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(targets.group && targets.group === targets.row){\r\n\t\t\tdelete targets.row;\r\n\t\t}\r\n\t\t\r\n\t\treturn targets;\r\n\t}\r\n\t\r\n\tbindComponents(type, targets){\r\n\t\t//ensure row component is looked up before cell\r\n\t\tvar keys = Object.keys(targets).reverse(),\r\n\t\tlistener = this.listeners[type],\r\n\t\ttargetMatches = {};\r\n\t\t\r\n\t\tfor(let key of keys){\r\n\t\t\tlet component;\r\n\t\t\tlet target = targets[key];\r\n\t\t\tlet previousTarget = this.previousTargets[key];\r\n\t\t\t\r\n\t\t\tif(previousTarget && previousTarget.target === target){\r\n\t\t\t\tcomponent = previousTarget.component;\r\n\t\t\t}else{\r\n\t\t\t\tswitch(key){\r\n\t\t\t\t\tcase \"row\":\r\n\t\t\t\t\tcase \"group\":\r\n\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\")){\r\n\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcomponent = rows.find((row) => {\r\n\t\t\t\t\t\t\treturn row.getElement() === target;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"column\":\r\n\t\t\t\t\tif(listener.components.includes(\"column\")){\r\n\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase \"cell\":\r\n\t\t\t\t\tif(listener.components.includes(\"cell\")){\r\n\t\t\t\t\t\tcomponent = targets[\"row\"].findCell(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(component){\r\n\t\t\t\ttargets[key] = component;\r\n\t\t\t\ttargetMatches[key] = {\r\n\t\t\t\t\ttarget:target,\r\n\t\t\t\t\tcomponent:component,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.previousTargets = targetMatches;\r\n\t\t\r\n\t\treturn targets;\r\n\t}\r\n\t\r\n\ttriggerEvents(type, e, targets){\r\n\t\tvar listener = this.listeners[type];\r\n\t\t\r\n\t\tfor(let key in targets){\r\n\t\t\tif(targets[key] && listener.components.includes(key)){\r\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tclearWatchers(){\r\n\t\tfor(let key in this.listeners){\r\n\t\t\tlet listener = this.listeners[key];\r\n\t\t\r\n\t\t\tif(listener.handler){\r\n\t\t\t\tthis.el.removeEventListener(key, listener.handler)\r\n\t\t\t\tlistener.handler = null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}", "export default class ComponentFunctionBinder{\r\n\r\n\tconstructor(table){\r\n\t\tthis.table = table;\r\n\r\n\t\tthis.bindings = {};\r\n\t}\r\n\r\n\tbind(type, funcName, handler){\r\n\t\tif(!this.bindings[type]){\r\n\t\t\tthis.bindings[type] = {};\r\n\t\t}\r\n\r\n\t\tif(this.bindings[type][funcName]){\r\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, hanlder)\r\n\t\t}else{\r\n\t\t\tthis.bindings[type][funcName] = handler;\r\n\t\t}\r\n\t}\r\n\r\n\thandle(type, component, name){\r\n\t\tif(this.bindings[type] && this.bindings[type][name]){\r\n\t\t\treturn this.bindings[type][name].bind(null, component);\r\n\t\t}else{\r\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\r\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\")\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}", "import CoreFeature from '../CoreFeature.js';\r\n\r\nexport default class DataLoader extends CoreFeature{\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.loaderElement = this.createLoaderElement(); //loader message div\r\n\t\tthis.msgElement = this.createMsgElement(); //message element\r\n\t\tthis.loadingElement = null;\r\n\t\tthis.errorElement = null;\r\n\r\n\t\tthis.requestOrder = 0; //prevent requests comming out of sequence if overridden by another load request\r\n\t\tthis.loading = false;\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tvar template;\r\n\r\n\t\tthis.loaderElement.appendChild(this.msgElement);\r\n\r\n\t\tif(this.table.options.dataLoaderLoading){\r\n\t\t\tif(typeof this.table.options.dataLoaderLoading == \"string\"){\r\n\t\t\t\ttemplate = document.createElement('template');\r\n\t\t\t\ttemplate.innerHTML = this.table.options.dataLoaderLoading.trim();\r\n\t\t\t\tthis.loadingElement = template.firstElementChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.loadingElement = this.table.options.dataLoaderLoading;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.table.options.dataLoaderError){\r\n\t\t\tif(typeof this.table.options.dataLoaderError == \"string\"){\r\n\t\t\t\ttemplate = document.createElement('template');\r\n\t\t\t\ttemplate.innerHTML = this.table.options.dataLoaderError.trim();\r\n\t\t\t\tthis.errorElement = template.firstElementChild;\r\n\t\t\t}else{\r\n\t\t\t\tthis.errorElement = this.table.options.dataLoaderError;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcreateLoaderElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-loader\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tcreateMsgElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tel.classList.add(\"tabulator-loader-msg\");\r\n\t\tel.setAttribute(\"role\", \"alert\");\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tload(data, params, config, replace, silent){\r\n\t\tvar requestNo = ++this.requestOrder;\r\n\r\n\t\tthis.dispatchExternal(\"dataLoading\", data);\r\n\r\n\t\t//parse json data to array\r\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\r\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\r\n\t\t\tthis.loading = true;\r\n\r\n\t\t\tif(!silent){\r\n\t\t\t\tthis.showLoader();\r\n\t\t\t}\r\n\r\n\t\t\t//get params for request\r\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\r\n\r\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\r\n\r\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], Promise.resolve([]));\r\n\r\n\t\t\treturn result.then((response) => {\r\n\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\r\n\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar rowData = this.chain(\"data-loaded\", response, null, response);\r\n\r\n\t\t\t\tif(requestNo == this.requestOrder){\r\n\t\t\t\t\tthis.hideLoader();\r\n\r\n\t\t\t\t\tif(rowData !== false){\r\n\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\r\n\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, !replace);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\r\n\t\t\t\t}\r\n\t\t\t}).catch((error) => {\r\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\r\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\r\n\r\n\t\t\t\tif(!silent){\r\n\t\t\t\t\tthis.showError();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.hideLoader();\r\n\t\t\t\t}, 3000);\r\n\t\t\t})\r\n\t\t\t.finally(() => {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\r\n\r\n\t\t\tif(!data){\r\n\t\t\t\tdata = [];\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.rowManager.setData(data, replace, !replace);\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t}\r\n\r\n\tmapParams(params, map){\r\n\t\tvar output = {};\r\n\r\n\t\tfor(let key in params){\r\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tobjectInvert(obj){\r\n\t\tvar output = {};\r\n\r\n\t\tfor(let key in obj){\r\n\t\t\toutput[obj[key]] = key;\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\tblockActiveLoad(){\r\n\t\tthis.requestOrder++;\r\n\t}\r\n\r\n\tshowLoader(){\r\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\r\n\r\n\t\tif(shouldLoad){\r\n\t\t\tthis.hideLoader();\r\n\r\n\t\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\r\n\r\n\t\t\tthis.msgElement.classList.remove(\"tabulator-error\");\r\n\t\t\tthis.msgElement.classList.add(\"tabulator-loading\");\r\n\r\n\t\t\tif(this.loadingElement){\r\n\t\t\t\tthis.msgElement.appendChild(this.loadingElement);\r\n\t\t\t}else{\r\n\t\t\t\tthis.msgElement.innerHTML = this.langText(\"data|loading\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.table.element.appendChild(this.loaderElement);\r\n\t\t}\r\n\t}\r\n\r\n\tshowError(){\r\n\t\tthis.hideLoader();\r\n\r\n\t\twhile(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\r\n\t\tthis.msgElement.classList.remove(\"tabulator-loading\");\r\n\t\tthis.msgElement.classList.add(\"tabulator-error\");\r\n\r\n\t\tif(this.errorElement){\r\n\t\t\tthis.msgElement.appendChild(this.errorElement);\r\n\t\t}else{\r\n\t\t\tthis.msgElement.innerHTML = this.langText(\"data|error\");\r\n\t\t}\r\n\r\n\t\tthis.table.element.appendChild(this.loaderElement);\r\n\t}\r\n\r\n\r\n\thideLoader(){\r\n\t\tif(this.loaderElement.parentNode){\r\n\t\t\tthis.loaderElement.parentNode.removeChild(this.loaderElement);\r\n\t\t}\r\n\t}\r\n}", "export default class ExternalEventBus {\r\n\r\n\tconstructor(table, optionsList, debug){\r\n\t\tthis.table = table;\r\n\t\tthis.events = {};\r\n\t\tthis.optionsList = optionsList || {};\r\n\t\tthis.subscriptionNotifiers = {};\r\n\r\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\r\n\t\tthis.debug = debug;\r\n\t}\r\n\r\n\tsubscriptionChange(key, callback){\r\n\t\tif(!this.subscriptionNotifiers[key]){\r\n\t\t\tthis.subscriptionNotifiers[key] = [];\r\n\t\t}\r\n\r\n\t\tthis.subscriptionNotifiers[key].push(callback);\r\n\r\n\t\tif(this.subscribed(key)){\r\n\t\t\tthis._notifiySubscriptionChange(key, true);\r\n\t\t}\r\n\t}\r\n\r\n\tsubscribe(key, callback){\r\n\t\tif(!this.events[key]){\r\n\t\t\tthis.events[key] = [];\r\n\t\t}\r\n\r\n\t\tthis.events[key].push(callback);\r\n\r\n\t\tthis._notifiySubscriptionChange(key, true);\r\n\t}\r\n\r\n\tunsubscribe(key, callback){\r\n\t\tvar index;\r\n\r\n\t\tif(this.events[key]){\r\n\t\t\tif(callback){\r\n\t\t\t\tindex = this.events[key].findIndex((item) => {\r\n\t\t\t\t\treturn item === callback;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tthis.events[key].splice(index, 1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdelete this.events[key];\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._notifiySubscriptionChange(key, false);\r\n\t}\r\n\r\n\tsubscribed(key){\r\n\t\treturn this.events[key] && this.events[key].length;\r\n\t}\r\n\r\n\t_notifiySubscriptionChange(key, subscribed){\r\n\t\tvar notifiers = this.subscriptionNotifiers[key];\r\n\r\n\t\tif(notifiers){\r\n\t\t\tnotifiers.forEach((callback)=>{\r\n\t\t\t\tcallback(subscribed);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_dispatch(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args.shift(),\r\n\t\tresult;\r\n\r\n\t\tif(this.events[key]){\r\n\t\t\tthis.events[key].forEach((callback, i) => {\r\n\t\t\t\tlet callResult = callback.apply(this.table, args);\r\n\r\n\t\t\t\tif(!i){\r\n\t\t\t\t\tresult = callResult;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t_debugDispatch(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args[0];\r\n\r\n\t\targs[0] = \"ExternalEvent:\" + args[0];\r\n\r\n\t\tif(this.debug === true || this.debug.includes(key)){\r\n\t\t\tconsole.log(...args);\r\n\t\t}\r\n\r\n\t\treturn this._dispatch(...arguments)\r\n\t}\r\n}", "export default class InternalEventBus {\r\n\r\n\tconstructor(debug){\r\n\t\tthis.events = {};\r\n\t\tthis.subscriptionNotifiers = {};\r\n\r\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\r\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\r\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\r\n\t\tthis.debug = debug;\r\n\t}\r\n\r\n\tsubscriptionChange(key, callback){\r\n\t\tif(!this.subscriptionNotifiers[key]){\r\n\t\t\tthis.subscriptionNotifiers[key] = [];\r\n\t\t}\r\n\r\n\t\tthis.subscriptionNotifiers[key].push(callback);\r\n\r\n\t\tif(this.subscribed(key)){\r\n\t\t\tthis._notifiySubscriptionChange(key, true);\r\n\t\t}\r\n\t}\r\n\r\n\tsubscribe(key, callback, priority = 10000){\r\n\t\tif(!this.events[key]){\r\n\t\t\tthis.events[key] = [];\r\n\t\t}\r\n\r\n\t\tthis.events[key].push({callback, priority});\r\n\r\n\t\tthis.events[key].sort((a, b) => {\r\n\t\t\treturn a.priority - b.priority;\r\n\t\t});\r\n\r\n\t\tthis._notifiySubscriptionChange(key, true);\r\n\t}\r\n\r\n\tunsubscribe(key, callback){\r\n\t\tvar index;\r\n\r\n\t\tif(this.events[key]){\r\n\t\t\tif(callback){\r\n\t\t\t\tindex = this.events[key].findIndex((item) => {\r\n\t\t\t\t\treturn item.callback === callback;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\tthis.events[key].splice(index, 1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._notifiySubscriptionChange(key, false);\r\n\t}\r\n\r\n\tsubscribed(key){\r\n\t\treturn this.events[key] && this.events[key].length;\r\n\t}\r\n\r\n\t_chain(key, args, initialValue, fallback){\r\n\t\tvar value = initialValue;\r\n\r\n\t\tif(!Array.isArray(args)){\r\n\t\t\targs = [args];\r\n\t\t}\r\n\r\n\t\tif(this.subscribed(key)){\r\n\t\t\tthis.events[key].forEach((subscriber, i) => {\r\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\r\n\t\t\t});\r\n\r\n\t\t\treturn value;\r\n\t\t}else{\r\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\r\n\t\t}\r\n\t}\r\n\r\n\t_confirm(key, args){\r\n\t\tvar confirmed = false;\r\n\r\n\t\tif(!Array.isArray(args)){\r\n\t\t\targs = [args];\r\n\t\t}\r\n\r\n\t\tif(this.subscribed(key)){\r\n\t\t\tthis.events[key].forEach((subscriber, i) => {\r\n\t\t\t\tif(subscriber.callback.apply(this, args)){\r\n\t\t\t\t\tconfirmed = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn confirmed;\r\n\t}\r\n\r\n\t_notifiySubscriptionChange(key, subscribed){\r\n\t\tvar notifiers = this.subscriptionNotifiers[key];\r\n\r\n\t\tif(notifiers){\r\n\t\t\tnotifiers.forEach((callback)=>{\r\n\t\t\t\tcallback(subscribed);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_dispatch(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args.shift();\r\n\r\n\t\tif(this.events[key]){\r\n\t\t\tthis.events[key].forEach((subscriber) => {\r\n\t\t\t\tlet callResult = subscriber.callback.apply(this, args);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t_debugDispatch(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args[0];\r\n\r\n\t\targs[0] = \"InternalEvent:\" + key;\r\n\r\n\t\tif(this.debug === true || this.debug.includes(key)){\r\n\t\t\tconsole.log(...args);\r\n\t\t}\r\n\r\n\t\treturn this._dispatch(...arguments);\r\n\t}\r\n\r\n\t_debugChain(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args[0];\r\n\r\n\t\targs[0] = \"InternalEvent:\" + key;\r\n\r\n\t\tif(this.debug === true || this.debug.includes(key)){\r\n\t\t\tconsole.log(...args);\r\n\t\t}\r\n\r\n\t\treturn this._chain(...arguments);\r\n\t}\r\n\r\n\t_debugConfirm(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args[0];\r\n\r\n\t\targs[0] = \"InternalEvent:\" + key;\r\n\r\n\t\tif(this.debug === true || this.debug.includes(key)){\r\n\t\t\tconsole.log(...args);\r\n\t\t}\r\n\r\n\t\treturn this._confirm(...arguments);\r\n\t}\r\n}", "import Tabulator from '../Tabulator.js';\r\n\r\nclass TableRegistry {\r\n\r\n\tstatic register(table){\r\n\t\tTableRegistry.tables.push(table);\r\n\t}\r\n\r\n\tstatic deregister(table){\r\n\t\tvar index = TableRegistry.tables.indexOf(table);\r\n\r\n\t\tif(index > -1){\r\n\t\t\tTableRegistry.tables.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\tstatic lookupTable(query, silent){\r\n\t\tvar results = [],\r\n\t\tmatches, match;\r\n\r\n\t\tif(typeof query === \"string\"){\r\n\t\t\tmatches = document.querySelectorAll(query);\r\n\r\n\t\t\tif(matches.length){\r\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\r\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\r\n\r\n\t\t\t\t\tif(match){\r\n\t\t\t\t\t\tresults.push(match);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\r\n\t\t\tmatch = TableRegistry.matchElement(query);\r\n\r\n\t\t\tif(match){\r\n\t\t\t\tresults.push(match);\r\n\t\t\t}\r\n\t\t}else if(Array.isArray(query)){\r\n\t\t\tquery.forEach(function(item){\r\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tif(!silent){\r\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tstatic matchElement(element){\r\n\t\treturn TableRegistry.tables.find(function(table){\r\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nTableRegistry.tables = [];\r\n\r\nexport default TableRegistry;", "//resize columns to fit data they contain\r\nexport default function(columns){\r\n\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n};", "//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\r\nexport default function(columns){\r\n\tcolumns.forEach(function(column){\r\n\t\tcolumn.reinitializeWidth();\r\n\t});\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n};", "//resize columns to fit data the contain and stretch last column to fill table\r\nexport default function(columns){\r\n\tvar colsWidth = 0,\r\n\ttableWidth = this.table.rowManager.element.clientWidth,\r\n\tgap = 0,\r\n\tlastCol = false;\r\n\r\n\tcolumns.forEach((column, i) => {\r\n\t\tif(!column.widthFixed){\r\n\t\t\tcolumn.reinitializeWidth();\r\n\t\t}\r\n\r\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\r\n\t\t\tlastCol = column;\r\n\t\t}\r\n\r\n\t\tif(column.visible){\r\n\t\t\tcolsWidth += column.getWidth();\r\n\t\t}\r\n\t});\r\n\r\n\tif(lastCol){\r\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\r\n\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tlastCol.setWidth(0);\r\n\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t}\r\n\r\n\t\tif(gap > 0){\r\n\t\t\tlastCol.setWidth(gap);\r\n\t\t}else{\r\n\t\t\tlastCol.reinitializeWidth();\r\n\t\t}\r\n\t}else{\r\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\t\tthis.table.modules.responsiveLayout.update();\r\n\t\t}\r\n\t}\r\n};", "//resize columns to fit\r\nexport default function(columns){\r\n\tvar totalWidth = this.table.element.clientWidth; //table element width\r\n\tvar fixedWidth = 0; //total width of columns with a defined width\r\n\tvar flexWidth = 0; //total width available to flexible columns\r\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\r\n\tvar flexColWidth = 0; //desired width of flexible columns\r\n\tvar flexColumns = []; //array of flexible width columns\r\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\r\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\r\n\tvar overflowWidth = 0; //horizontal overflow width\r\n\tvar gapFill=0; //number of pixels to be added to final column to close and half pixel gaps\r\n\r\n\tfunction calcWidth(width){\r\n\t\tvar colWidth;\r\n\r\n\t\tif(typeof(width) == \"string\"){\r\n\t\t\tif(width.indexOf(\"%\") > -1){\r\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\r\n\t\t\t}else{\r\n\t\t\t\tcolWidth = parseInt(width);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcolWidth = width;\r\n\t\t}\r\n\r\n\t\treturn colWidth;\r\n\t}\r\n\r\n\t//ensure columns resize to take up the correct amount of space\r\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\r\n\r\n\t\tvar oversizeCols = [],\r\n\t\toversizeSpace = 0,\r\n\t\tremainingSpace = 0,\r\n\t\tnextColWidth = 0,\r\n\t\tremainingFlexGrowUnits = flexGrowUnits,\r\n\t\tgap = 0,\r\n\t\tchangeUnits = 0,\r\n\t\tundersizeCols = [];\r\n\r\n\t\tfunction calcGrow(col){\r\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\r\n\t\t}\r\n\r\n\t\tfunction calcShrink(col){\r\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)))\r\n\t\t}\r\n\r\n\t\tcolumns.forEach(function(col, i){\r\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\r\n\t\t\tif(col.column.minWidth >= width){\r\n\t\t\t\toversizeCols.push(col);\r\n\t\t\t}else{\r\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\r\n\t\t\t\t\tcol.width = col.column.maxWidth;\r\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\r\n\r\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\r\n\r\n\t\t\t\t\tif(remainingFlexGrowUnits){\r\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tundersizeCols.push(col);\r\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(oversizeCols.length){\r\n\t\t\toversizeCols.forEach(function(col){\r\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\r\n\t\t\t\tcol.width = col.column.minWidth;\r\n\t\t\t});\r\n\r\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\r\n\r\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\r\n\r\n\t\t\tgap = remainingSpace - (nextColWidth * changeUnits);\r\n\r\n\t\t\tgap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\r\n\t\t}else{\r\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\r\n\r\n\t\t\tundersizeCols.forEach(function(column){\r\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn gap;\r\n\t}\r\n\r\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\r\n\t\tthis.table.modules.responsiveLayout.update();\r\n\t}\r\n\r\n\t//adjust for vertical scrollbar if present\r\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\r\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\r\n\t}\r\n\r\n\tcolumns.forEach(function(column){\r\n\t\tvar width, minWidth, colWidth;\r\n\r\n\t\tif(column.visible){\r\n\r\n\t\t\twidth = column.definition.width;\r\n\t\t\tminWidth =  parseInt(column.minWidth);\r\n\r\n\t\t\tif(width){\r\n\r\n\t\t\t\tcolWidth = calcWidth(width);\r\n\r\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\r\n\r\n\t\t\t\tif(column.definition.widthShrink){\r\n\t\t\t\t\tfixedShrinkColumns.push({\r\n\t\t\t\t\t\tcolumn:column,\r\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\r\n\t\t\t\t\t});\r\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\r\n\t\t\t\t}\r\n\r\n\t\t\t}else{\r\n\t\t\t\tflexColumns.push({\r\n\t\t\t\t\tcolumn:column,\r\n\t\t\t\t\twidth:0,\r\n\t\t\t\t});\r\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//calculate available space\r\n\tflexWidth = totalWidth - fixedWidth;\r\n\r\n\t//calculate correct column size\r\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits)\r\n\r\n\t//generate column widths\r\n\tvar gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\r\n\r\n\t//increase width of last column to account for rounding errors\r\n\tif(flexColumns.length && gapFill > 0){\r\n\t\tflexColumns[flexColumns.length-1].width += + gapFill;\r\n\t}\r\n\r\n\t//caculate space for columns to be shrunk into\r\n\tflexColumns.forEach(function(col){\r\n\t\tflexWidth -= col.width;\r\n\t});\r\n\r\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\r\n\r\n\t//shrink oversize columns if there is no available space\r\n\tif(overflowWidth > 0 && flexShrinkUnits){\r\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\r\n\t}\r\n\r\n\t//decrease width of last column to account for rounding errors\r\n\tif(fixedShrinkColumns.length){\r\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\r\n\t}\r\n\r\n\tflexColumns.forEach(function(col){\r\n\t\tcol.column.setWidth(col.width);\r\n\t});\r\n\r\n\tfixedShrinkColumns.forEach(function(col){\r\n\t\tcol.column.setWidth(col.width);\r\n\t});\r\n};", "import fitData from './modes/fitData.js';\r\nimport fitDataGeneral from './modes/fitDataGeneral.js';\r\nimport fitDataStretch from './modes/fitDataStretch.js';\r\nimport fitColumns from './modes/fitColumns.js';\r\n\r\nexport default {\r\n\tfitData:fitData,\r\n\tfitDataFill:fitDataGeneral,\r\n\tfitDataTable:fitDataGeneral,\r\n\tfitDataStretch:fitDataStretch,\r\n\tfitColumns:fitColumns ,\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport defaultModes from './defaults/modes.js';\r\n\r\nclass Layout extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table, \"layout\");\r\n\r\n\t\tthis.mode = null;\r\n\r\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\r\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\r\n\r\n\t\tthis.registerColumnOption(\"widthGrow\");\r\n\t\tthis.registerColumnOption(\"widthShrink\");\r\n\t}\r\n\r\n\t//initialize layout system\r\n\tinitialize(){\r\n\t\tvar layout = this.table.options.layout;\r\n\r\n\t\tif(Layout.modes[layout]){\r\n\t\t\tthis.mode = layout;\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\r\n\t\t\tthis.mode = 'fitData';\r\n\t\t}\r\n\r\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\r\n\t}\r\n\r\n\tgetMode(){\r\n\t\treturn this.mode;\r\n\t}\r\n\r\n\t//trigger table layout\r\n\tlayout(){\r\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\r\n\r\n\t\tthis.dispatch(\"layout-refreshed\")\r\n\t}\r\n}\r\n\r\nLayout.moduleName = \"layout\";\r\n\r\n//load defaults\r\nLayout.modes = defaultModes;\r\n\r\nexport default Layout;", "export default {\r\n\t\"default\":{ //hold default locale text\r\n\t\t\"groups\":{\r\n\t\t\t\"item\":\"item\",\r\n\t\t\t\"items\":\"items\",\r\n\t\t},\r\n\t\t\"columns\":{\r\n\t\t},\r\n\t\t\"data\":{\r\n\t\t\t\"loading\":\"Loading\",\r\n\t\t\t\"error\":\"Error\",\r\n\t\t},\r\n\t\t\"pagination\":{\r\n\t\t\t\"page_size\":\"Page Size\",\r\n\t\t\t\"page_title\":\"Show Page\",\r\n\t\t\t\"first\":\"First\",\r\n\t\t\t\"first_title\":\"First Page\",\r\n\t\t\t\"last\":\"Last\",\r\n\t\t\t\"last_title\":\"Last Page\",\r\n\t\t\t\"prev\":\"Prev\",\r\n\t\t\t\"prev_title\":\"Prev Page\",\r\n\t\t\t\"next\":\"Next\",\r\n\t\t\t\"next_title\":\"Next Page\",\r\n\t\t\t\"all\":\"All\",\r\n\t\t},\r\n\t\t\"headerFilters\":{\r\n\t\t\t\"default\":\"filter column...\",\r\n\t\t\t\"columns\":{}\r\n\t\t}\r\n\t},\r\n};", "import Module from '../../core/Module.js';\r\n\r\nimport Helpers from '../../core/tools/Helpers.js';\r\n\r\nimport defaultLangs from './defaults/langs.js';\r\n\r\nclass Localize extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\r\n\t\tthis.locale = \"default\"; //current locale\r\n\t\tthis.lang = false; //current language\r\n\t\tthis.bindings = {}; //update events to call when locale is changed\r\n\t\tthis.langList = {};\r\n\r\n\t\tthis.registerTableOption(\"locale\", false); //current system language\r\n\t\tthis.registerTableOption(\"langs\", {});\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\r\n\r\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\r\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\r\n\t\t}\r\n\r\n\t\tfor(let locale in this.table.options.langs){\r\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\r\n\t\t}\r\n\r\n\t\tthis.setLocale(this.table.options.locale);\r\n\r\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\r\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\r\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\r\n\t}\r\n\r\n\t//set header placehoder\r\n\tsetHeaderFilterPlaceholder(placeholder){\r\n\t\tthis.langList.default.headerFilters.default = placeholder;\r\n\t}\r\n\r\n\t//set header filter placeholder by column\r\n\tsetHeaderFilterColumnPlaceholder(column, placeholder){\r\n\t\tthis.langList.default.headerFilters.columns[column] = placeholder;\r\n\r\n\t\tif(this.lang && !this.lang.headerFilters.columns[column]){\r\n\t\t\tthis.lang.headerFilters.columns[column] = placeholder;\r\n\t\t}\r\n\t}\r\n\r\n\t//setup a lang description object\r\n\tinstallLang(locale, lang){\r\n\t\tif(this.langList[locale]){\r\n\t\t\tthis._setLangProp(this.langList[locale], lang);\r\n\t\t}else{\r\n\t\t\tthis.langList[locale] = lang;\r\n\t\t}\r\n\t}\r\n\r\n\t_setLangProp(lang, values){\r\n\t\tfor(let key in values){\r\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\r\n\t\t\t\tthis._setLangProp(lang[key], values[key])\r\n\t\t\t}else{\r\n\t\t\t\tlang[key] = values[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//set current locale\r\n\tsetLocale(desiredLocale){\r\n\t\tdesiredLocale = desiredLocale || \"default\";\r\n\r\n\t\t//fill in any matching languge values\r\n\t\tfunction traverseLang(trans, path){\r\n\t\t\tfor(var prop in trans){\r\n\t\t\t\tif(typeof trans[prop] == \"object\"){\r\n\t\t\t\t\tif(!path[prop]){\r\n\t\t\t\t\t\tpath[prop] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tpath[prop] = trans[prop];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//determing correct locale to load\r\n\t\tif(desiredLocale === true && navigator.language){\r\n\t\t\t//get local from system\r\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\r\n\t\t}\r\n\r\n\t\tif(desiredLocale){\r\n\t\t\t//if locale is not set, check for matching top level locale else use default\r\n\t\t\tif(!this.langList[desiredLocale]){\r\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\r\n\r\n\t\t\t\tif(this.langList[prefix]){\r\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\r\n\t\t\t\t\tdesiredLocale = prefix;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\r\n\t\t\t\t\tdesiredLocale = \"default\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.locale = desiredLocale;\r\n\r\n\t\t//load default lang template\r\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\r\n\r\n\t\tif(desiredLocale != \"default\"){\r\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\r\n\t\t}\r\n\r\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\r\n\r\n\t\tthis._executeBindings();\r\n\t}\r\n\r\n\t//get current locale\r\n\tgetLocale(locale){\r\n\t\treturn this.locale;\r\n\t}\r\n\r\n\t//get lang object for given local or current if none provided\r\n\tgetLang(locale){\r\n\t\treturn locale ? this.langList[locale] : this.lang;\r\n\t}\r\n\r\n\t//get text for current locale\r\n\tgetText(path, value){\r\n\t\tvar path = value ? path + \"|\" + value : path,\r\n\t\tpathArray = path.split(\"|\"),\r\n\t\ttext = this._getLangElement(pathArray, this.locale);\r\n\r\n\t\t// if(text === false){\r\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\r\n\t\t// }\r\n\r\n\t\treturn text || \"\";\r\n\t}\r\n\r\n\t//traverse langs object and find localized copy\r\n\t_getLangElement(path, locale){\r\n\t\tvar root = this.lang;\r\n\r\n\t\tpath.forEach(function(level){\r\n\t\t\tvar rootPath;\r\n\r\n\t\t\tif(root){\r\n\t\t\t\trootPath = root[level];\r\n\r\n\t\t\t\tif(typeof rootPath != \"undefined\"){\r\n\t\t\t\t\troot = rootPath;\r\n\t\t\t\t}else{\r\n\t\t\t\t\troot = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn root;\r\n\t}\r\n\r\n\t//set update binding\r\n\tbind(path, callback){\r\n\t\tif(!this.bindings[path]){\r\n\t\t\tthis.bindings[path] = [];\r\n\t\t}\r\n\r\n\t\tthis.bindings[path].push(callback);\r\n\r\n\t\tcallback(this.getText(path), this.lang);\r\n\t}\r\n\r\n\t//itterate through bindings and trigger updates\r\n\t_executeBindings(){\r\n\t\tfor(let path in this.bindings){\r\n\t\t\tthis.bindings[path].forEach((binding) => {\r\n\t\t\t\tbinding(this.getText(path), this.lang);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nLocalize.moduleName = \"localize\";\r\n\r\n//load defaults\r\nLocalize.langs = defaultLangs;\r\n\r\nexport default Localize;", "import Module from '../../core/Module.js';\r\nimport TableRegistry from '../../core/tools/TableRegistry.js';\r\n\r\nclass Comms extends Module{\r\n\r\n\tconstructor(table){\r\n\t\tsuper(table);\r\n\t}\r\n\r\n\tinitialize(){\r\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\r\n\t}\r\n\r\n\tgetConnections(selectors){\r\n\t\tvar connections = [],\r\n\t\tconnection;\r\n\r\n\t\tconnection = TableRegistry.lookupTable(selectors);\r\n\r\n\t\tconnection.forEach((con) =>{\r\n\t\t\tif(this.table !== con){\r\n\t\t\t\tconnections.push(con);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn connections;\r\n\t}\r\n\r\n\tsend(selectors, module, action, data){\r\n\t\tvar connections = this.getConnections(selectors);\r\n\r\n\t\tconnections.forEach((connection) => {\r\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\r\n\t\t});\r\n\r\n\t\tif(!connections.length && selectors){\r\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\r\n\t\t}\r\n\t}\r\n\r\n\treceive(table, module, action, data){\r\n\t\tif(this.table.modExists(module)){\r\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nComms.moduleName = \"comms\";\r\n\r\nexport default Comms;", "import * as coreModules from '../modules/core.js';\r\nimport TableRegistry from './TableRegistry.js';\r\n\r\nexport default class ModuleBinder {\r\n\r\n\tconstructor(tabulator, modules){\r\n\t\tthis.bindStaticFuctionality(tabulator);\r\n\t\tthis.bindModules(tabulator, coreModules, true);\r\n\r\n\t\tif(modules){\r\n\t\t\tthis.bindModules(tabulator, modules);\r\n\t\t}\r\n\t}\r\n\r\n\tbindStaticFuctionality(tabulator){\r\n\t\ttabulator.moduleBindings = {};\r\n\r\n\t\ttabulator.extendModule = function(name, property, values){\r\n\t\t\tif(tabulator.moduleBindings[name]){\r\n\t\t\t\tvar source = tabulator.moduleBindings[name][property];\r\n\r\n\t\t\t\tif(source){\r\n\t\t\t\t\tif(typeof values == \"object\"){\r\n\t\t\t\t\t\tfor(let key in values){\r\n\t\t\t\t\t\t\tsource[key] = values[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\ttabulator.registerModule = function(modules){\r\n\t\t\tif(!Array.isArray(modules)){\r\n\t\t\t\tmodules = [modules];\r\n\t\t\t}\r\n\r\n\t\t\tmodules.forEach((mod) => {\r\n\t\t\t\ttabulator.registerModuleBinding(mod)\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\ttabulator.registerModuleBinding = function(mod){\r\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\r\n\t\t};\r\n\r\n\t\ttabulator.findTable = function(query){\r\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\r\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\r\n\t\t}\r\n\r\n\t\t//ensure that module are bound to instantiated function\r\n\t\ttabulator.prototype.bindModules = function(){\r\n\t\t\tthis.modules = {};\r\n\r\n\t\t\tfor(var name in tabulator.moduleBindings){\r\n\t\t\t\tlet mod = tabulator.moduleBindings[name];\r\n\r\n\t\t\t\tthis.modules[name] = new mod(this);\r\n\r\n\t\t\t\tif(mod.prototype.moduleCore){\r\n\t\t\t\t\tthis.modulesCore[name] = this.modules[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.modulesRegular[name] = this.modules[name];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tbindModules(tabulator, modules, core){\r\n\t\tvar mods = Object.values(modules);\r\n\r\n\t\tif(core){\r\n\t\t\tmods.forEach((mod) => {\r\n\t\t\t\tmod.prototype.moduleCore = true;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\ttabulator.registerModule(mods);\r\n\t}\r\n}", "'use strict';\r\n\r\nimport defaultOptions from './defaults/options.js';\r\n\r\nimport ColumnManager from './ColumnManager.js';\r\nimport RowManager from './RowManager.js';\r\nimport FooterManager from './FooterManager.js';\r\n\r\nimport InteractionMonitor from './tools/InteractionMonitor.js';\r\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js';\r\nimport DataLoader from './tools/DataLoader.js';\r\n\r\nimport ExternalEventBus from './tools/ExternalEventBus.js';\r\nimport InternalEventBus from './tools/InternalEventBus.js';\r\n\r\nimport TableRegistry from './tools/TableRegistry.js';\r\nimport ModuleBinder from './tools/ModuleBinder.js';\r\n\r\nimport OptionsList from './tools/OptionsList.js';\r\n\r\nclass Tabulator {\r\n\r\n\tconstructor(element, options){\r\n\r\n\t\tthis.options = {};\r\n\r\n\t\tthis.columnManager = null; // hold Column Manager\r\n\t\tthis.rowManager = null; //hold Row Manager\r\n\t\tthis.footerManager = null; //holder Footer Manager\r\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\r\n\t\tthis.externalEvents = null; //handle external event messaging\r\n\t\tthis.eventBus = null; //handle internal event messaging\r\n\t\tthis.interactionMonitor = false; //track user interaction\r\n\t\tthis.browser = \"\"; //hold current browser type\r\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\r\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\r\n\t\tthis.rtl = false; //check if the table is in RTL mode\r\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\r\n\r\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\r\n\t\tthis.dataLoader = false; //bind component functions\r\n\r\n\t\tthis.modules = {}; //hold all modules bound to this table\r\n\t\tthis.modulesCore = {}; //hold core modules bound to this table (for initialization purposes)\r\n\t\tthis.modulesRegular = {}; //hold regular modules bound to this table (for initialization purposes)\r\n\r\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\r\n\r\n\t\tthis.initialized = false;\r\n\r\n\t\tif(this.initializeElement(element)){\r\n\r\n\t\t\tthis.initialzeCoreSystems(options);\r\n\r\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._create();\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tTableRegistry.register(this); //register table for inter-device communication\r\n\t}\r\n\r\n\tinitializeElement(element){\r\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\r\n\t\t\tthis.element = element;\r\n\t\t\treturn true;\r\n\t\t}else if(typeof element === \"string\"){\r\n\t\t\tthis.element = document.querySelector(element);\r\n\r\n\t\t\tif(this.element){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tinitialzeCoreSystems(options){\r\n\t\tthis.columnManager = new ColumnManager(this);\r\n\t\tthis.rowManager = new RowManager(this);\r\n\t\tthis.footerManager = new FooterManager(this);\r\n\t\tthis.dataLoader = new DataLoader(this);\r\n\r\n\t\tthis.bindModules();\r\n\r\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options)\r\n\r\n\t\tthis._clearObjectPointers();\r\n\r\n\t\tthis._mapDeprecatedFunctionality();\r\n\r\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\r\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\r\n\r\n\t\tthis.interactionMonitor = new InteractionMonitor(this);\r\n\r\n\t\tthis.dataLoader.initialize();\r\n\t\tthis.columnManager.initialize();\r\n\t\tthis.rowManager.initialize();\r\n\t\tthis.footerManager.initialize();\r\n\t}\r\n\r\n\t//convert deprecated functionality to new functions\r\n\t_mapDeprecatedFunctionality(){\r\n\t\t//all previously deprecated functionality removed in the 5.0 release\r\n\t}\r\n\r\n\t_clearSelection(){\r\n\r\n\t\tthis.element.classList.add(\"tabulator-block-select\");\r\n\r\n\t\tif (window.getSelection) {\r\n\t\t  if (window.getSelection().empty) {  // Chrome\r\n\t\t  \twindow.getSelection().empty();\r\n\t\t  } else if (window.getSelection().removeAllRanges) {  // Firefox\r\n\t\t  \twindow.getSelection().removeAllRanges();\r\n\t\t  }\r\n\t\t} else if (document.selection) {  // IE?\r\n\t\t\tdocument.selection.empty();\r\n\t\t}\r\n\r\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\r\n\t}\r\n\r\n\t//create table\r\n\t_create(){\r\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\r\n\t\tthis.eventBus.dispatch(\"table-building\");\r\n\r\n\t\tthis._rtlCheck();\r\n\r\n\t\tthis._buildElement();\r\n\r\n\t\tthis._initializeTable();\r\n\r\n\t\tthis._loadInitialData();\r\n\r\n\t\tthis.initialized = true;\r\n\r\n\t\tthis.externalEvents.dispatch(\"tableBuilt\");\r\n\t}\r\n\r\n\t_rtlCheck(){\r\n\t\tvar style = window.getComputedStyle(this.element);\r\n\r\n\t\tswitch(this.options.textDirection){\r\n\t\t\tcase\"auto\":\r\n\t\t\tif(style.direction !== \"rtl\"){\r\n\t\t\t\tbreak;\r\n\t\t\t};\r\n\r\n\t\t\tcase \"rtl\":\r\n\t\t\tthis.element.classList.add(\"tabulator-rtl\");\r\n\t\t\tthis.rtl = true;\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase \"ltr\":\r\n\t\t\tthis.element.classList.add(\"tabulator-ltr\");\r\n\r\n\t\t\tdefault:\r\n\t\t\tthis.rtl = false;\r\n\t\t}\r\n\t}\r\n\r\n\t//clear pointers to objects in default config object\r\n\t_clearObjectPointers(){\r\n\t\tthis.options.columns = this.options.columns.slice(0);\r\n\r\n\t\tif(this.options.data && !this.options.reactiveData){\r\n\t\t\tthis.options.data = this.options.data.slice(0);\r\n\t\t}\r\n\t}\r\n\r\n\t//build tabulator element\r\n\t_buildElement(){\r\n\t\tvar element = this.element,\r\n\t\toptions = this.options,\r\n\t\tnewElement;\r\n\r\n\t\tif(element.tagName === \"TABLE\"){\r\n\t\t\tthis.originalElement = this.element;\r\n\t\t\tnewElement = document.createElement(\"div\");\r\n\r\n\t\t\t//transfer attributes to new element\r\n\t\t\tvar attributes = element.attributes;\r\n\r\n\t\t\t// loop through attributes and apply them on div\r\n\t\t\tfor(var i in attributes){\r\n\t\t\t\tif(typeof attributes[i] == \"object\"){\r\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// replace table with div element\r\n\t\t\telement.parentNode.replaceChild(newElement, element);\r\n\r\n\t\t\tthis.element = element = newElement;\r\n\t\t}\r\n\r\n\t\telement.classList.add(\"tabulator\");\r\n\t\telement.setAttribute(\"role\", \"grid\");\r\n\r\n\t\t//empty element\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\r\n\t\t//set table height\r\n\t\tif(options.height){\r\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\r\n\t\t\telement.style.height = options.height;\r\n\t\t}\r\n\r\n\t\t//set table min height\r\n\t\tif(options.minHeight !== false){\r\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\r\n\t\t\telement.style.minHeight = options.minHeight;\r\n\t\t}\r\n\r\n\t\t//set table maxHeight\r\n\t\tif(options.maxHeight !== false){\r\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\r\n\t\t\telement.style.maxHeight = options.maxHeight;\r\n\t\t}\r\n\t}\r\n\r\n\t//initialize core systems and modules\r\n\t_initializeTable(){\r\n\t\tvar element = this.element,\r\n\t\toptions = this.options;\r\n\r\n\t\tthis.interactionMonitor.initialize();\r\n\r\n\t\tthis.columnManager.initialize();\r\n\t\tthis.rowManager.initialize();\r\n\r\n\t\tthis._detectBrowser();\r\n\r\n\t\t//initialize core modules\r\n\t\tfor (let key in this.modulesCore){\r\n\t\t\tlet mod = this.modulesCore[key];\r\n\r\n\t\t\tmod.initialize();\r\n\t\t}\r\n\r\n\t\t//configure placeholder element\r\n\t\tif(typeof options.placeholder == \"string\"){\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.classList.add(\"tabulator-placeholder\");\r\n\r\n\t\t\tvar span = document.createElement(\"span\");\r\n\t\t\tspan.innerHTML = options.placeholder;\r\n\r\n\t\t\tel.appendChild(span);\r\n\r\n\t\t\toptions.placeholder = el;\r\n\t\t}\r\n\r\n\t\t//build table elements\r\n\t\telement.appendChild(this.columnManager.getElement());\r\n\t\telement.appendChild(this.rowManager.getElement());\r\n\r\n\t\tif(options.footerElement){\r\n\t\t\tthis.footerManager.activate();\r\n\t\t}\r\n\r\n\t\tif(options.autoColumns && options.data){\r\n\r\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\r\n\t\t}\r\n\r\n\t\t//initialize regular modules\r\n\t\tfor (let key in this.modulesRegular){\r\n\t\t\tlet mod = this.modulesRegular[key];\r\n\r\n\t\t\tmod.initialize();\r\n\t\t}\r\n\r\n\t\tthis.columnManager.setColumns(options.columns);\r\n\r\n\t\tthis.eventBus.dispatch(\"table-built\");\r\n\t}\r\n\r\n\t_loadInitialData(){\r\n\t\tthis.dataLoader.load(this.options.data);\r\n\t}\r\n\r\n\t//deconstructor\r\n\tdestroy(){\r\n\t\tvar element = this.element;\r\n\r\n\t\tTableRegistry.deregister(this); //deregister table from inter-device communication\r\n\r\n\t\tthis.eventBus.dispatch(\"table-destroy\");\r\n\r\n\t\t//clear row data\r\n\t\tthis.rowManager.rows.forEach(function(row){\r\n\t\t\trow.wipe();\r\n\t\t});\r\n\r\n\t\tthis.rowManager.rows = [];\r\n\t\tthis.rowManager.activeRows = [];\r\n\t\tthis.rowManager.displayRows = [];\r\n\r\n\t\t//clear DOM\r\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\r\n\t\telement.classList.remove(\"tabulator\");\r\n\t}\r\n\r\n\t_detectBrowser(){\r\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\r\n\r\n\t\tif(ua.indexOf(\"Trident\") > -1){\r\n\t\t\tthis.browser = \"ie\";\r\n\t\t\tthis.browserSlow = true;\r\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\r\n\t\t\tthis.browser = \"edge\";\r\n\t\t\tthis.browserSlow = true;\r\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\r\n\t\t\tthis.browser = \"firefox\";\r\n\t\t\tthis.browserSlow = false;\r\n\t\t}else{\r\n\t\t\tthis.browser = \"other\";\r\n\t\t\tthis.browserSlow = false;\r\n\t\t}\r\n\r\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.substr(0,4));\r\n\t}\r\n\r\n\t////////////////// Data Handling //////////////////\r\n\t//block table redrawing\r\n\tblockRedraw(){\r\n\t\treturn this.rowManager.blockRedraw();\r\n\t}\r\n\r\n\t//restore table redrawing\r\n\trestoreRedraw(){\r\n\t\treturn this.rowManager.restoreRedraw();\r\n\t}\r\n\r\n\t//local data from local file\r\n\tsetDataFromLocalFile(extensions){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar input = document.createElement(\"input\");\r\n\t\t\tinput.type = \"file\";\r\n\t\t\tinput.accept = extensions || \".json,application/json\";\r\n\r\n\t\t\tinput.addEventListener(\"change\", (e) => {\r\n\t\t\t\tvar file = input.files[0],\r\n\t\t\t\treader = new FileReader(),\r\n\t\t\t\tdata;\r\n\r\n\t\t\t\treader.readAsText(file);\r\n\r\n\t\t\t\treader.onload = (e) => {\r\n\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdata = JSON.parse(reader.result);\r\n\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\tconsole.warn(\"File Load Error - File contents is invalid JSON\", e);\r\n\t\t\t\t\t\treject(e);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.setData(data)\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\tresolve(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tresolve(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\treader.onerror = (e) => {\r\n\t\t\t\t\tconsole.warn(\"File Load Error - Unable to read file\");\r\n\t\t\t\t\treject();\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tinput.click();\r\n\t\t});\r\n\t}\r\n\r\n\t//load data\r\n\tsetData(data, params, config){\r\n\t\tif(this.initialized){\r\n\t\t\treturn this.dataLoader.load(data, params, config, false);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.\")\r\n\t\t}\r\n\t}\r\n\r\n\t//clear data\r\n\tclearData(){\r\n\t\tthis.dataLoader.blockActiveLoad();\r\n\t\tthis.rowManager.clearData();\r\n\t}\r\n\r\n\t//get table data array\r\n\tgetData(active){\r\n\t\treturn this.rowManager.getData(active);\r\n\t}\r\n\r\n\t//get table data array count\r\n\tgetDataCount(active){\r\n\t\treturn this.rowManager.getDataCount(active);\r\n\t}\r\n\r\n\t//replace data, keeping table in position with same sort\r\n\treplaceData(data, params, config){\r\n\t\tif(this.initialized){\r\n\t\t\treturn this.dataLoader.load(data, params, config, true, true);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.\");\r\n\t\t}\r\n\t}\r\n\r\n\t//update table data\r\n\tupdateData(data){\r\n\t\tvar responses = 0;\r\n\r\n\t\tif(this.initialized){\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tthis.dataLoader.blockActiveLoad();\r\n\r\n\t\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\r\n\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\tresponses++;\r\n\r\n\t\t\t\t\t\t\trow.updateData(item)\r\n\t\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\t\tresponses--;\r\n\r\n\t\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.\");\r\n\t\t}\r\n\t}\r\n\r\n\taddData(data, pos, index){\r\n\t\tif(this.initialized){\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tthis.dataLoader.blockActiveLoad();\r\n\r\n\t\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tthis.rowManager.addRows(data, pos, index)\r\n\t\t\t\t\t.then((rows) => {\r\n\t\t\t\t\t\tvar output = [];\r\n\r\n\t\t\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\t\t\toutput.push(row.getComponent());\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tresolve(output);\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.\");\r\n\t\t}\r\n\t}\r\n\r\n\t//update table data\r\n\tupdateOrAddData(data){\r\n\t\tvar rows = [],\r\n\t\tresponses = 0;\r\n\r\n\t\tif(this.initialized){\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tthis.dataLoader.blockActiveLoad();\r\n\r\n\t\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tdata.forEach((item) => {\r\n\t\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\r\n\r\n\t\t\t\t\t\tresponses++;\r\n\r\n\t\t\t\t\t\tif(row){\r\n\t\t\t\t\t\t\trow.updateData(item)\r\n\t\t\t\t\t\t\t.then(()=>{\r\n\t\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\t\trows.push(row.getComponent());\r\n\r\n\t\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\t\tresolve(rows);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.rowManager.addRows(item)\r\n\t\t\t\t\t\t\t.then((newRows)=>{\r\n\t\t\t\t\t\t\t\tresponses--;\r\n\t\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\r\n\r\n\t\t\t\t\t\t\t\tif(!responses){\r\n\t\t\t\t\t\t\t\t\tresolve(rows);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.warn(\"Update Error - No data provided\");\r\n\t\t\t\t\treject(\"Update Error - No data provided\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.\");\r\n\t\t}\r\n\t}\r\n\r\n\t//get row object\r\n\tgetRow(index){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(row){\r\n\t\t\treturn row.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//get row object\r\n\tgetRowFromPosition(position, active){\r\n\t\tvar row = this.rowManager.getRowFromPosition(position, active);\r\n\r\n\t\tif(row){\r\n\t\t\treturn row.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t//delete row from table\r\n\tdeleteRow(index){\r\n\t\tvar foundRows = [];\r\n\r\n\t\tif(!Array.isArray(index)){\r\n\t\t\tindex = [index];\r\n\t\t}\r\n\r\n\t\t//find matching rows\r\n\t\tfor(let item of index){\r\n\t\t\tlet row = this.rowManager.findRow(item, true);\r\n\r\n\t\t\tif(row){\r\n\t\t\t\tfoundRows.push(row);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\r\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\")\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//sort rows into correct order to ensure smooth delete from table\r\n\t\tfoundRows.sort((a, b) => {\r\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\r\n\t\t});\r\n\r\n\t\t//delete rows\r\n\t\tfoundRows.forEach((row) =>{\r\n\t\t\trow.delete()\r\n\t\t});\r\n\r\n\t\tthis.rowManager.reRenderInPosition();\r\n\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\r\n\t//add row to table\r\n\taddRow(data, pos, index){\r\n\t\tif(this.initialized){\r\n\t\t\tif(typeof data === \"string\"){\r\n\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t}\r\n\r\n\t\t\treturn this.rowManager.addRows(data, pos, index)\r\n\t\t\t.then((rows)=>{\r\n\t\t\t\treturn rows[0].getComponent();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.\");\r\n\t\t}\r\n\t}\r\n\r\n\t//update a row if it exitsts otherwise create it\r\n\tupdateOrAddRow(index, data){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\r\n\t\tif(row){\r\n\t\t\treturn row.updateData(data)\r\n\t\t\t.then(()=>{\r\n\t\t\t\treturn row.getComponent();\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\treturn this.rowManager.addRows(data)\r\n\t\t\t.then((rows)=>{\r\n\t\t\t\treturn rows[0].getComponent();\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t//update row data\r\n\tupdateRow(index, data){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(typeof data === \"string\"){\r\n\t\t\tdata = JSON.parse(data);\r\n\t\t}\r\n\r\n\t\tif(row){\r\n\t\t\treturn row.updateData(data)\r\n\t\t\t.then(()=>{\r\n\t\t\t\treturn Promise.resolve(row.getComponent());\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\r\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\r\n\t\t}\r\n\t}\r\n\r\n\t//scroll to row in DOM\r\n\tscrollToRow(index, position, ifVisible){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(row){\r\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\r\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\r\n\t\t}\r\n\t}\r\n\r\n\tmoveRow(from, to, after){\r\n\t\tvar fromRow = this.rowManager.findRow(from);\r\n\r\n\t\tif(fromRow){\r\n\t\t\tfromRow.moveToRow(to, after);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\r\n\t\t}\r\n\t}\r\n\r\n\tgetRows(active){\r\n\t\treturn this.rowManager.getComponents(active);\r\n\t}\r\n\r\n\t//get position of row in table\r\n\tgetRowPosition(index, active){\r\n\t\tvar row = this.rowManager.findRow(index);\r\n\r\n\t\tif(row){\r\n\t\t\treturn this.rowManager.getRowPosition(row, active);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/////////////// Column Functions  ///////////////\r\n\tsetColumns(definition){\r\n\t\tif(this.initialized){\r\n\t\t\tthis.columnManager.setColumns(definition);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.\")\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumns(structured){\r\n\t\treturn this.columnManager.getComponents(structured);\r\n\t}\r\n\r\n\tgetColumn(field){\r\n\t\tvar col = this.columnManager.findColumn(field);\r\n\r\n\t\tif(col){\r\n\t\t\treturn col.getComponent();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgetColumnDefinitions(){\r\n\t\treturn this.columnManager.getDefinitionTree();\r\n\t}\r\n\r\n\tshowColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tcolumn.show();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\thideColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tcolumn.hide();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\tif(column.visible){\r\n\t\t\t\tcolumn.hide();\r\n\t\t\t}else{\r\n\t\t\t\tcolumn.show();\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\taddColumn(definition, before, field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\treturn this.columnManager.addColumn(definition, before, column)\r\n\t\t.then((column) => {\r\n\t\t\treturn column.getComponent();\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteColumn(field){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\treturn column.delete();\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\r\n\tupdateColumnDefinition(field, definition){\r\n\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\tif(column){\r\n\t\t\treturn column.updateDefinition(definition)\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\r\n\t\t\treturn Promise.reject();\r\n\t\t}\r\n\t}\r\n\r\n\tmoveColumn(from, to, after){\r\n\t\tvar fromColumn = this.columnManager.findColumn(from);\r\n\t\tvar toColumn = this.columnManager.findColumn(to);\r\n\r\n\t\tif(fromColumn){\r\n\t\t\tif(toColumn){\r\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after)\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\r\n\t\t}\r\n\t}\r\n\r\n\t//scroll to column in DOM\r\n\tscrollToColumn(field, position, ifVisible){\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tvar column = this.columnManager.findColumn(field);\r\n\r\n\t\t\tif(column){\r\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible)\r\n\t\t\t}else{\r\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\r\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t//////////// General Public Functions ////////////\r\n\t//redraw list without updating data\r\n\tredraw(force){\r\n\t\tif(this.initialized){\r\n\t\t\tthis.columnManager.redraw(force);\r\n\t\t\tthis.rowManager.redraw(force);\r\n\t\t}else{\r\n\t\t\tconsole.warn(\"redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetHeight(height){\r\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\r\n\t\tthis.element.style.height = this.options.height;\r\n\t\tthis.rowManager.initializeRenderer();\r\n\t\tthis.rowManager.redraw();\r\n\t}\r\n\r\n\t//////////////////// Event Bus ///////////////////\r\n\r\n\ton(key, callback){\r\n\t\tthis.externalEvents.subscribe(key, callback);\r\n\t}\r\n\r\n\toff(key, callback){\r\n\t\tthis.externalEvents.unsubscribe(key, callback);\r\n\t}\r\n\r\n\tdispatchEvent(){\r\n\t\tvar args = Array.from(arguments),\r\n\t\tkey = args.shift();\r\n\r\n\t\tthis.externalEvents.dispatch(...arguments)\r\n\t}\r\n\r\n\t////////////// Extension Management //////////////\r\n\tmodExists(plugin, required){\r\n\t\tif(this.modules[plugin]){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\tif(required){\r\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tmodule(key){\r\n\t\tvar mod = this.modules[key];\r\n\r\n\t\tif(!mod){\r\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\r\n\t\t}\r\n\r\n\t\treturn mod;\r\n\t}\r\n}\r\n\r\n//default setup options\r\nTabulator.defaultOptions = defaultOptions;\r\n\r\n//bind modules and static functionality\r\nnew ModuleBinder(Tabulator);\r\n\r\nexport default Tabulator;", "//tabulator with all modules installed\r\nimport {default as Tabulator} from './Tabulator.js';\r\nimport * as modules from '../core/modules/optional.js';\r\nimport ModuleBinder from './tools/ModuleBinder.js';\r\n\r\nclass TabulatorFull extends Tabulator {};\r\n\r\n//bind modules and static functionality\r\nnew ModuleBinder(TabulatorFull, modules);\r\n\r\nexport default TabulatorFull;", "export default class PseudoRow {\r\n\r\n\tconstructor (type){\r\n\t\tthis.type = type;\r\n\t\tthis.element = this._createElement();\r\n\t}\r\n\r\n\t_createElement(){\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.classList.add(\"tabulator-row\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\tgetElement(){\r\n\t\treturn this.element;\r\n\t}\r\n\r\n\tgetComponent(){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tgetData(){\r\n\t\treturn {};\r\n\t}\r\n\r\n\tgetHeight(){\r\n\t\treturn this.element.outerHeight;\r\n\t}\r\n\r\n\tinitialize(){}\r\n\r\n\treinitialize(){}\r\n\r\n\tnormalizeHeight(){}\r\n\r\n\tgenerateCells(){}\r\n\r\n\treinitializeHeight(){}\r\n\r\n\tcalcHeight(){}\r\n\r\n\tsetCellHeight(){}\r\n\r\n\tclearCellHeight(){}\r\n}", "\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar React = require(\"react\");\nvar ReactDOM = require(\"react-dom\");\nvar pick_react_known_prop_1 = require(\"pick-react-known-prop\");\nvar ConfigUtils_1 = require(\"./ConfigUtils\");\n/* tslint:disable-next-line */\nvar tabulator_tables_1 = require(\"tabulator-tables\");\nvar ReactTabulator = function (props) {\n    var ref = React.useRef();\n    var instanceRef = React.useRef();\n    var _a = React.useState(\"tabulator-\".concat(+new Date(), \"-\").concat(Math.floor(Math.random() * 9999999))), mainId = _a[0], setMainId = _a[1];\n    var htmlProps;\n    htmlProps = (0, pick_react_known_prop_1.pickHTMLProps)(props); // pick valid html props\n    delete htmlProps['data']; // don't render data & columns as attributes\n    delete htmlProps['columns'];\n    var initTabulator = function () { return __awaiter(void 0, void 0, void 0, function () {\n        var domEle, columns, data, options, propOptions;\n        var _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    domEle = ReactDOM.findDOMNode(ref.current);\n                    columns = props.columns, data = props.data, options = props.options;\n                    return [4 /*yield*/, (0, ConfigUtils_1.propsToOptions)(props)];\n                case 1:\n                    propOptions = _b.sent();\n                    if (data) {\n                        propOptions.data = data;\n                    }\n                    instanceRef.current = new tabulator_tables_1.TabulatorFull(domEle, __assign(__assign(__assign({ columns: columns }, propOptions), { layout: (_a = props.layout) !== null && _a !== void 0 ? _a : 'fitColumns' }), options // props.options are passed to Tabulator's options.\n                    ));\n                    if (props.events) {\n                        Object.keys(props.events).forEach(function (eventName) {\n                            var handler = props.events[eventName];\n                            instanceRef.current.on(eventName, handler);\n                        });\n                    }\n                    props.onRef && props.onRef(instanceRef);\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    React.useEffect(function () {\n        // console.log('useEffect - onmount');\n        initTabulator();\n    }, []);\n    React.useEffect(function () {\n        // console.log('useEffect - props.data changed');\n        if (instanceRef && instanceRef.current) {\n            initTabulator(); // re-init table\n        }\n    }, [props.data]);\n    return React.createElement(\"div\", __assign({ ref: ref, \"data-instance\": mainId }, htmlProps, { className: props.className }));\n};\nexports[\"default\"] = ReactTabulator;\n", "\"use strict\";\nexports.__esModule = true;\nexports.reactFormatter = exports.isSameObject = exports.isSameArray = exports.clone = void 0;\nvar React = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\nfunction clone(obj) {\n    return JSON.parse(JSON.stringify(obj));\n}\nexports.clone = clone;\nfunction isSameArray(a, b) {\n    var i = a && a.length ? a.length : 0;\n    if (i !== (b && b.length ? b.length : 0)) {\n        return false;\n    }\n    while (i--) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.isSameArray = isSameArray;\n// source: https://stackoverflow.com/questions/4816099/chrome-sendrequest-error-typeerror-converting-circular-structure-to-json\nfunction stringifyCensor(censor) {\n    var i = 0;\n    return function (key, value) {\n        if (i !== 0 && typeof censor === 'object' && typeof value == 'object' && censor == value) {\n            return '[Circular]';\n        }\n        if (i >= 29) {\n            // seems to be a harded maximum of 30 serialized objects?\n            return '[Unknown]';\n        }\n        ++i; // so we know we aren't using the original object anymore\n        return value;\n    };\n}\nfunction isSameObject(a, b) {\n    return JSON.stringify(a, stringifyCensor(a)) === JSON.stringify(b, stringifyCensor(b));\n}\nexports.isSameObject = isSameObject;\nfunction reactFormatter(JSX) {\n    return function customFormatter(cell, formatterParams, onRendered) {\n        // cell - the cell component\n        // formatterParams - parameters set for the column\n        // onRendered - function to call when the formatter has been rendered\n        var renderFn = function () {\n            var cellEl = cell.getElement();\n            if (cellEl) {\n                var formatterCell = cellEl.querySelector('.formatterCell');\n                if (formatterCell) {\n                    var CompWithMoreProps = React.cloneElement(JSX, { cell: cell });\n                    (0, react_dom_1.render)(CompWithMoreProps, cellEl.querySelector('.formatterCell'));\n                }\n            }\n        };\n        onRendered(renderFn); // initial render only.\n        setTimeout(function () {\n            renderFn(); // render every time cell value changed.\n        }, 0);\n        return '<div class=\"formatterCell\"></div>';\n    };\n}\nexports.reactFormatter = reactFormatter;\n", "\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar React = require(\"react\");\nvar ReactDOM = require(\"react-dom\");\nvar pick_react_known_prop_1 = require(\"pick-react-known-prop\");\nvar ConfigUtils_1 = require(\"./ConfigUtils\");\nvar Utils_1 = require(\"./Utils\");\n/* tslint:disable-next-line */\nvar tabulator_tables_1 = require(\"tabulator-tables\");\nvar default_1 = /** @class */ (function (_super) {\n    __extends(default_1, _super);\n    function default_1() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            data: [],\n            columns: _this.props.columns\n        };\n        _this.ref = null;\n        _this.htmlProps = null;\n        _this.mainId = \"tabulator-\".concat(+new Date(), \"-\").concat(Math.floor(Math.random() * 9999999)); // random id\n        _this.table = null; // will be set once Tabulator instantiated\n        _this.pickValidHTMLProps = function () {\n            // run once\n            if (!_this.htmlProps) {\n                _this.htmlProps = (0, pick_react_known_prop_1.pickHTMLProps)(_this.props); // pick valid html props\n                delete _this.htmlProps['data']; // don't render data & columns as attributes\n                delete _this.htmlProps['columns'];\n            }\n        };\n        return _this;\n    }\n    default_1.prototype.componentDidMount = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var domEle, that, _a, columns, data, options, propOptions;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        domEle = ReactDOM.findDOMNode(this.ref);\n                        that = this;\n                        _a = this.props, columns = _a.columns, data = _a.data, options = _a.options;\n                        return [4 /*yield*/, (0, ConfigUtils_1.propsToOptions)(this.props)];\n                    case 1:\n                        propOptions = _b.sent();\n                        new tabulator_tables_1.Tabulator(domEle, __assign(__assign(__assign(__assign({ columns: columns }, propOptions), { layout: 'fitColumns', // fit columns to width of table (optional)\n                            tableBuilding: function () {\n                                that.table = this; // keep table instance\n                                that.props.tableBuilding ? that.props.tableBuilding() : '';\n                            }, dataLoaded: function () {\n                                that.props.dataLoaded ? that.props.dataLoaded() : '';\n                            }, invalidOptionWarnings: false }), options), { data: data }));\n                        // await table.setData(data);\n                        // console.log('- componentDidMount');\n                        if (data && data.length > 0) {\n                            this.setState({ data: data });\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    default_1.prototype.componentWillUnmount = function () {\n        this.table && this.table.destroy();\n    };\n    // this is for React 15.x only\n    default_1.prototype.componentWillReceiveProps = function (props) {\n        var _this = this;\n        if (!(0, Utils_1.isSameArray)(this.state.data, props.data)) {\n            // console.log('- data changed');\n            this.setState({ data: props.data }, function () {\n                _this.table && _this.table.setData(_this.state.data);\n            });\n        }\n        if (!(0, Utils_1.isSameArray)(this.state.columns, props.columns)) {\n            // console.log('- columns changed');\n            this.setState({ columns: props.columns }, function () {\n                _this.table && _this.table.setColumns(_this.state.columns);\n            });\n        }\n    };\n    default_1.prototype.render = function () {\n        var _this = this;\n        // console.log('*** render');\n        this.pickValidHTMLProps();\n        var className = this.props.className;\n        return React.createElement(\"div\", __assign({ ref: function (ref) { return (_this.ref = ref); }, \"data-instance\": this.mainId }, this.htmlProps, { className: className }));\n    };\n    return default_1;\n}(React.Component));\nexports[\"default\"] = default_1;\n", "\"use strict\";\nexports.__esModule = true;\nexports.setGlobalDateMasks = exports.setGlobalDateI18n = exports.defaultI18n = exports.parse = exports.format = exports.assign = void 0;\n// source: https://github.com/taylorhakes/fecha\nvar token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\nvar twoDigitsOptional = '[1-9]\\\\d?';\nvar twoDigits = '\\\\d\\\\d';\nvar threeDigits = '\\\\d{3}';\nvar fourDigits = '\\\\d{4}';\nvar word = '[^\\\\s]+';\nvar literal = /\\[([^]*?)\\]/gm;\nfunction shorten(arr, sLen) {\n    var newArr = [];\n    for (var i = 0, len = arr.length; i < len; i++) {\n        newArr.push(arr[i].substr(0, sLen));\n    }\n    return newArr;\n}\nvar monthUpdate = function (arrName) { return function (v, i18n) {\n    var lowerCaseArr = i18n[arrName].map(function (v) { return v.toLowerCase(); });\n    var index = lowerCaseArr.indexOf(v.toLowerCase());\n    if (index > -1) {\n        return index;\n    }\n    return null;\n}; };\nfunction assign(origObj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n        var obj = args_1[_a];\n        for (var key in obj) {\n            // @ts-ignore ex\n            origObj[key] = obj[key];\n        }\n    }\n    return origObj;\n}\nexports.assign = assign;\nvar dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nvar monthNames = [\n    'January',\n    'February',\n    'March',\n    'April',\n    'May',\n    'June',\n    'July',\n    'August',\n    'September',\n    'October',\n    'November',\n    'December'\n];\nvar monthNamesShort = shorten(monthNames, 3);\nvar dayNamesShort = shorten(dayNames, 3);\nvar defaultI18n = {\n    dayNamesShort: dayNamesShort,\n    dayNames: dayNames,\n    monthNamesShort: monthNamesShort,\n    monthNames: monthNames,\n    amPm: ['am', 'pm'],\n    DoFn: function (dayOfMonth) {\n        return (dayOfMonth +\n            ['th', 'st', 'nd', 'rd'][dayOfMonth % 10 > 3 ? 0 : ((dayOfMonth - (dayOfMonth % 10) !== 10 ? 1 : 0) * dayOfMonth) % 10]);\n    }\n};\nexports.defaultI18n = defaultI18n;\nvar globalI18n = assign({}, defaultI18n);\nvar setGlobalDateI18n = function (i18n) { return (globalI18n = assign(globalI18n, i18n)); };\nexports.setGlobalDateI18n = setGlobalDateI18n;\nvar regexEscape = function (str) { return str.replace(/[|\\\\{()[^$+*?.-]/g, '\\\\$&'); };\nvar pad = function (val, len) {\n    if (len === void 0) { len = 2; }\n    val = String(val);\n    while (val.length < len) {\n        val = '0' + val;\n    }\n    return val;\n};\nvar formatFlags = {\n    D: function (dateObj) { return String(dateObj.getDate()); },\n    DD: function (dateObj) { return pad(dateObj.getDate()); },\n    Do: function (dateObj, i18n) { return i18n.DoFn(dateObj.getDate()); },\n    d: function (dateObj) { return String(dateObj.getDay()); },\n    dd: function (dateObj) { return pad(dateObj.getDay()); },\n    ddd: function (dateObj, i18n) { return i18n.dayNamesShort[dateObj.getDay()]; },\n    dddd: function (dateObj, i18n) { return i18n.dayNames[dateObj.getDay()]; },\n    M: function (dateObj) { return String(dateObj.getMonth() + 1); },\n    MM: function (dateObj) { return pad(dateObj.getMonth() + 1); },\n    MMM: function (dateObj, i18n) { return i18n.monthNamesShort[dateObj.getMonth()]; },\n    MMMM: function (dateObj, i18n) { return i18n.monthNames[dateObj.getMonth()]; },\n    YY: function (dateObj) { return pad(String(dateObj.getFullYear()), 4).substr(2); },\n    YYYY: function (dateObj) { return pad(dateObj.getFullYear(), 4); },\n    h: function (dateObj) { return String(dateObj.getHours() % 12 || 12); },\n    hh: function (dateObj) { return pad(dateObj.getHours() % 12 || 12); },\n    H: function (dateObj) { return String(dateObj.getHours()); },\n    HH: function (dateObj) { return pad(dateObj.getHours()); },\n    m: function (dateObj) { return String(dateObj.getMinutes()); },\n    mm: function (dateObj) { return pad(dateObj.getMinutes()); },\n    s: function (dateObj) { return String(dateObj.getSeconds()); },\n    ss: function (dateObj) { return pad(dateObj.getSeconds()); },\n    S: function (dateObj) { return String(Math.round(dateObj.getMilliseconds() / 100)); },\n    SS: function (dateObj) { return pad(Math.round(dateObj.getMilliseconds() / 10), 2); },\n    SSS: function (dateObj) { return pad(dateObj.getMilliseconds(), 3); },\n    a: function (dateObj, i18n) { return (dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1]); },\n    A: function (dateObj, i18n) {\n        return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase();\n    },\n    ZZ: function (dateObj) {\n        var offset = dateObj.getTimezoneOffset();\n        return (offset > 0 ? '-' : '+') + pad(Math.floor(Math.abs(offset) / 60) * 100 + (Math.abs(offset) % 60), 4);\n    },\n    Z: function (dateObj) {\n        var offset = dateObj.getTimezoneOffset();\n        return (offset > 0 ? '-' : '+') + pad(Math.floor(Math.abs(offset) / 60), 2) + ':' + pad(Math.abs(offset) % 60, 2);\n    }\n};\nvar monthParse = function (v) { return +v - 1; };\nvar emptyDigits = [null, twoDigitsOptional];\nvar emptyWord = [null, word];\nvar amPm = [\n    'isPm',\n    word,\n    function (v, i18n) {\n        var val = v.toLowerCase();\n        if (val === i18n.amPm[0]) {\n            return 0;\n        }\n        else if (val === i18n.amPm[1]) {\n            return 1;\n        }\n        return null;\n    }\n];\nvar timezoneOffset = [\n    'timezoneOffset',\n    '[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z?',\n    function (v) {\n        var parts = (v + '').match(/([+-]|\\d\\d)/gi);\n        if (parts) {\n            var minutes = +parts[1] * 60 + parseInt(parts[2], 10);\n            return parts[0] === '+' ? minutes : -minutes;\n        }\n        return 0;\n    }\n];\nvar parseFlags = {\n    D: ['day', twoDigitsOptional],\n    DD: ['day', twoDigits],\n    Do: ['day', twoDigitsOptional + word, function (v) { return parseInt(v, 10); }],\n    M: ['month', twoDigitsOptional, monthParse],\n    MM: ['month', twoDigits, monthParse],\n    YY: [\n        'year',\n        twoDigits,\n        function (v) {\n            var now = new Date();\n            var cent = +('' + now.getFullYear()).substr(0, 2);\n            return +('' + (+v > 68 ? cent - 1 : cent) + v);\n        }\n    ],\n    h: ['hour', twoDigitsOptional, undefined, 'isPm'],\n    hh: ['hour', twoDigits, undefined, 'isPm'],\n    H: ['hour', twoDigitsOptional],\n    HH: ['hour', twoDigits],\n    m: ['minute', twoDigitsOptional],\n    mm: ['minute', twoDigits],\n    s: ['second', twoDigitsOptional],\n    ss: ['second', twoDigits],\n    YYYY: ['year', fourDigits],\n    S: ['millisecond', '\\\\d', function (v) { return +v * 100; }],\n    SS: ['millisecond', twoDigits, function (v) { return +v * 10; }],\n    SSS: ['millisecond', threeDigits],\n    d: emptyDigits,\n    dd: emptyDigits,\n    ddd: emptyWord,\n    dddd: emptyWord,\n    MMM: ['month', word, monthUpdate('monthNamesShort')],\n    MMMM: ['month', word, monthUpdate('monthNames')],\n    a: amPm,\n    A: amPm,\n    ZZ: timezoneOffset,\n    Z: timezoneOffset\n};\n// Some common format strings\nvar globalMasks = {\n    \"default\": 'ddd MMM DD YYYY HH:mm:ss',\n    shortDate: 'M/D/YY',\n    mediumDate: 'MMM D, YYYY',\n    longDate: 'MMMM D, YYYY',\n    fullDate: 'dddd, MMMM D, YYYY',\n    isoDate: 'YYYY-MM-DD',\n    isoDateTime: 'YYYY-MM-DDTHH:mm:ssZ',\n    shortTime: 'HH:mm',\n    mediumTime: 'HH:mm:ss',\n    longTime: 'HH:mm:ss.SSS'\n};\nvar setGlobalDateMasks = function (masks) { return assign(globalMasks, masks); };\nexports.setGlobalDateMasks = setGlobalDateMasks;\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n * @returns {string} Formatted date string\n */\nvar format = function (dateObj, mask, i18n) {\n    if (mask === void 0) { mask = globalMasks['default']; }\n    if (i18n === void 0) { i18n = {}; }\n    if (typeof dateObj === 'number') {\n        dateObj = new Date(dateObj);\n    }\n    if (Object.prototype.toString.call(dateObj) !== '[object Date]' || isNaN(dateObj.getTime())) {\n        throw new Error('Invalid Date pass to format');\n    }\n    mask = globalMasks[mask] || mask;\n    var literals = [];\n    // Make literals inactive by replacing them with @@@\n    mask = mask.replace(literal, function ($0, $1) {\n        literals.push($1);\n        return '@@@';\n    });\n    var combinedI18nSettings = assign(assign({}, globalI18n), i18n);\n    // Apply formatting rules\n    mask = mask.replace(token, function ($0) { return formatFlags[$0](dateObj, combinedI18nSettings); });\n    // Inline literal values back into the formatted value\n    return mask.replace(/@@@/g, function () { return literals.shift(); });\n};\nexports.format = format;\n/**\n * Parse a date string into a Javascript Date object /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @param {i18n} I18nSettingsOptional Full or subset of I18N settings\n * @returns {Date|null} Returns Date object. Returns null what date string is invalid or doesn't match format\n */\nfunction parse(dateStr, format, i18n) {\n    if (i18n === void 0) { i18n = {}; }\n    if (typeof format !== 'string') {\n        throw new Error('Invalid format in fecha parse');\n    }\n    // Check to see if the format is actually a mask\n    format = globalMasks[format] || format;\n    // Avoid regular expression denial of service, fail early for really long strings\n    // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n    if (dateStr.length > 1000) {\n        return null;\n    }\n    // Default to the beginning of the year.\n    var today = new Date();\n    var dateInfo = {\n        year: today.getFullYear(),\n        month: 0,\n        day: 1,\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0,\n        isPm: null,\n        timezoneOffset: null\n    };\n    var parseInfo = [];\n    var literals = [];\n    // Replace all the literals with @@@. Hopefully a string that won't exist in the format\n    var newFormat = format.replace(literal, function ($0, $1) {\n        literals.push(regexEscape($1));\n        return '@@@';\n    });\n    var specifiedFields = {};\n    var requiredFields = {};\n    // Change every token that we find into the correct regex\n    newFormat = regexEscape(newFormat).replace(token, function ($0) {\n        var info = parseFlags[$0];\n        var field = info[0], regex = info[1], requiredField = info[3];\n        // Check if the person has specified the same field twice. This will lead to confusing results.\n        if (specifiedFields[field]) {\n            throw new Error(\"Invalid format. \".concat(field, \" specified twice in format\"));\n        }\n        specifiedFields[field] = true;\n        // Check if there are any required fields. For instance, 12 hour time requires AM/PM specified\n        if (requiredField) {\n            requiredFields[requiredField] = true;\n        }\n        parseInfo.push(info);\n        return '(' + regex + ')';\n    });\n    // Check all the required fields are present\n    Object.keys(requiredFields).forEach(function (field) {\n        if (!specifiedFields[field]) {\n            throw new Error(\"Invalid format. \".concat(field, \" is required in specified format\"));\n        }\n    });\n    // Add back all the literals after\n    newFormat = newFormat.replace(/@@@/g, function () { return literals.shift(); });\n    // Check if the date string matches the format. If it doesn't return null\n    var matches = dateStr.match(new RegExp(newFormat, 'i'));\n    if (!matches) {\n        return null;\n    }\n    var combinedI18nSettings = assign(assign({}, globalI18n), i18n);\n    // For each match, call the parser function for that date part\n    for (var i = 1; i < matches.length; i++) {\n        var _a = parseInfo[i - 1], field = _a[0], parser = _a[2];\n        var value = parser ? parser(matches[i], combinedI18nSettings) : +matches[i];\n        // If the parser can't make sense of the value, return null\n        if (value == null) {\n            return null;\n        }\n        dateInfo[field] = value;\n    }\n    if (dateInfo.isPm === 1 && dateInfo.hour != null && +dateInfo.hour !== 12) {\n        dateInfo.hour = +dateInfo.hour + 12;\n    }\n    else if (dateInfo.isPm === 0 && +dateInfo.hour === 12) {\n        dateInfo.hour = 0;\n    }\n    var dateWithoutTZ = new Date(dateInfo.year, dateInfo.month, dateInfo.day, dateInfo.hour, dateInfo.minute, dateInfo.second, dateInfo.millisecond);\n    var validateFields = [\n        ['month', 'getMonth'],\n        ['day', 'getDate'],\n        ['hour', 'getHours'],\n        ['minute', 'getMinutes'],\n        ['second', 'getSeconds']\n    ];\n    for (var i = 0, len = validateFields.length; i < len; i++) {\n        // Check to make sure the date field is within the allowed range. Javascript dates allows values\n        // outside the allowed range. If the values don't match the value was invalid\n        if (specifiedFields[validateFields[i][0]] &&\n            dateInfo[validateFields[i][0]] !== dateWithoutTZ[validateFields[i][1]]()) {\n            return null;\n        }\n    }\n    if (dateInfo.timezoneOffset == null) {\n        return dateWithoutTZ;\n    }\n    return new Date(Date.UTC(dateInfo.year, dateInfo.month, dateInfo.day, dateInfo.hour, dateInfo.minute - dateInfo.timezoneOffset, dateInfo.second, dateInfo.millisecond));\n}\nexports.parse = parse;\nexports[\"default\"] = {\n    format: format,\n    parse: parse,\n    defaultI18n: defaultI18n,\n    setGlobalDateI18n: setGlobalDateI18n,\n    setGlobalDateMasks: setGlobalDateMasks\n};\n", "\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar React = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\n// import { parse, format } from 'date-fns';\nvar DateEditorUtils_1 = require(\"./DateEditorUtils\");\nvar DEFAULT_DATE_INPUT_FORMAT = 'YYYY-MM-DD'; // date-fns 'yyyy-MM-dd';\nvar inputCss = {\n    width: '100%',\n    height: '100%',\n    fontSize: '1em',\n    fontFamily: 'inherit'\n};\nvar Editor = /** @class */ (function (_super) {\n    __extends(Editor, _super);\n    function Editor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { value: '' };\n        _this.ref = null;\n        // date-fns format 'MM/dd/yyyy'\n        _this.format = _this.props.editorParams.format || 'MM/DD/YYYY'; // TODO: detect from user locale & set default.\n        _this.setValueOnSuccess = function (value) {\n            if (value === void 0) { value = _this.state.value; }\n            var success = _this.props.success;\n            if (!value) {\n                // user deleted value in the cell => set to ''\n                // const result = format(new Date(), this.format);\n                success('');\n                return;\n            }\n            var result = value;\n            try {\n                if (result.indexOf('-') > 0) {\n                    // value is \"yyyy-MM-dd\" => parse it\n                    var valueDate = (0, DateEditorUtils_1.parse)(value, 'YYYY-MM-DD');\n                    result = (0, DateEditorUtils_1.format)(valueDate, _this.format);\n                }\n            }\n            catch (err) {\n                console.error('ERROR', err);\n                result = (0, DateEditorUtils_1.format)(new Date(), DEFAULT_DATE_INPUT_FORMAT);\n            }\n            success(result);\n        };\n        _this.onChange = function (ev) {\n            var value = ev.target.value;\n            _this.setState({ value: value });\n        };\n        _this.onKeyPress = function (ev) {\n            var cancel = _this.props.cancel;\n            if (ev.keyCode === 13) {\n                // Enter pressed. If value is '' => set to today:\n                var today = (0, DateEditorUtils_1.format)(new Date(), DEFAULT_DATE_INPUT_FORMAT);\n                var value = _this.state.value || today;\n                _this.setValueOnSuccess(value);\n            }\n            else if (ev.keyCode === 27) {\n                cancel();\n            }\n        };\n        _this.onBlur = function () {\n            _this.setValueOnSuccess();\n        };\n        return _this;\n    }\n    Editor.prototype.componentDidMount = function () {\n        var _this = this;\n        this.props.onRendered(function () {\n            var value = _this.props.cell.getValue();\n            _this.setState({ value: value });\n            _this.ref.focus();\n        });\n    };\n    Editor.prototype.render = function () {\n        var _this = this;\n        var cell = this.props.cell;\n        var valueDt = (0, DateEditorUtils_1.parse)(cell.getValue(), this.format);\n        // console.log('this.format', this.format);\n        // console.log('cell.getValue()', cell.getValue());\n        // console.log('valueDt', valueDt);\n        var value = (0, DateEditorUtils_1.format)(new Date(), DEFAULT_DATE_INPUT_FORMAT);\n        try {\n            value = (0, DateEditorUtils_1.format)(valueDt, DEFAULT_DATE_INPUT_FORMAT);\n        }\n        catch (err) { }\n        return (React.createElement(\"input\", { type: \"date\", ref: function (r) { return (_this.ref = r); }, defaultValue: value, \n            // value={value}\n            onBlur: this.onBlur, onChange: this.onChange, onKeyUp: this.onKeyPress, style: inputCss }));\n    };\n    return Editor;\n}(React.Component));\nfunction default_1(cell, onRendered, success, cancel, editorParams) {\n    var container = document.createElement('div');\n    container.style.height = '100%';\n    (0, react_dom_1.render)(React.createElement(Editor, { cell: cell, onRendered: onRendered, success: success, cancel: cancel, editorParams: editorParams }), container);\n    return container;\n}\nexports[\"default\"] = default_1;\n", "'use strict'\n\nconst React = require('react')\n\nmodule.exports = (props) => (\n  React.createElement( 'button', { type: 'button', className: props.classNames.selectedTag, title: 'Click to remove tag', onClick: props.onDelete },\n    React.createElement( 'span', { className: props.classNames.selectedTagName }, props.tag.name)\n  )\n)\n", "'use strict'\n\nconst React = require('react')\n\nconst SIZER_STYLES = {\n  position: 'absolute',\n  width: 0,\n  height: 0,\n  visibility: 'hidden',\n  overflow: 'scroll',\n  whiteSpace: 'pre'\n}\n\nconst STYLE_PROPS = [\n  'fontSize',\n  'fontFamily',\n  'fontWeight',\n  'fontStyle',\n  'letterSpacing',\n  'textTransform'\n]\n\nclass Input extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = { inputWidth: null }\n  }\n\n  componentDidMount () {\n    if (this.props.autoresize) {\n      this.copyInputStyles()\n      this.updateInputWidth()\n    }\n\n    if (this.props.autofocus) {\n      this.input.focus()\n    }\n  }\n\n  componentDidUpdate ({ query, placeholder }) {\n    if (query !== this.props.query || placeholder !== this.props.placeholder) {\n      this.updateInputWidth()\n    }\n  }\n\n  copyInputStyles () {\n    const inputStyle = window.getComputedStyle(this.input)\n\n    STYLE_PROPS.forEach((prop) => {\n      this.sizer.style[prop] = inputStyle[prop]\n    })\n  }\n\n  updateInputWidth () {\n    let inputWidth\n\n    if (this.props.autoresize) {\n      // scrollWidth is designed to be fast not accurate.\n      // +2 is completely arbitrary but does the job.\n      inputWidth = Math.ceil(this.sizer.scrollWidth) + 2\n    }\n\n    if (inputWidth !== this.state.inputWidth) {\n      this.setState({ inputWidth })\n    }\n  }\n\n  render () {\n    const { inputAttributes, inputEventHandlers, query, placeholder, expandable, listboxId, selectedIndex, ariaLabel } = this.props\n\n    return (\n      React.createElement( 'div', { className: this.props.classNames.searchInput },\n        React.createElement( 'input', Object.assign({},\n          inputAttributes, inputEventHandlers, { ref: (c) => { this.input = c }, value: query, placeholder: placeholder, role: 'combobox', 'aria-autocomplete': 'list', 'aria-label': ariaLabel || placeholder, 'aria-owns': listboxId, 'aria-activedescendant': selectedIndex > -1 ? `${listboxId}-${selectedIndex}` : null, 'aria-expanded': expandable, style: { width: this.state.inputWidth } })),\n        React.createElement( 'div', { ref: (c) => { this.sizer = c }, style: SIZER_STYLES }, query || placeholder)\n      )\n    )\n  }\n}\n\nmodule.exports = Input\n", "'use strict'\n\nconst React = require('react')\n\nfunction escapeForRegExp (query) {\n  return query.replace(/[-\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n}\n\nfunction markIt (input, query) {\n  if (query) {\n    const regex = RegExp(escapeForRegExp(query), 'gi')\n    input = input.replace(regex, '<mark>$&</mark>')\n  }\n\n  return {\n    __html: input\n  }\n}\n\nfunction filterSuggestions (query, suggestions, length, suggestionsFilter, noSuggestionsText) {\n  if (!suggestionsFilter) {\n    const regex = new RegExp(`(?:^|\\\\s)${escapeForRegExp(query)}`, 'i')\n    suggestionsFilter = (item) => regex.test(item.name)\n  }\n\n  const filtered = suggestions.filter((item) => suggestionsFilter(item, query)).slice(0, length)\n\n  if (filtered.length === 0 && noSuggestionsText) {\n    filtered.push({ id: 0, name: noSuggestionsText, disabled: true, disableMarkIt: true })\n  }\n\n  return filtered\n}\n\nclass Suggestions extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      options: filterSuggestions(this.props.query, this.props.suggestions, this.props.maxSuggestionsLength, this.props.suggestionsFilter, this.props.noSuggestionsText)\n    }\n  }\n\n  componentWillReceiveProps (newProps) {\n    this.setState({\n      options: filterSuggestions(newProps.query, newProps.suggestions, newProps.maxSuggestionsLength, newProps.suggestionsFilter, newProps.noSuggestionsText)\n    })\n  }\n\n  handleMouseDown (item, e) {\n    // focus is shifted on mouse down but calling preventDefault prevents this\n    e.preventDefault()\n    this.props.addTag(item)\n  }\n\n  render () {\n    if (!this.props.expandable || !this.state.options.length) {\n      return null\n    }\n\n    const options = this.state.options.map((item, i) => {\n      const key = `${this.props.listboxId}-${i}`\n      const classNames = []\n\n      if (this.props.selectedIndex === i) {\n        classNames.push(this.props.classNames.suggestionActive)\n      }\n\n      if (item.disabled) {\n        classNames.push(this.props.classNames.suggestionDisabled)\n      }\n\n      return (\n        React.createElement( 'li', {\n          id: key, key: key, role: 'option', className: classNames.join(' '), 'aria-disabled': item.disabled === true, onMouseDown: this.handleMouseDown.bind(this, item) },\n          item.disableMarkIt ? item.name\n            : React.createElement( 'span', { dangerouslySetInnerHTML: markIt(item.name, this.props.query, item.markInput) })\n        )\n      )\n    })\n\n    return (\n      React.createElement( 'div', { className: this.props.classNames.suggestions },\n        React.createElement( 'ul', { role: 'listbox', id: this.props.listboxId }, options)\n      )\n    )\n  }\n}\n\nmodule.exports = Suggestions\n", "'use strict'\n\nconst React = require('react')\nconst PropTypes = require('prop-types')\nconst Tag = require('./Tag')\nconst Input = require('./Input')\nconst Suggestions = require('./Suggestions')\n\nconst KEYS = {\n  ENTER: 13,\n  TAB: 9,\n  BACKSPACE: 8,\n  UP_ARROW: 38,\n  DOWN_ARROW: 40\n}\n\nconst CLASS_NAMES = {\n  root: 'react-tags',\n  rootFocused: 'is-focused',\n  selected: 'react-tags__selected',\n  selectedTag: 'react-tags__selected-tag',\n  selectedTagName: 'react-tags__selected-tag-name',\n  search: 'react-tags__search',\n  searchInput: 'react-tags__search-input',\n  suggestions: 'react-tags__suggestions',\n  suggestionActive: 'is-active',\n  suggestionDisabled: 'is-disabled'\n}\n\nclass ReactTags extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      query: '',\n      focused: false,\n      expandable: false,\n      selectedIndex: -1,\n      classNames: Object.assign({}, CLASS_NAMES, this.props.classNames)\n    }\n\n    this.inputEventHandlers = {\n      // Provide a no-op function to the input component to avoid warnings\n      // <https://github.com/i-like-robots/react-tags/issues/135>\n      // <https://github.com/facebook/react/issues/13835>\n      onChange: () => { },\n      onBlur: this.handleBlur.bind(this),\n      onFocus: this.handleFocus.bind(this),\n      onInput: this.handleInput.bind(this),\n      onKeyDown: this.handleKeyDown.bind(this)\n    }\n\n    this.container = React.createRef()\n  }\n\n  componentWillReceiveProps (newProps) {\n    this.setState({\n      classNames: Object.assign({}, CLASS_NAMES, newProps.classNames)\n    })\n  }\n\n  handleInput (e) {\n    const query = e.target.value\n\n    if (this.props.handleInputChange) {\n      this.props.handleInputChange(query)\n    }\n\n    this.setState({ query })\n  }\n\n  handleKeyDown (e) {\n    const { query, selectedIndex } = this.state\n    const { delimiters, delimiterChars } = this.props\n\n    // when one of the terminating keys is pressed, add current query to the tags.\n    if (delimiters.indexOf(e.keyCode) > -1 || delimiterChars.indexOf(e.key) > -1) {\n      if (query || selectedIndex > -1) {\n        e.preventDefault()\n      }\n\n      this.handleDelimiter()\n    }\n\n    // when backspace key is pressed and query is blank, delete the last tag\n    if (e.keyCode === KEYS.BACKSPACE && query.length === 0 && this.props.allowBackspace) {\n      this.deleteTag(this.props.tags.length - 1)\n    }\n\n    if (e.keyCode === KEYS.UP_ARROW) {\n      e.preventDefault()\n\n      // if last item, cycle to the bottom\n      if (selectedIndex <= 0) {\n        this.setState({ selectedIndex: this.suggestions.state.options.length - 1 })\n      } else {\n        this.setState({ selectedIndex: selectedIndex - 1 })\n      }\n    }\n\n    if (e.keyCode === KEYS.DOWN_ARROW) {\n      e.preventDefault()\n\n      this.setState({ selectedIndex: (selectedIndex + 1) % this.suggestions.state.options.length })\n    }\n  }\n\n  handleDelimiter () {\n    const { query, selectedIndex } = this.state\n\n    if (query.length >= this.props.minQueryLength) {\n      // Check if the user typed in an existing suggestion.\n      const match = this.suggestions.state.options.findIndex((suggestion) => {\n        return suggestion.name.search(new RegExp(`^${query}$`, 'i')) === 0\n      })\n\n      const index = selectedIndex === -1 ? match : selectedIndex\n\n      if (index > -1 && this.suggestions.state.options[index]) {\n        this.addTag(this.suggestions.state.options[index])\n      } else if (this.props.allowNew) {\n        this.addTag({ name: query })\n      }\n    }\n  }\n\n  handleClick (e) {\n    if (document.activeElement !== e.target) {\n      this.input.input.focus()\n    }\n  }\n\n  handleBlur () {\n    this.setState({ focused: false, selectedIndex: -1 })\n\n    if (this.props.handleBlur) {\n      this.props.handleBlur()\n    }\n\n    if (this.props.addOnBlur) {\n      this.handleDelimiter()\n    }\n  }\n\n  handleFocus () {\n    this.setState({ focused: true })\n\n    if (this.props.handleFocus) {\n      this.props.handleFocus()\n    }\n  }\n\n  handleDeleteTag (index, event) {\n    // Because we'll destroy the element with cursor focus we need to ensure\n    // it does not get lost and move it to the next interactive element\n    if (this.container.current) {\n      const interactiveEls = this.container.current.querySelectorAll('a,button,input')\n\n      const currentEl = Array.prototype.findIndex.call(interactiveEls, (element) => {\n        return element === event.currentTarget\n      })\n\n      const nextEl = interactiveEls[currentEl - 1] || interactiveEls[currentEl + 1]\n\n      if (nextEl) {\n        nextEl.focus()\n      }\n    }\n\n    this.deleteTag(index)\n  }\n\n  addTag (tag) {\n    if (tag.disabled) {\n      return\n    }\n\n    if (typeof this.props.handleValidate === 'function' && !this.props.handleValidate(tag)) {\n      return\n    }\n\n    this.props.handleAddition(tag)\n\n    // reset the state\n    this.setState({\n      query: '',\n      selectedIndex: -1\n    })\n  }\n\n  deleteTag (i) {\n    this.props.handleDelete(i)\n\n    if (this.props.clearInputOnDelete && this.state.query !== '') {\n      this.setState({ query: '' })\n    }\n  }\n\n  render () {\n    const listboxId = 'ReactTags-listbox'\n\n    const TagComponent = this.props.tagComponent || Tag\n\n    const tags = this.props.tags.map((tag, i) => (\n      React.createElement( TagComponent, {\n        key: i, tag: tag, classNames: this.state.classNames, onDelete: this.handleDeleteTag.bind(this, i) })\n    ))\n\n    const expandable = this.state.focused && this.state.query.length >= this.props.minQueryLength\n    const classNames = [this.state.classNames.root]\n\n    this.state.focused && classNames.push(this.state.classNames.rootFocused)\n\n    return (\n      React.createElement( 'div', { ref: this.container, className: classNames.join(' '), onClick: this.handleClick.bind(this) },\n        React.createElement( 'div', { className: this.state.classNames.selected, 'aria-live': 'polite', 'aria-relevant': 'additions removals' },\n          tags\n        ),\n        React.createElement( 'div', { className: this.state.classNames.search },\n          React.createElement( Input, Object.assign({},\n            this.state, { inputAttributes: this.props.inputAttributes, inputEventHandlers: this.inputEventHandlers, ref: (c) => { this.input = c }, listboxId: listboxId, autofocus: this.props.autofocus, autoresize: this.props.autoresize, expandable: expandable, placeholder: this.props.placeholder, ariaLabel: this.props.ariaLabel })),\n          React.createElement( Suggestions, Object.assign({},\n            this.state, { ref: (c) => { this.suggestions = c }, listboxId: listboxId, expandable: expandable, noSuggestionsText: this.props.noSuggestionsText, suggestions: this.props.suggestions, suggestionsFilter: this.props.suggestionsFilter, addTag: this.addTag.bind(this), maxSuggestionsLength: this.props.maxSuggestionsLength }))\n        )\n      )\n    )\n  }\n}\n\nReactTags.defaultProps = {\n  tags: [],\n  placeholder: 'Add new tag',\n  noSuggestionsText: null,\n  suggestions: [],\n  suggestionsFilter: null,\n  autofocus: true,\n  autoresize: true,\n  delimiters: [KEYS.TAB, KEYS.ENTER],\n  delimiterChars: [],\n  minQueryLength: 2,\n  maxSuggestionsLength: 6,\n  allowNew: false,\n  allowBackspace: true,\n  tagComponent: null,\n  inputAttributes: {},\n  addOnBlur: false,\n  clearInputOnDelete: true\n}\n\nReactTags.propTypes = {\n  tags: PropTypes.arrayOf(PropTypes.object),\n  placeholder: PropTypes.string,\n  ariaLabel: PropTypes.string,\n  noSuggestionsText: PropTypes.string,\n  suggestions: PropTypes.arrayOf(PropTypes.object),\n  suggestionsFilter: PropTypes.func,\n  autofocus: PropTypes.bool,\n  autoresize: PropTypes.bool,\n  delimiters: PropTypes.arrayOf(PropTypes.number),\n  delimiterChars: PropTypes.arrayOf(PropTypes.string),\n  handleDelete: PropTypes.func.isRequired,\n  handleAddition: PropTypes.func.isRequired,\n  handleInputChange: PropTypes.func,\n  handleFocus: PropTypes.func,\n  handleBlur: PropTypes.func,\n  handleValidate: PropTypes.func,\n  minQueryLength: PropTypes.number,\n  maxSuggestionsLength: PropTypes.number,\n  classNames: PropTypes.object,\n  allowNew: PropTypes.bool,\n  allowBackspace: PropTypes.bool,\n  tagComponent: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.element\n  ]),\n  inputAttributes: PropTypes.object,\n  addOnBlur: PropTypes.bool,\n  clearInputOnDelete: PropTypes.bool\n}\n\nmodule.exports = ReactTags\n", "\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nvar React = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\nvar Utils_1 = require(\"../Utils\");\n// import { parse, format } from 'date-fns';\n// import ReactTags from 'react-tag-autocomplete';\nvar ReactTags = require('react-tag-autocomplete');\nvar DEFAULT_DATE_INPUT_FORMAT = 'yyyy-MM-dd';\nvar inputCss = {\n    width: '100%',\n    height: '100%',\n    fontSize: '1em',\n    fontFamily: 'inherit'\n};\nvar Editor = /** @class */ (function (_super) {\n    __extends(Editor, _super);\n    function Editor() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { value: '', values: [], autofocus: false };\n        _this.ref = null;\n        _this.setValueOnSuccess = function (values) {\n            if (values === void 0) { values = _this.state.values; }\n            var _a = _this.props, success = _a.success, cancel = _a.cancel;\n            // console.log('setValueOnSuccess: ', values);\n            success(values);\n            // cancel();\n        };\n        _this.handleDelete = function (i) {\n            // console.log('- handleDelete ', i);\n            var values = _this.state.values;\n            var newValues = values.filter(function (item, index) { return index !== i; });\n            _this.setState({ values: newValues }, function () {\n                _this.setValueOnSuccess(newValues);\n            });\n        };\n        _this.handleAddition = function (item) {\n            var values = _this.state.values;\n            if (item.name) {\n                // console.log('- handleAddition: ', item);\n                values.push({ id: item.name, name: item.name });\n                _this.setState({ values: values }, function () {\n                    _this.setValueOnSuccess(values);\n                });\n            }\n        };\n        // order: handleBlur => sucess() => grid's cellEdited => grid's dataChanged => handleAddition\n        _this.handleBlur = function () {\n            var cancel = _this.props.cancel;\n            var newValue = _this.ref.input.input.value;\n            if (newValue) {\n                // console.log(111, newValue, this.ref);\n                var values = (0, Utils_1.clone)(_this.state.values);\n                values.push({ id: newValue, name: newValue });\n                // console.log('- handleBlur ', values);\n                _this.setValueOnSuccess(values);\n            }\n            else {\n                cancel();\n            }\n            var el = (0, react_dom_1.findDOMNode)(_this.ref);\n            if (el && el.parentElement.parentElement.parentElement) {\n                el.parentElement.parentElement.parentElement.style.overflow = 'hidden';\n            }\n            // console.log('- handleBlur END');\n        };\n        return _this;\n    }\n    Editor.prototype.componentDidMount = function () {\n        var _this = this;\n        this.props.onRendered(function () {\n            var el = (0, react_dom_1.findDOMNode)(_this.ref);\n            el.style.zIndex = 1;\n            el.parentElement.parentElement.parentElement.style.overflow = 'inherit';\n            el.querySelector('input').focus();\n            var values = (_this.props.cell.getValue() || []).map(function (item) {\n                return typeof item === 'string' ? { id: item, name: item } : item;\n            });\n            _this.setState({ values: values });\n        });\n    };\n    Editor.prototype.render = function () {\n        var _this = this;\n        var editorParams = this.props.editorParams;\n        var values = this.state.values;\n        var suggestions = editorParams.values;\n        return (React.createElement(\"div\", null,\n            React.createElement(ReactTags, { ref: function (ref) { return (_this.ref = ref); }, placeholder: \"Select or Type\", tags: values, suggestions: suggestions, allowNew: true, autoresize: true, autofocus: this.state.autofocus, handleAddition: this.handleAddition, handleDelete: this.handleDelete, handleBlur: this.handleBlur, minQueryLength: 0 })));\n    };\n    return Editor;\n}(React.Component));\nfunction default_1(cell, onRendered, success, cancel, editorParams) {\n    var container = document.createElement('div');\n    container.style.height = '100%';\n    (0, react_dom_1.render)(React.createElement(Editor, { cell: cell, onRendered: onRendered, success: success, cancel: cancel, editorParams: editorParams }), container);\n    return container;\n}\nexports[\"default\"] = default_1;\n", "\"use strict\";\nexports.__esModule = true;\nvar React = require(\"react\");\nvar react_dom_1 = require(\"react-dom\");\nvar createCellEl = function () {\n    var el = document.createElement('div');\n    el.style.height = '100%';\n    return el;\n};\n// example: { title: 'Pets', field: 'pets', formatter: MultiValueFormatter, formatterParams: { style: 'PILL' } }\n// default style: comma separated plain text\n// other styles: PILL\nfunction default_1(cell, formatterParams, onRendered) {\n    var style = formatterParams.style || ''; // comma separated plain text\n    var arr = cell.getValue() || [];\n    var content = arr && arr.length > 0 && typeof arr[0] === 'string' ? React.createElement(\"span\", null, arr.join(', ')) : React.createElement(\"span\", null);\n    if (style === 'PILL') {\n        // TODO: use React.Fragment here to remove unnecessary div. (but will break React 15 example in Codesandbox)\n        content = (React.createElement(\"div\", null, arr.map(function (item) {\n            return typeof item === 'string' ? React.createElement(\"span\", { key: item }, item) : React.createElement(\"span\", { key: item.name }, item.name);\n        })));\n    }\n    var el = createCellEl();\n    el.className = 'multi-value-formatter-content';\n    el.title = arr && arr.length > 0 && typeof arr[0] === 'string' ? arr.join(', ') : '';\n    (0, react_dom_1.render)(content, el);\n    return el;\n}\nexports[\"default\"] = default_1;\n", "\"use strict\";\nvar _a;\nexports.__esModule = true;\nvar React = require(\"react\");\n// for styles:\n// import 'react-tabulator/lib/styles.css'; // default theme\n// import 'react-tabulator/css/bootstrap/tabulator_bootstrap.min.css'; // use Theme(s)\nvar ReactTabulator_1 = require(\"./ReactTabulator\");\nvar DateEditor_1 = require(\"./editors/DateEditor\");\nvar MultiSelectEditor_1 = require(\"./editors/MultiSelectEditor\");\nvar MultiValueFormatter_1 = require(\"./formatters/MultiValueFormatter\");\nvar Utils_1 = require(\"./Utils\");\nfunction SimpleButton(props) {\n    var rowData = props.cell._cell.row.data;\n    var cellValue = props.cell._cell.value || 'Edit | Show';\n    return React.createElement(\"button\", { onClick: function () { return alert(rowData.name); } }, cellValue);\n}\nvar columns = [\n    { title: 'Name', field: 'name', width: 150 },\n    { title: 'Age', field: 'age', hozAlign: 'left', formatter: 'progress' },\n    { title: 'Favourite Color', field: 'color' },\n    { title: 'Date Of Birth', field: 'dob', sorter: 'date' },\n    { title: 'Rating', field: 'rating', hozAlign: 'center', formatter: 'star' },\n    { title: 'Passed?', field: 'passed', hozAlign: 'center', formatter: 'tickCross' },\n    { title: 'Custom', field: 'custom', hozAlign: 'center', editor: 'input', formatter: (0, Utils_1.reactFormatter)(React.createElement(SimpleButton, null)) }\n];\nvar data = [\n    { id: 1, name: 'Oli Bob', age: '12', color: 'red', dob: '01/01/1980', rating: 5, passed: true, pets: ['cat', 'dog'] },\n    { id: 2, name: 'Mary May', age: '1', color: 'green', dob: '12/05/1989', rating: 4, passed: true, pets: ['cat'] },\n    { id: 3, name: 'Christine Lobowski', age: '42', color: 'green', dob: '10/05/1985', rating: 4, passed: false },\n    { id: 4, name: 'Brendon Philips', age: '125', color: 'red', dob: '01/08/1980', rating: 4.5, passed: true },\n    { id: 5, name: 'Margret Marmajuke', age: '16', color: 'yellow', dob: '07/01/1999', rating: 4, passed: false },\n    {\n        id: 6,\n        name: 'Van Ng',\n        age: '37',\n        color: 'green',\n        dob: '06/10/1982',\n        rating: 4,\n        passed: true,\n        pets: ['dog', 'fish']\n    },\n    { id: 7, name: 'Duc Ng', age: '37', color: 'yellow', dob: '10/10/1982', rating: 4, passed: true, pets: ['dog'] }\n];\n// Editable Example:\nvar colorOptions = (_a = {}, _a[''] = '&nbsp;', _a.red = 'red', _a.green = 'green', _a.yellow = 'yellow', _a);\nvar petOptions = [\n    { id: 'cat', name: 'cat' },\n    { id: 'dog', name: 'dog' },\n    { id: 'fish', name: 'fish' }\n];\nvar editableColumns = [\n    { title: 'Name', field: 'name', width: 150, editor: 'input', headerFilter: 'input' },\n    { title: 'Age', field: 'age', hozAlign: 'left', formatter: 'progress', editor: 'star' },\n    {\n        title: 'Favourite Color',\n        field: 'color',\n        editor: 'select',\n        editorParams: { allowEmpty: true, showListOnEmpty: true, values: colorOptions },\n        headerFilter: 'select',\n        headerFilterParams: { values: colorOptions }\n    },\n    { title: 'Date Of Birth', field: 'dob', editor: DateEditor_1[\"default\"], editorParams: { format: 'MM/DD/YYYY' } },\n    {\n        title: 'Pets',\n        field: 'pets',\n        sorter: function (a, b) { return a.toString().localeCompare(b.toString()); },\n        editor: MultiSelectEditor_1[\"default\"],\n        editorParams: { values: petOptions },\n        formatter: MultiValueFormatter_1[\"default\"],\n        formatterParams: { style: 'PILL' }\n    },\n    { title: 'Passed?', field: 'passed', hozAlign: 'center', formatter: 'tickCross', editor: true }\n];\nexports[\"default\"] = (function () {\n    var _a = React.useState({\n        data: [],\n        selectedName: ''\n    }), state = _a[0], setState = _a[1];\n    var ref = React.useRef();\n    var rowClick = function (e, row) {\n        console.log('ref table: ', ref.current); // this is the Tabulator table instance\n        // ref?.current && ref?.current.replaceData([])\n        console.log('rowClick id: ${row.getData().id}', row, e);\n        setState({ selectedName: row.getData().name });\n    };\n    var setData = function () {\n        setState({ data: data });\n    };\n    var clearData = function () {\n        setState({ data: [] });\n    };\n    var modifyData = function () {\n        var _newData = data.filter(function (item) { return item.name === 'Oli Bob'; });\n        setState({ data: _newData });\n    };\n    var renderAjaxScrollExample = function () {\n        var columns = [\n            { title: 'First Name', field: 'first_name', width: 150 },\n            { title: 'Last Name', field: 'last_name', width: 150 },\n            { title: 'Email', field: 'email', width: 150 }\n        ];\n        var options = {\n            height: 100,\n            movableRows: true,\n            progressiveLoad: 'scroll',\n            progressiveLoadDelay: 200,\n            progressiveLoadScrollMargin: 30,\n            ajaxURL: 'https://reqres.in/api/users',\n            dataSendParams: {\n                page: 'page',\n                size: 'per_page'\n            },\n            dataReceiveParams: {\n                last_page: 'last'\n            },\n            paginationSize: 5,\n            ajaxResponse: function (url, params, response) {\n                console.log('url, params, response', url, params, response);\n                return {\n                    data: response.data,\n                    last: response.total_pages\n                };\n            },\n            ajaxError: function (error) {\n                console.log('ajaxError', error);\n            }\n        };\n        return (React.createElement(ReactTabulator_1[\"default\"], { onRef: function (r) { return (ref = r); }, columns: columns, options: options, events: {\n                dataLoaded: function (data) {\n                    console.log('dataLoaded', data);\n                    // return data; //return the response data to tabulator\n                    var modResponse = {};\n                    modResponse.data = data;\n                    modResponse.last = 5;\n                    return modResponse;\n                },\n                ajaxError: function (error) {\n                    console.log('ajaxError', error);\n                }\n            } }));\n    };\n    var options = {\n        height: 150,\n        movableRows: true,\n        movableColumns: true\n    };\n    return (React.createElement(\"div\", null,\n        React.createElement(ReactTabulator_1[\"default\"], { onRef: function (ref) { return (ref = ref); }, columns: columns, data: data, events: {\n                rowClick: rowClick\n            }, options: options, \"data-custom-attr\": \"test-custom-attribute\", className: \"custom-css-class\" }),\n        React.createElement(\"i\", null,\n            \"Selected Name: \",\n            React.createElement(\"strong\", null, state.selectedName)),\n        React.createElement(\"h3\", null,\n            \"Asynchronous data: (e.g. fetch) - \",\n            React.createElement(\"button\", { onClick: setData }, \"Set Data\"),\n            ' ',\n            React.createElement(\"button\", { onClick: clearData }, \"Clear\"),\n            \" \",\n            React.createElement(\"button\", { onClick: modifyData }, \"Modify Data\")),\n        React.createElement(ReactTabulator_1[\"default\"], { columns: columns, data: state.data }),\n        React.createElement(\"h3\", null, \"Editable Table\"),\n        React.createElement(ReactTabulator_1[\"default\"], { columns: editableColumns, data: data, cellEdited: function (cell) { return console.log('cellEdited', cell); }, dataChanged: function (newData) { return console.log('dataChanged', newData); }, footerElement: React.createElement(\"span\", null, \"Footer\"), options: { movableColumns: true, movableRows: true } }),\n        React.createElement(\"h3\", null, \"Infinite Scrolling with Ajax Requests\"),\n        renderAjaxScrollExample(),\n        React.createElement(\"p\", null,\n            React.createElement(\"a\", { href: \"https://github.com/ngduc/react-tabulator\", target: \"_blank\" }, \"Back to: Github Repo: react-tabulator\")),\n        React.createElement(\"p\", null,\n            React.createElement(\"a\", { href: \"http://tabulator.info/examples/4.0\", target: \"_blank\" }, \"More Tabulator's Examples\"))));\n});\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nexports.__esModule = true;\nexports.reactFormatter = exports.ReactTabulatorExample = exports.React15Tabulator = exports.ReactTabulator = void 0;\nvar ReactTabulator_1 = require(\"./ReactTabulator\");\n__createBinding(exports, ReactTabulator_1, \"default\", \"ReactTabulator\");\nvar React15Tabulator_1 = require(\"./React15Tabulator\");\n__createBinding(exports, React15Tabulator_1, \"default\", \"React15Tabulator\");\nvar ReactTabulatorExample_1 = require(\"./ReactTabulatorExample\");\n__createBinding(exports, ReactTabulatorExample_1, \"default\", \"ReactTabulatorExample\");\nvar Utils_1 = require(\"./Utils\");\n__createBinding(exports, Utils_1, \"reactFormatter\");\n"],
  "mappings": "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",
  "names": ["modules", "module", "exports", "i", "asap", "i", "resolve", "_resolve", "then", "promise", "originalThen", "originalResolve", "Enumerator", "input", "Promise", "reject", "_reject", "Resolve", "Reject", "defaultOptions", "i", "generateParamsList", "row", "self", "range", "input", "item", "star", "handle", "number", "date", "color", "columns", "table", "component", "column", "html", "Column", "def", "e", "lookup", "value", "defaultOptions", "exists", "rowEl", "select", "sorter", "RendererVirtualDomHorizontal", "event", "link", "key", "modules", "data", "i", "_a", "i", "d", "b", "i", "default_1", "i", "v", "format", "field", "d", "b", "Editor", "input", "i", "event", "i", "d", "b", "Editor", "i", "_a", "row", "columns", "options", "data", "ref"]
}
